<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="task" />
  <meta name="DC.Title" content="Loading a Symbian Platform Defined Table: Tutorial" />
  <meta name="abstract" content="This tutorial shows you how to load a Symbian platform defined table from the Comms Database. The topic also gives an example that shows you how to process the records in a table." />
  <meta name="description" content="This tutorial shows you how to load a Symbian platform defined table from the Comms Database. The topic also gives an example that shows you how to process the records in a table." />
  <meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Loading a Symbian Platform Defined Table: Tutorial
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E">
  <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2562582 id2562781 id2562786 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" title="The Communications Framework is the base for all communications, network and telephony services that Symbian platform provides. The Communications Framework manages the communications threads and the flow of information between those threads. The Framework also manages and stores the communications related settings.">
      Communications Framework Guide
     </a>
     &gt;
     <a href="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html">
      Communications Configuration Utilities
     </a>
     &gt;
     <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">
      Comms Database
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Loading
a Symbian Platform Defined Table: Tutorial
    </h1>
    <div>
     <p>
      This tutorial shows you how to load a Symbian platform defined
table from the Comms Database. The topic also gives an example that shows
you how to process the records in a table.
     </p>
     <div class="p" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-68076901-260F-5588-B05A-5B51412DEE43">
      <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-68076901-260F-5588-B05A-5B51412DEE43">
       <!-- -->
      </a>
      <p>
       Before you start,
you must understand:
      </p>
      <ul>
       <li id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-AA2573E6-E199-5E5B-B458-DC189FE982F0">
        <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-AA2573E6-E199-5E5B-B458-DC189FE982F0">
         <!-- -->
        </a>
        <p>
         the general concept
of the Comms Database
        </p>
       </li>
       <li id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-43160B1C-200E-5326-9CE8-474A49A81C4E">
        <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-43160B1C-200E-5326-9CE8-474A49A81C4E">
         <!-- -->
        </a>
        <p>
         the specific concept
of fields, records, links and tables
        </p>
       </li>
       <li id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-2CED5E8A-83C3-5CCE-B91D-9E773AFEBB2D">
        <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-2CED5E8A-83C3-5CCE-B91D-9E773AFEBB2D">
         <!-- -->
        </a>
        <p>
         how to write and build
application code to run on Symbian platform
        </p>
       </li>
      </ul>
     </div>
     <div class="section" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-770B3F59-5FA6-58C6-A484-118DB7288D3B">
      <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-770B3F59-5FA6-58C6-A484-118DB7288D3B">
       <!-- -->
      </a>
      <p>
       This tutorial shows
you how to load the
       <em>
        Connection Preferences
       </em>
       table. The principles that
apply here also apply to the other Symbian platform defined tables.
      </p>
      <p>
       This
tutorial shows you the main steps.
      </p>
      <p>
       This tutorial also shows how you
can process the records in the table. The example code shows you how to sort
the records in the table.
      </p>
     </div>
     <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-03C423B7-1C20-592A-9E8D-0D7D996E2A05">
      <!-- -->
     </a>
     <ol id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-03C423B7-1C20-592A-9E8D-0D7D996E2A05">
      <li class="stepexpand" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-0DE3770C-9E39-5A43-88F3-5957F5627317">
       <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-0DE3770C-9E39-5A43-88F3-5957F5627317">
        <!-- -->
       </a>
       <span>
        Make sure that you
have created a session.
       </span>
      </li>
      <li class="stepexpand" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-3F0C9272-6A9E-52DF-9711-F44036BC87CE">
       <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-3F0C9272-6A9E-52DF-9711-F44036BC87CE">
        <!-- -->
       </a>
       <span>
        Create the table
object in the tool or application process.
       </span>
       You create a
       CMDBRecordSet
       <samp class="codeph">
        &lt;T&gt;
       </samp>
       object
and specify
       CCDConnectionPrefsRecord
       as
the template parameter. 

 Symbian platform defines the
       <samp class="codeph">
        CCDConnectionPrefsRecord
       </samp>
       class
to represent a Connection Preferences record. The class is a schema for the
record. The class defines the fields and links that make a Connection Preferences
record. 
 Symbian platform defines
       <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-32E556BC-55C3-5FBD-9A60-9708139C20D6">
        unique
numeric Id
       </a>
       s for Symbian platform defined tables. The symbol
       KCDTIdConnectionPrefsRecord
       defines the value
of this Id for the Connection Preferences table. The Id allows the CommsDat
API to retrieve the table from the Comms Database efficiently. 
 To work with other Symbian platform defined tables, use
the correct class name and the correct unique numeric Id values. The
       <a href="GUID-58089281-9DD0-502D-8DFD-831E7BAA931E.html">
        Reference
       </a>
       section
contains a list of all Symbian  defined tables.
       <pre class="codeblock" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-B141FB9E-11BA-53FB-912C-4A86294161EB">
        <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-B141FB9E-11BA-53FB-912C-4A86294161EB">
         <!-- -->
        </a>
        ...

// This code fragment assumes that a session with the Comms Database has been created.
// iDb is a pointer to a CMDBSession object
...

// Use the standard "new (ELeave)" construction to create the object to 
// represent the table. 
//
// Note:
// 1. the template parameter CCDConnectionPrefsRecord defines 
//    the "Connection Preferences" record type.
// 2. the unique numeric Id KCDTIdConnectionPrefsRecord is passed as a parameter
//    to the constructor.
CMDBRecordSet&lt;CCDConnectionPrefsRecord&gt;* ptrConnPrefRecordSet = 
   new (ELeave) CMDBRecordSet(KCDTIdConnectionPrefsRecord);
...
       </pre>
      </li>
      <li class="stepexpand" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-A622B842-A502-573A-BCD0-E521AA5C7011">
       <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-A622B842-A502-573A-BCD0-E521AA5C7011">
        <!-- -->
       </a>
       <span>
        Load the table from
the Comms Database.
       </span>
       Use the
       <samp class="codeph">
        LoadL()
       </samp>
       function to load the table from the
Comms Database. The function is called on the class that defines the table.
The function is implemented in the base class
       MMetaDatabase
       .
You pass a reference to the session object into the
       <samp class="codeph">
        LoadL()
       </samp>
       function.
       <pre class="codeblock" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-3B4F5F6D-4ACE-560D-BBF7-1DCC037AAADE">
        <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-3B4F5F6D-4ACE-560D-BBF7-1DCC037AAADE">
         <!-- -->
        </a>
        ...
ptrConnPrefRecordSet-&gt;LoadL(*iDb);
// If the flow of the code reaches here, the table has been loaded.        
...
       </pre>
      </li>
      <li class="stepexpand" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-7A9CA79C-79FD-570A-9D48-82565878E422">
       <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-7A9CA79C-79FD-570A-9D48-82565878E422">
        <!-- -->
       </a>
       <span>
        Process the records.
       </span>
       This step is optional. It is an example that shows how you can process
the records in a table. The example also shows you how to retrieve the number
of records in the table. 
 The following code sorts the records into record Id order. The record
Id is the part of the
       <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-32E556BC-55C3-5FBD-9A60-9708139C20D6">
        unique
numeric Id
       </a>
       that identifies an instance of a record. 
 A table uses an
       RPointerArray
       <samp class="codeph">
        &lt;T&gt;
       </samp>
       to
contain the records.
       <samp class="codeph">
        RPointerArray
       </samp>
       allows applications to
customise the behaviour of the sort operation. 
 The code uses the
       TLinearOrder
       <samp class="codeph">
        &lt;T&gt;
       </samp>
       class.
       <pre class="codeblock" id="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-FE35BC1E-1D10-5741-9684-4C6383A226AC">
        <a name="GUID-CE011029-0F2B-50D4-B793-A24C7ECFC21E__GUID-FE35BC1E-1D10-5741-9684-4C6383A226AC">
         <!-- -->
        </a>
        ...
// Customised sort function
TInt SortRecordsById(const CMDBRecordBase&amp; aLeft, const CMDBRecordBase&amp; aRight)
    {
    return (aLeft.RecordId()) &lt; (aRight.RecordId()) ? -1 : 1;
    }
...

// Total number of records in the table
TInt totalcount = ptrConnPrefRecordSet-&gt;iRecords.Count();
...

// Sort the records. 
// 1. Define a TLinearOrder&lt;T&gt; class for a Connection Preferences record and instantiate 
//    the class.
// 2. Invoke the sort operation.
TLinearOrder&lt;CMDBRecordBase&gt; orderbyId(SortRecordsById); 
ptrConnPrefRecordSet-&gt;iRecords.Sort(orderbyId); 
...
       </pre>
      </li>
     </ol>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">
        Comms Database
       </a>
      </div>
     </div>
     <div class="relinfo relconcepts">
      <strong>
       Related concepts
      </strong>
      <br />
      <div>
       <a href="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html">
        Comms Database
                concepts
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>