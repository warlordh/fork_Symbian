<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="How to use array keys" />
  <meta name="abstract" content="This document describes how to use array keys." />
  <meta name="description" content="This document describes how to use array keys." />
  <meta name="DC.Relation" scheme="URI" content="GUID-E18584A9-4F16-51D0-89CB-96275A588F54.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-2E085BAD-AAD7-5D1A-89A7-287EE42D1069.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-E18584A9-4F16-51D0-89CB-96275A588F54.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   How to use array keys
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62">
  <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2404579 id2404588 id2404596 id2404604 id2405014 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">
      Kernel and Hardware Services Guide
     </a>
     &gt;
     <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">
      User Library and File Server
     </a>
     &gt;
     <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">
      User Library
     </a>
     &gt;
     <a href="GUID-2E085BAD-AAD7-5D1A-89A7-287EE42D1069.html">
      Arrays And Lists
     </a>
     &gt;
     <a href="GUID-E18584A9-4F16-51D0-89CB-96275A588F54.html" title="This document provides links to documents relating to using array keys.">
      Using Array Keys
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     How
to use array keys
    </h1>
    <div>
     <p>
      This document describes how to use array keys.
     </p>
     <p>
      To access an array by key construct a
      <samp class="codeph">
       TKeyArrayFix
      </samp>
      ,
      <samp class="codeph">
       TKeyArrayVar
      </samp>
      or
      <samp class="codeph">
       TKeyArrayPak
      </samp>
      object.
The choice depends on the array type used and the member function accessed.
     </p>
     <p>
      The following code fragments show how this is done. They construct and
manipulate an array of
      <samp class="codeph">
       TBankAct
      </samp>
      objects that contain data
members representing typical bank account details.
     </p>
     <p>
      The
      <samp class="codeph">
       TBankAct
      </samp>
      class is defined as:
     </p>
     <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-CC1F2475-EAF1-5BCC-AAB4-D3A37E3AA253">
      <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-CC1F2475-EAF1-5BCC-AAB4-D3A37E3AA253">
       <!-- -->
      </a>
      class TBankAct
    {
public :
    TBuf&lt;32&gt; iActName;
    TUint    iActNum;
    TUint    iActValue;
    }
     </pre>
     <p>
      The following code builds a
      <samp class="codeph">
       CArrayFixFlat
      </samp>
      containing three
elements of type
      <samp class="codeph">
       TBankAct
      </samp>
      , as follows:
     </p>
     <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-4B5F544E-0EF3-570C-A1AC-33F37050B955">
      <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-4B5F544E-0EF3-570C-A1AC-33F37050B955">
       <!-- -->
      </a>
      CArrayFixFlat&lt;TBankAct&gt; *anArray;
     </pre>
     <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-409208B3-6AEC-59A4-B934-8FF4E6E7BBC6">
      <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-409208B3-6AEC-59A4-B934-8FF4E6E7BBC6">
       <!-- -->
      </a>
      anArray = new CArrayFixFlat&lt;TBankAct&gt;(3);
TBankAct bankact;
...
_LIT(KName1,"A.Bloggs");
_LIT(KName2,"F.B.Wittering");
_LIT(KName3,"Z.Makepeace");
...
bankact.iActName  = KName1;
bankact.iActNum   = 3;
bankact.iActValue = 300;
anArray-&gt;AppendL(bankact);
...
bankact.iActName  = KName2;
bankact.iActNum   = 1;
bankact.iActValue = 6000;
anArray-&gt;AppendL(bankact);
...
bankact.iActName  = KName3;
bankact.iActNum   = 2;
bankact.iActValue = 32;
anArray-&gt;AppendL(bankact);
...
     </pre>
     <div class="section" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-BFC4A425-65CC-4DC0-B7F8-C2FAAB10714D">
      <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-BFC4A425-65CC-4DC0-B7F8-C2FAAB10714D">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Sorting the array
      </h2>
      <p>
       To sort the array into account
number order, first construct a
       <samp class="codeph">
        TKeyArrayFix
       </samp>
       object to define
the location and type of key on which to sort the array:
      </p>
      <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-6454BA23-88FF-539E-AA0B-E40FEC4196FC">
       <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-6454BA23-88FF-539E-AA0B-E40FEC4196FC">
        <!-- -->
       </a>
       TKeyArrayFix actNumKey(_FOFF(TBankAct,iActNum),ECmpTUint);
      </pre>
      <p>
       In practice, a data member like
       <samp class="codeph">
        iActNum
       </samp>
       may be private,
in which case this statement may not be permitted by the compiler. Two solutions
are:
      </p>
      <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-21F6AC95-7A84-5B65-8D59-03F96064B53A">
       <!-- -->
      </a>
      <ol id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-21F6AC95-7A84-5B65-8D59-03F96064B53A">
       <li id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-8478D06F-A5B4-598D-B022-5D3D1032F082">
        <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-8478D06F-A5B4-598D-B022-5D3D1032F082">
         <!-- -->
        </a>
        <p>
         Make the class in which
         <samp class="codeph">
          actNumKey
         </samp>
         is
declared a friend of
         <samp class="codeph">
          TBankAct
         </samp>
        </p>
       </li>
       <li id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-A733C432-A117-5DD0-9715-E38673428E9E">
        <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-A733C432-A117-5DD0-9715-E38673428E9E">
         <!-- -->
        </a>
        <p>
         Declare a public
         <samp class="codeph">
          const
         </samp>
         <samp class="codeph">
          static
         </samp>
         <samp class="codeph">
          TInt
         </samp>
         data
member
         <samp class="codeph">
          iOffset
         </samp>
         (for example) in the
         <samp class="codeph">
          TBankAct
         </samp>
         class
and include a line of code:
        </p>
       </li>
      </ol>
      <ul>
       <li id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-99C1E792-0BD4-5C13-A793-30B8D48E195D">
        <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-99C1E792-0BD4-5C13-A793-30B8D48E195D">
         <!-- -->
        </a>
        <p>
         <samp class="codeph">
          const TInt TBankAct::iOffset
=           _FOFF(TBankAct,iActNum);
         </samp>
        </p>
       </li>
      </ul>
      <p>
       <samp class="codeph">
        actNumKey
       </samp>
       can then be constructed:
      </p>
      <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-CF0B8064-39D5-55B0-B10B-D541096F49AF">
       <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-CF0B8064-39D5-55B0-B10B-D541096F49AF">
        <!-- -->
       </a>
       TKeyArrayFix actNumKey(bankact.iOffset,ECmpTUint);
      </pre>
      <p>
       <samp class="codeph">
        ECmpTUint
       </samp>
       is
an enumerator of the
       <samp class="codeph">
        TKeyCmpNumeric
       </samp>
       enumeration; this constructor
defines a numeric key.
      </p>
      <p>
       Now use the key definition to do the sort:
      </p>
      <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-16D162F9-BC36-5EE3-998D-377010E3CF1B">
       <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-16D162F9-BC36-5EE3-998D-377010E3CF1B">
        <!-- -->
       </a>
       ...
anArray-&gt;Sort(actNumKey);
...
      </pre>
      <p>
       See also:
      </p>
      <ul>
       <li id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-B6FD456A-0968-5850-8685-5C4CEAC0789C">
        <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-B6FD456A-0968-5850-8685-5C4CEAC0789C">
         <!-- -->
        </a>
        <p>
         _FOFF
        </p>
       </li>
      </ul>
     </div>
     <div class="section" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-648B5871-3FFE-42D4-BC64-0DDEEDF851C5">
      <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-648B5871-3FFE-42D4-BC64-0DDEEDF851C5">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Re-sort the array
      </h2>
      <p>
       Re-sort the array into account
name order, ignoring the case of the name, and then insert another element
into the array maintaining the same order.
      </p>
      <p>
       First, construct another
       <samp class="codeph">
        TKeyArrayFix
       </samp>
       object:
      </p>
      <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-56394BA1-68FA-5666-BD2B-134ACE0AAAEC">
       <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-56394BA1-68FA-5666-BD2B-134ACE0AAAEC">
        <!-- -->
       </a>
       TKeyArrayFix actNameKey(_FOFF(TBankAct,iActName),ECmpFolded);
      </pre>
      <p>
       <samp class="codeph">
        ECmpFolded
       </samp>
       is an enumerator of the
       <samp class="codeph">
        TKeyCmpText
       </samp>
       enumeration; this constructor
defines a descriptor key.
      </p>
      <p>
       Now use the key definition to re-sort the
array and insert a new element into the correct place:
      </p>
      <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-871411F9-6EA9-5166-ACB7-138FF677E971">
       <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-871411F9-6EA9-5166-ACB7-138FF677E971">
        <!-- -->
       </a>
       ...
anArray-&gt;Sort(actNameKey);
...
_LIT(KNewName,"W.B.NewPerson");
...
bankact.iActName  = KNewName;
bankact.iActNum   = 69;
bankact.iActValue = 24;
...
anArray-&gt;InsertIsqL(bankact,actNameKey);
...
      </pre>
      <p>
       Note that the function
       <samp class="codeph">
        InsertIsqL()
       </samp>
       does
not permit duplicates. If there is already an element with the same account
name in the array, then the call to the function leaves with
       <samp class="codeph">
        KErrAlreadyExists
       </samp>
       .
      </p>
      <p>
       Use
the key definition to find an array element with a specific name and change
the
       <samp class="codeph">
        iActValue
       </samp>
       data member of that element:
      </p>
      <pre class="codeblock" id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-44814C03-AAC5-5380-9D6E-1B89D5F371C9">
       <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-44814C03-AAC5-5380-9D6E-1B89D5F371C9">
        <!-- -->
       </a>
       ...
_LIT(KFindName,"A.Bloggs");
bankact.iActName = KFindName;
...
TInt position;
if (anArray-&gt;FindIsq(bankact,actNameKey,position))
    {
    //  array element NOT found
    ...
    }
else
    {
    (*anArray)[position].iActValue = 40,000,000;
    ...
    }
      </pre>
      <p>
       <strong>
        Notes
       </strong>
      </p>
      <ul>
       <li id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-7BF21EA6-9138-53D9-A4E1-854CBC11D307">
        <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-7BF21EA6-9138-53D9-A4E1-854CBC11D307">
         <!-- -->
        </a>
        <p>
         Sorting a packed array
is achieved using the
         <samp class="codeph">
          SortL()
         </samp>
         member function.
        </p>
       </li>
       <li id="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-FCB18138-3B8E-545E-AA18-99ED50D697C9">
        <a name="GUID-4F5E644B-B2DD-5CD3-B763-E134F1916E62__GUID-FCB18138-3B8E-545E-AA18-99ED50D697C9">
         <!-- -->
        </a>
        <p>
         Although the example
uses an array of fixed length objects and a
         <samp class="codeph">
          TKeyArrayFix
         </samp>
         object,
the same techniques apply to variable length and packed arrays.
        </p>
       </li>
      </ul>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-E18584A9-4F16-51D0-89CB-96275A588F54.html" title="This document provides links to documents relating to using array keys.">
        Using Array Keys
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>