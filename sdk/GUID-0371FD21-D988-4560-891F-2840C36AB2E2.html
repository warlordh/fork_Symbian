<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Out of Memory Error" />
  <meta name="DC.Relation" scheme="URI" content="GUID-88752800-83BD-4845-80A0-6B65D8D81924.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-C3919681-BB41-4CFA-812F-2D7989E952DC.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-F746C61E-BE8A-4F3B-B8F7-92964B36B298.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-88752800-83BD-4845-80A0-6B65D8D81924.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-0371FD21-D988-4560-891F-2840C36AB2E2" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Out of Memory Error
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-0371FD21-D988-4560-891F-2840C36AB2E2">
  <a name="GUID-0371FD21-D988-4560-891F-2840C36AB2E2">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2839152 id2682719 id2682707 id2682594 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">
      Generic Application Support Guide
     </a>
     &gt;
     <a href="GUID-C3919681-BB41-4CFA-812F-2D7989E952DC.html" title="System Resource Monitoring collection contains Out Of Disk (OOD) Monitor component to monitor changes in the disk space levels and Out Of Memory (OOM) Monitor component to handle low RAM situations.">
      System Resource Monitoring
     </a>
     &gt;
     <a href="GUID-F746C61E-BE8A-4F3B-B8F7-92964B36B298.html" title="Out Of Memory (OOM) Monitor component monitors and handles out of memory situations. This component enables applications to improve their performance when the amount of free RAM in the phone is low.">
      Out Of Memory (OOM) Monitor
     </a>
     &gt;
     <a href="GUID-88752800-83BD-4845-80A0-6B65D8D81924.html" title="This section explains how to set priorities in the configuration file and about out of memory error.">
      OOM Monitor Reference
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Out
of Memory Error
    </h1>
    <div>
     <p>
      An Out of Memory (OOM) error occurs if an application allocates large amount
of RAM in too short time. In such situations, the free RAM level drops as
the application allocates RAM faster than the OOM Monitor can release RAM
from other applications.
     </p>
     <p>
      To avoid this OOM Monitor has the
      <samp class="codeph">
       KOomMaxAllocationWithoutPermission
      </samp>
      constant.
It defines the maximum amount of RAM that an application can safely allocate
within two seconds without OOM Monitor's permission.
     </p>
     <p>
      The
      <samp class="codeph">
       KOomMaxAllocationWithoutPermission
      </samp>
      value defined
in the OOM Monitor header file cannot not be modified. The RAM can be allocated
quickly in small pieces as long as the total amount of allocated RAM within
two seconds is less than
      <samp class="codeph">
       KOomMaxAllocationWithoutPermission
      </samp>
      .
     </p>
     <div class="p">
      If an application needs to allocate more RAM than
      <samp class="codeph">
       KOomMaxAllocationWithoutPermission
      </samp>
      value,
it must request permission from the OOM Monitor. OOM Monitor provides two
different methods for this purpose.
      <ul>
       <li>
        <p>
         <a href="GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73.html#GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73__GUID-BE322080-5193-3D8E-9425-C6BEA920ED2E">
          <span class="apiname">
           ROomMonitorSession::RequestFreeMemory()
          </span>
         </a>
         is used
for mandatory RAM allocation. For more information, refer to
         <a href="GUID-50CA5439-29A1-426C-83BA-EC048FE86CDE.html" title="This section describes how an application can request for free memory from OOM Monitor for large amount of RAM allocation.">
          Allowing
Large Memory Allocation
         </a>
         .
        </p>
       </li>
       <li>
        <p>
         <a href="GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73.html#GUID-02D1911A-D2E5-3D28-9B05-75DA0A75DE73__GUID-D0AD593E-3C07-34B5-B8A2-24AABA42AFD7">
          <span class="apiname">
           ROomMonitorSession::RequestOptionalRam()
          </span>
         </a>
         is used
for optional RAM allocation. For more information, refer to
         <a href="GUID-217C992B-AC56-42A7-9920-DEC891D233A5.html" title="This section describes how an application can request from OOM Monitor for optional RAM allocation.">
          Allowing
Optional RAM Allocation
         </a>
         .
        </p>
       </li>
      </ul>
      OOM error can still occur in the following situations:
     </div>
     <ul>
      <li>
       <p>
        An application allocates more than
        <samp class="codeph">
         KOomMaxAllocationWithoutPermission
        </samp>
        amount
of RAM within two seconds without OOM Monitor's permission. And the OOM Monitor
cannot release the RAM fast enough for the application.
       </p>
      </li>
      <li>
       <p>
        An application allocates less than
        <samp class="codeph">
         KOomMaxAllocationWithoutPermission
        </samp>
        amount
of RAM within two seconds but
       </p>
       <ul>
        <li>
         <p>
          some applications do not release RAM quickly enough when requested
(OR)
         </p>
        </li>
        <li>
         <p>
          several applications allocate RAM at the same time.
         </p>
        </li>
       </ul>
      </li>
     </ul>
     <p>
      Therefore it is important that all applications are prepared to handle
OOM errors.
     </p>
     <div class="section" id="GUID-0371FD21-D988-4560-891F-2840C36AB2E2__GUID-77B379F3-1ECA-4C62-A9C9-720C8882ED43">
      <a name="GUID-0371FD21-D988-4560-891F-2840C36AB2E2__GUID-77B379F3-1ECA-4C62-A9C9-720C8882ED43">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Closing an
application on the OOM Monitor request
      </h2>
      <p>
       To avoid an OOM error, applications
must terminate itself without any delay whenever the OOM Monitor requests
so. Otherwise the time of free RAM amount below
       <span class="keyword">
        LOW_RAM_THRESHOLD
       </span>
       gets
longer and another application can allocate RAM during that time resulting
in an OOM error.
      </p>
      <p>
       Applications when closed by the OOM Monitor receives
       <samp class="codeph">
        EEikCmdExit
       </samp>
       event.
      </p>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-88752800-83BD-4845-80A0-6B65D8D81924.html" title="This section explains how to set priorities in the configuration file and about out of memory error.">
        OOM Monitor Reference
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>