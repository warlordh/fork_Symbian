<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Animation Overview" />
  <meta name="DC.Relation" scheme="URI" content="GUID-FAF1B60A-A4B5-5E45-B9B9-84DA982F2E2B.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-FAF1B60A-A4B5-5E45-B9B9-84DA982F2E2B.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-FAF1B60A-A4B5-5E45-B9B9-84DA982F2E2B.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Animation Overview
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE">
  <a name="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2397524 id2397614 id2397682 id2397697 id2398027 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">
      Graphics Guide
     </a>
     &gt;
     <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">
      Windowing Collection
     </a>
     &gt;
     <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">
      Window Server Component
     </a>
     &gt;
     <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">
      Window Server Client-Side Library
     </a>
     &gt;
     <a href="GUID-FAF1B60A-A4B5-5E45-B9B9-84DA982F2E2B.html" title="This section provides an introduction to the Animation API, which third-parties can use to create Window Server plug-in DLLs to perform animations.">
      Animations
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Animation Overview
    </h1>
    <div>
     <p>
      This topic provides an overview of the Animation API, which third-parties can use to create Window Server plug-in DLLs to perform animations.
     </p>
     <div class="section">
      <h2 class="sectiontitle">
       Introduction
      </h2>
      <p>
       An animation DLL performs drawing from within the Window Server thread. This makes the continuous updating of graphics possible, because the Window Server thread has high priority and is unlikely to be pre-empted by other threads. Animation DLLs can be used to create animation effects that rely on continual and fast graphic updates—for example, to make a clock second hand sweep smoothly. This approach might even be exploited for video-style animations although its intended use is for drawn rather than bitmap graphics.
      </p>
      <p>
       A distinction between animated graphics and animated bitmaps is worth making. The animation classes are intended primarily for line drawing based animation. Bitmaps can be animated using either the animation classes or sprites, but sprites are usually preferred. Sprites animate arbitrary bitmaps. Typical uses are for cursors, PacMan style games, and so on. Because the Window Server handles much of the complexity, sprites can be thought of as bulletproof. The animation classes on the other hand provide server side speed and great flexibility, but are more complex to use.
      </p>
      <p>
       It is possible to create animation effects using ordinary Window Server clients, for example using active objects on the client side to schedule graphics updates. However, these suffer from the (relatively) lower priority of the client thread and from the fact that active objects are non-preemptively scheduled, which means that the window update can be delayed by other client-side active objects.
      </p>
      <p>
       An animation DLL also provides accurate clock ticks. Suppose you require a one second timer to move the second hand on a clock. If you work on the client side, then drift occurs with the clock losing time very gradually. The animation DLL provides access to timers that do not suffer from this problem.
      </p>
      <p>
       The Animation classes form two pairs across the client/server boundary. One pair provides functions at DLL level and the other at the level of individual animation classes. To create an animation requires a DLL class and a class for each animated object. More accurately, a pair of classes is required for each, with each pair comprising one server side class and one client side class.
      </p>
      <p>
       This general mechanism allows client/server separation while also allowing client side classes to benefit from server side privilege—fast graphical updates made possible by the high priority of the server thread.
      </p>
      <p>
       For efficiency reasons, it makes sense to collect multiple animation classes into a single DLL, even if they are otherwise logically quite separate classes.
      </p>
     </div>
     <div class="section">
      <h2 class="sectiontitle">
       Architectural relationships
      </h2>
      <p>
       This API defines a framework for polymorphic DLLs that perform animations. These animation DLLs plug in to the Window Server, and so are run in the Window Server's high-priority thread, rather than the application thread.
      </p>
      <p>
       The Window Server Client-Side API defines base classes for client interfaces that applications use to control animation DLLs. Providers of animation DLLs specialize these client interfaces appropriately.
      </p>
     </div>
     <div class="section">
      <h2 class="sectiontitle">
       Description
      </h2>
      <p>
       The API has four key concepts: animation factory, animation base class, window animation base class, and sprite animation base class.
      </p>
      <p>
       <strong>
        Animation factory
       </strong>
      </p>
      <p>
       Each animation DLL must define a factory for the animations it provides. The DLL must export at ordinal 1 a function to create an instance of this factory class.
      </p>
      <p>
       The base class for such factories is
       <a href="GUID-9E598CDA-6483-3AE3-ABFF-0F701A47AB84.html">
        <span class="apiname">
         CAnimDll
        </span>
       </a>
       .
      </p>
      <p>
       <strong>
        Animation base class
       </strong>
      </p>
      <p>
       Every animation implements an interface that is called by the Window Server to:
      </p>
      <ul>
       <li id="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE__GUID-9BECB813-B5C5-5ABB-A5D5-3191D0A69A48">
        <a name="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE__GUID-9BECB813-B5C5-5ABB-A5D5-3191D0A69A48">
         <!-- -->
        </a>
        <p>
         pass commands from clients
        </p>
       </li>
       <li id="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE__GUID-F71ACC22-D872-5DF6-9F6A-089718C7FA08">
        <a name="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE__GUID-F71ACC22-D872-5DF6-9F6A-089718C7FA08">
         <!-- -->
        </a>
        <p>
         perform a step in the animation
        </p>
       </li>
       <li id="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE__GUID-6B7EC297-617F-5745-856F-C4EF99F19E37">
        <a name="GUID-3D577CFE-A6C7-5C4C-A9AA-9382A062A3BE__GUID-6B7EC297-617F-5745-856F-C4EF99F19E37">
         <!-- -->
        </a>
        <p>
         pass Window Server events (if required), so that the animation can handle them before the application
        </p>
       </li>
      </ul>
      <p>
       This interface is
       <a href="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html">
        <span class="apiname">
         CAnim
        </span>
       </a>
       , with its base class
       <a href="GUID-F1B47E38-4585-3903-93C7-0BCB075465AA.html">
        <span class="apiname">
         MEventHandler
        </span>
       </a>
       . The operation to perform an animation step is called by the Window Server on a timer. The animation is informed if for any reason timer events are missed or become out of sync. The timing properties are set through an
       <a href="GUID-FFE76181-A701-374B-82AA-CEACC5856E91.html">
        <span class="apiname">
         MAnimGeneralFunctions
        </span>
       </a>
       member (an abstract interface that is implemented by the Window Server). This also provides other utility functions.
      </p>
      <p>
       <strong>
        Window animation base class
       </strong>
      </p>
      <p>
       For animations other than sprites, animation providers derive classes from the window animation base class,
       <a href="GUID-70AB2433-00C7-3E49-BD6A-CC90E20DA7AE.html">
        <span class="apiname">
         CWindowAnim
        </span>
       </a>
       , based on
       <a href="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html">
        <span class="apiname">
         CAnim
        </span>
       </a>
       . This adds access to an interface for querying and manipulating the window in which the animation takes place,
       <a href="GUID-6FB00D2D-3CFB-3CD8-9081-2FBD0E4A9AAF.html">
        <span class="apiname">
         MAnimWindowFunctions
        </span>
       </a>
       .
      </p>
      <p>
       A further specialized base class allows animations to be provided that implement their own animation timers. This is
       <a href="GUID-BC3E6CD0-4678-36F6-B4D3-AEE4C6672AAE.html">
        <span class="apiname">
         CFreeTimerWindowAnim
        </span>
       </a>
       , based on
       <a href="GUID-70AB2433-00C7-3E49-BD6A-CC90E20DA7AE.html">
        <span class="apiname">
         CWindowAnim
        </span>
       </a>
       , with related utility functions provided by
       <a href="GUID-97545C9D-7CC7-36CB-851C-2CD272CA8EFD.html">
        <span class="apiname">
         MAnimFreeTimerWindowFunctions
        </span>
       </a>
       .
      </p>
      <p>
       <strong>
        Sprite animation base class
       </strong>
      </p>
      <p>
       Sprites are bitmaps that can overlay a window. A sprite animation can be provided by deriving a class from
       <a href="GUID-D49CF183-BD61-3E3E-A77F-C63845E6F0DF.html">
        <span class="apiname">
         CSpriteAnim
        </span>
       </a>
       , based on
       <a href="GUID-029C644B-BE0F-37C6-95E2-D27F974E6AD3.html">
        <span class="apiname">
         CAnim
        </span>
       </a>
       . This adds access to an interface for querying and manipulating a sprite,
       <a href="GUID-F1DC2E39-9AB1-397A-BEDD-036BB6C54EC4.html">
        <span class="apiname">
         MAnimSpriteFunctions
        </span>
       </a>
       .
      </p>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-FAF1B60A-A4B5-5E45-B9B9-84DA982F2E2B.html" title="This section provides an introduction to the Animation API, which third-parties can use to create Window Server plug-in DLLs to perform animations.">
        Animations
       </a>
      </div>
     </div>
     <div class="relinfo relconcepts">
      <strong>
       Related concepts
      </strong>
      <br />
      <div>
       <a href="GUID-FAF1B60A-A4B5-5E45-B9B9-84DA982F2E2B.html" title="This section provides an introduction to the Animation API, which third-parties can use to create Window Server plug-in DLLs to perform animations.">
        Animations
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>