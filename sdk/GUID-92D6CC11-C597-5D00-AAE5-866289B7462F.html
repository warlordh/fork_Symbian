<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="MTM Resource File" />
  <meta name="DC.Relation" scheme="URI" content="GUID-8B843382-D27A-5E36-8F60-304903F3AA41.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-B394A824-8745-505E-8429-8B9B6D418387.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-44CF5471-564E-5790-935B-51193A4978D6.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-8B843382-D27A-5E36-8F60-304903F3AA41.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-B79B6DD2-40C5-591B-AF56-5ACD167C66F5.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   MTM Resource File
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F">
  <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2403699 id2403748 id2403786 id2403800 id2403814 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">
      Messaging Middleware Guide
     </a>
     &gt;
     <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">
      Messaging Framework
     </a>
     &gt;
     <a href="GUID-B394A824-8745-505E-8429-8B9B6D418387.html">
      Message Server and Store
     </a>
     &gt;
     <a href="GUID-44CF5471-564E-5790-935B-51193A4978D6.html" title="This section lists the concepts that are related to Message Server and Store.">
      Message Server and Store Concepts
     </a>
     &gt;
     <a href="GUID-8B843382-D27A-5E36-8F60-304903F3AA41.html">
      Message Type Module
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     MTM Resource File
    </h1>
    <div>
     <p>
      This section explains the MTM resource file format that is used for installing MTMs.
     </p>
     <div class="section">
      <h2 class="sectiontitle">
       Description
      </h2>
      <p>
       You have to create and deliver an MTM resource file to register the MTM with the Message Server. The Message Server searches the ROM drive for MTM resource file on start-up and it automatically registers any MTMs found.
      </p>
      <p>
       MTMs are represented by four DLLs on the device, which are placed in a specific directory. The system finds installed MTMs by scanning the
       <span class="filepath">
        \resource\messaging\mtm
       </span>
       directory on all drives for resource files containing a resource of type
       MTM_INFO_FILE
       .
      </p>
      <p>
       <strong>
        Important:
       </strong>
       This compiled resource file must define the MTM's properties using the resource structures
       MTM_INFO_FILE
       ,
       MTM_CAPABILITIES
       and
       MTM_SECURITY_CAPABILITY_SET
       .
      </p>
      <p>
       The
       MTM_INFO_FILE
       resource must define a MTM_COMPONENT_V2 resource for each MTM DLL for the Messaging protocol. This structure is as follows:
      </p>
      <ul>
       <li id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-FE61DA3D-BBCB-500C-9B4C-4EE6DFC964E8">
        <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-FE61DA3D-BBCB-500C-9B4C-4EE6DFC964E8">
         <!-- -->
        </a>
        <p>
         The second UID of DLL—indicates the message type or the protocol, such as SMTP, POP3, IMAP4, SMS that the MTM considers.
        </p>
       </li>
       <li id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-4C9E649E-AAD1-5B9B-BEB5-4F2B738302CC">
        <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-4C9E649E-AAD1-5B9B-BEB5-4F2B738302CC">
         <!-- -->
        </a>
        <p>
         The third UID of DLL—indicates the message type or the protocol (SMTP, POP3, IMAP4, SMS) that the MTM considers.
        </p>
        <p>
         <strong>
          Note:
         </strong>
         In practice, the MTM type UID may be different for each MTM. The technology type UID may be the same for an attached group of MTMs, such as the POP and SMTP MTMs, which are separate but work together.
        </p>
       </li>
       <li id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-18AA66D4-44E7-51A4-8719-09EB25770D8C">
        <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-18AA66D4-44E7-51A4-8719-09EB25770D8C">
         <!-- -->
        </a>
        <p>
         Ordinal number—indicates where the MTM component’s factory function can be found in the registered DLL.
        </p>
       </li>
       <li id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-97AD0551-C80F-5446-AB10-14DF4E8A7A40">
        <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-97AD0551-C80F-5446-AB10-14DF4E8A7A40">
         <!-- -->
        </a>
        <p>
         Human-readable name—used to show to the user the available message types when the user has requested a Send As or a similar operation.
        </p>
        <p>
         <strong>
          Note:
         </strong>
         MTM UIDs are used to identify MTMs to the registry, but it is recommended to have meaningful (human-readable) names.
        </p>
       </li>
       <li id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-2DA2E510-F9C9-52A4-9968-98FAEB825CFA">
        <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-2DA2E510-F9C9-52A4-9968-98FAEB825CFA">
         <!-- -->
        </a>
        <p>
         <a href="GUID-D82DEC7A-71C2-3004-BFC2-C82C009A2715.html">
          <span class="apiname">
           TVersion
          </span>
         </a>
         structure—version information, to allow updating of the MTMs by an installation program.
        </p>
       </li>
      </ul>
      <p>
       <strong>
        Note:
       </strong>
       The Message Server's
       <a href="GUID-F8FB7A3E-9F7E-399A-AB40-C2E0D6777025.html">
        <span class="apiname">
         CMtmDllInfo
        </span>
       </a>
       class encapsulates the registration data for an MTM and the run-time data held for a registered MTM is represented by the
       <a href="GUID-0D5D7FAC-4F14-3046-92FB-873B8350FF4C.html">
        <span class="apiname">
         CRegisteredMtmDll
        </span>
       </a>
       class.
      </p>
      <p>
       <strong>
        Important:
       </strong>
       The resource file must have the Server MTM DLL and Client MTM DLL information to handle various message manipulation functions in the server.
      </p>
     </div>
     <div class="section">
      <h2 class="sectiontitle">
       Example
      </h2>
      <p>
       The following code snippet shows the details of an MTM resource file.
      </p>
      <pre class="codeblock" id="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-6A043853-66EC-563E-9AE1-F0A96F32A254">
       <a name="GUID-92D6CC11-C597-5D00-AAE5-866289B7462F__GUID-6A043853-66EC-563E-9AE1-F0A96F32A254">
        <!-- -->
       </a>
       // txtdat.RSS
//
// Copyright (c) 2008 Symbian Ltd.  All rights reserved.
//

#include &lt;mtmconfig.rh&gt;

RESOURCE MTM_INFO_FILE
    {
    mtm_type_uid = 0x100012FA;
    technology_type_uid = 0x10001626;
    components = 
        {
        MTM_COMPONENT_V2
            {
            human_readable_name = "My server dll info";
            component_uid = KUidMtmServerComponentVal;
            entry_point = 1;
            version = VERSION_V2 {};
            filename = "z:\\system\\libs\\servermtm.dll";
            },
        MTM_COMPONENT_V2
            {
            human_readable_name = "My client dll info";
            component_uid = KUidMtmClientComponentVal;
            entry_point = 1;
            version = VERSION_V2 {};
            filename = "z:\\system\\libs\\clientmtm.dll";
            },
        MTM_COMPONENT_V2
            {
            human_readable_name = "My ui dll info";
            component_uid = KUidMtmUiComponentVal;
            entry_point = 1;
            version = VERSION_V2 {};
            filename = "z:\\system\\libs\\dummyuimtm.dll"; // this does not exist
            },
        MTM_COMPONENT_V2
            {
            human_readable_name = "My ui data dll info";
            component_uid = KUidMtmUiDataComponentVal;
            entry_point = 1;
            version = VERSION_V2 {};
            filename = "z:\\system\\libs\\dummyuidatamtm.dll"; // this does not exist
            }
        };
    }
// flags to indicate that can send messages, and handle body text
RESOURCE MTM_CAPABILITIES
    {
    send_capability = 1;
    body_capability = 1;
    }

// additional capabilities required by clients of the MTM
RESOURCE MTM_SECURITY_CAPABILITY_SET
    {
    capabilities = { ECapabilityNetworkServices };
    }
      </pre>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-8B843382-D27A-5E36-8F60-304903F3AA41.html">
        Message Type Module
       </a>
      </div>
     </div>
     <div class="relinfo relconcepts">
      <strong>
       Related concepts
      </strong>
      <br />
      <div>
       <a href="GUID-B79B6DD2-40C5-591B-AF56-5ACD167C66F5.html">
        Installing an MTM
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>