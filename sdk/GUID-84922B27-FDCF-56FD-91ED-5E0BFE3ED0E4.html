<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="task" />
  <meta name="DC.Title" content="Compressing and Decompressing File - Zip Format" />
  <meta name="abstract" content="The Zip Compression Library, EZLib provides stream and file compression and decompression functionality for the Symbian platforms. The files can be compressed to two formats namely zip and gzip. Compression and Decompression are performed iteratively, till the completion of required task." />
  <meta name="description" content="The Zip Compression Library, EZLib provides stream and file compression and decompression functionality for the Symbian platforms. The files can be compressed to two formats namely zip and gzip. Compression and Decompression are performed iteratively, till the completion of required task." />
  <meta name="DC.Relation" scheme="URI" content="GUID-7AAAC6EA-784D-51E6-AD6B-521C9F5C4DBD.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-9208E03A-CC7A-57A9-84BD-778B99040842.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-5D14ADEC-ED83-5FA4-B551-C57CAE4F79BE.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-7AAAC6EA-784D-51E6-AD6B-521C9F5C4DBD.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Compressing and Decompressing File - Zip Format
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4">
  <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2682564 id2682532 id2682535 id2682521 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">
      Generic OS Services Guide
     </a>
     &gt;
     <a href="GUID-9208E03A-CC7A-57A9-84BD-778B99040842.html">
      Compression Libraries
     </a>
     &gt;
     <a href="GUID-5D14ADEC-ED83-5FA4-B551-C57CAE4F79BE.html">
      Zip Compression Library
     </a>
     &gt;
     <a href="GUID-7AAAC6EA-784D-51E6-AD6B-521C9F5C4DBD.html" title="The Zip Compression Library, EZLib compresses files to two formats namely zip and gzip. EZLib also allows clients to decompress data from file archives and memory streams. The compression and decompression tasks are performed iteratively until task completion.">
      Zip Compression Library Tutorials
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Compressing
and Decompressing File - Zip Format
    </h1>
    <div>
     <p>
      The Zip Compression Library, EZLib provides stream and file compression
and decompression functionality for the Symbian platforms. The files can be
compressed to two formats namely zip and gzip. Compression and Decompression
are performed iteratively, till the completion of required task.
     </p>
     <div class="section" id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-BE620F4A-6D23-5832-8C2A-4B9C75F6BF12">
      <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-BE620F4A-6D23-5832-8C2A-4B9C75F6BF12">
       <!-- -->
      </a>
     </div>
     <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-0DE92899-962B-5E18-9378-EB7B6C78E7BD">
      <!-- -->
     </a>
     <ol id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-0DE92899-962B-5E18-9378-EB7B6C78E7BD">
      <li class="stepexpand" id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-414B561B-4BCA-5D6F-A744-3944D0EBDBE2">
       <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-414B561B-4BCA-5D6F-A744-3944D0EBDBE2">
        <!-- -->
       </a>
       <span>
        Pass the input and
output files as parameters to construct an instance of
        <a href="GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html">
         <span class="apiname">
          CEZFileBufferManager
         </span>
        </a>
        .
This returns a pointer to
        <a href="GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html">
         <span class="apiname">
          CEZFileBufferManager
         </span>
        </a>
        (input buffer).
       </span>
       <a href="GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html">
        <span class="apiname">
         CEZFileBufferManager
        </span>
       </a>
       provides functions that accept
and converts the data into buffers for
       <a href="GUID-B90BA6D6-72A2-3EB8-B8EF-CD5408107A9E.html">
        <span class="apiname">
         MEZBufferManager
        </span>
       </a>
       class
to manage it internally.
      </li>
      <li class="stepexpand" id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-BA8CC59E-FD6B-5ACA-A516-EBFFB5316D30">
       <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-BA8CC59E-FD6B-5ACA-A516-EBFFB5316D30">
        <!-- -->
       </a>
       <span>
        <br />
        Pass the input buffer and other compression parameters to the object
of the
        <a href="GUID-AEF8BCC8-6B24-3D59-AD3A-17B5203B3AA5.html">
         <span class="apiname">
          CEZCompressor
         </span>
        </a>
        class.
       </span>
      </li>
      <li class="stepexpand" id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-BD4E38F1-78A7-5ED3-83D7-6C56EE7122DD">
       <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-BD4E38F1-78A7-5ED3-83D7-6C56EE7122DD">
        <!-- -->
       </a>
       <span>
        <br />
        Use
        <a href="GUID-AEF8BCC8-6B24-3D59-AD3A-17B5203B3AA5.html#GUID-AEF8BCC8-6B24-3D59-AD3A-17B5203B3AA5__GUID-03E4E3A2-3830-3209-9D7B-A2238B5AF219">
         <span class="apiname">
          CEZCompressor::DeflateL()
         </span>
        </a>
        to compress the file.
       </span>
      </li>
     </ol>
     <div class="example">
      <p>
       The following code demonstrates a compression procedure.
      </p>
      <pre class="codeblock">
       /*
 * Compresses the file into a zip file using the EZlib component. 
 * It is assumed that the input and output file names are contained in a 
 * provided ini file.
 */


void CEZlibEZipTests::DoEZlibDeflateL()
    {
RFs iFs;
 iFS.connect();
    


    //Open input file
_LIT(KInputFileLocation, "c:\\private\\E80000B7\\zip\\input\\input.doc");
TFileName inputFile(KInputFileLocation);
    RFile input;
    err = input.Open(iFs, inputFile, EFileStream | EFileRead | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KOpenFileError);
        User::Leave(err);
        }   
    
    

    //open output file

_LIT(KOutputFileLocation, "c:\\private\\E80000B7\\zip\\input\\output.zip");
TFileName outputFile(KOutputFileLocation);
    RFile output;
    err = output.Replace(iFs, outputFile, EFileStream | EFileWrite | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KCreateFileError);
        User::Leave(err);
        }   
        


    CEZFileBufferManager *bufferManager = CEZFileBufferManager::NewLC(input, output);   
    CEZCompressor *compressor = CEZCompressor::NewLC(*bufferManager, aLevel, aWindowBits, aMemLevel, aStrategy);

    while(compressor-&gt;DeflateL())
        {       
        }   
     output.Close(); 
input.Close();
 iFS.Close();
    

    
    }
      </pre>
     </div>
     <div class="section">
      <p>
       The decompression of a
       <span class="filepath">
        .zip
       </span>
       file can be achieved
through the following the steps:
      </p>
      <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-468D2F53-B015-5DAB-96A7-08DBE8101773">
       <!-- -->
      </a>
      <ol id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-468D2F53-B015-5DAB-96A7-08DBE8101773">
       <li id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-23A8B3BC-0C23-503A-969A-EAD80BBDA3ED">
        <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-23A8B3BC-0C23-503A-969A-EAD80BBDA3ED">
         <!-- -->
        </a>
        <p>
         Pass the
input and output files as parameters to construct an instance of
         <a href="GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html">
          <span class="apiname">
           CEZFileBufferManager
          </span>
         </a>
         .
This returns a pointer to
         <a href="GUID-A54D8675-1874-3B4F-816D-001A235C0F9C.html">
          <span class="apiname">
           CEZFileBufferManager
          </span>
         </a>
         ( buffer).
        </p>
       </li>
       <li id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-60335F30-42FF-57A1-8457-ADFAE6C34E76">
        <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-60335F30-42FF-57A1-8457-ADFAE6C34E76">
         <!-- -->
        </a>
        <p>
         Pass the buffer to the
object of the
         <a href="GUID-BC3CEC02-B747-38FB-8B35-E7390DB06E35.html">
          <span class="apiname">
           CEZDecompressor
          </span>
         </a>
         class.
        </p>
       </li>
       <li id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-969C35D8-AAB8-5875-9DA9-B80D0F402EB1">
        <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-969C35D8-AAB8-5875-9DA9-B80D0F402EB1">
         <!-- -->
        </a>
        <p>
         <a href="GUID-BC3CEC02-B747-38FB-8B35-E7390DB06E35.html#GUID-BC3CEC02-B747-38FB-8B35-E7390DB06E35__GUID-0AC99B66-412B-3CCF-84DA-D7BC0F0D32B2">
          <span class="apiname">
           CEZDecompressor::InflateL()
          </span>
         </a>
         is
called repeatedly until the decompression is complete.
        </p>
       </li>
      </ol>
      <p>
       The following code demonstrates the decompression procedure.
      </p>
      <pre class="codeblock" id="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-4A0A0D64-939C-587F-B9C7-F34B8F934E25">
       <a name="GUID-84922B27-FDCF-56FD-91ED-5E0BFE3ED0E4__GUID-4A0A0D64-939C-587F-B9C7-F34B8F934E25">
        <!-- -->
       </a>
       /* Decompresses the file contained in a Zip file using the EZlib component. 
 * It is assumed that the input and output file names are contained in a 
 * provided ini file.
 */

void CEZlibEZipTests::DoEZlibInflateL()
    {
RFs iFs;
 iFS.connect();

//Open input file
_LIT(KInputFileLocation, "c:\\private\\E80000B7\\zip\\input\\output.zip");
TFileName inputFile(KInputFileLocation);
    RFile input;
    err = input.Open(iRfs, inputFile, EFileStream | EFileRead | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KOpenFileError);
        User::Leave(err);
        }    
    
    

    //open output file

_LIT(KOutputFile, "c:\\private\\E80000B7\\zip\\input\\input.doc");
TFileName outputFile(KOutputFile);
    RFile output;
    err = output.Replace(iFs, outputFile, EFileStream | EFileWrite | EFileShareExclusive);
    if(err != KErrNone)
        {
        INFO_PRINTF1(KCreateFileError);
        User::Leave(err);
        }    
        


CEZFileBufferManager *bufferManager = CEZFileBufferManager::NewLC(input, Output);    
CEZDecompressor *decompressor = CEZDecompressor::NewLC(*bufferManager, aWindowBits);


    while(decompressor-&gt;InflateL())
        {        
        }    
output.Close();
        input.Close();
    ifs.Close();

    }
      </pre>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-7AAAC6EA-784D-51E6-AD6B-521C9F5C4DBD.html" title="The Zip Compression Library, EZLib compresses files to two formats namely zip and gzip. EZLib also allows clients to decompress data from file archives and memory streams. The compression and decompression tasks are performed iteratively until task completion.">
        Zip Compression Library Tutorials
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>