<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="task" />
  <meta name="DC.Title" content="Following a link to another table and finding a field by Id and by name: Tutorial" />
  <meta name="abstract" content="This tutorial shows you how to follow a link to a Symbian platform defined table. The tutorial also shows two methods to get the value of a field." />
  <meta name="description" content="This tutorial shows you how to follow a link to a Symbian platform defined table. The tutorial also shows two methods to get the value of a field." />
  <meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Following a link to another table and finding a field by Id and by name: Tutorial
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED">
  <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2562582 id2562781 id2562786 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" title="The Communications Framework is the base for all communications, network and telephony services that Symbian platform provides. The Communications Framework manages the communications threads and the flow of information between those threads. The Framework also manages and stores the communications related settings.">
      Communications Framework Guide
     </a>
     &gt;
     <a href="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html">
      Communications Configuration Utilities
     </a>
     &gt;
     <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">
      Comms Database
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Following
a link to another table and finding a field by Id and by name: Tutorial
    </h1>
    <div>
     <p>
      This tutorial shows you how to follow a link to a Symbian platform
defined table. The tutorial also shows two methods to get the value of a field.
     </p>
     <div class="p" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-E4B235C3-CD22-57E0-BC48-DDDB0A6AFFFC">
      <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-E4B235C3-CD22-57E0-BC48-DDDB0A6AFFFC">
       <!-- -->
      </a>
      <p>
       Before you start,
you must understand:
      </p>
      <ul>
       <li id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-6C352504-E6D4-5C17-88A3-1563F3AEE53E">
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-6C352504-E6D4-5C17-88A3-1563F3AEE53E">
         <!-- -->
        </a>
        <p>
         the general concept
of the Comms Database
        </p>
       </li>
       <li id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-AC4D044B-3B8E-522A-AB9D-5EBA1BCCE299">
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-AC4D044B-3B8E-522A-AB9D-5EBA1BCCE299">
         <!-- -->
        </a>
        <p>
         the specific concept
of fields, records, links and tables
        </p>
       </li>
       <li id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-51754AAB-7EE7-5FB4-869C-7FADD29951D9">
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-51754AAB-7EE7-5FB4-869C-7FADD29951D9">
         <!-- -->
        </a>
        <p>
         how to write and build
application code to run on Symbian platform
        </p>
       </li>
      </ul>
     </div>
     <div class="section" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-A7FE99ED-D5CC-5F71-8B64-E0CCB1F8222E">
      <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-A7FE99ED-D5CC-5F71-8B64-E0CCB1F8222E">
       <!-- -->
      </a>
      <p>
       The tutorial shows
you how to follow a link from a record in the
       <a href="GUID-387A8240-0765-52F2-98A4-8F9FC809E03E.html#GUID-387A8240-0765-52F2-98A4-8F9FC809E03E__GUID-57197DDE-9DE0-5978-8F2F-D2E370489E3C">
        IAP
       </a>
       table to a record in the service table. The tutorial then shows you how
to find the "Bearer Speed" field by its Id and by its name in the linked record.
      </p>
      <p>
       The
principles that apply here also apply to the other Symbian platform defined
tables
      </p>
     </div>
     <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-02024A4A-F0D7-5EC0-BB5C-8BCC12D33BBB">
      <!-- -->
     </a>
     <ol id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-02024A4A-F0D7-5EC0-BB5C-8BCC12D33BBB">
      <li class="stepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-FEB0F22C-F0F7-575F-9063-0D21D6708021">
       <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-FEB0F22C-F0F7-575F-9063-0D21D6708021">
        <!-- -->
       </a>
       <span>
        Make sure that you
have created a session.
       </span>
      </li>
      <li class="stepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-D7D8189E-EE40-5305-B993-26D9F28D3EC5">
       <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-D7D8189E-EE40-5305-B993-26D9F28D3EC5">
        <!-- -->
       </a>
       <span>
        Create the IAP record
object in the tool or application process and prime it for the search for
the service type "DialOutISP".
       </span>
       Symbian platform defines the
       <samp class="codeph">
        CCDIAPRecord
       </samp>
       class to
represent a
       <a href="GUID-387A8240-0765-52F2-98A4-8F9FC809E03E.html#GUID-387A8240-0765-52F2-98A4-8F9FC809E03E__GUID-57197DDE-9DE0-5978-8F2F-D2E370489E3C">
        IAP
       </a>
       record.
The class is a schema for the record. The class defines the fields and links
that make a IAP record. 

 Symbian platform defines
       <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-32E556BC-55C3-5FBD-9A60-9708139C20D6">
        unique
numeric Id
       </a>
       s for Symbian platform defined tables. The symbol
       KCDTIdIAPRecord
       defines the value of this Id for
the IAP table. The Id allows the CommsDat API to retrieve the table from the
Comms Database efficiently.
       <pre class="codeblock" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-31732ADA-3BC7-5D6E-8579-6CE700C2A9B7">
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-31732ADA-3BC7-5D6E-8579-6CE700C2A9B7">
         <!-- -->
        </a>
        ...
// Create a single IAP record in memory and prime it with the type of service
// that you want to find. In this case, the type of service is "DialOutISP".
// This code fragment assumes that a session with the Comms Database has been created.
// "iDb" is a pointer to a CMDBSession object

_LIT(KISPType, "DialOutISP");
TUint32 bearerSpeed;


// Use the factory function CCDRecordBase::RecordFactoryL() to create the IAP record obejct. 
//
// Note:
// 1. the template parameter CCDIAPRecord defines 
//    the "IAP" record type.
// 2. the unique numeric Id KCDTIdIAPRecord is passed as a parameter
//    to the constructor.

CCDIAPRecord* ptrSingleIAPRecord = static_cast&lt;CCDIAPRecord*&gt;(CCDRecordBase::RecordFactoryL(KCDTIdIAPRecord)); 


// The storage for string or binary fields must be allocated
// explicitly if set or reset by the application. Storage required for
// storing data  retrieved from the database is handled by the implementation of the CommsDat API.
//
// Set the service type.
ptrSingleIAPRecord-&gt;iServiceType.SetMaxLengthL(KISPType().Length());
ptrSingleIAPRecord-&gt;iServiceType = KISPType; 


// Note that you can replace the above two function calls with the 
// single function call:
//
// ptrSingleIAPRecord-&gt;iServiceType.SetL(KISPType); 
...
       </pre>
      </li>
      <li class="stepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-A661444B-A268-56C5-81FF-B3AB0063BA9C">
       <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-A661444B-A268-56C5-81FF-B3AB0063BA9C">
        <!-- -->
       </a>
       <span>
        Search for the first
IAP record that has "DialOutISP" as the service type. If the record is found,
load the associated service table record.
       </span>
       <pre class="codeblock" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-E197DCA4-4E3D-5963-A548-8FD84F797C6B">
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-E197DCA4-4E3D-5963-A548-8FD84F797C6B">
         <!-- -->
        </a>
        ...
if(ptrSingleIAPRecord-&gt;FindL(*iDb))
    { 
    // An IAP record with "DialOutISP" as the service type has
    // been found and loaded into memory. 
     
    // Load the service table record associated with this IAP.
    ptrSingleIAPRecord-&gt;iService.LoadL(*iDb);
    ...
       </pre>
      </li>
      <li class="stepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-5A28A3C4-BB43-52BF-8F98-00B125549A45">
       <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-5A28A3C4-BB43-52BF-8F98-00B125549A45">
        <!-- -->
       </a>
       <span>
        <br />
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-B20735EC-2966-5C31-9591-8108A0A4BB5C">
         <!-- -->
        </a>
        <ol type="a" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-B20735EC-2966-5C31-9591-8108A0A4BB5C">
         <li class="substepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-76112AFB-54C4-55D8-AC6E-1B9D86CC35A7">
          <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-76112AFB-54C4-55D8-AC6E-1B9D86CC35A7">
           <!-- -->
          </a>
          <span>
           CASE 1 : Access
the service record when you know the service type. This is the most effiecient
method.
          </span>
          <pre class="codeblock" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-316366CE-97B7-5093-8480-2AA021F764D5">
           <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-316366CE-97B7-5093-8480-2AA021F764D5">
            <!-- -->
           </a>
           ...
    CCDDialOutISPRecord* ptrIspRecord = static_cast&lt;CCDDialOutISPRecord*&gt;(ptrSingleIAPRecord-&gt;iService.iLinkedRecord);
    bearerSpeed = ptrIspRecord-&gt;iBearerSpeed;
    ...
          </pre>
         </li>
         <li class="substepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-2A8FE5F5-D7AD-5F95-A2D5-AD6DA1C4EDA0">
          <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-2A8FE5F5-D7AD-5F95-A2D5-AD6DA1C4EDA0">
           <!-- -->
          </a>
          <span>
           CASE 2: Access
the service record when you do not know the service type. This is also the
more general case and is slower than case 1.
          </span>
          You can find a field by its Id, or you can find a field by its name.
To find a field by its name is not recommended, because this operation is
slow.
          <pre class="codeblock" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-0FDC8EF4-45FF-542B-87FD-042FC31F431C">
           <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-0FDC8EF4-45FF-542B-87FD-042FC31F431C">
            <!-- -->
           </a>
           ...
    // Use the base class "CCDServiceRecordBase" instead of the more specific
    // class "CCDDialOutISPRecord" [or any other specific class derived from "CCDServiceRecordBase"].
    CCDServiceRecordBase* ptrServiceRecord = static_cast&lt;CCDServiceRecordBase*&gt;(ptrSingleIAPRecord-&gt;iService.iLinkedRecord);
    CMDBField&lt;TUint32&gt;* field; 
    ...

    // Find a field by its Id

    field = (CMDBField&lt;TUint32&gt;*)ptrServiceRecord-&gt;GetFieldByIdL(KCDTIdBearerSpeed);
    bearerSpeed = *field;
    ...

   // Find a field by its name. Symbian platform defines KCDTypeNameBearerSpeed to represent 
   // the name of the field.

    TPtrC16 BearerName(KCDTypeNameBearerSpeed);
    TInt valueType; 
    field = (CMDBField&lt;TUint32&gt;*)ptrServiceRecord-&gt;GetFieldByNameL(BearerName,valueType);
    bearerSpeed = *field;
    ...
          </pre>
         </li>
        </ol>
       </span>
      </li>
      <li class="stepexpand" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-5B8443D8-DA79-57E6-9FC4-6A36C158090F">
       <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-5B8443D8-DA79-57E6-9FC4-6A36C158090F">
        <!-- -->
       </a>
       <span>
        Clean up.
       </span>
       <pre class="codeblock" id="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-0E70C9AB-49B2-5ECB-9262-3A251135B5F9">
        <a name="GUID-9D56FF77-A20B-5BFB-8DE6-19CC4535DFED__GUID-0E70C9AB-49B2-5ECB-9262-3A251135B5F9">
         <!-- -->
        </a>
        ...
    //
    // This also deletes "ptrSingleIAPRecord-&gt;iService.iLinkedRecord"     
    //
    delete ptrSingleIAPRecord;
    ...        
    }
}
       </pre>
      </li>
     </ol>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">
        Comms Database
       </a>
      </div>
     </div>
     <div class="relinfo relconcepts">
      <strong>
       Related concepts
      </strong>
      <br />
      <div>
       <a href="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html">
        Comms Database
                concepts
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>