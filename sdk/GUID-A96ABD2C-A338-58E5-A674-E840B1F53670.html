<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="task" />
  <meta name="DC.Title" content="Creating a User Defined Table: Tutorial" />
  <meta name="abstract" content="This tutorial shows you how to create a user defined table. The tutorial, then shows you how to store a new record." />
  <meta name="description" content="This tutorial shows you how to create a user defined table. The tutorial, then shows you how to store a new record." />
  <meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Creating a User Defined Table: Tutorial
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670">
  <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2562582 id2562781 id2562786 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" title="The Communications Framework is the base for all communications, network and telephony services that Symbian platform provides. The Communications Framework manages the communications threads and the flow of information between those threads. The Framework also manages and stores the communications related settings.">
      Communications Framework Guide
     </a>
     &gt;
     <a href="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html">
      Communications Configuration Utilities
     </a>
     &gt;
     <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">
      Comms Database
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Creating
a User Defined Table: Tutorial
    </h1>
    <div>
     <p>
      This tutorial shows you how to create a user defined table. The
tutorial, then shows you how to store a new record.
     </p>
     <div class="p" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-AE5DC98C-AF4A-5727-8090-42FF74E80BF4">
      <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-AE5DC98C-AF4A-5727-8090-42FF74E80BF4">
       <!-- -->
      </a>
      <p>
       Before you start,
you must understand:
      </p>
      <ul>
       <li id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-FA757DB7-B25F-5ECA-9030-6D7B9EC4D7E4">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-FA757DB7-B25F-5ECA-9030-6D7B9EC4D7E4">
         <!-- -->
        </a>
        <p>
         the general concept
of the Comms Database
        </p>
       </li>
       <li id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-54CB318E-7A04-5D63-8AEB-C2D75F428B38">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-54CB318E-7A04-5D63-8AEB-C2D75F428B38">
         <!-- -->
        </a>
        <p>
         the specific concepts
of fields, records, links and tables
        </p>
       </li>
       <li id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-C95C350C-9DC8-5445-A58B-333CEFA97AA8">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-C95C350C-9DC8-5445-A58B-333CEFA97AA8">
         <!-- -->
        </a>
        <p>
         how to write and build
application code to run on Symbian platform
        </p>
       </li>
      </ul>
     </div>
     <div class="section" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-24246F22-49AD-5AC3-A0BF-7C1C625035C7">
      <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-24246F22-49AD-5AC3-A0BF-7C1C625035C7">
       <!-- -->
      </a>
      <p>
       This tutorial shows
you:
      </p>
      <ul>
       <li id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-06AFEA66-4293-5D92-AD13-11B84A4DBCBF">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-06AFEA66-4293-5D92-AD13-11B84A4DBCBF">
         <!-- -->
        </a>
        <p>
         how to create a user
defined table
        </p>
       </li>
       <li id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-D304F5AA-29E6-510A-9B14-E0746C71D111">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-D304F5AA-29E6-510A-9B14-E0746C71D111">
         <!-- -->
        </a>
        <p>
         how to create a user
defined record and store that record in the table
        </p>
       </li>
      </ul>
     </div>
     <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-79745846-CD3D-5CEB-8F3C-CB090D60FF03">
      <!-- -->
     </a>
     <ol id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-79745846-CD3D-5CEB-8F3C-CB090D60FF03">
      <li class="stepexpand" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-10AB178C-0854-5947-ADB8-A81379C0A464">
       <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-10AB178C-0854-5947-ADB8-A81379C0A464">
        <!-- -->
       </a>
       <span>
        Make sure that you
have created a session.
       </span>
      </li>
      <li class="stepexpand" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-D5F5C68A-9391-51AA-91F3-6F874BAEF8DF">
       <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-D5F5C68A-9391-51AA-91F3-6F874BAEF8DF">
        <!-- -->
       </a>
       <span>
        Define a schema
for the new table.
       </span>
       Create an array of
       SGenericRecordTypeInfo
       items.
Each
       <samp class="codeph">
        SGenericRecordTypeInfo
       </samp>
       item defines a field in the record.
       <pre class="codeblock" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-59343FD3-9183-55C1-B6CC-5E9690B5A928">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-59343FD3-9183-55C1-B6CC-5E9690B5A928">
         <!-- -->
        </a>
        const SGenericRecordTypeInfo recordInfo[] =
        {
        SGenericRecordTypeInfo(KCDTIdRecordName,EText,ENotNull,KCDTypeNameRecordName),
        SGenericRecordTypeInfo(KCDTIdRecordTag,EUint32,ENoAttrs,KCDTypeNameRecordTag),
        SGenericRecordTypeInfo(KCDTIdWLANServiceId,EUint32,ENoAttrs,KNameWLANServiceId),
        SGenericRecordTypeInfo(KCDTIdWLANType,EUint32,ENoAttrs,KNameWLANType),
        SGenericRecordTypeInfo(KCDTIdWLANEnabled,EBool,ENoAttrs,KNameWLANEnabled),
        SGenericRecordTypeInfo(KCDTIdWLANPriority,EUint32,ENoAttrs,KNameWLANPriority),
        SGenericRecordTypeInfo(0,0,ENoAttrs,KCDNull)
        };
       </pre>
      </li>
      <li class="stepexpand" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-7C23139E-C4EC-585E-B333-862C0C9D2B5F">
       <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-7C23139E-C4EC-585E-B333-862C0C9D2B5F">
        <!-- -->
       </a>
       <span>
        Define a name for
the table.
       </span>
       <pre class="codeblock" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-948FFFF5-DE3A-5614-9F93-6C44ACBD8F76">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-948FFFF5-DE3A-5614-9F93-6C44ACBD8F76">
         <!-- -->
        </a>
        _LIT(KGenericTable,"MyGenericTable");
       </pre>
      </li>
      <li class="stepexpand" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-9BCE5E36-7BF8-545F-8D9E-859A6CC2BECA">
       <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-9BCE5E36-7BF8-545F-8D9E-859A6CC2BECA">
        <!-- -->
       </a>
       <span>
        Create a
        CMDBGenericRecord
        object.
       </span>
       A
       CMDBGenericRecord
       object represents
a record and a set of records 

 Give the object the name of the table and the name of the schema.
       <pre class="codeblock" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-5F88809A-8246-5D78-AFF1-7BF2F3B1A145">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-5F88809A-8246-5D78-AFF1-7BF2F3B1A145">
         <!-- -->
        </a>
        ...
// Record factory creates the CMDBGenericRecord object. The KCDNewTableRequest value 
// passed to the record factory allocates a new table Id.
CMDBGenericRecord* ptrNewTable = 
      static_cast&lt;CMDBGenericRecord*&gt;(CCDRecordBase::RecordFactoryL(KCDNewTableRequest));

// Initialise with the name of the table and the name of the schema.
ptrNewTable-&gt;InitialiseL(KGenericTable(),recordInfo);
...
       </pre>
      </li>
      <li class="stepexpand" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-DA35A3FB-E7C5-5284-A681-FD6658FB123D">
       <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-DA35A3FB-E7C5-5284-A681-FD6658FB123D">
        <!-- -->
       </a>
       <span>
        Access fields in
the record.
       </span>
       The code uses
       <samp class="codeph">
        GetFieldByNameL()
       </samp>
       and
       <samp class="codeph">
        GetFieldByIdL()
       </samp>
       .
       <pre class="codeblock" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-0C746871-2A0D-55DE-8FF8-54F876635EF5">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-0C746871-2A0D-55DE-8FF8-54F876635EF5">
         <!-- -->
        </a>
        ...
TInt valueType;

CMDBElement* LanType = ptrNewTable-&gt; GetFieldByNameL(KNameWLANType, valueType);
CMDBElement* RecordName = ptrNewTable-&gt;GetFieldByIdL(KCDTIdRecordName);
...
       </pre>
      </li>
      <li class="stepexpand" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-4C0E0735-0D3C-55B0-9415-015572D40915">
       <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-4C0E0735-0D3C-55B0-9415-015572D40915">
        <!-- -->
       </a>
       <span>
        Change the valuie
of the fields and create a new record.
       </span>
       <pre class="codeblock" id="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-4DEC5D91-F890-5EF1-B8C5-C49DA84B4192">
        <a name="GUID-A96ABD2C-A338-58E5-A674-E840B1F53670__GUID-4DEC5D91-F890-5EF1-B8C5-C49DA84B4192">
         <!-- -->
        </a>
        ...
// Cast the field objects to the appropriate type
CMDBField&lt;TUint32&gt;* LanTypefield = static_cast&lt;CMDBField&lt;TUint32&gt;*&gt;(LanType);
CMDBField&lt;TDesC&gt;* RecordNamefield = static_cast&lt;CMDBField&lt;TDesC&gt;*&gt;(RecordName);

// Change the field value
*LanTypefield = 100;

// Change the field value
_LIT(KNewName, " NewName ");
RecordNamefield-&gt;SetMaxLengthL(KNewName().Length());
*RecordNamefield = KNewName();

// Can also use this format: RecordNamefield-&gt;SetL(KNewName());


// Asks for a new record
ptrNewTable-&gt;SetRecordId(KCDNewRecordRequest);

// Stores the new record
ptrNewTable-&gt;StoreL(*iDb);
...
       </pre>
      </li>
     </ol>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">
        Comms Database
       </a>
      </div>
     </div>
     <div class="relinfo relconcepts">
      <strong>
       Related concepts
      </strong>
      <br />
      <div>
       <a href="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html">
        Comms Database
                concepts
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>