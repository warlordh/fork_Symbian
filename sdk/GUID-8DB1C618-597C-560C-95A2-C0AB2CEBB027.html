<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Redraw Drawing" />
  <meta name="abstract" content="This topic provides background information about redraw drawing and tips for updating old code to comply with the recommendation that all drawing is migrated to redraw drawing." />
  <meta name="description" content="This topic provides background information about redraw drawing and tips for updating old code to comply with the recommendation that all drawing is migrated to redraw drawing." />
  <meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Redraw Drawing
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027">
  <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2397524 id2397614 id2397682 id2397697 id2397818 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">
      Graphics Guide
     </a>
     &gt;
     <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two componentsâ€”the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">
      Windowing Collection
     </a>
     &gt;
     <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">
      Window Server Component
     </a>
     &gt;
     <a href="GUID-DC5E8C7D-D697-53E8-87F4-344301430E61.html" title="The Window Server client-side library provides client applications with access to the screen and input devices.">
      Window Server Client-Side Library
     </a>
     &gt;
     <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">
      Graphics and Drawing
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Redraw Drawing
    </h1>
    <div>
     <p>
      This topic provides background information about redraw
drawing and tips for updating old code to comply with the recommendation
that all drawing is migrated to redraw drawing.
     </p>
     <p>
      <strong>
       Variant
      </strong>
      : Both (ScreenPlay and non-ScreenPlay).
      <strong>
       Target
audience
      </strong>
      : Application developers.
     </p>
     <div class="section" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-71199005-1F00-434D-B130-47886DD53E92">
      <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-71199005-1F00-434D-B130-47886DD53E92">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       About
Redraw Drawing
      </h2>
      <p>
       Symbian recommends that all
       <a href="GUID-0AEE5955-C530-35F1-A904-69183331B294.html">
        <span class="apiname">
         CWindowGc
        </span>
       </a>
       drawing is
       <strong>
        redraw drawing
       </strong>
       , which means that it takes place
between
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-9337538E-7A53-3153-A330-968B5E4F2FF2">
        <span class="apiname">
         RWindow::BeginRedraw()
        </span>
       </a>
       and
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-3DE16607-AD3B-3946-BEB3-88512EAAB9CE">
        <span class="apiname">
         RWindow::EndRedraw()
        </span>
       </a>
       calls.
       <a href="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html">
        The
UI Control Framework (CONE)
       </a>
       automatically takes care of this
for you if you use the
       <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-250ED45A-76F3-3623-BA4B-22D31613A2EF">
        <span class="apiname">
         CCoeControl::DrawNow(const TRect &amp;)const
        </span>
       </a>
       and
       <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-33A19096-F8D1-373C-862F-EF627981C782">
        <span class="apiname">
         CCoeControl::DrawDeferred()const
        </span>
       </a>
       methods.
      </p>
      <p>
       For example, suppose an application wants to write the text "Hello!"
to a window and then add a red diagonal line below it (A in following
diagram). When this is performed as redraw drawing, the application
calculates the bounding rectangles of the "Hello!" text and the red
line (B). For each one, the application passes the rectangle to
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-F5E85A7B-0DAE-32C1-AF71-8FC2F5F01509">
        <span class="apiname">
         RWindow::BeginRedraw(const TRect &amp;)
        </span>
       </a>
       , then calls the
draw commands and afterwards calls
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-3DE16607-AD3B-3946-BEB3-88512EAAB9CE">
        <span class="apiname">
         RWindow::EndRedraw()
        </span>
       </a>
       .
      </p>
      <div class="fignone" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-53B962F7-D425-5D72-8148-F822A3462243">
       <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-53B962F7-D425-5D72-8148-F822A3462243">
        <!-- -->
       </a>
       <img src="GUID-1DDFFB60-BBA8-500E-A9B1-F048EE5BFBD0_d0e194631_href.png" />
      </div>
      <p>
       This has the advantage that the Window Server knows that
the area of the window that has the "Hello!" text is not affected
by the drawing of the red line. There are also advantages when some
or all of the window needs to be repainted. For example, suppose another
window (such as an OK dialog box) appears above the window (as shown
in C). When the dialog box is closed, the Window Server repaints the
screen behind the dialog box. Because in this example the OK dialog
box was entirely within the red line's bounding rectangle, the Window
Server simply replays that rectangle's drawing operations (D). This
is more efficient than repainting the whole window.
      </p>
      <p>
       However,
in earlier versions of Symbian you could, for example, draw the red
line without bracketing it within
       <samp class="codeph">
        BeginRedraw()
       </samp>
       and
       <samp class="codeph">
        EndRedraw()
       </samp>
       calls. This is called
       <strong>
        non-redraw drawing
       </strong>
       . In ScreenPlay, each non-redraw drawing operation triggers the Window
Server to invalidate the entire window. This means that the client
application must then perform a full window redraw, as shown in the
next diagram.
      </p>
      <div class="fignone" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-A36DF80C-6B53-5D9D-878B-0854BB36E44A">
       <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-A36DF80C-6B53-5D9D-878B-0854BB36E44A">
        <!-- -->
       </a>
       <span class="figcap">
        Figure 1.               Non-redraw drawing sequence
       </span>
       <img src="GUID-7C51BC7A-CB97-5A7E-A5EF-BB3623DFFFED_d0e194654_href.png" />
      </div>
      <p>
       This is less efficient than the Window Server replaying
the draw operations for the affected area.
      </p>
      <p>
       Symbian recommends
that all drawing is now performed as redraw drawing. Typically this
involves dividing the window up into rectangular areas that represent
different aspects of the user interfaceâ€”for example, as shown in the
following diagram. If anything spoils the screen, the Window Server
then only needs to redraw the corresponding portions of the user interface.
      </p>
      <div class="fignone" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-BAD0C762-0EBD-51E2-BC64-DF38749CA7D8">
       <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-BAD0C762-0EBD-51E2-BC64-DF38749CA7D8">
        <!-- -->
       </a>
       <img src="GUID-F2E8CB4B-C1BB-577D-B018-7FF231B70D8C_d0e194665_href.png" />
      </div>
      <p>
       In earlier versions of Symbian, before the introduction
of the
       <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-250ED45A-76F3-3623-BA4B-22D31613A2EF">
        <span class="apiname">
         CCoeControl::DrawNow(const TRect &amp;)const
        </span>
       </a>
       overload, developers sometimes used non-redraw drawing to update
a small part of a control. This technique has often been used for
virtual keyboards and calendar controls. This type of use case is
now particularly unsuited to non-redraw drawing because in ScreenPlay
each non-redraw drawing command triggers a server-initiated client
redraw of the entire window. This can be very slow if the window requires
many drawing operations to redraw the scene.
      </p>
      <p>
       Symbian recommends
that all non-redraw drawing is changed to redraw drawing. Migrating
non-redraw drawing to redraw drawing means that you must enclose all
drawing operations between
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-9337538E-7A53-3153-A330-968B5E4F2FF2">
        <span class="apiname">
         RWindow::BeginRedraw()
        </span>
       </a>
       and
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-3DE16607-AD3B-3946-BEB3-88512EAAB9CE">
        <span class="apiname">
         RWindow::EndRedraw()
        </span>
       </a>
       calls or migrate it
to use the
       <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-D5458F8C-E199-37DD-B821-050B749122C6">
        <span class="apiname">
         CCoeControl::DrawNow()
        </span>
       </a>
       and
       <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-9FB682AC-0209-302A-83F3-7BCB1162B998">
        <span class="apiname">
         CCoeControl::DrawDeferred()
        </span>
       </a>
       methods. Sometimes this causes
some subtle changes in behavior, as explained in the Notes below.
      </p>
     </div>
     <div class="section" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-E88E139C-F852-4CAB-B6EB-7E5861D607D6">
      <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-E88E139C-F852-4CAB-B6EB-7E5861D607D6">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Restrictions
      </h2>
      <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-3BE36F7E-CFEC-5BFD-A311-E36D67D9097D">
       <!-- -->
      </a>
      <ol id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-3BE36F7E-CFEC-5BFD-A311-E36D67D9097D">
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-C6236CD8-C83E-5252-BCC6-336FE8677DCF">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-C6236CD8-C83E-5252-BCC6-336FE8677DCF">
         <!-- -->
        </a>
        <p>
         You must supply
         <strong>
          only
         </strong>
         drawing operations between the
         <samp class="codeph">
          BeginRedraw()
         </samp>
         and
         <samp class="codeph">
          EndRedraw()
         </samp>
         calls. For example, you must not
change the window extent between a
         <samp class="codeph">
          BeginRedraw()
         </samp>
         and
         <samp class="codeph">
          EndRedraw()
         </samp>
         call.
        </p>
       </li>
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-616C81BF-6296-4D10-BA9F-5A037995D773">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-616C81BF-6296-4D10-BA9F-5A037995D773">
         <!-- -->
        </a>
        <p>
         For opaque windows,
you must define pixel content for the
         <strong>
          entire area
         </strong>
         being redrawn.
For example, when calling
         <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-250ED45A-76F3-3623-BA4B-22D31613A2EF">
          <span class="apiname">
           CCoeControl::DrawNow(const TRect
&amp;)const
          </span>
         </a>
         , you must supply drawing operations for the
entire rectangle passed to the function. Similarly when calling the
         <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-8DE580DF-459C-3FCF-8ABA-B26741C294CC">
          <span class="apiname">
           CCoeControl::DrawNow()const
          </span>
         </a>
         overload, you must supply drawing
operations for the entire window. However, this is not necessary for
transparent windows.
        </p>
       </li>
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-652DF093-046F-58A3-961F-2A51DEB2FD74">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-652DF093-046F-58A3-961F-2A51DEB2FD74">
         <!-- -->
        </a>
        <p>
         You must
         <strong>
          not
         </strong>
         call any functions that can leave between the
         <samp class="codeph">
          BeginRedraw()
         </samp>
         and
         <samp class="codeph">
          EndRedraw()
         </samp>
         calls. This is because drawing
operations must never leave.
        </p>
       </li>
      </ol>
      <p>
       Note: A redrawer's
       <samp class="codeph">
        RunL()
       </samp>
       function must
       <strong>
        never
       </strong>
       perform any non-redraw drawing. See
       <a href="GUID-7C75642D-C0C9-5392-9354-711F42DC2C61.html" title="This topic introduces the reasons that the screen display may need to be updated and the difference between redrawing that is initiated by an application and that initiated by the Window Server.">
        Server-Initiated
vs. Application-Initiated Redrawing
       </a>
       for more information.
      </p>
     </div>
     <div class="section" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-620268C0-2F67-4D87-BF99-E1843DBE9BCA">
      <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-620268C0-2F67-4D87-BF99-E1843DBE9BCA">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Notes
      </h2>
      <p>
       <strong>
        Performance
       </strong>
      </p>
      <p>
       You can improve performance by passing
the smallest possible bounding rectangle to the
       <a href="GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79.html#GUID-683603DD-F3D3-3193-BEB3-8236C7DE7F79__GUID-9337538E-7A53-3153-A330-968B5E4F2FF2">
        <span class="apiname">
         RWindow::BeginRedraw()
        </span>
       </a>
       and
       <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-D5458F8C-E199-37DD-B821-050B749122C6">
        <span class="apiname">
         CCoeControl::DrawNow()
        </span>
       </a>
       methods. If this still
results in poor performance, because, for example, there is a large
amount of incremental screen updating, the recommended solution in
ScreenPlay is to render to a surface.
      </p>
      <p>
       <strong>
        High frequency rendering
       </strong>
      </p>
      <p>
       It is possible for a client to provide batches of redraw
drawing (that is, drawing bracketed in
       <samp class="codeph">
        BeginRedraw()
       </samp>
       and
       <samp class="codeph">
        EndRedraw()
       </samp>
       calls) for the same region of a
window faster than they can be displayed on the screen.
When this happens, the Window Server may discard the drawing commands
in one or more of the earlier batches of redraw drawing and simply
draw the pixels defined in a later redraw batch to the screen. This
can result in missing frames, but is only likely to be noticeable
in an application like a game that performs high-frequency rendering.
      </p>
      <p>
       The solution is to call
       <a href="GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9.html#GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9__GUID-B431DC60-D11F-3239-8F52-4257B9B0E0C9">
        <span class="apiname">
         RWsSession::Finish()
        </span>
       </a>
       after each
       <samp class="codeph">
        EndRedraw()
       </samp>
       call. This slows the client
so that it does not generate pixel content faster than the Window
Server can display it on the screen.
      </p>
      <p>
       To summarize: When you
want to ensure that every single frame is shown on the screen, call
       <samp class="codeph">
        Finish()
       </samp>
       after each
       <samp class="codeph">
        EndRedraw()
       </samp>
       call.
      </p>
      <p>
       <strong>
        Delay of execution
       </strong>
      </p>
      <p>
       After you migrate non-redraw
drawing to redraw drawing, the execution of the drawing operations
is deferred compared to previously. This means that if the arguments
of the drawing operations result in a panic, the panic also appears
later than before.
      </p>
      <p>
       <strong>
        CRemoteGc usage
       </strong>
      </p>
      <p>
       Device
creators can use
       CRemoteGc
       to create a data buffer
containing a series of drawing operations. These can then be executed
to display the drawing on the screen by using
       CCommandBuffer::Play()
       .
      </p>
      <p>
       For example, consider a weather program that has one sub-system
responsible for deciding the drawing operations that comprise a weather
symbol and another sub-system that places weather symbols at different
locations on the screen. Here we potentially have a Cloud symbol buffer
created once and played many times.
      </p>
      <p>
       The points to note are:
      </p>
      <ul>
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-A8DCB4C4-9D80-5F0F-A894-512A432A9E11">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-A8DCB4C4-9D80-5F0F-A894-512A432A9E11">
         <!-- -->
        </a>
        <p>
         Any
         <samp class="codeph">
          BeginRedraw()
         </samp>
         and
         <samp class="codeph">
          EndRedraw()
         </samp>
         commands
that are placed into the
         <samp class="codeph">
          CRemoteGc
         </samp>
         buffer are
         <strong>
          not
         </strong>
         transferred to the target window when the buffer is played
        </p>
       </li>
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-4D5FB2B7-44F0-50F1-AB60-3A12B0AF287B">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-4D5FB2B7-44F0-50F1-AB60-3A12B0AF287B">
         <!-- -->
        </a>
        <p>
         You
         <strong>
          must
         </strong>
         bracket any call to
         CCommandBuffer::Play()
         within
         <samp class="codeph">
          BeginRedraw()
         </samp>
         and
         <samp class="codeph">
          EndRedraw()
         </samp>
         calls.
        </p>
       </li>
      </ul>
      <p>
       It may be puzzling to understand why any
       <samp class="codeph">
        BeginRedraw()
       </samp>
       and
       <samp class="codeph">
        EndRedraw()
       </samp>
       commands would be placed in the
       <samp class="codeph">
        CRemoteGc
       </samp>
       buffer at all. This facility is to allow the commands
already in the
       <samp class="codeph">
        CRemoteGc
       </samp>
       buffer to be replaced with
new drawing operations. In the weather example, it might be done to
allow a "7
       <sup>
        o
       </sup>
       Celsius" label to partially occlude a cloud
graphic placed earlier into the
       <samp class="codeph">
        CRemoteGc
       </samp>
       buffer.
      </p>
     </div>
     <div class="section" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-D263317D-ED6F-45D2-8F89-95891F6B7540">
      <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-D263317D-ED6F-45D2-8F89-95891F6B7540">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Configuring
the emulator to panic clients that ignore the           convention
      </h2>
      <p>
       In both ScreenPlay and the non-ScreenPlay variant, you can configure
the TechView emulator to panic clients that ignore the convention
(described above) that all drawing operations are performed as redraw
drawing.
      </p>
      <p>
       To enable this feature, add the following line to
the
       <span class="filepath">
        epoc32/data/epoc.ini
       </span>
       file:
      </p>
      <pre class="codeblock" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-50D79AD9-BB89-5A49-91A3-DDDAF9543551">
       <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-50D79AD9-BB89-5A49-91A3-DDDAF9543551">
        <!-- -->
       </a>
       debug_wserv_exe_EnforceRedrawCallingConvention 1
      </pre>
      <p>
       This feature is disabled if you do not specify this parameter
or if you set it to zero, like this:
      </p>
      <pre class="codeblock" id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-ACCA692B-42C6-593E-BA02-43D2EF52E9C8">
       <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-ACCA692B-42C6-593E-BA02-43D2EF52E9C8">
        <!-- -->
       </a>
       debug_wserv_exe_EnforceRedrawCallingConvention 0
      </pre>
      <p>
       The feature takes effect in debug emulator (WINSCW) builds onlyâ€”it
never affects ARM builds.
      </p>
      <p>
       When a Window Server panic code
79 (
       <samp class="codeph">
        EWservPanicWindowBeginRedrawNotCalled
       </samp>
       ) then occurs,
it means that a non-redraw drawing operation has occurred.
      </p>
      <p>
       However, the Window Server buffers client requests. This means that
the drawing that is at fault may have been issued by the client some
time earlier. It is therefore helpful to enable
       <em>
        autoflushing
       </em>
       , because this removes the buffering between the client issuing the
drawing operations and the Window Server processing them. This makes
it easier to identify the drawing operation that is at fault.
      </p>
      <p>
       There are three ways to enable autoflushing:
      </p>
      <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-22E4AACD-5718-5774-B9B1-BF28D287ED76">
       <!-- -->
      </a>
      <ol id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-22E4AACD-5718-5774-B9B1-BF28D287ED76">
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-EF604CC8-5138-5747-AD4F-CA8BE8DC335A">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-EF604CC8-5138-5747-AD4F-CA8BE8DC335A">
         <!-- -->
        </a>
        <p>
         To enable autoflushing
globally across all clients, define
         <samp class="codeph">
          __AUTO_FLUSH
         </samp>
         in
         <span class="filepath">
          client/client.h
         </span>
         and re-compile the Window Server code.
        </p>
       </li>
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-ACC8C257-1530-5808-9838-B905D2483455">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-ACC8C257-1530-5808-9838-B905D2483455">
         <!-- -->
        </a>
        <p>
         To enable autoflushing
in your client-side code only, call
         <a href="GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9.html#GUID-643DDA78-C7A7-386D-AB3F-8710141DDDA9__GUID-85232F8B-9FB8-3E19-9ECD-E64B63748A11">
          <span class="apiname">
           RWsSession::SetAutoFlush(ETrue)
          </span>
         </a>
         .
        </p>
       </li>
       <li id="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-3CCA44EB-5375-59AA-B96B-E3C3E241D88B">
        <a name="GUID-8DB1C618-597C-560C-95A2-C0AB2CEBB027__GUID-3CCA44EB-5375-59AA-B96B-E3C3E241D88B">
         <!-- -->
        </a>
        <p>
         To enable autoflushing
on an ad hoc basis in the TechView emulator, press
         <kbd class="userinput">
          Ctrl-Alt-Shift-F
         </kbd>
         .
        </p>
       </li>
      </ol>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">
        Graphics and Drawing
       </a>
      </div>
     </div>
     <div class="relinfo relconcepts">
      <strong>
       Related concepts
      </strong>
      <br />
      <div>
       <a href="GUID-484B51EC-2209-5492-8E9C-9D792AB0DF35.html" title="This section provides application developers with an introduction to key concepts involved in drawing graphics to the screen.">
        Graphics
and Drawing
       </a>
      </div>
      <div>
       <a href="GUID-6C16417B-5B37-5310-B59A-750D971AA6D4.html">
        The
UI Control Framework (CONE)
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>