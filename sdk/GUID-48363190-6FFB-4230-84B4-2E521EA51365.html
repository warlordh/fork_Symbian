<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Using menu sections in menu bar resource statements" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-48363190-6FFB-4230-84B4-2E521EA51365" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Using menu sections in menu bar resource statements
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-48363190-6FFB-4230-84B4-2E521EA51365">
  <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0;
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <h1 class="topictitle1">
      Using
menu sections in menu bar resource statements
     </h1>
     <div>
      <div class="fignone" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-4EAE2293-314B-4FFB-BF37-FAF75DDC0135">
       <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-4EAE2293-314B-4FFB-BF37-FAF75DDC0135">
        <!-- -->
       </a>
       <span class="figcap">
        Figure 1. Menu sections in an Options menu
       </span>
       <img src="GUID-F96D14A5-58BB-4F1A-A6FB-5D13DCB84B33_d0e62142_href.png" />
      </div>
      <p>
       The use of menu sections provides a means of combining menu bar resource
declarations in
       <strong>
        Options
       </strong>
       menus. One example of how this could be used
would be an application with two views. Three
       <span class="parmname">
        MENU_BAR
       </span>
       resources
could be defined as follows:
      </p>
      <ul>
       <li>
        <p>
         an application menu section, which would be common to both
views
        </p>
       </li>
       <li>
        <p>
         a menu section for view 1, which would contain options items
unique to this view
        </p>
       </li>
       <li>
        <p>
         a menu section for view 2, which would contain options items
unique to this view
        </p>
       </li>
      </ul>
      <div class="section" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-84E33CCD-1D3D-4A79-BE71-FE96B3D61C22">
       <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-84E33CCD-1D3D-4A79-BE71-FE96B3D61C22">
        <!-- -->
       </a>
       <h2 class="sectiontitle">
        Combining menu
sections
       </h2>
       <p>
        The menu sections that are combined for an
        <strong>
         Options
        </strong>
        menu are defined
in the
        <span class="parmname">
         MENU_BAR
        </span>
        resource. This resource lists all the
sections that will be combined to form the menu. The menu sections are combined
from bottom to top (for example, system sections such as 'Edit' go at the
bottom of the menu while context sections such as 'Open' go at the top of
the menu). A menu bar is defined as follows:
       </p>
       <pre class="codeblock" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-7E4BF634-13E9-4343-BB80-ACAFCF8D3A86">
        <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-7E4BF634-13E9-4343-BB80-ACAFCF8D3A86">
         <!-- -->
        </a>
        RESOURCE MENU_BAR r_menuapp_menu_bar
    {
    titles =
        {
        MENU_TITLE { menu_pane = r_system_menu; },
        MENU_TITLE { menu_pane = r_app_menu; },
        MENU_TITLE { menu_pane = r_view1_options_menu; },
        MENU_TITLE { menu_pane = r_context1_menu; }
        };
    }
       </pre>
       <p>
        The default
        <span class="parmname">
         MENU_BAR
        </span>
        resource is declared in
        <a href="Chunk67303057.html">
         <span class="parmname">
          EIK_APP_INFO
         </span>
        </a>
        or
        <a href="Chunk940315410.html">
         <span class="parmname">
          AVKON_VIEW
         </span>
        </a>
       </p>
      </div>
      <div class="section" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-4527D821-6960-4E18-B880-FC19BE5320F3">
       <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-4527D821-6960-4E18-B880-FC19BE5320F3">
        <!-- -->
       </a>
       <h2 class="sectiontitle">
        Changing menu
sections
       </h2>
       <p>
        You can use the following method to change the
        <span class="parmname">
         MENU_BAR
        </span>
        resource
that is used by the application to change the menu sections at any time within
the application:
       </p>
       <pre class="codeblock" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-17796D02-EF20-40EB-80C1-365B58FDC1C3">
        <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-17796D02-EF20-40EB-80C1-365B58FDC1C3">
         <!-- -->
        </a>
        iEikonEnv-&gt;AppUiFactory()-&gt;MenuBar()-&gt;
   SetMenuTitleResourceId(MENU_BAR_RESOURCE_ID);
       </pre>
       <p>
        This sets the whole menu bar and should be performed every time one
of the sections needs to change its contents. Therefore, you should define
as many
        <span class="parmname">
         MENU_BAR
        </span>
        resources as there are possible combinations
of menu sections. That is, a menu bar should be defined for each combination
of view and context options. Note also that if view architecture is used,
and the view’s own menu system is in use, it is this menu bar’s contents that
need switching, as follows:
       </p>
       <pre class="codeblock" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-C2F22032-2AF7-41CB-872A-7388DDA23F94">
        <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-C2F22032-2AF7-41CB-872A-7388DDA23F94">
         <!-- -->
        </a>
        iMyView-&gt;MenuBar()-&gt;
     SetMenuTitleResourceId(MENU_BAR_RESOURCE_ID);
       </pre>
      </div>
      <div class="section" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-73295F48-5E72-48E9-9F0E-5091A8C73B12">
       <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-73295F48-5E72-48E9-9F0E-5091A8C73B12">
        <!-- -->
       </a>
       <h2 class="sectiontitle">
        Changing menu
items in menu sections
       </h2>
       <p>
        Individual menu items in a menu section may be changed whenever the
menu is displayed. This allows the application to show and hide (or remove
and add) menu items in response to the application state. In the
        <a href="Chunk4277929.html">
         traditional
Symbian OS UI architecture
        </a>
        , you should override
        <a href="jar:GUID-35228542-8C95-4849-A73F-2B4F082F0C44.jar!/sdk/doc_source/reference/reference-cpp/UIKON/MEikAutoMenuObserverClass.html#%3a%3aMEikAutoMenuObserver%3a%3aDynInitMenuPaneL%28%29">
         <span class="parmname">
          MEikAutoMenuObserver::DynInitMenuPaneL()
         </span>
        </a>
        in the UI
controller. In the
        <a href="Chunk770996938.html">
         View
architecture
        </a>
        , you should override
        <span class="parmname">
         MEikAutoMenuObserver::DynInitMenuPaneL()
        </span>
        in
the view controller. An example of such an override is as follows:
       </p>
       <pre class="codeblock" id="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-D8991DA2-0FE2-4904-A202-8254EF294D50">
        <a name="GUID-48363190-6FFB-4230-84B4-2E521EA51365__GUID-D8991DA2-0FE2-4904-A202-8254EF294D50">
         <!-- -->
        </a>
        void CMyAppUi::DynInitMenuPaneL(TInt aResourceId, 
    CEikMenuPane* aMenuPane)
    {
    if(aResourceId != R_SYSTEM_MENU_PANE)
        return; // in this example only interest in system
                // pane

    // First hide all
    aMenuPane-&gt;SetItemDimmed(ECmdCut, ETrue);
    aMenuPane-&gt;SetItemDimmed(ECmdCopy, ETrue);
    aMenuPane-&gt;SetItemDimmed(ECmdPaste, ETrue);

    // Show according to application state
    if(...)
        {
        aMenuPane-&gt;SetItemDimmed(ECmdCut, EFalse);
        aMenuPane-&gt;SetItemDimmed(ECmdCopy, EFalse);    
        }
    else
        {
        aMenuPane-&gt;SetItemDimmed(ECmdPaste, EFalse);
        }
    }
       </pre>
       <p>
        This method is called by the framework after each of the sections has
been added to the menu, and is called with the resource ID of the section
that has just been added and the menu pane object that is being built.
       </p>
       <p>
        You can also override
        <a href="jar:GUID-35228542-8C95-4849-A73F-2B4F082F0C44.jar!/sdk/doc_source/reference/reference-cpp/UIKON/MEikAutoMenuObserverClass.html#%3a%3aMEikAutoMenuObserver%3a%3aDynInitMenuBarL%28%29">
         <span class="parmname">
          MEikAutoMenuObserver::DynInitMenuBarL(TInt aResourceId, CEikMenuBar* aMenuBar)
         </span>
        </a>
        in
the
        <a href="Chunk2001934742.html#GUID-FD2CDEB8-0784-4BE5-A775-170F57D71BBC__GUID-FD2CDEB8-0784-4BE5-A775-170F57D71BBC">
         UI
controller
        </a>
        or
        <a href="Chunk296039591.html#GUID-DAC32BB9-C0EB-42FF-A596-C2F1A90A4BD7__GUID-DAC32BB9-C0EB-42FF-A596-C2F1A90A4BD7">
         view
controller
        </a>
        , depending on your UI architecture. This gets called before
any sections are added to the menu, and can be used to dynamically change
the sections that will be added to the menu. This could be used to change
the resource ID of the context menu section for a certain application state.
       </p>
      </div>
     </div>
     <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
    </div>
   </div>
   <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
  </div>
 </body>
</html>