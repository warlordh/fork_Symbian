<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="cxxClass" />
  <meta name="DC.Title" content="MPresenceCacheReader2" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-92458533-867C-3008-AC39-28EC41DA3FD8" />
  <title>
   MPresenceCacheReader2
  </title>
   <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <meta name="keywords" content="api" />
  <link rel="stylesheet" type="text/css" href="cxxref.css" />
 </head>
 <body class="cxxref" id="GUID-92458533-867C-3008-AC39-28EC41DA3FD8">
  <a name="GUID-92458533-867C-3008-AC39-28EC41DA3FD8">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2518338 id2518347 id2518392 id2518473 id2518478 id2519790 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
    <div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     MPresenceCacheReader2 Class Reference
    </h1>
    <table class="signature">
     <tr>
      <td>
       class MPresenceCacheReader2
      </td>
     </tr>
    </table>
    <div class="section">
     <div>
      <p>
       Interface for presence cache reader API. This interface is implemented by the Presence Cache client. Notice that an xsp id is in the form ovi:
       <a href="mailto:xyz@example.com">
        mailto:xyz@example.com
       </a>
      </p>
      <div class="p">
       <dl class="since">
        <dt class="dlterm">
         Since
        </dt>
        <dd>
         S60 v5.1
        </dd>
       </dl>
      </div>
     </div>
    </div>
    <div class="section member-index">
     <table border="0" class="member-index">
      <thead>
       <tr>
        <th colspan="2">
         Public Member Functions
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td align="right" class="code">
        </td>
        <td>
         <a href="#GUID-9DBE1BFD-78C1-3193-8CBC-D7E63F3CDDB5">
          ~MPresenceCacheReader2
         </a>
         ()
        </td>
       </tr>
       <tr class="bg">
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-971281F0-A1CA-3BF5-9EF4-D889DA72398E">
          AllBuddiesPresenceInService
         </a>
         (const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp;,
         <a href="GUID-1356D561-5F4C-3570-9311-397C6DFFA722.html">
          MPresenceCacheReadHandler2
         </a>
         *)
        </td>
       </tr>
       <tr>
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-D35684A3-1209-342B-B9D0-2EBB213D2119">
          BuddyCountInAllServices
         </a>
         ()
        </td>
       </tr>
       <tr class="bg">
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-A708DFC2-63A0-3A16-B482-8178541DEE0A">
          BuddyCountInService
         </a>
         (const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp;)
        </td>
       </tr>
       <tr>
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-6827E91D-F8D9-39DE-9A96-81079AB81850">
          CancelRead
         </a>
         ()
        </td>
       </tr>
       <tr class="bg">
        <td align="right" class="code">
         IMPORT_C
         <a href="GUID-92458533-867C-3008-AC39-28EC41DA3FD8.html">
          MPresenceCacheReader2
         </a>
         *
        </td>
        <td>
         <a href="#GUID-C27D3618-DCD0-3096-9011-F1DF0B835D1C">
          CreateReaderL
         </a>
         ()
        </td>
       </tr>
       <tr>
        <td align="right" class="code">
         <a href="GUID-F2D3E57D-5ED3-3017-AE40-A95045E5FA64.html">
          MPresenceBuddyInfo2
         </a>
         *
        </td>
        <td>
         <a href="#GUID-3DEAB34F-1328-3899-914E-77F183667109">
          PresenceInfoLC
         </a>
         (const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp;)
        </td>
       </tr>
       <tr class="bg">
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-AD0BCEE9-A40C-387C-84F8-8E2EC9948B02">
          ServicesCount
         </a>
         ()
        </td>
       </tr>
       <tr>
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-7FF33F2A-6D66-391F-A890-68FC0973B9E9">
          SetObserverForSubscribedNotifications
         </a>
         (
         <a href="GUID-1356D561-5F4C-3570-9311-397C6DFFA722.html">
          MPresenceCacheReadHandler2
         </a>
         *)
        </td>
       </tr>
       <tr class="bg">
        <td align="right" class="code">
         <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
          TInt
         </a>
        </td>
        <td>
         <a href="#GUID-2591637B-0978-3883-827E-E0BEF93E940D">
          SubscribePresenceBuddyChangeL
         </a>
         (const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp;)
        </td>
       </tr>
       <tr>
        <td align="right" class="code">
         void
        </td>
        <td>
         <a href="#GUID-97AF5006-EA54-3FE5-AA55-DA2CB881488D">
          UnSubscribePresenceBuddyChangeL
         </a>
         (const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp;)
        </td>
       </tr>
      </tbody>
     </table>
    </div>
    <h1 class="pageHeading topictitle1">
     Constructor &amp; Destructor Documentation
    </h1>
    <div class="nested1" id="GUID-9DBE1BFD-78C1-3193-8CBC-D7E63F3CDDB5">
     <a name="GUID-9DBE1BFD-78C1-3193-8CBC-D7E63F3CDDB5">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      ~MPresenceCacheReader2()
     </h2>
     <table class="signature">
      <tr>
       <td>
        ~MPresenceCacheReader2
       </td>
       <td>
        (
       </td>
       <td>
        )
       </td>
       <td>
        [inline, virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Public destructor. Objects can be deleted through this interface.
       </p>
      </div>
     </div>
    </div>
    <h1 class="pageHeading topictitle1">
     Member Functions Documentation
    </h1>
    <div class="nested1" id="GUID-971281F0-A1CA-3BF5-9EF4-D889DA72398E">
     <a name="GUID-971281F0-A1CA-3BF5-9EF4-D889DA72398E">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      AllBuddiesPresenceInService(const TDesC &amp;, MPresenceCacheReadHandler2 *)
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        AllBuddiesPresenceInService
       </td>
       <td>
        (
       </td>
       <td>
        const
        <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
         TDesC
        </a>
        &amp;
       </td>
       <td>
        aServiceName,
       </td>
      </tr>
      <tr>
       <td colspan="3">
       </td>
       <td>
        <a href="GUID-1356D561-5F4C-3570-9311-397C6DFFA722.html">
         MPresenceCacheReadHandler2
        </a>
        *
       </td>
       <td>
        aHandler
       </td>
      </tr>
      <tr>
       <td colspan="2">
       </td>
       <td>
        )
       </td>
       <td colspan="2">
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Reads all presence info from cache for a given service. Returns in MPresenceCacheReadHandler2's HandlePresenceReadL.
       </p>
       <p>
       </p>
      </div>
     </div>
     <div class="section parameters">
      <h3 class="sectiontitle">
       Parameters
      </h3>
      <table border="0" class="parameters">
       <tr>
        <td class="parameter">
         const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp; aServiceName
        </td>
        <td>
         Service name to search from
        </td>
       </tr>
       <tr class="bg">
        <td class="parameter">
         <a href="GUID-1356D561-5F4C-3570-9311-397C6DFFA722.html">
          MPresenceCacheReadHandler2
         </a>
         * aHandler
        </td>
        <td>
         to handle async. callback
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="nested1" id="GUID-D35684A3-1209-342B-B9D0-2EBB213D2119">
     <a name="GUID-D35684A3-1209-342B-B9D0-2EBB213D2119">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      BuddyCountInAllServices()
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        BuddyCountInAllServices
       </td>
       <td>
        (
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Returns total number of buddies stored in presence cache. It includes all services, probably useful while deciding performance overheads or informing to the user.
       </p>
       <p>
       </p>
      </div>
     </div>
    </div>
    <div class="nested1" id="GUID-A708DFC2-63A0-3A16-B482-8178541DEE0A">
     <a name="GUID-A708DFC2-63A0-3A16-B482-8178541DEE0A">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      BuddyCountInService(const TDesC &amp;)
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        BuddyCountInService
       </td>
       <td>
        (
       </td>
       <td>
        const
        <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
         TDesC
        </a>
        &amp;
       </td>
       <td>
        aServiceName
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Returns total number of buddies (presence infos) stored in a specific service in presence cache. It includes only the given service.
       </p>
       <p>
       </p>
      </div>
     </div>
     <div class="section parameters">
      <h3 class="sectiontitle">
       Parameters
      </h3>
      <table border="0" class="parameters">
       <tr>
        <td class="parameter">
         const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp; aServiceName
        </td>
        <td>
         as in device's service table
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="nested1" id="GUID-6827E91D-F8D9-39DE-9A96-81079AB81850">
     <a name="GUID-6827E91D-F8D9-39DE-9A96-81079AB81850">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      CancelRead()
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        CancelRead
       </td>
       <td>
        (
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Cancels any async. read operation going on. After calling this method no callback will be received from asycn read method.
       </p>
       <p>
       </p>
      </div>
     </div>
    </div>
    <div class="nested1" id="GUID-C27D3618-DCD0-3096-9011-F1DF0B835D1C">
     <a name="GUID-C27D3618-DCD0-3096-9011-F1DF0B835D1C">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      CreateReaderL()
     </h2>
     <table class="signature">
      <tr>
       <td>
        IMPORT_C
        <a href="GUID-92458533-867C-3008-AC39-28EC41DA3FD8.html">
         MPresenceCacheReader2
        </a>
        *
       </td>
       <td>
        CreateReaderL
       </td>
       <td>
        (
       </td>
       <td>
        )
       </td>
       <td>
        [static]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Factory method to instantiate MPresenceCacheReader.
       </p>
       <p>
       </p>
      </div>
     </div>
    </div>
    <div class="nested1" id="GUID-3DEAB34F-1328-3899-914E-77F183667109">
     <a name="GUID-3DEAB34F-1328-3899-914E-77F183667109">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      PresenceInfoLC(const TDesC &amp;)
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-F2D3E57D-5ED3-3017-AE40-A95045E5FA64.html">
         MPresenceBuddyInfo2
        </a>
        *
       </td>
       <td>
        PresenceInfoLC
       </td>
       <td>
        (
       </td>
       <td>
        const
        <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
         TDesC
        </a>
        &amp;
       </td>
       <td>
        aIdentity
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Reads presence info from cache for a given identity, returns immediately.
       </p>
       <p>
       </p>
      </div>
     </div>
     <div class="section parameters">
      <h3 class="sectiontitle">
       Parameters
      </h3>
      <table border="0" class="parameters">
       <tr>
        <td class="parameter">
         const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp; aIdentity
        </td>
        <td>
         buddy id, identity must be in xsp id format
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="nested1" id="GUID-AD0BCEE9-A40C-387C-84F8-8E2EC9948B02">
     <a name="GUID-AD0BCEE9-A40C-387C-84F8-8E2EC9948B02">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      ServicesCount()
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        ServicesCount
       </td>
       <td>
        (
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Returns total number services in presence cache.
       </p>
       <p>
       </p>
      </div>
     </div>
    </div>
    <div class="nested1" id="GUID-7FF33F2A-6D66-391F-A890-68FC0973B9E9">
     <a name="GUID-7FF33F2A-6D66-391F-A890-68FC0973B9E9">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      SetObserverForSubscribedNotifications(MPresenceCacheReadHandler2 *)
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        SetObserverForSubscribedNotifications
       </td>
       <td>
        (
       </td>
       <td>
        <a href="GUID-1356D561-5F4C-3570-9311-397C6DFFA722.html">
         MPresenceCacheReadHandler2
        </a>
        *
       </td>
       <td>
        aHandler
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Sets the observer to receive Presence Buddy Change notifications. Observer must be set before using SubscribePresenceBuddyChangeL. If client changes the observer using this method, all the notifications related to existing and new subscriptions will be delivered to the new observer.
       </p>
       <p>
       </p>
      </div>
     </div>
     <div class="section parameters">
      <h3 class="sectiontitle">
       Parameters
      </h3>
      <table border="0" class="parameters">
       <tr>
        <td class="parameter">
         <a href="GUID-1356D561-5F4C-3570-9311-397C6DFFA722.html">
          MPresenceCacheReadHandler2
         </a>
         * aHandler
        </td>
        <td>
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="nested1" id="GUID-2591637B-0978-3883-827E-E0BEF93E940D">
     <a name="GUID-2591637B-0978-3883-827E-E0BEF93E940D">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      SubscribePresenceBuddyChangeL(const TDesC &amp;)
     </h2>
     <table class="signature">
      <tr>
       <td>
        <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">
         TInt
        </a>
       </td>
       <td>
        SubscribePresenceBuddyChangeL
       </td>
       <td>
        (
       </td>
       <td>
        const
        <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
         TDesC
        </a>
        &amp;
       </td>
       <td>
        aIdentity
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Subscribe for given presence buddy's change in presence. An observer must be set before using this method by SetObserverForSubscribedNotifications. Notifcations are delivered through MPresenceCacheReadHandler2's HandlePresenceNotificationL
       </p>
       <div class="p">
        <dl class="user">
         <dt class="dlterm">
          <strong>
           leave
          </strong>
         </dt>
         <dd>
          Only in system error cases e.g. if failed to allocate memory.
         </dd>
        </dl>
       </div>
      </div>
     </div>
     <div class="section parameters">
      <h3 class="sectiontitle">
       Parameters
      </h3>
      <table border="0" class="parameters">
       <tr>
        <td class="parameter">
         const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp; aIdentity
        </td>
        <td>
         buddy id, identity must be in xsp id format
        </td>
       </tr>
      </table>
     </div>
    </div>
    <div class="nested1" id="GUID-97AF5006-EA54-3FE5-AA55-DA2CB881488D">
     <a name="GUID-97AF5006-EA54-3FE5-AA55-DA2CB881488D">
      <!-- -->
     </a>
     <h2 class="topictitle2">
      UnSubscribePresenceBuddyChangeL(const TDesC &amp;)
     </h2>
     <table class="signature">
      <tr>
       <td>
        void
       </td>
       <td>
        UnSubscribePresenceBuddyChangeL
       </td>
       <td>
        (
       </td>
       <td>
        const
        <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
         TDesC
        </a>
        &amp;
       </td>
       <td>
        aIdentity
       </td>
       <td>
        )
       </td>
       <td>
        [pure virtual]
       </td>
      </tr>
     </table>
     <div class="section">
      <div>
       <p>
        Unsubscribe for given presence buddy's change in presence. The request is ignored if invalid.
       </p>
       <div class="p">
        <dl class="user">
         <dt class="dlterm">
          <strong>
           leave
          </strong>
         </dt>
         <dd>
          Only in system error cases e.g. if failed to allocate memory.
         </dd>
        </dl>
       </div>
      </div>
     </div>
     <div class="section parameters">
      <h3 class="sectiontitle">
       Parameters
      </h3>
      <table border="0" class="parameters">
       <tr>
        <td class="parameter">
         const
         <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">
          TDesC
         </a>
         &amp; aIdentity
        </td>
        <td>
         buddy id, identity must be in xsp id format
        </td>
       </tr>
      </table>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>