<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Index" />
  <meta name="DC.Relation" scheme="URI" content="GUID-5CFA3F21-3E42-5B53-8EC1-BC0F7F0E8136.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-B394A824-8745-505E-8429-8B9B6D418387.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-44CF5471-564E-5790-935B-51193A4978D6.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-5CFA3F21-3E42-5B53-8EC1-BC0F7F0E8136.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Index
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107">
  <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2403699 id2403748 id2403786 id2403800 id2403890 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">
      Messaging Middleware Guide
     </a>
     &gt;
     <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">
      Messaging Framework
     </a>
     &gt;
     <a href="GUID-B394A824-8745-505E-8429-8B9B6D418387.html">
      Message Server and Store
     </a>
     &gt;
     <a href="GUID-44CF5471-564E-5790-935B-51193A4978D6.html" title="This section lists the concepts that are related to Message Server and Store.">
      Message Server and Store Concepts
     </a>
     &gt;
     <a href="GUID-5CFA3F21-3E42-5B53-8EC1-BC0F7F0E8136.html">
      Storage of Messages
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Index
    </h1>
    <div>
     <p>
      Messaging Server maintains an index entry in memory. A copy of the index
entry of all message types is stored in the SQL database, so that it can be
restored in the event of a system reset or Messaging Server failure.
     </p>
     <p>
      Some fields only apply to particular types of entry (such as messages or
services); other fields can be interpreted differently for different entry
types.
     </p>
     <div class="section" id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-10265557-F31B-50B3-A955-A548A5A78D7B">
      <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-10265557-F31B-50B3-A955-A548A5A78D7B">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Operating with
the SQL database
      </h2>
      <p>
       The SQL database is used to store each
       <a href="GUID-5A23B804-2C06-3407-9D48-1BFB212D699F.html">
        <span class="apiname">
         TMsvEntry
        </span>
       </a>
       (index
entry) as a row of an SQL table in the SQL database. It caches entries, and
maintains the most recently accessed entries in the RAM. Entries are cached
in the RAM, and are loaded only when required. The RAM usage is controlled
by emptying the oldest entry in the cache when it is full. For more information
on caching, see
       <a href="GUID-2FAB8281-569A-52BE-8BC8-A2D378068706.html">
        Caching
       </a>
       .
The following illustration shows the architecture of the Message Server with
the SQL database.
      </p>
      <div class="fignone" id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-57F87249-8F4F-59B4-902C-2A577A120F1A">
       <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-57F87249-8F4F-59B4-902C-2A577A120F1A">
        <!-- -->
       </a>
       <span class="figcap">
        Figure 1.               Message Server architecture with the SQL database
       </span>
       <img src="GUID-38089CC3-D969-5501-9FDA-BB0369D5D6A9_d0e285101_href.png" />
      </div>
      <div class="note">
       <span class="notetitle">
        Note:
       </span>
       Write operations like updating, creating and deleting entries
require disk operation to retrieve
       <a href="GUID-5A23B804-2C06-3407-9D48-1BFB212D699F.html">
        <span class="apiname">
         TMsvEntry
        </span>
       </a>
       from database,
because the entry cache is always in synchronisation with the corresponding
entry in the database.
      </div>
      <p>
       <strong>
        Advantages
       </strong>
      </p>
      <p>
       The following are
the advantages of using the SQL database to store index entries:
      </p>
      <ul>
       <li id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-49050952-7EB4-52A9-BEB3-0D1F467BFD42">
        <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-49050952-7EB4-52A9-BEB3-0D1F467BFD42">
         <!-- -->
        </a>
        <p>
         Reduces the amount of
RAM used by messaging, as the message the index file is not used.
        </p>
       </li>
       <li id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-AE0A5FA5-4588-5C28-A261-8ADD8917D56B">
        <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-AE0A5FA5-4588-5C28-A261-8ADD8917D56B">
         <!-- -->
        </a>
        <p>
         Enables more messages
to be stored on the device, as the number of messages stored is not restricted
to the amount of RAM available to store the message index file.
        </p>
       </li>
       <li id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-565D30B2-9249-5C9D-9DFD-B67C83BFAC35">
        <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-565D30B2-9249-5C9D-9DFD-B67C83BFAC35">
         <!-- -->
        </a>
        <p>
         Enables controlled usage
of RAM, as index entries are loaded on a need basis.
        </p>
       </li>
       <li id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-E5CC0C68-A23F-5F99-BFBB-1AD1A3775454">
        <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-E5CC0C68-A23F-5F99-BFBB-1AD1A3775454">
         <!-- -->
        </a>
        <p>
         Eliminates the possibility
of the message index file getting damaged and messages stored on the device
getting deleted.
        </p>
       </li>
       <li id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-148420E8-C23D-5678-8870-B8AA1CD8ED15">
        <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-148420E8-C23D-5678-8870-B8AA1CD8ED15">
         <!-- -->
        </a>
        <p>
         Provides advanced search
and sort capabilities for searching messages.
        </p>
       </li>
       <li id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-0E1A2485-A90C-565B-B927-487EE3FB7E4C">
        <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-0E1A2485-A90C-565B-B927-487EE3FB7E4C">
         <!-- -->
        </a>
        <p>
         Accesses and manages
message entries on one or more drives at the same time.
        </p>
       </li>
      </ul>
     </div>
     <div class="section" id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-887B217A-0344-5764-800A-CD31481B1493">
      <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-887B217A-0344-5764-800A-CD31481B1493">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Index fields
      </h2>
      <p>
       The
following information is stored for each index entry. Some fields only apply
to particular types of entry, such as, messages or services; other fields
can be interpreted differently for different entry types.
      </p>
      <div class="tablenoborder">
       <a name="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-B0A760AE-DD82-56E5-A826-7AA0D4F522CD">
        <!-- -->
       </a>
       <table cellpadding="4" cellspacing="0" summary="" id="GUID-5E8AA6B6-38EB-5347-BA30-F9FF4BF7C107__GUID-B0A760AE-DD82-56E5-A826-7AA0D4F522CD" frame="border" border="1" rules="all">
        <tbody>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Attachment flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates that the message has an attachment
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            BIO
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            <a href="GUID-17DE7D55-00C9-5D40-8AE4-39BDB20FCC5B.html">
             BIO message
            </a>
            type
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Complete flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates that the message is complete (for example download has
completed.
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Connected flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            For a service: indicates whether it is currently connected to a
remote server
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Deleted flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates that the entry has been deleted. The entry is not removed
until any PC synchronisation tools have been informed of the deletion.
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Description
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            A text string, usually giving the subject of the message
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Details
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            A text string, as follows:
           </p>
           <p>
            Message: For received messages,
this is the sender; for outgoing messages, it is the recipient
           </p>
           <p>
            Attachment:
The name of the attachment
           </p>
           <p>
            Folder: The name of the folder
           </p>
           <p>
            Service:
The name of the service
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Error
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            A system-wide or MTM-specific error code
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Use
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Failed flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            For an outgoing message: indicates that sending failed
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Identifier
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            An integer that uniquely identifies the entry in the Index
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            In preparation
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Entry deleted if server restarts
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            MTM
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            A unique identifier specifying the MTM associated with the entry
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            MTM Data
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Three integer fields for MTM-specific use
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Multiple Recipients flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates the message has multiple recipients that require separate
transmissions (for example, a fax going to two people)
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            New flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates a new message in a folder
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Owner flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates that the entry owns other entries (that it is a parent)
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Parent
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            An integer giving the identifier of the entry’s parent
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Priority
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            An integer giving the message priority
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Read flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates that a message has been read
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Read Only flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates that the entry is read-only
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Related folder
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            The identifier of a target folder for copying or moving entries
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Sending state
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Describes the state the message is in, for example "Sending", "Failed"
and "Sent"
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Service
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            The identifier of the service by which the message is to be sent
or from which it was received
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Size
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            An integer giving the size of the message
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Standard Folder flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Identifies standard folders so that they can be properly sorted
and stops them being changed/deleted
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Time
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            The time when the message was last edited, sent, or received. Includes
date.
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Type
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            A unique identifier giving the type (service, folder, message, and
attachment) of the entry
           </p>
          </td>
         </tr>
         <tr>
          <td class="cellrowborder" valign="top">
           <p>
            Visibility flag
           </p>
          </td>
          <td class="cellrowborder" valign="top">
           <p>
            Indicates the intended visibility of the entry to users of message
client applications
           </p>
          </td>
         </tr>
        </tbody>
       </table>
      </div>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-5CFA3F21-3E42-5B53-8EC1-BC0F7F0E8136.html">
        Storage of Messages
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>