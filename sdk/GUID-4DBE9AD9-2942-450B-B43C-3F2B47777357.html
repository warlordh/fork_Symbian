<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="reference" />
  <meta name="DC.Title" content="Scaling Channel Data Values" />
  <meta name="abstract" content="The value of a channel data item can represent the actual or relative value of the measured quantity. The relative value is a scaled value that lies within the maximum and minimum values of the measured quantity." />
  <meta name="description" content="The value of a channel data item can represent the actual or relative value of the measured quantity. The relative value is a scaled value that lies within the maximum and minimum values of the measured quantity." />
  <meta name="DC.Relation" scheme="URI" content="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-E3ADCC42-ACFC-49FC-88FF-8196CE61014B.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-4DBE9AD9-2942-450B-B43C-3F2B47777357" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Scaling Channel Data Values
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-4DBE9AD9-2942-450B-B43C-3F2B47777357">
  <a name="GUID-4DBE9AD9-2942-450B-B43C-3F2B47777357">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2838663 id2839278 id2839334 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html">
      Device Services Guide
     </a>
     &gt;
     <a href="GUID-E3ADCC42-ACFC-49FC-88FF-8196CE61014B.html" title="The Sensors Services collection provides Sensors Framework, which allows clients to request and receive sensor information from the different sensors on a device.">
      Sensor Services
     </a>
     &gt;
     <a href="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html" title="Sensors Framework provides a framework for creating plug-ins and connecting client applications with the sensor hardware.">
      Sensors Framework
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Scaling
Channel Data Values
    </h1>
    <div>
     <p>
      The value of a channel data item can represent the actual or relative
value of the measured quantity. The relative value is a scaled value that
lies within the maximum and minimum values of the measured quantity.
     </p>
     <div class="section" id="GUID-4DBE9AD9-2942-450B-B43C-3F2B47777357__GUID-D46EE015-C2B6-44AA-B021-F6AC1BB76F02">
      <a name="GUID-4DBE9AD9-2942-450B-B43C-3F2B47777357__GUID-D46EE015-C2B6-44AA-B021-F6AC1BB76F02">
       <!-- -->
      </a>
      <p>
       The
       <samp class="codeph">
        KSensrvPropIdChannelDataFormat
       </samp>
       property
defines if channel data items are in a scaled format. For scaled data items,
the
       <samp class="codeph">
        KSensrvPropIdScaledRange
       </samp>
       property defines range of the
data item value and the
       <samp class="codeph">
        KSensrvPropIdMeasureRange
       </samp>
       property
defines range of the measured quantity.
      </p>
     </div>
     <div class="example">
      <p>
       The following example explains how the sensor data can be scaled
by reading the maximum value of measure range for data items (
       <samp class="codeph">
        KSensrvPropIdScaledRange
       </samp>
       )
and the maximum value of the measured quantity (
       <samp class="codeph">
        KSensrvPropIdMeasureRange
       </samp>
       ).
The example considers that the
       <samp class="codeph">
        KSensrvPropIdMeasureRange
       </samp>
       property
is defined as an array property.
      </p>
      <pre class="codeblock">
       TSensrvProperty property;
    TInt  channelDataFormat( ESensrvFormatAbsolute );
    TInt  channelDataScaledRange( 1 );
    TReal channelDataMeasureRangeMaxValue( 1 );

    //Read channel data format
    iSensorChannel-&gt;GetPropertyL( KSensrvPropIdChannelDataFormat, KSensrvItemIndexNone, property );
    property.GetValue( channelDataFormat );

    if( ESensrvFormatScaled == channelDataFormat )
        {
        //Read data item scaled range
        iSensorChannel-&gt;GetPropertyL( KSensrvPropIdScaledRange, KSensrvItemIndexNone, property );
        property.GetMaxValue( channelDataScaledRange );

        //Read data item measure range
        iSensorChannel-&gt;GetPropertyL( KSensrvPropIdMeasureRange, KSensrvItemIndexNone, property );

        if( ESensrvArrayPropertyInfo == property.GetArrayIndex() )
            {
            TInt arrayIndex( 0 );
            property.GetValue( arrayIndex );//Value points to array index currently in use
            iSensorChannel-&gt;GetPropertyL( KSensrvPropIdMeasureRange,
                                          KSensrvItemIndexNone,
                                          arrayIndex,
                                          property );
            }
        else
            {
            //Single property
            }
        property.GetMaxValue( channelDataMeasureRangeMaxValue );
        }
    else
        {
        //No scaling needed.
        //Value of the data item represents actual value of the measured quantity.
        }
      </pre>
      <p>
       You can convert the scaled channel data item value
to the absolute value by dividing the channel data item value with the maximum
value of scaled range of the channel and multiplying it with the maximum value
of the measured quantity.
      </p>
      <p>
       For example, if the accelerometer channel
provides the following properties:
      </p>
      <ul>
       <li>
        <p>
         <samp class="codeph">
          KSensrvPropIdChannelDataFormat
         </samp>
         with value
         <samp class="codeph">
          ESensrvFormatScaled
         </samp>
        </p>
       </li>
       <li>
        <p>
         <samp class="codeph">
          KSensrvPropIdScaledRange
         </samp>
         with maximum value of 127
        </p>
       </li>
       <li>
        <p>
         <samp class="codeph">
          KSensrvPropIdMeasureRange
         </samp>
         with maximum value of 2
g
        </p>
       </li>
       <li>
        <p>
         <samp class="codeph">
          KSensrvPropIdChannelUnit
         </samp>
         with value
         <samp class="codeph">
          ESensrvUnitGravityConstant
         </samp>
        </p>
       </li>
      </ul>
      <p>
       then the accelerometer channel data item value of 64 is equal to an
absolute value of 1.01g (that is, 64 / 127 * 2g = 1.01g).
      </p>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html" title="Sensors Framework provides a framework for creating plug-ins and connecting client applications with the sensor hardware.">
        Sensors Framework
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>