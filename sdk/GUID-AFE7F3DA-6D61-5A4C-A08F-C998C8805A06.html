<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="How the target Client is Resolved using CSIPResolvedClient2" />
  <meta name="DC.Relation" scheme="URI" content="GUID-A3D1684D-1DF1-5CAF-A0BB-A32685528596.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-057F1F82-56AF-5696-853E-79196A3D567E.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-A3D1684D-1DF1-5CAF-A0BB-A32685528596.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   How the target Client is Resolved using CSIPResolvedClient2
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06">
  <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2386636 id2386727 id2386930 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">
      Multimedia Protocols Guide
     </a>
     &gt;
     <a href="GUID-057F1F82-56AF-5696-853E-79196A3D567E.html">
      SIP
     </a>
     &gt;
     <a href="GUID-A3D1684D-1DF1-5CAF-A0BB-A32685528596.html">
      SIP Client Resolver API
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     How
the target Client is Resolved using CSIPResolvedClient2
    </h1>
    <div>
     <p>
      The SIP Client Resolver determines the target clients by comparing the
Request-URI of the incoming SIP request to the information stored in SIP Client
Resolver mapping table in the Central Repository. The information required
to access the map table in the Central Repository is defined in the
      <span class="filepath">
       sipclientresolverconfigcrkey.h
      </span>
      file.
The incoming SIP request compares with the Request-URIâ€™s user part in the
Central Repository mapping table.
     </p>
     <p>
      If a match is found, the related ECOM plug-in is loaded by its UID. The
loaded plug-in matches the incoming SIP requests based on their fields. If
the request matches, the plug-in returns the UID of the matching client. SIP
Client Resolver requests the resolved ECom plug-in to connect to the Symbian
platform server that uses SIP.
     </p>
     <p>
      The resource (
      <span class="filepath">
       .rss
      </span>
      ) file contains the information
in the Central Repository and also the following information:
     </p>
     <ul>
      <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-6CF8E2D5-5BF3-5E56-93BE-97A0D2054B0E">
       <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-6CF8E2D5-5BF3-5E56-93BE-97A0D2054B0E">
        <!-- -->
       </a>
       <p>
        <samp class="codeph">
         dll_uid
        </samp>
        and
        <samp class="codeph">
         implementation_uid
        </samp>
        :
These UIDs are obtained from
        <a href="http://www.symbiansigned.com" target="_blank">
         Symbian
Signed
        </a>
        .
       </p>
       <p>
        <strong>
         Note:
        </strong>
        Both these UIDs can be the same.
       </p>
      </li>
      <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-A2F95B01-F707-51D1-AD67-4EB364865C33">
       <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-A2F95B01-F707-51D1-AD67-4EB364865C33">
        <!-- -->
       </a>
       <p>
        The
        <samp class="codeph">
         interface_uid
        </samp>
        must
be
        <samp class="codeph">
         0x10282EE5
        </samp>
        .
       </p>
      </li>
     </ul>
     <div class="section" id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-D0D9C1C9-C0A1-4C4C-ACA6-14C23D651E38">
      <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-D0D9C1C9-C0A1-4C4C-ACA6-14C23D651E38">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Resolving the target client using CSIPResolvedClient2
      </h2>
      <p>
       The
following illustration shows how the SIP Client Resolver subsystem resolves
the target client implementing
       CSIPResolvedClient2
       and
requests the resolved client to connect to the SIP implementation.
      </p>
      <div class="fignone" id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-750221F0-A98E-5C47-B804-5A6CDD16B2E9">
       <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-750221F0-A98E-5C47-B804-5A6CDD16B2E9">
        <!-- -->
       </a>
       <span class="figcap">
        Figure 1.               Call flow of resolving a target client implementation
using              CSIPResolvedClient2
       </span>
       <img src="GUID-8EF8CDD3-9FFE-5C39-8303-67A661C67F6B_d0e344337_href.jpg" />
      </div>
      <p>
       The target clients must implement the
       CSIPResolvedClient2
       interface
to receive SIP requests including SIP dialogs and enable the client resolution
mechanism.
       <strong>
       </strong>
       <strong>
        Note
       </strong>
       : The channel UIDs must be unique across all
SIP clients. For example clients may use UIDs assigned for binaries.
      </p>
      <p>
       The
SIP stack uses the plug-ins that implement the
       CSIPResolvedClient2
       interface
as follows:
      </p>
      <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-E0C735BE-BBBD-533B-AB2B-59F8936060BA">
       <!-- -->
      </a>
      <ol id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-E0C735BE-BBBD-533B-AB2B-59F8936060BA">
       <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-7854B67A-2143-5EA4-949D-B3C96CA51866">
        <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-7854B67A-2143-5EA4-949D-B3C96CA51866">
         <!-- -->
        </a>
        <p>
         If the SIP request does
not contain an Accept-Contact-header, go to step 2. If it does, the SIP stack
calls
         <samp class="codeph">
          CSIPResolvedClient2::MatchAcceptContactsL
         </samp>
         for all the
plug-ins and applies the following logic:
        </p>
        <ul>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-E975B348-52DB-519A-9AC0-98821BA27E95">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-E975B348-52DB-519A-9AC0-98821BA27E95">
           <!-- -->
          </a>
          <p>
           If none of the clients
match, go to step 2
          </p>
         </li>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-99DB2FEE-470B-5E76-8183-AD2C0E1B6FF0">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-99DB2FEE-470B-5E76-8183-AD2C0E1B6FF0">
           <!-- -->
          </a>
          <p>
           If one of the client
match, the SIP request is sent to the matching client
          </p>
         </li>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-5F420FD9-2AEE-5517-A216-FA3868941902">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-5F420FD9-2AEE-5517-A216-FA3868941902">
           <!-- -->
          </a>
          <p>
           If more than one of
the clients match, go to step 2
          </p>
         </li>
        </ul>
       </li>
       <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-F28D6940-D404-5E0F-B52A-6A47980ADA68">
        <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-F28D6940-D404-5E0F-B52A-6A47980ADA68">
         <!-- -->
        </a>
        <p>
         If the SIP request does
not contain an Event-header go to step 3. If it does, the SIP stack calls
         <samp class="codeph">
          CSIPResolvedClient2::MatchEventL
         </samp>
         for
all the plug-ins and applies the following logic:
        </p>
        <ul>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-390E2FBC-305E-59C0-BE1F-E7C961B47251">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-390E2FBC-305E-59C0-BE1F-E7C961B47251">
           <!-- -->
          </a>
          <p>
           If none of the clients
match, go to step 3
          </p>
         </li>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-6A41D1A5-7636-51CC-864D-F2AB095D97E6">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-6A41D1A5-7636-51CC-864D-F2AB095D97E6">
           <!-- -->
          </a>
          <p>
           If one of the client
match, the SIP request is sent to the matching client
          </p>
         </li>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-8C51B40C-FC7B-566E-B56F-4279233C192E">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-8C51B40C-FC7B-566E-B56F-4279233C192E">
           <!-- -->
          </a>
          <p>
           If more than one of
the clients match, go to step 3
          </p>
         </li>
        </ul>
       </li>
       <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-9C094348-B7F4-572D-B49B-B99F81C902F2">
        <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-9C094348-B7F4-572D-B49B-B99F81C902F2">
         <!-- -->
        </a>
        <p>
         The SIP stack calls
         <samp class="codeph">
          CSIPResolvedClient2::MatchRequestL
         </samp>
         for
all the plug-ins and applies the following logic:
        </p>
        <ul>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-63351732-E32A-58BC-8F32-7BA3832788FD">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-63351732-E32A-58BC-8F32-7BA3832788FD">
           <!-- -->
          </a>
          <p>
           If none of the clients
match, the SIP generates an error response
          </p>
         </li>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-9E8765F8-A55F-5EA3-A63E-ACBF8A4BEF24">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-9E8765F8-A55F-5EA3-A63E-ACBF8A4BEF24">
           <!-- -->
          </a>
          <p>
           If one of the client
match, the SIP request is sent to the matching client
          </p>
         </li>
         <li id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-AE679FD1-163D-5F3B-ADE8-1C6AEF490552">
          <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-AE679FD1-163D-5F3B-ADE8-1C6AEF490552">
           <!-- -->
          </a>
          <p>
           If more than one of
the clients match, SIP selects one of these clients randomly and sends the
request to it. The ROM-based clients are preferred.
          </p>
         </li>
        </ul>
       </li>
      </ol>
     </div>
     <div class="section" id="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-026A9B43-E096-4D32-AC3B-2DDC7974FFF6">
      <a name="GUID-AFE7F3DA-6D61-5A4C-A08F-C998C8805A06__GUID-026A9B43-E096-4D32-AC3B-2DDC7974FFF6">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       See also
      </h2>
      <p>
       <a href="GUID-0D579DDC-0A8A-5CFA-8194-CAA955B65A57.html">
        Example
of a SIP Client Resolver Plug-in
       </a>
      </p>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-A3D1684D-1DF1-5CAF-A0BB-A32685528596.html">
        SIP Client Resolver API
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>