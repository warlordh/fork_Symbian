<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="How to implement a simple client interface" />
  <meta name="abstract" content="Provides code snippets to help you to implement a simple client interface." />
  <meta name="description" content="Provides code snippets to help you to implement a simple client interface." />
  <meta name="DC.Relation" scheme="URI" content="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   How to implement a simple client interface
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA">
  <a name="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2404579 id2404588 id2404596 id2405740 id2406019 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">
      Kernel and Hardware Services Guide
     </a>
     &gt;
     <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">
      User Library and File Server
     </a>
     &gt;
     <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">
      User Library
     </a>
     &gt;
     <a href="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html">
      Inter Process Communication
     </a>
     &gt;
     <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">
      Using Client-Server
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     How
to implement a simple client interface
    </h1>
    <div>
     <p>
      Provides code snippets to help you to implement a simple client
interface.
     </p>
     <div class="section" id="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-EE1BFD0F-EE55-47BA-A8FD-D753EC132255">
      <a name="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-EE1BFD0F-EE55-47BA-A8FD-D753EC132255">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Client side session with a server
      </h2>
      <p>
       A client side
session is represented by an instance of a class derived from
       <samp class="codeph">
        RSessionBase
       </samp>
       which
provides the behaviour for connecting to the server and sending messages to
it.
      </p>
      <p>
       In the following code fragment, taken from the example that can
be found at
       <span class="filepath">
        ...\examples\Base\IPC\ClientServer\simple
       </span>
       ,
the class
       <samp class="codeph">
        RCountServSession
       </samp>
       , derived from
       <samp class="codeph">
        RSessionBase
       </samp>
       ,
represents the client side session with a server. In the example, this may
be referred to as the "count server". Note that sessions can not be shared
in this example, and it just shows the basic mechanics of the client/server
interaction.
      </p>
      <pre class="codeblock" id="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-48AC1BF2-BA67-5959-A49A-AF57AC25E155">
       <a name="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-48AC1BF2-BA67-5959-A49A-AF57AC25E155">
        <!-- -->
       </a>
       class RCountServSession : public RSessionBase
    {
public:
    RCountServSession();
    TInt Connect();
    TVersion Version() const;
    TInt UnsupportedRequest();
    TInt SetFromString(const TDesC&amp; aString);
    void Increase();
    void Decrease();
    void IncreaseBy(TInt anInt);
    void DecreaseBy(TInt anInt);
    void Reset();
    TInt CounterValue();
    void BadRequest();
    void Close();
private:
    RThread iServerThread;
    };
      </pre>
      <p>
       The important points are:
      </p>
      <ul>
       <li id="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-B6AC51AC-91A3-5794-815A-292E308735F6">
        <a name="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-B6AC51AC-91A3-5794-815A-292E308735F6">
         <!-- -->
        </a>
        <p>
         Use
         <samp class="codeph">
          Connect()
         </samp>
         to
start the count server. This calls
         <samp class="codeph">
          RSessionBase::CreateSession()
         </samp>
         to
create a session with the server. Note that in this simple example, the server
is implemented as a separate thread, which is started by the example executable.
        </p>
       </li>
       <li id="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-EBDC7F23-8D2F-5093-8C32-50C3DE137EF5">
        <a name="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-EBDC7F23-8D2F-5093-8C32-50C3DE137EF5">
         <!-- -->
        </a>
        <p>
         Use a client interface
function, such as
         <samp class="codeph">
          Increase()
         </samp>
         , to send a specific message
to the server. The client interface function builds the message using the
appropriate operation code and assembling a suitable
         <a href="GUID-4AD02F14-1142-372F-9D11-224595932034.html">
          <span class="apiname">
           TIpcArgs
          </span>
         </a>
         object,
i.e. the object containing the integers and/or the descriptor pointers to
the message arguments in the client address space.
        </p>
       </li>
      </ul>
      <p>
       As an example, the function
       <samp class="codeph">
        SetFromString()
       </samp>
       is implemented
as follows:
      </p>
      <pre class="codeblock" id="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-A673A2A4-0999-5EDE-9FFB-E0C7335B58D9">
       <a name="GUID-579D7C32-B6C8-5C77-88A5-B3078729E1BA__GUID-A673A2A4-0999-5EDE-9FFB-E0C7335B58D9">
        <!-- -->
       </a>
       TInt RCountServSession::SetFromString(const TDesC&amp; aString)
    {
    TIpcArgs args(&amp;aString);
    return SendReceive(ECountServSetFromString, args);
    }
      </pre>
      <p>
       <samp class="codeph">
        SendReceive()
       </samp>
       is called, specifying
an operation code
       <samp class="codeph">
        ECountServSetFromString
       </samp>
       and a
       <a href="GUID-4AD02F14-1142-372F-9D11-224595932034.html">
        <span class="apiname">
         TIpcArgs
        </span>
       </a>
       object
containing argument values. In this case, there is only one argument - a pointer
to a
       <samp class="codeph">
        TDesC
       </samp>
       object containing the string to be passed to the
server. Typically, operation codes are enum values defined in a header file
visible to both the client interface and the server. Note that the client
descriptor must remain in existence until the server request completes.
      </p>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">
        Using Client-Server
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>