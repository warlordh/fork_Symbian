<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="How to retrieve drive and volume information" />
  <meta name="abstract" content="This topic describes how to retrieve drive and volume information." />
  <meta name="description" content="This topic describes how to retrieve drive and volume information." />
  <meta name="DC.Relation" scheme="URI" content="GUID-30B2AF3F-E120-5D47-AAA2-529555625B55.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-BB9760B4-4F3F-5326-81FB-B644C82F0E65.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-198DCED1-F429-5C95-A51D-53AE416687E8.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-30B2AF3F-E120-5D47-AAA2-529555625B55.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-D91DC379-947A-52CB-A154-7922AF334527" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   How to retrieve drive and volume information
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-D91DC379-947A-52CB-A154-7922AF334527">
  <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2404579 id2404588 id2402811 id2402826 id2402916 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-E3D2A6ED-8192-563D-8966-DD96B3AF1783.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">
      Kernel and Hardware Services Guide
     </a>
     &gt;
     <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">
      User Library and File Server
     </a>
     &gt;
     <a href="GUID-BB9760B4-4F3F-5326-81FB-B644C82F0E65.html" title="Symbian platform manages the basic permanent storage of data through file systems. Drives and file systems are common resources used by many programs, and access to them is managed by the File Server. The File Server is flexible, and can use many different file system formats and physical storage media. Applications and services access files, directories, and drives through the File Server client side API.">
      File Server
     </a>
     &gt;
     <a href="GUID-198DCED1-F429-5C95-A51D-53AE416687E8.html">
      File Server Client Side
     </a>
     &gt;
     <a href="GUID-30B2AF3F-E120-5D47-AAA2-529555625B55.html" title="This topic describes how to use file server sessions, files and directories effectively.">
      How To use sessions, files and directories
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     How
to retrieve drive and volume information
    </h1>
    <div>
     <p>
      This topic describes how to retrieve drive and volume information.
     </p>
     <p>
      The class
      <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">
       <span class="apiname">
        RFs
       </span>
      </a>
      provides a number of functions that extract
drive and volume information.
     </p>
     <p>
      The
      <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-23B14094-0526-5BB2-8CCB-E25558F452F4">
       FileSystemSubType()
      </a>
      function
returns the sub type of a drive. This information can be used to warn a user
if they try to use a volume that is not of the correct format.
     </p>
     <p>
      The volume information supplied by
      <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-35712294-BF6D-5ADF-A717-67B949F02EC3">
       VolumeIOParam()
      </a>
      is particularly useful as it allows you to get specific properties for a
volume. This includes the block size of the underlying media for read/write
operations, allowing your application to access data on the underlying media
in the most efficient way. For example:
     </p>
     <ul>
      <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-519C820E-DDF3-574C-9FF0-C16E805C38E4">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-519C820E-DDF3-574C-9FF0-C16E805C38E4">
        <!-- -->
       </a>
       <p>
        Applications that download
from a local or network connection to transfer files, for example, bluetooth
beaming, HTTP, FTP, may be able to improve their performance by knowing the
recommended block and cluster sizes.
       </p>
      </li>
      <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-555B3946-64CA-52BC-96AC-12034ACC0483">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-555B3946-64CA-52BC-96AC-12034ACC0483">
        <!-- -->
       </a>
       <p>
        For Multimedia source
data, reading in optimal sized blocks may help to achieve a consistent read
speed.
       </p>
      </li>
     </ul>
     <ul>
      <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-F9366D6D-E5CA-58EC-B28F-7219AB43F61A">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-F9366D6D-E5CA-58EC-B28F-7219AB43F61A">
        <!-- -->
       </a>
       <p>
        <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-83B63D4E-65E5-5DC6-8C4B-CD3A26165B6D">
         Drive information
        </a>
       </p>
       <ul>
        <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-3E51BA09-FB64-54C7-9FD6-F05E43FC9DB5">
         <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-3E51BA09-FB64-54C7-9FD6-F05E43FC9DB5">
          <!-- -->
         </a>
         <p>
          <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-BF5C8B94-7600-555F-B9F7-DFAE390B4EE3">
           DriveList()
          </a>
         </p>
        </li>
        <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-58D7E17C-9D24-551C-AD21-BA234395C0E5">
         <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-58D7E17C-9D24-551C-AD21-BA234395C0E5">
          <!-- -->
         </a>
         <p>
          <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-57F650DF-4144-586F-81E5-B1386202A27B">
           Drive()
          </a>
         </p>
        </li>
        <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-241A56DC-B1B5-57A7-8A03-11CC9F11D523">
         <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-241A56DC-B1B5-57A7-8A03-11CC9F11D523">
          <!-- -->
         </a>
         <p>
          <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-23B14094-0526-5BB2-8CCB-E25558F452F4">
           FileSystemSubType()
          </a>
         </p>
        </li>
       </ul>
      </li>
      <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-16335B02-EF2C-51C8-AC1E-8F596085D896">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-16335B02-EF2C-51C8-AC1E-8F596085D896">
        <!-- -->
       </a>
       <p>
        <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-43EFDCEC-A390-56F6-A4C0-A8150E188E05">
         Volume information
        </a>
       </p>
       <ul>
        <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-50F492F4-FBF5-50CA-A318-C7758C1999E1">
         <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-50F492F4-FBF5-50CA-A318-C7758C1999E1">
          <!-- -->
         </a>
         <p>
          <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8F14799F-6F60-5C64-AC8D-4083CE06E6A2">
           Volume()
          </a>
         </p>
        </li>
        <li id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-746C70D5-F301-5F99-B8B6-31E1AB1D42EE">
         <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-746C70D5-F301-5F99-B8B6-31E1AB1D42EE">
          <!-- -->
         </a>
         <p>
          <a href="GUID-D91DC379-947A-52CB-A154-7922AF334527.html#GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-35712294-BF6D-5ADF-A717-67B949F02EC3">
           VolumeIOParam()
          </a>
         </p>
        </li>
       </ul>
      </li>
     </ul>
     <div class="section" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-83B63D4E-65E5-5DC6-8C4B-CD3A26165B6D">
      <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-83B63D4E-65E5-5DC6-8C4B-CD3A26165B6D">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Drive information
      </h2>
      <p id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-BF5C8B94-7600-555F-B9F7-DFAE390B4EE3">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-BF5C8B94-7600-555F-B9F7-DFAE390B4EE3">
        <!-- -->
       </a>
       <strong>
        DriveList()
       </strong>
      </p>
      <p>
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-384A86BF-EB47-3525-9614-D474977AF991">
        <span class="apiname">
         RFs::DriveList()
        </span>
       </a>
       retrieves
an array of drives. The drive list consists of an array of 26 bytes. Array
index zero corresponds to drive A, one equals B and so on. If the value of
an array member is 1 the corresponding drive exists. If this drive is able
to contain removable media then use
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-51CDDF8D-3F18-398D-A477-B81948C10872">
        <span class="apiname">
         RFs::Drive
        </span>
       </a>
       to test
for its presence.
      </p>
      <p>
       The following code prints each drive in the drive
list as a letter, followed by the hex value of the integer indicating the
drive's attributes.
      </p>
      <pre class="codeblock" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-78C60DB6-8AA1-598C-80F8-98163898ED7D">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-78C60DB6-8AA1-598C-80F8-98163898ED7D">
        <!-- -->
       </a>
       TDriveList drivelist;
TChar driveLetter; 
TInt driveNumber; 
_LIT(KDrive,"%c: %02x ");

User::LeaveIfError(fsSession.DriveList(drivelist)); 
for(driveNumber=EDriveA;driveNumber&lt;=EDriveZ;driveNumber++) 
{ 
    if (drivelist[driveNumber]) 
    {
        User::LeaveIfError(fsSession.DriveToChar(driveNumber,driveLetter));
        console-&gt;Printf(KDrive, TUint(driveLetter), drivelist[driveNumber]); 
    }
}
      </pre>
      <p id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-57F650DF-4144-586F-81E5-B1386202A27B">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-57F650DF-4144-586F-81E5-B1386202A27B">
        <!-- -->
       </a>
       <strong>
        Drive()
       </strong>
      </p>
      <p>
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-BAB41D5B-A8B2-31D0-8A45-931112D1F5D3">
        <span class="apiname">
         RFs::Drive()
        </span>
       </a>
       retrieves
the attributes of the drive specified with
       <a href="GUID-4D883FA4-115C-3425-8A34-B00D1D4BBCF9.html">
        <span class="apiname">
         TDriveInfo
        </span>
       </a>
       .
The following example loops through all possible drives, a-z, and prints a
message if a drive is flash-based.
      </p>
      <pre class="codeblock" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8711C4BC-225A-5824-A920-09696CD59E06">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8711C4BC-225A-5824-A920-09696CD59E06">
        <!-- -->
       </a>
       TChar driveLetter; 
TDriveInfo driveInfo; 
TInt driveNumber;
_LIT(KFlash,"Drive %c is flash\n"); 

for (driveNumber=EDriveA; driveNumber&lt;=EDriveZ; driveNumber++) 
{
    fsSession.Drive(driveInfo, driveNumber); 
    if (driveInfo.iDriveAtt == KDriveAbsent) 
        continue; 
    if (driveInfo.iType == EMediaFlash) 
    {
        User::LeaveIfError(fsSession.DriveToChar(driveNumber, driveLetter));
        console-&gt;Printf(KFlash, driveLetter); 
    }
}
      </pre>
      <p id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-23B14094-0526-5BB2-8CCB-E25558F452F4">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-23B14094-0526-5BB2-8CCB-E25558F452F4">
        <!-- -->
       </a>
       <strong>
        FileSystemSubType()
       </strong>
      </p>
      <p>
       To
retrieve the sub type of the volume use
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-00404432-7095-3461-A669-9009A91BD45C">
        <span class="apiname">
         RFs::FileSystemSubType()
        </span>
       </a>
       .
Pass this function a drive number and a
       TFSName
       for the
sub type. For example, the sub type can be 'FAT16' of the Fat file system.
      </p>
      <p>
       <strong>
        Note
       </strong>
       :
For file systems that do not have a sub type, for example a ROM file system,
the name of the file system is returned, in this case 'ROM'.
      </p>
      <pre class="codeblock" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-7BB4BAAD-95C3-57D2-8BDB-C4698FEB4748">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-7BB4BAAD-95C3-57D2-8BDB-C4698FEB4748">
        <!-- -->
       </a>
       TChar driveLetter;
TFSName name;
TInt driveNumber;
_LIT(KSubType,"Drive %c is Sub Type: %S\n"); 

for (driveNumber=EDriveA; driveNumber&lt;=EDriveZ; driveNumber++) 
{
    TInt err = fsSession.FileSystemSubType(driveNumber, name); 
    if (err != KErrNone)
        continue; 
    User::LeaveIfError(fsSession.DriveToChar(driveNumber, driveLetter));
    console-&gt;Printf(KSubType, driveLetter, &amp;name);
}
      </pre>
     </div>
     <div class="section" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-43EFDCEC-A390-56F6-A4C0-A8150E188E05">
      <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-43EFDCEC-A390-56F6-A4C0-A8150E188E05">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Volume information
      </h2>
      <p id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8F14799F-6F60-5C64-AC8D-4083CE06E6A2">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8F14799F-6F60-5C64-AC8D-4083CE06E6A2">
        <!-- -->
       </a>
       <strong>
        Volume()
       </strong>
      </p>
      <p>
       Use
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-52EFB8B0-E175-328F-AB1B-EACD03104A15">
        <span class="apiname">
         RFs::Volume()
        </span>
       </a>
       to
get the volume information, with a
       <a href="GUID-F7AECD65-6C3C-3056-847A-FD49BB2E927F.html">
        <span class="apiname">
         TVolumeInfo
        </span>
       </a>
       object.
The information returned includes a
       <a href="GUID-4D883FA4-115C-3425-8A34-B00D1D4BBCF9.html">
        <span class="apiname">
         TDriveInfo
        </span>
       </a>
       object with
the volume name, its unique ID, size and the amount of free space.
      </p>
      <p>
       The
following example prints out the names of volumes:
      </p>
      <pre class="codeblock" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-2C806466-0FC6-5AB3-A1C1-1655323DCEB3">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-2C806466-0FC6-5AB3-A1C1-1655323DCEB3">
        <!-- -->
       </a>
       TChar driveLetter;
TVolumeInfo volumeInfo; 
TInt driveNumber;
_LIT(KVolName,"Volume name: %S\n"); 

for (driveNumber=EDriveA; driveNumber&lt;=EDriveZ; driveNumber++) 
{
    TInt err = fsSession.Volume(volumeInfo, driveNumber); 
    if (err != KErrNone)
        continue; 
    User::LeaveIfError(fsSession.DriveToChar(driveNumber, driveLetter));
    console-&gt;Printf(KVolName, &amp;volumeInfo.iName);
}
      </pre>
      <p>
       Note: Use the return value from
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-52EFB8B0-E175-328F-AB1B-EACD03104A15">
        <span class="apiname">
         RFs::Volume()
        </span>
       </a>
       to
test whether a volume is present in the drive, a value of
       KErrNotReady
       indicates
that there is no volume present.
      </p>
      <p id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-35712294-BF6D-5ADF-A717-67B949F02EC3">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-35712294-BF6D-5ADF-A717-67B949F02EC3">
        <!-- -->
       </a>
       <strong>
        VolumeIOParam()
       </strong>
      </p>
      <p>
       Use
       <a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html#GUID-E263C747-946F-35AA-9F1D-41833BD350FC__GUID-DE5542A5-18ED-3F68-9012-DEE13619DCA2">
        <span class="apiname">
         RFs::VolumeIOParam
        </span>
       </a>
       to
retrieve volume information, with a
       <a href="GUID-FA2892FC-4554-3E1D-93AD-593DFA4FB6F7.html">
        <span class="apiname">
         TVolumeIOParamInfo
        </span>
       </a>
       object.
The object returns the recommended sizes for read and write operations on
memory and buffers.
      </p>
      <pre class="codeblock" id="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8618DED6-7771-5495-B109-3B629BFC006C">
       <a name="GUID-D91DC379-947A-52CB-A154-7922AF334527__GUID-8618DED6-7771-5495-B109-3B629BFC006C">
        <!-- -->
       </a>
       TChar driveLetter;
TVolumeIOParamInfo volumeparamInfo; 
TInt driveNumber;

_LIT(KRecWriteSize,"Drive %c's recommended write size: %d\n"); 

for (driveNumber=EDriveA; driveNumber&lt;=EDriveZ; driveNumber++) 
{
    TInt err = fsSession.VolumeIOParam(driveNumber, volumeparamInfo); 
    if (err != KErrNone)
        continue; 
    
    User::LeaveIfError(fsSession.DriveToChar(driveNumber, driveLetter));
    console-&gt;Printf(KRecWriteSize, driveLetter, &amp;volumeparamInfo.iRecWriteBufSize);
}
      </pre>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-30B2AF3F-E120-5D47-AAA2-529555625B55.html" title="This topic describes how to use file server sessions, files and directories effectively.">
        How To use sessions, files and directories
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>