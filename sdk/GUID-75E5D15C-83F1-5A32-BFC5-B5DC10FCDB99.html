<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Upgrading Help Files on the Secure Platform" />
  <meta name="abstract" content="This page describes how to upgrade help files on the secure Symbian platform." />
  <meta name="description" content="This page describes how to upgrade help files on the secure Symbian platform." />
  <meta name="DC.Relation" scheme="URI" content="GUID-D2E19490-4179-548F-9DA8-9AE637FAC9E2.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-58CA15F8-D984-5D07-8C00-161FA16A8FD3.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-1578590A-FC00-5C3B-8BF9-F6E43CA9D9A0.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-D2E19490-4179-548F-9DA8-9AE637FAC9E2.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Upgrading Help Files on the Secure Platform
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99">
  <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2839152 id2839162 id2839414 id2839418 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">
      Generic Application Support Guide
     </a>
     &gt;
     <a href="GUID-58CA15F8-D984-5D07-8C00-161FA16A8FD3.html">
      Application Framework
     </a>
     &gt;
     <a href="GUID-1578590A-FC00-5C3B-8BF9-F6E43CA9D9A0.html">
      Application Architecture
     </a>
     &gt;
     <a href="GUID-D2E19490-4179-548F-9DA8-9AE637FAC9E2.html">
      Application Architecture Tutorials
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Upgrading Help Files on the Secure Platform
    </h1>
    <div>
     <p>
      This page describes how to upgrade help files on the secure Symbian platform.
     </p>
     <ul>
      <li id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-8136781B-7547-5418-843E-3136421D98E8">
       <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-8136781B-7547-5418-843E-3136421D98E8">
        <!-- -->
       </a>
       <p>
        <a href="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99.html#GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-C9D24A7B-C078-5DF2-A318-4969F1C0516A">
         Introduction
        </a>
        . This section is intended for a general audience.
       </p>
      </li>
      <li id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-DDA10A20-51E7-5680-9569-F21942BBBDD7">
       <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-DDA10A20-51E7-5680-9569-F21942BBBDD7">
        <!-- -->
       </a>
       <p>
        <a href="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99.html#GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-2B58B989-1D5E-539C-8294-08811B0A1BD4">
         Creating stub SIS files during a build
        </a>
        . This section is intended for Licencees.
       </p>
      </li>
     </ul>
     <div class="section" id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-C9D24A7B-C078-5DF2-A318-4969F1C0516A">
      <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-C9D24A7B-C078-5DF2-A318-4969F1C0516A">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Introduction
      </h2>
      <p>
       Platform Security makes replacing help files more difficult than it was in earlier, non-secure platform releases. On the secure platform, help files can be loaded only from
       <span class="filepath">
        \resource\help\
       </span>
       on any drive. This directory is read-only and can only be written to by processes with very high capabilities, such as the kernel and the software installer. An exception to the rule that help files cannot be overwritten occurs when the vendor name - held in
       <em>
        stub SIS files
       </em>
       in the
       <span class="filepath">
        \system\install\
       </span>
       directory on any drive - is the same as that for the previous installation. In this situation the software installer allows the upgrade.
      </p>
      <p>
       The only way to add a help file to a
       <span class="filepath">
        \resource\help\
       </span>
       directory is to install software with the help file packaged in a SIS file. To prevent malicious code from overwriting other applications’ help files (including those of core applications stored in ROM), the software installer will not install a help file if a file with the same name already exists in the
       <span class="filepath">
        \resource\help\
       </span>
       directory, on any drive (unless it is identified by the installer as a valid upgrade).
      </p>
      <p>
       The installer not only prevents you from overwriting another package's help files, but it also prevents you from eclipsing them. For more information, see
       <a href="GUID-B3BE018B-0EC5-5866-9BD7-50CBF5670324.html">
        Language-Neutral Files
       </a>
       .
      </p>
     </div>
     <div class="section" id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-2B58B989-1D5E-539C-8294-08811B0A1BD4">
      <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-2B58B989-1D5E-539C-8294-08811B0A1BD4">
       <!-- -->
      </a>
      <h2 class="sectiontitle">
       Creating stub SIS files during a build
      </h2>
      <p>
       Apart from the vendor name, a stub SIS file also contains the information needed to remove the application or file; for example, the full paths of the installed files and application components. Stub SIS files can be distinguised from normal SIS files by their size - stub SIS files are usually several hundred bytes long, much smaller than normal SIS files.
      </p>
      <p>
       Core applications such as Calendar and Contacts are part of the ROM, and so are never installed. To be able to upgrade them and their help files, you must first create stub SIS files for them in the
       <span class="filepath">
        z:\system\install\
       </span>
       directory.
      </p>
      <p>
       You create SIS files from package (
       <span class="filepath">
        .pkg
       </span>
       ) files using the
       <em>
        makeSIS
       </em>
       utility with the
       <samp class="codeph">
        -s
       </samp>
       flag, which excludes binaries and media from the SIS file.
      </p>
      <p>
       For more information, see
       <a href="GUID-7F65B69A-6AC1-509C-91E8-9E49ED0BFEC0.html">
        Upgrading OS Components
       </a>
       .
      </p>
      <p>
       Create stub SIS files as part of the build as follows:
      </p>
      <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-2C36E9CC-0915-59B9-B0DF-35B4CAC6DEA1">
       <!-- -->
      </a>
      <ol id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-2C36E9CC-0915-59B9-B0DF-35B4CAC6DEA1">
       <li id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-3203D7AF-D774-59BB-8C9A-AF2E3352CFCF">
        <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-3203D7AF-D774-59BB-8C9A-AF2E3352CFCF">
         <!-- -->
        </a>
        <p>
         Create a make file that calls the
         <samp class="codeph">
          makeSIS
         </samp>
         utility (see the example, below).
        </p>
       </li>
       <li id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-FD0DEF6E-DCAD-5C43-ACC9-0F5203019218">
        <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-FD0DEF6E-DCAD-5C43-ACC9-0F5203019218">
         <!-- -->
        </a>
        <p>
         Add the make file to the
         <samp class="codeph">
          PRJ_MMPFILES
         </samp>
         section of the component’s
         <span class="filepath">
          bld.inf
         </span>
         file. For example, adding the make file
         <span class="filepath">
          Foo.mk
         </span>
         :
        </p>
        <pre class="codeblock" id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-0A531BD0-48B8-55E1-93A0-119E382F0A6D">
         <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-0A531BD0-48B8-55E1-93A0-119E382F0A6D">
          <!-- -->
         </a>
         ///Bld.inf 
PRJ_MMPFILES 
makefile Foo.mk
        </pre>
       </li>
      </ol>
      <p>
       An example make file - called
       <span class="filepath">
        Foo.mk
       </span>
       , which is used to create
       <span class="filepath">
        Foo.sis
       </span>
       - is shown below:
      </p>
      <pre class="codeblock" id="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-72112C86-58FE-5DA1-94A5-6CEC3975FA94">
       <a name="GUID-75E5D15C-83F1-5A32-BFC5-B5DC10FCDB99__GUID-72112C86-58FE-5DA1-94A5-6CEC3975FA94">
        <!-- -->
       </a>
       # Build Stub SIS file 
      
SISNAME=Foo 
SRCDIR=.\ 
         
# Select appropriate directory and ensure it exists 
!if "$(PLATFORM)"=="WINS" || "$(PLATFORM)"=="WINSCW" 
TARGETDIR=$(EPOCROOT)EPOC32\RELEASE\$(PLATFORM)\$(CFG)\Z\System\Install 
!else 
TARGETDIR=$(EPOCROOT)EPOC32\Data\Z\System\Install 
!endif 
           
$(TARGETDIR) : 
    @perl -S emkdir.pl "$(TARGETDIR)" 
              
                 
# Build stub SIS file 
SISFILE= $(TARGETDIR)\$(SISNAME).sis 
                       
$(SISFILE) : $(SRCDIR)\$(SISNAME).pkg 
    makesis -s $? $@
                   
do_nothing : 
    rem do_nothing 
                      
# The targets invoked by abld  
MAKMAKE : do_nothing 
RESOURCE : $(TARGETDIR) $(SISFILE) 
SAVESPACE : BLD 
BLD : do_nothing 
FREEZE : do_nothing 
LIB : do_nothing 
CLEANLIB : do_nothing 
FINAL : do_nothing 
                         
CLEAN :  
    erase $(SISFILE)
                           
RELEASABLES :  
    @echo $(SISFILE)
      </pre>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-D2E19490-4179-548F-9DA8-9AE637FAC9E2.html">
        Application Architecture Tutorials
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>