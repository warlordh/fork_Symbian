<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="copyright" content="(C) Copyright 2010" />
  <meta name="DC.rights.owner" content="(C) Copyright 2010" />
  <meta name="DC.Type" content="concept" />
  <meta name="DC.Title" content="Storing and restoring" />
  <meta name="DC.Relation" scheme="URI" content="GUID-79CE15C5-B595-5336-AE87-DE92990F6D47.html" />
  <meta name="DC.Relation" scheme="URI" content="index.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-3FAB9077-3EC3-5539-B391-D11456362513.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-D7211372-9411-5A18-88F0-615F4983A2E0.html" />
  <meta name="DC.Relation" scheme="URI" content="GUID-79CE15C5-B595-5336-AE87-DE92990F6D47.html" />
  <meta name="DC.Format" content="XHTML" />
  <meta name="DC.Identifier" content="GUID-3ABE9420-2668-507E-B857-E62DC50654BD" />
  <meta name="DC.Language" content="en" />
  <link rel="stylesheet" type="text/css" href="commonltr.css" />
  <title>
   Storing and restoring
  </title>
  <link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
  <link rel="stylesheet" type="text/css" href="nokiacxxref.css" />
 </head>
 <body id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD">
  <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD">
   <!-- -->
  </a>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
  <div id="sdl_container">
   <div id="leftMenu">
    <div id="expandcontractdiv">
     <a id="collapseTree" href="javascript:tree.collapseAll()">
      Collapse all
     </a>
     <a id="index" href="index.html">
      Symbian^3 Application Developer Library
     </a>
    </div>
    <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">
     &#160;
    </div>
    <script type="text/javascript">
     var currentIconMode = 0; window.name="id2470542 id2388397 id2388585 id2398757 id2398991 id2399052 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
   </div>
   <div id="sdl_content">
<div class="breadcrumb">
     <a href="index.html" title="Symbian^3 Application Developer Library">
      Symbian^3 Application Developer Library
     </a>
     &gt;
     <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">
      Symbian Guide
     </a>
     &gt;
     <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">
      Persistent Data Services Guide
     </a>
     &gt;
     <a href="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html" title="The persistent storage collection.">
      Persistent Storage
     </a>
     &gt;
     <a href="GUID-3FAB9077-3EC3-5539-B391-D11456362513.html" title="Store provides structured data storage.">
      Store
     </a>
     &gt;
     <a href="GUID-D7211372-9411-5A18-88F0-615F4983A2E0.html" title="Provides swizzles, store streams, stream dictionaries, and store maps.">
      Store Streams
     </a>
     &gt;
     <a href="GUID-79CE15C5-B595-5336-AE87-DE92990F6D47.html">
      Storing and restoring
     </a>
     &gt;
    </div>
    <h1 class="topictitle1">
     Storing and restoring
    </h1>
    <div>
     <p>
      An object in its internal form may consist of just simple data types, for example, a
      <samp class="codeph">
       TPoint
      </samp>
      , which just has two
      <samp class="codeph">
       TInt
      </samp>
      values representing its X and Y co-ordinates, or a network of objects, for example, a
      <samp class="codeph">
       CBufSeg
      </samp>
      . There are two ways of storing the external form of the object:
     </p>
     <ul>
      <li id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-38BD713B-FD26-53E5-8C9B-982F286A1BCC">
       <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-38BD713B-FD26-53E5-8C9B-982F286A1BCC">
        <!-- -->
       </a>
       <p>
        externalising it as part of a stream
       </p>
      </li>
      <li id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-52840A22-541D-5CC0-BE55-F572CC292120">
       <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-52840A22-541D-5CC0-BE55-F572CC292120">
        <!-- -->
       </a>
       <p>
        storing it as an entire stream network in a store.
       </p>
      </li>
     </ul>
     <p>
      When externalizing an object to a stream, the stream is passed to the the
      <samp class="codeph">
       ExternalizeL()
      </samp>
      function and, in general, an object has no knowledge of where, in the stream, the data is written.
     </p>
     <p>
      When a whole network of objects is to be externalised it is useful to
      <em>
       store
      </em>
      an object in its own stream network. This is particularly important if other objects are to be restored without restoring this one. The main reason is that it is very difficult to read past an object's data in a single stream without knowing something about its internal form.
     </p>
     <div class="section">
      <h2 class="sectiontitle">
       What to store?
      </h2>
      <p>
       You should store an object which you might not wish to load along with its containing object. The following are typical situations where storing is used:
      </p>
      <ul>
       <li id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-EC0FC73C-F820-5255-B3B9-06282F58897E">
        <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-EC0FC73C-F820-5255-B3B9-06282F58897E">
         <!-- -->
        </a>
        <p>
         when objects are stored in a database, such as a relational database, various indexes to the database are accessed, but not every object is loaded into RAM when the database is opened.
        </p>
       </li>
       <li id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-3EC34AF1-053F-5EE9-B655-925720527510">
        <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-3EC34AF1-053F-5EE9-B655-925720527510">
         <!-- -->
        </a>
        <p>
         embedded objects in documents. An object represented by an iconic door is not loaded until that door is opened; an object represented by a glass door may not be loaded until the glass door is required to be displayed.
        </p>
       </li>
       <li id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-EAC3CD9F-0592-5036-97E9-31A718FD9F86">
        <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-EAC3CD9F-0592-5036-97E9-31A718FD9F86">
         <!-- -->
        </a>
        <p>
         when there is additional information to allow various levels of access to complex data streams. For example, rich text. The text is stored in one stream, but the formatting information is stored in other streams; this enables global text or even plain text to be read without the details of the rich text formatting interfering with the process.
        </p>
       </li>
       <li id="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-7077058B-007F-5CFC-AB8B-0AAD68ED1C5D">
        <a name="GUID-3ABE9420-2668-507E-B857-E62DC50654BD__GUID-7077058B-007F-5CFC-AB8B-0AAD68ED1C5D">
         <!-- -->
        </a>
        <p>
         when there is additional information for later versions of a program. Additional version-2 information can be stored in a separate stream; then, a version-1 program working on the same store will load only the version-1 information, but the version-2 program will load both.
        </p>
       </li>
      </ul>
      <p>
       In general, the decision to
       <em>
        store
       </em>
       rather than
       <em>
        externalise
       </em>
       is a fundamental characteristic of the object, and should be taken with care. A compound object, which contains stored component objects, must obey store-related protocols which are more complex than the simple stream-related
       <samp class="codeph">
        ExternalizeL()
       </samp>
       and
       <samp class="codeph">
        InternalizeL()
       </samp>
       . The decisions already taken by system components, such as rich text, and by the application architecture, influence the kinds of things you store in your own applications.
      </p>
     </div>
    </div>
    <div>
     <div class="familylinks">
      <div class="parentlink">
       <strong>
        Parent topic:
       </strong>
       <a href="GUID-79CE15C5-B595-5336-AE87-DE92990F6D47.html">
        Storing and restoring
       </a>
      </div>
     </div>
    </div>
    <p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
   </div>
  </div>
  <?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>
 </body>
</html>