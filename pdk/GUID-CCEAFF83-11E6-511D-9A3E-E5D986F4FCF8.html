<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="NMEA Messages"/>
<meta name="abstract" content="This document describes the NMEA messages supported by the Bluetooth GPS PSY."/>
<meta name="description" content="This document describes the NMEA messages supported by the Bluetooth GPS PSY."/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>NMEA Messages</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403500 id2403620 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html" title="The Bluetooth GPS Positioning Module (Bluetooth GPS PSY) connects the LBS subsystem to an external Bluetooth GPS device.">Bluetooth GPS Positioning Module</a> &gt; <a href="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html" title="These documents describe NMEA and PNOK messages supported by the Bluetooth GPS PSY.">Bluetooth GPS PSY Reference</a> &gt; </div>
<h1 class="topictitle1"> NMEA Messages</h1>
<div><p>This document describes the NMEA messages supported by
the Bluetooth GPS PSY. </p>


<div class="section" id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-6B7BCA18-2C7B-405D-AAF5-6F2A9B6DE074"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-6B7BCA18-2C7B-405D-AAF5-6F2A9B6DE074"><!-- --></a><p>The target audiences for this document are device creators
and GPS hardware vendors who want to know which NMEA messages are
sent from the PSY to a GPS device and which messages the PSY expects
to receive from the device. </p>
 </div>

<div class="section" id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-5303CC1B-0A5D-4F0F-977E-7E9B31F48F20"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-5303CC1B-0A5D-4F0F-977E-7E9B31F48F20"><!-- --></a><h2 class="sectiontitle">Introduction</h2> <p>The Bluetooth GPS PSY communicates
with a GPS device using the NMEA 0183 protocol. </p>
 <p>The messages
used for communication between the PSY and a GPS device are listed
in the following sections. </p>
 <p>Note: The SiRF NMEA messages (those
beginning with <samp class="codeph">$PSRF</samp>) are not sent when a GPS device
reports that it supports PNOK extensions. Positioning and power management
messages for PNOK compatible GPS devices are described in <a href="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0.html" title="This document describes the PNOK messages supported by the Bluetooth GPS PSY.">PNOK messages</a>. </p>
 </div>

<div class="section" id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-E16E33C1-6B45-4131-ABE7-ED6DCA0BFF7F"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-E16E33C1-6B45-4131-ABE7-ED6DCA0BFF7F"><!-- --></a><h2 class="sectiontitle">Required background</h2> <p>Familiarity with the
following is helpful in understanding this document: </p>
 <ul>
<li id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-F41B3CC6-67D9-59D8-9027-1F0DE6067899"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-F41B3CC6-67D9-59D8-9027-1F0DE6067899"><!-- --></a><p> <a href="http://www.nmea.org/content/nmea_standards/nmea_standards.asp" target="_blank">The NMEA 0183 Protocol</a>  </p>
 </li>

<li id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-C33FA805-D195-57EA-93C4-D9D1E82D5C70"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-C33FA805-D195-57EA-93C4-D9D1E82D5C70"><!-- --></a><p> <a href="http://www.sirf.com/" target="_blank">SiRF Binary Protocol
Reference Manual</a>  </p>
 </li>

<li id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-786BCAA8-399D-5B9D-8D37-3314F1318CE5"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-786BCAA8-399D-5B9D-8D37-3314F1318CE5"><!-- --></a><p> <a href="http://www.sirf.com/" target="_blank">SiRF NMEA Reference Manual</a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-A9400274-9901-40F6-ACE0-090E8C19A56C"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-A9400274-9901-40F6-ACE0-090E8C19A56C"><!-- --></a><h2 class="sectiontitle">GPS initialisation messages</h2> <p>The PSY sends
initialisation messages to the GPS device in order to: </p>
 <ul>
<li id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-F842CA2B-7B7E-5980-BF6E-D542409A8771"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-F842CA2B-7B7E-5980-BF6E-D542409A8771"><!-- --></a><p>Set the device
to NMEA mode (to return messages defined by NMEA 0183). </p>
 </li>

<li id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-54F71FA5-D896-58AA-B4D6-B9F8BE9485D7"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-54F71FA5-D896-58AA-B4D6-B9F8BE9485D7"><!-- --></a><p>Initialise the
device's power mode. </p>
 </li>

<li id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-87108C5F-7785-547F-99FB-24CDB26B71C7"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-87108C5F-7785-547F-99FB-24CDB26B71C7"><!-- --></a><p>Specify which
NMEA messages to return, and their rate of return. </p>
 </li>

</ul>
 <p><strong>Setting NMEA mode</strong> </p>
 <p>The PSY sends an SiRF binary protocol
initialisation message to switch the GPS device to NMEA mode. The
message is "Switch To NMEA Protocol – Message ID 129" (<samp class="codeph">0x81</samp> hexadecimal). This message switches a serial port from binary to
NMEA protocol and sets message output rates and bit rate on the port. </p>
 <p>The message is: <samp class="codeph">\xA0\xA2\x00\x18\x81\x02\x01\x01\x00\x01\x05\x01\x05\x01\x00\x01\x00\x01\x00\x01\x00\x01\x00\x01\x00\x01\x12\xC0\x01\x6A\xB0\xB3\r\n</samp>. </p>
 <p><strong>Requesting NMEA messages</strong> </p>
 <p>The PSY sends SiRF NMEA messages
"103—Query/Rate Control" to specify which NMEA messages the device
must return and the rate at which to return them. </p>
 <p>The NMEA
messages <samp class="codeph">GPGGA</samp>, <samp class="codeph">GPRMC</samp>, <samp class="codeph">GPGSV</samp> and <samp class="codeph">GPGSA</samp> are required with an update interval
of one second. </p>
 <p>The PSY sends <samp class="codeph">$PSRF103</samp> messages
to the GPS device as a concatenated message list. The following table
contains the details of the messages sent from the PSY to the GPS
device. </p>
 
<div class="tablenoborder"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-722D5AA5-4C24-59DD-A875-105D4798A20A"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-722D5AA5-4C24-59DD-A875-105D4798A20A" frame="border" border="1" rules="all">

<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1850106e164">Sent Messages</th>

<th class="cellrowborder" valign="top" id="d1850106e167">Meaning</th>

<th class="cellrowborder" valign="top" id="d1850106e170">Notes</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1850106e164 "><p> <samp class="codeph"> $PSRF103,0,0,1,1*25\r\n</samp>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e167 "><p>Sets the device to return GGA messages with an interval
of 1 second. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e170 "><p>Message GGA returns time, position fix and fix type data. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1850106e164 "><p> <samp class="codeph">$PSRF103,2,0,1,1*27\r\n</samp>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e167 "><p>Sets the device to return GSA messages with an interval
of 1 second. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e170 "><p>Message GSA returns GPS receiver operating mode, information
about the satellites used to obtain the position fix, and Dilution
of Position (DOP) data. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1850106e164 "><p> <samp class="codeph">$PSRF103,3,0,1,1*26\r\n</samp>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e167 "><p>Sets the device to return GSV messages with an interval
of 1 second. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e170 "><p>Message GSV returns the number of GPS satellites in view,
satellite ID numbers, elevation, azimuth and Signal to Noise Ratio
(SNR) data. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1850106e164 "><p> <samp class="codeph"> $PSRF103,4,0,1,1*21\r\n</samp>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e167 "><p>Sets the device to return RMC messages with an interval
of 1 second. </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1850106e170 "><p>Message RMC returns time, date, position, course and speed
data. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>The concatenated message list that is sent to the device
is: <samp class="codeph">$PSRF103,0,0,1,1*25\r\n$PSRF103,2,0,1,1*27\r\n\      
       $PSRF103,3,0,1,1*26\r\n$PSRF103,4,0,1,1*21\r\n</samp>. </p>
 <p><strong>Controlling device power mode</strong> </p>
 <p>The PSY sends a full
power mode message (see below) when it initialises the GPS device. </p>
 </div>

<div class="section" id="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-AD39B01E-8806-4268-86A1-9AD05B3CBE91"><a name="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8__GUID-AD39B01E-8806-4268-86A1-9AD05B3CBE91"><!-- --></a><h2 class="sectiontitle">Full power mode message</h2> <p>The PSY sends $PSRF107
messages with the parameters to switch the device to full power mode
when required. This message turns off device trickle power mode if
this is the current power state of the GPS device. </p>
 <p>The message
sent is: <samp class="codeph">$PSRF107,0,1000,1000*3d\r\n</samp>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html" title="These documents describe NMEA and PNOK messages supported by the Bluetooth GPS PSY.">Bluetooth GPS PSY Reference</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>