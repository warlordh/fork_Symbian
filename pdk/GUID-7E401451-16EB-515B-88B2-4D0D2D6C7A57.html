<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Adjustable Performance Configuration"/>
<meta name="DC.Relation" scheme="URI" content="GUID-87D1F36A-A3BB-5385-BDF3-211AC31097E9.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-87D1F36A-A3BB-5385-BDF3-211AC31097E9.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Adjustable Performance Configuration</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id1198065 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-87D1F36A-A3BB-5385-BDF3-211AC31097E9.html">Performance Considerations</a> &gt; </div>
<h1 class="topictitle1">Adjustable
Performance Configuration</h1>
<div>
<p>Various system parameters may be modified to control the way that elements
within the system behave. The parameters listed in this document have been
found to have significant impacts on important aspects of system performance. </p>

<p>In each case there is trade off, typically between speed and resource use
but sometimes between boot time and performance in steady state. The amount
of trade off varies according hardware, software and how both are used. The
only way of establishing the effect of each setting on a working device is
through systematic testing. </p>

<p>There is no common method of configuring the parameters listed here. Some
of the values must be set before compilation, others before the ROM is built. </p>

<ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-EE04CF03-F56D-52D7-BFF4-3D3AAB7C6106"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-EE04CF03-F56D-52D7-BFF4-3D3AAB7C6106"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-09C25275-5D3A-514B-8F0D-C5C1A3FA41EC">Bitmaps</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-02A6FF27-4E28-50F5-B0B7-C4BB20201FFE"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-02A6FF27-4E28-50F5-B0B7-C4BB20201FFE"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-6F89A67C-D05C-535B-B316-22EBECA7D7BF">Central Repository</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-17BCAC94-0678-5048-A33F-151B36E0E83D"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-17BCAC94-0678-5048-A33F-151B36E0E83D"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F0EB9A69-C00B-5778-AB90-E8C78CF0E2CB">Comms Server</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-59149610-A605-5C6C-BA53-E921E2658D6C"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-59149610-A605-5C6C-BA53-E921E2658D6C"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-4E07079A-B7B7-5020-BB15-8F31D5FAFCDA">Database Management System (DBMS)</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-31BBAE9F-7427-5925-9FE7-907EC852C366"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-31BBAE9F-7427-5925-9FE7-907EC852C366"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-0E06EE19-F1FE-5940-8167-34654BFBA90A">Domain Name Daemon</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-252ED29A-8F5A-54F2-A98C-65F48D080C61"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-252ED29A-8F5A-54F2-A98C-65F48D080C61"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-BE38584C-7999-5D27-B4A2-1A7CFA82D311">Heap Configuration</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F6E88149-0B78-5E48-8399-51268803591F"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F6E88149-0B78-5E48-8399-51268803591F"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9F765460-7F6A-5F2A-85DE-89EBFE213B1E">Recognizer Loading</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E5B09C3D-FF56-5D3B-B47A-B2D4EE265A86"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E5B09C3D-FF56-5D3B-B47A-B2D4EE265A86"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9B98E4EB-28BC-5A0A-8174-7949E515AFA6">Secure Backup </a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-A49DD8FE-958E-542F-98EF-7926A2A10722"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-A49DD8FE-958E-542F-98EF-7926A2A10722"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-4EC82389-6C89-5C47-BAC4-A139BCB3531E">Server shutdown behaviour</a>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E792C035-38A4-561C-91CF-A23574E3E744"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E792C035-38A4-561C-91CF-A23574E3E744"><!-- --></a><p><a href="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57.html#GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2CACB838-2E72-5723-9511-68EC1D7E3BDD">Window Server</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-09C25275-5D3A-514B-8F0D-C5C1A3FA41EC"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-09C25275-5D3A-514B-8F0D-C5C1A3FA41EC"><!-- --></a><h2 class="sectiontitle">Bitmaps</h2> <p>Bitmaps
use up large amounts of memory. There are several parameters that you can
configure to reduce the amount of memory that bitmaps use. The effects that
your adjustments have will depend upon both the nature of the bitmaps used
in your system and the way that they are used. </p>
 <p><strong>Bitmap compression ratio configuration </strong> </p>
 <p>Bitmaps can be compressed
using algorithms that typically take advantage of blocks of common colour.
The amount that a bitmap can be compressed depends on the bitmap itself. </p>
 <p>A
bitmap stored in a compressed format has to be decompressed before it can
be displayed. </p>
 <p>A <strong>compile-time macro</strong>, <samp class="codeph">KCompressionThreshold</samp>,
specifies how much reduction in size must be achievable for bitmaps to be
compressed. The theory is that if compression would only result in a small
difference in size it is a waste of time. </p>
 <dl>

<dt class="dlterm">Location</dt>

<dd><p> <span class="filepath">...\os\graphics\fbs\fontandbitmapserver\group\FBSCLI.MMP</span>  </p>
 </dd>



<dt class="dlterm">Source</dt>

<dd><pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-BD267125-B08B-5723-9C4F-2737882BFD1D"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-BD267125-B08B-5723-9C4F-2737882BFD1D"><!-- --></a>/* 
KCompressionThreshold is used to determine whether a bitmap gets compressed.  
Values of 0 -&gt; 256 represent 0% to 100% where 0% = no compression.  
A value of 205 means that bitmaps are only compressed when the resulting size is 80% or less 
of the original size.
*/
MACRO KCompressionThreshold=205  // i.e. 80% compression 
</pre>
 </dd>


</dl>
 <p>You must recompile FBServ for this change to take effect. </p>
 <p><strong>Bitmap storage location </strong> </p>
 <p>Bitmaps are stored in different memory
locations according to their size. </p>
 <ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-08722693-3C5C-50FD-BD60-EBE2C3EC28A3"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-08722693-3C5C-50FD-BD60-EBE2C3EC28A3"><!-- --></a><p>Small bitmaps are stored
in a normal heap called a shared chunk. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9066CCC7-4872-5BEC-B754-3406E02CE234"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9066CCC7-4872-5BEC-B754-3406E02CE234"><!-- --></a><p>Large bitmaps are stored
in special area of memory, called the large chunk or pile, that is managed
by the font and bitmap server. </p>
 </li>

</ul>
 <p>This is because storing and deleting bitmaps, especially large ones,
leads to memory fragmentation which can prevent RAM being freed for the rest
of the system. Defragmetation, however, is a slow process, so only the large
chunk is defragmented. </p>
 <p>A <strong>compile-time macro</strong>, <samp class="codeph">KMaxLargeBitmapAlloc</samp>,
specifies the cut-off point (in kB) at which a bitmap is considered large
and, therefore, stored in the large chunk. </p>
 <p>The higher the value the
larger the bitmaps stored in the shared chunk will be. This typically results
in higher RAM use, because the heap becomes more fragmented, but better overall
system performance because the defragmentation process runs less often on
the large chunk. </p>
 <dl>

<dt class="dlterm">Location</dt>

<dd><p> <span class="filepath">...\os\graphics\fbs\fontandbitmapserver\group\FBSCLI.MMP</span> </p>
 </dd>



<dt class="dlterm">Source</dt>

<dd><pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-3EDA0707-66CD-563C-AB11-3FB72582CECB"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-3EDA0707-66CD-563C-AB11-3FB72582CECB"><!-- --></a>/*
configurable value to control bitmap heap defragmentation by setting large bitmap threshold 
*/
MACRO KMaxLargeBitmapAlloc=0x4000

</pre>
 </dd>


</dl>
 <p>You must recompile FBServ for this change to take effect. </p>
 <p><strong>Large chunk defragmentation </strong> </p>
 <p>Deleting large bitmaps results
in fragmentation of the large chunk (see above). </p>
 <p>A <strong>compile-time
macro</strong>, <samp class="codeph">KFreeCellCountLimit</samp>, specifies the number of free
cells that must exist in the large chunk before it gets defragmented. </p>
 <dl>

<dt class="dlterm">Location</dt>

<dd><p> <span class="filepath">...\os\graphics\fbs\fontandbitmapserver\group\FBSCLI.MMP</span>  </p>
 </dd>



<dt class="dlterm">Source</dt>

<dd><pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-576D18C1-6D4F-5E39-A69D-481D29F69CEE"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-576D18C1-6D4F-5E39-A69D-481D29F69CEE"><!-- --></a>/*
KFreeCellCountLimit determines when a forced foreground defragmentation will take place. 
This will happen during an allocation on the FBS large bitmap chunk if the amount 
of free cells exceeds the specified number.
*/
MACRO KFreeCellCountLimit=40
</pre>
 </dd>


</dl>
 <p>A smaller value will result in less wasted RAM but poorer performance
as the defragmentation process will run more often. </p>
 <p> <strong>NOTE:</strong> Cells
can be of variable size so this value cannot be used to calculate the amount
of wasted RAM. You can be sure, however, that the wasted RAM will be at least
(<samp class="codeph">KMaxLargeBitmapAlloc</samp> x <samp class="codeph">KFreeCellCountLimit</samp>).
For the default values this is 160kB. </p>
 <p>You must recompile FBServ for
this change to take effect. </p>
 <p><strong>Using bitmap fonts </strong> </p>
 <p>Using bitmap fonts instead of FreeType
fonts can reduce RAM use and increase performance at the expense of visual
appearance. FreeType fonts have to be rasterised before they can be used.
This takes time and memory. Bitmap fonts, however, can only be used in the
pre-determined range of sizes built into the ROM. </p>
 <p>The performance
trade off is dependant on the font rasteriser though once a font has been
rasterised it can be cached in bitmap form. </p>
 <p>NOTE: You can be pre-rasterise
FreeType fonts into bitmap fonts for inclusion in ROMs using the <samp class="codeph">ttf2bdf</samp> tool.
Though the tool is supplied with the Symbian platform (as part of the <samp class="codeph">graphics_font</samp> CBR
component) it is not supported. There may also be legal and licencing issues
to consider when pre-rasterising ronts in this way. </p>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-6F89A67C-D05C-535B-B316-22EBECA7D7BF"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-6F89A67C-D05C-535B-B316-22EBECA7D7BF"><!-- --></a><h2 class="sectiontitle">Central Repository </h2> <p>The
Central Repository caches individual repositories in RAM after clients have
closed their sessions. You can configure the <em>sizeof the cache</em> and the <em>length
of time that entries persist</em> by editing the central repository INI file <span class="filepath">\private\10202be9\centrep.ini</span>  </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-D09B03B5-A74B-5EF5-B962-46756E491C48"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-D09B03B5-A74B-5EF5-B962-46756E491C48"><!-- --></a>[CoarseGrainedCache]
size= &lt;size in bytes&gt; 
timeout= &lt;timeout in microseconds&gt; </pre>
 <p>Increasing the size
of the cache and the timeout improve performance at the cost of increased
RAM use. </p>
 <p> <strong>NOTE:</strong> If the cache fills up the oldest entries are
pushed out before they timeout. </p>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F0EB9A69-C00B-5778-AB90-E8C78CF0E2CB"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F0EB9A69-C00B-5778-AB90-E8C78CF0E2CB"><!-- --></a><h2 class="sectiontitle">Comms Server</h2> <p>You
can adjust the size of the <samp class="codeph">MBuf</samp> pool. The <samp class="codeph">MBuf</samp> pool
is used for creating buffers for communication data. </p>
 <p>The value is
set in <span class="filepath">...\os\commsfw\commsprocess\commsrootserverconfig\etc\c32start.ini</span>. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-77C0F002-8BA1-5D2E-9EC6-78098940D30D"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-77C0F002-8BA1-5D2E-9EC6-78098940D30D"><!-- --></a>
[Global]
MBufPoolSize=&lt;initial size in bytes&gt;,&lt;max size in bytes&gt; //The default is MBufPoolSize=262144,262144. </pre>
 <p> <strong>NOTE:</strong> In
older versions of the Symbian platform only the maximum size was specified
so, for compatibility reasons, if a single value is specified it will be interpreted
as the maximum size. </p>
 <p>When an initial size is specified the pool grows
as necessary until it reaches the maximum size. It does not shrink, however,
so the RAM is not released until the device is rebooted. The disadvantage
of setting a very low initial pool size is that there might be insufficient
free RAM pages when it tries to grow which could cause panics. </p>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-4E07079A-B7B7-5020-BB15-8F31D5FAFCDA"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-4E07079A-B7B7-5020-BB15-8F31D5FAFCDA"><!-- --></a><h2 class="sectiontitle">Database Management
System (DBMS)</h2> <p>The size of the <strong>cache</strong> used by DBMS and the
size of the <strong>buffer</strong> used by STORE when performing disk I/O are adjustable.
Reducing their sizes reduces memory use but results in more I/O operations
which reduces performance. </p>
 <p>Adjust the sizes of the cache and buffer
as follows: </p>
 <a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9021FD5C-01F7-575A-9B3B-DC7289266602"><!-- --></a><ol id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9021FD5C-01F7-575A-9B3B-DC7289266602">
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-EA542EA4-975D-5075-AD6D-46E09B37CCBA"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-EA542EA4-975D-5075-AD6D-46E09B37CCBA"><!-- --></a><p>Define the constants <samp class="codeph">SYMBIAN_CUSTOM_DBMS_CACHE_SIZES</samp> and <samp class="codeph">SYMBIAN_CUSTOM_STORE_BUFFER_SIZES</samp> in the appropriate HRH file in <span class="filepath">\epoc32\include\variant</span>. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2AA8EE9F-EDAD-515D-8407-8D4736A6CF15"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2AA8EE9F-EDAD-515D-8407-8D4736A6CF15"><!-- --></a><p>Create <span class="filepath">...\os\persistentdata\persistentstorage\dbms\bmake\EDbms.mmh</span> by
copying <span class="filepath">...\os\persistentdata\persistentstorage\dbms\bmake\EDbms_Template.mmh</span>. </p>
 <p>Edit
the newly created file and modify the following macros: </p>
 <ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-00DE06B9-95F2-5DCB-A63E-1586CAE2686E"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-00DE06B9-95F2-5DCB-A63E-1586CAE2686E"><!-- --></a><p> <samp class="codeph">PAGE_CACHE_SIZE</samp> -
the size of the page cache used to cache index information in a database.
It must not be less than 8 pages. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2182B6CC-F0CF-52F8-9986-231546A90D8C"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2182B6CC-F0CF-52F8-9986-231546A90D8C"><!-- --></a><p> <samp class="codeph">MAX_CLUSTER_CACHE_SIZE</samp> -
the size of the cluster cache which is used to cache row data for tables in
a database. It must not be less than 4 clusters. </p>
 </li>

</ul>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E3FC7916-96B7-53F1-8E57-53243FFDAB78"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E3FC7916-96B7-53F1-8E57-53243FFDAB78"><!-- --></a><p>Create <span class="filepath">...\os\persistentdata\persistentstorage\store\BMAKEEStor.mmh</span> by
copying <span class="filepath">...\os\persistentdata\persistentstorage\store\BMAKE\EStor_Template.mmh</span>. </p>
 <p>Edit
the newly created file and modify the following macros: </p>
 <ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-5D98A6F3-160F-5348-B85D-97E387E8AE70"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-5D98A6F3-160F-5348-B85D-97E387E8AE70"><!-- --></a><p> <samp class="codeph">DEFAULT_FILE_BUF_SIZE</samp> This
macro sets the default file buffer size in bytes used in <a href="GUID-418E7956-BE91-39A2-A26D-F1CA88B458AA.html"><span class="apiname">RFileBuf</span></a> objects.
It must not be less than 1536 bytes. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-A6CAC043-CC3E-519F-84DB-D1F9E6AB8C42"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-A6CAC043-CC3E-519F-84DB-D1F9E6AB8C42"><!-- --></a><p> <samp class="codeph">MAX_READ_AHEAD_VALUE</samp> This
macro sets the maximum <a href="GUID-418E7956-BE91-39A2-A26D-F1CA88B458AA.html"><span class="apiname">RFileBuf</span></a> read-ahead value in bytes.
This defines the number of bytes read into the file buffer when buffer underflow
occurs. It must not be less than 512 bytes or greater than <samp class="codeph">DEFAULT_FILE_BUF_SIZE</samp>  </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-25FC3F98-0B4A-52E2-BF26-EDAEA0B03585"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-25FC3F98-0B4A-52E2-BF26-EDAEA0B03585"><!-- --></a><p> <samp class="codeph">FILE_BLOCK_SIZE</samp> This
macro sets the file-system block size for <a href="GUID-418E7956-BE91-39A2-A26D-F1CA88B458AA.html"><span class="apiname">RFileBuf</span></a>. It
is used in the event of a buffer underflow to perform block-aligned reads
to load the buffer. It must not be less than 512 bytes or greater then <samp class="codeph">MAX_READ_AHEAD_VALUE</samp>.
It must also be a power of 2 </p>
 </li>

</ul>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F7304DF3-99B5-50E5-8FA0-025A1C26317D"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-F7304DF3-99B5-50E5-8FA0-025A1C26317D"><!-- --></a><p>Rebuild STORE then DBMS. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-0E06EE19-F1FE-5940-8167-34654BFBA90A"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-0E06EE19-F1FE-5940-8167-34654BFBA90A"><!-- --></a><h2 class="sectiontitle">Domain Name
Daemon</h2> <p>You can control the number of concurrent requests handled
by the Domain Name Daemon (DND). The DND reserves memory for these at startup
to guarantee service. Reducing the number saves RAM but slows down web page
retrieval, especially on pages with lots of in-line images. </p>
 <p>In the
file <span class="filepath">...\os\networkingsrv\tcpiputils\dnd\inc\listener.h</span>  </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-3DFE4664-CAC8-5FE0-8D25-00D14D8754B3"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-3DFE4664-CAC8-5FE0-8D25-00D14D8754B3"><!-- --></a>const TUint KDndNumResolver = 31 ;</pre>
 <p>You
can also limit the number of Link-Local Multicast Name Resolvers (LLNMR) that
get created which also saves RAM but impacts performance because fewer concurrent
DNS queries can be made </p>
 <p>In the file  </p>
<span class="filepath">...\os\networkingsrv\tcpiputils\dnd\inc\llmnrresponder.h</span> <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E42FFFD4-2A9A-5D20-8171-F09AED1FEA15"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E42FFFD4-2A9A-5D20-8171-F09AED1FEA15"><!-- --></a>const TInt KLlmnrMaxEnabled = 15 ; </pre>
 <p> <strong>NOTE:</strong> You
must ensure that there is at least one resolver enabled for each LLMNR-enabled
network interface (NIF). </p>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-BE38584C-7999-5D27-B4A2-1A7CFA82D311"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-BE38584C-7999-5D27-B4A2-1A7CFA82D311"><!-- --></a><h2 class="sectiontitle">Heap Configuration</h2> <p><strong>Minimum heap cell size </strong> </p>
 <p>You can set the minimum heap cell
size used by the <a href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html"><span class="apiname">RHeap</span></a> class. This has an impact on where
new allocations are placed in the heap. You can set values for both the kernel
heap and the user heap. </p>
 <p>The effect of changing the value is difficult
to predict and there is not a simple relationship between size and RAM use
or size and performance. In general, however, a larger value will result in
faster performance and greater RAM use. </p>
 <p>Typical values to experiment
with are 0, 4, 8, 16, 32 and 64. </p>
 <p>You set the value using a <samp class="codeph">patchdata</samp> statement
in an OBY (or IBY) file. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-76A70134-04D6-57B1-8F1D-7C7BF7813B3B"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-76A70134-04D6-57B1-8F1D-7C7BF7813B3B"><!-- --></a>
patchdata [ekern.exe|euser.dll] @ KHeapMinCellSize &lt;NewValueForTheConstData&gt; 
</pre>
 <p>For example </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-34B89B58-109B-5DFF-A91F-D1C50866CE54"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-34B89B58-109B-5DFF-A91F-D1C50866CE54"><!-- --></a>
patchdata ekern.exe @ KHeapMinCellSize 32

patchdata euser.dll @ KHeapMinCellSize 32
</pre>
 <p><strong>Hysteresis window size </strong> </p>
 <p>You can configure how the memory allocated
by the <a href="GUID-EFAFDD75-7E59-306A-882D-317F5564979E.html"><span class="apiname">RHeap</span></a> class is returned to the system. </p>
 <p>The
heap grows in fixed size chunks. You can specify how quickly it shrinks (the
amount of hysteresis) by setting <samp class="codeph">KHeapShrinkHysRatio</samp>. </p>
 <p>The
value of <samp class="codeph">KHeapShrinkHysRatio</samp> is multiplied with the size
of the growth chunk to establish the hysteresis value. When heap cells are
freed the system waits until the number of free cells reaches the hysteresis
value before releasing the memory. </p>
 <p>The default value of <samp class="codeph">KHeapShrinkHysRatio</samp> is
2.0. Reducing the value towards 1 frees memory more quickly. Values of 1 or
less result in no hysteresis. More hysteresis results in faster performance,
as heap allocations occur less often, but more RAM use. </p>
 <p>You set the
value using a <samp class="codeph">patchdata</samp> statement in an OBY (or IBY) file.
For example, </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-FE3EAA41-A9EE-5659-A57F-6186AE22BF65"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-FE3EAA41-A9EE-5659-A57F-6186AE22BF65"><!-- --></a>
patchdata ekern.exe @ KHeapShrinkHysRatio 1.5

patchdata euser.dll @ KHeapShrinkHysRatio 1.5
</pre>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9F765460-7F6A-5F2A-85DE-89EBFE213B1E"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9F765460-7F6A-5F2A-85DE-89EBFE213B1E"><!-- --></a><h2 class="sectiontitle">Recognizer
Loading</h2> <p>You can configure the Apparc server to load recognizer
plugins at startup or on demand. Loading on demand reduces RAM consumption
and boot time. The trade-off is that the first use of each recognizer takes
longer to complete as it needs to be loaded before it can be used. Because
recognizers typically get used several times in quick succession the impact
of the trade off can be reduced by using a timer to defer unloading </p>
 <p>You
can enable or disable load-on-demand and specify the delay before unloading
using the <samp class="codeph">patchdata</samp> statement in an OBY (or IBY) file. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-17741E7B-5EF8-52F9-9DED-C5482B78EDEE"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-17741E7B-5EF8-52F9-9DED-C5482B78EDEE"><!-- --></a>patchdata apserv.dll @ KApaLoadDataRecognizersOnDemand &lt;newvalue&gt; </pre>
 <p>The
default <samp class="codeph">newvalue</samp> is 0 which means that recognizers are loaded
at boot. A value of 1 specifies that recognizers will be loaded on demand. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-D398EA48-F84C-528D-B0B1-40B8A8E6F1A1"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-D398EA48-F84C-528D-B0B1-40B8A8E6F1A1"><!-- --></a>patchdata apserv.dll @ KApaUnloadRecognizersTimeout &lt;newvalue&gt; </pre>
 <p>The
default<samp class="codeph">newvalue</samp> is 10000000 (10 seconds in milliseconds). </p>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9B98E4EB-28BC-5A0A-8174-7949E515AFA6"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-9B98E4EB-28BC-5A0A-8174-7949E515AFA6"><!-- --></a><h2 class="sectiontitle">Secure Backup
Optimisation</h2> <p>The secure backup engine uses a shared chunk to communicate
information efficiently between client and server components. You can set
the size of the chunk, and other parameters, in a file called <span class="filepath">sbeconfig.xml</span> in
the private directory of the secure backup engine. The default size of the
chunk is 2MB. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-08DAB844-88CF-560B-93E0-718CBEA0A9C4"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-08DAB844-88CF-560B-93E0-718CBEA0A9C4"><!-- --></a>
&lt;?xml version="1.0" encoding="UTF-16" standalone="yes"?&gt;
&lt;sbe_config&gt;
    &lt;heap size = "2097152" max_retries = "5" reduction_factor = "2"/&gt;
    &lt;central_repository uid = "0x10202BE9"/&gt; 
    &lt;exclude_drives list = "z"/&gt; 
&lt;/sbe_config&gt; 
        </pre>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-4EC82389-6C89-5C47-BAC4-A139BCB3531E"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-4EC82389-6C89-5C47-BAC4-A139BCB3531E"><!-- --></a><h2 class="sectiontitle"> Server shutdown
behaviour</h2> <p>The shutdown behaviour of servers has a large impact
on RAM and performance characteristics. If a server is always running it can
respond faster to each request but requires RAM all the time. A transitive
server is one which shuts down when it has no active connections. A transitive
server uses RAM only when necessary but its performance will vary according
to whether it needs to be started. </p>
 <p>You can configure the shutdown
behaviour of several key Symbian servers. </p>
 <p><strong>Message Server </strong> </p>
 <p>Symbian provides two versions of the Message
Server: an always-on version and a transitive one. You can select which one
to include in your ROM by editing <span class="filepath">../generic/messaging/framework/server/group/messageserver.iby</span>  </p>
 <ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-563A829D-7ED3-50E0-A90C-472D2EBEA65C"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-563A829D-7ED3-50E0-A90C-472D2EBEA65C"><!-- --></a><p>For always-on include <span class="filepath">msgs.dll</span> in
your ROM </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-42CD2F3D-9552-5FC7-910E-3B8D6EE8892C"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-42CD2F3D-9552-5FC7-910E-3B8D6EE8892C"><!-- --></a><p>For transitive behaviour
include <span class="filepath">msgs_autoshutdown.dll</span> in your ROM </p>
 </li>

</ul>
 <p><strong>Contacts Server </strong> </p>
 <p>The behaviour of the Contacts Server is determined
by a command line argument passed to <span class="filepath">cntsrv.exe</span>. </p>
 <p>The
default behaviour is transitive. For always-on behaviour you must start the
server use the <samp class="codeph">-nontransient</samp> option in your system startup
file. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-85079652-9D30-5B44-BCDF-8DB41759B2CC"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-85079652-9D30-5B44-BCDF-8DB41759B2CC"><!-- --></a>
START_PROCESS_INFO
    {
    path = "Z:\\sys\\bin\\cntsrv.exe";
    args = "-nontransient";
    ...
    }</pre>
 <p><strong>Agenda Server </strong> </p>
 <p>The behaviour of the Agenda Server is determined
by a command line argument passed to <span class="filepath">agsvexe.exe</span>. </p>
 <p>The
default behaviour is transitive. For always-on behaviour you must start the
server use the <samp class="codeph">-nontransient</samp> option in your system startup
file. </p>
 <pre class="codeblock" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-DF1BBB3B-8A6E-5F63-B91C-9E4B9A952331"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-DF1BBB3B-8A6E-5F63-B91C-9E4B9A952331"><!-- --></a>
START_PROCESS_INFO
    {
    path = "Z:\\sys\\bin\\agsvexe.exe";
    args = "-nontransient";
    ...
    }</pre>
 </div>

<div class="section" id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2CACB838-2E72-5723-9511-68EC1D7E3BDD"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-2CACB838-2E72-5723-9511-68EC1D7E3BDD"><!-- --></a><h2 class="sectiontitle">Window Server</h2> <p><strong>Flicker Free Redraw and Transparency </strong> </p>
 <p>You can configure the
drawing behaviour of the window server by enabling or disabling support for<strong>flicker
free redraw</strong> and <strong>transparency</strong>. </p>
 <p>The window server is generally
configured to allocate two full-screen bitmaps (which consume over 140kB each
on a device with a normal resolution display). </p>
 <ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E42668D2-7D67-527A-9A4A-A84A58781701"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E42668D2-7D67-527A-9A4A-A84A58781701"><!-- --></a><p>An off-screen bitmap
to reduce redraw flicker. Drawing commands between <samp class="codeph">BeginRedraw</samp> and <samp class="codeph">EndRedraw</samp> commands
are committed to the off-screen bitmap. Only when <samp class="codeph">EndRedraw</samp> is
called does the window server update the screen with the contents of the off-screen
bitmap. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E4334927-57C3-5A1B-A6EF-549AFD203429"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-E4334927-57C3-5A1B-A6EF-549AFD203429"><!-- --></a><p>A transparency bitmap
to support transparent windows. </p>
 </li>

</ul>
 <p>The allocation of these bitmaps can be configured in <span class="filepath">Wsini.ini</span>. </p>
 <ul>
<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-B529F499-7FCC-5076-859C-3D0ABF8E0B9B"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-B529F499-7FCC-5076-859C-3D0ABF8E0B9B"><!-- --></a><p>The presence of the
keyword <samp class="codeph">FLICKERFREEREDRAW</samp> causes the off-screen bitmap to
be allocated. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-751FB913-C942-5F8D-9A36-0B2727941977"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-751FB913-C942-5F8D-9A36-0B2727941977"><!-- --></a><p>The presence of the
keyword <samp class="codeph">TRANSPARENCY</samp> causes <strong>both</strong> the off-screen and
transparency bitmaps to be allocated. </p>
 </li>

<li id="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-7D32B174-8E33-5292-9096-3EF0EB825C60"><a name="GUID-7E401451-16EB-515B-88B2-4D0D2D6C7A57__GUID-7D32B174-8E33-5292-9096-3EF0EB825C60"><!-- --></a><p>If neither keyword is
present no full-screen bitmaps are allocated. </p>
 </li>

</ul>
 <p> </p>
 <p>In practice flicker free redraw makes a noticeable improvement
to most UIs. If a UI uses transparent windows both bitmaps must be enabled. </p>
 <p><strong>The default window server command buffer </strong> </p>
 <p>Each connection
to the window server has a command buffer so that the number of inter-process
calls can be reduced. The buffer has a default size (<samp class="codeph">EClientBufferSize</samp>)
which is typically the minimum of 640 bytes. Applications can override the
default whenever they create an <samp class="codeph">RWsSession</samp>. </p>
 <p>The default
buffer size is defined in <span class="filepath">...\os\graphics\windowing\windowserver\SERVER\w32cmd.h</span>  </p>
 <p>The
benefit of a small buffer is reduced RAM use. The benefits of a bigger buffer
are reduced IPC (so drawing is more efficient) and reduced flicker. </p>
 <p> <strong>NOTE:</strong> Increasing
the buffer size to reduce flicker is less effective than using the <samp class="codeph">FICKERFREEREDRAW</samp> feature
described above. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-87D1F36A-A3BB-5385-BDF3-211AC31097E9.html">Performance Considerations</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>