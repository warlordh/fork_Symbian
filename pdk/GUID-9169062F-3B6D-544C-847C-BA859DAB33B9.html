<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Sessions and requests"/>
<meta name="abstract" content="Describes communication between the client and the server in the client-server framework."/>
<meta name="description" content="Describes communication between the client and the server in the client-server framework."/>
<meta name="DC.Relation" scheme="URI" content="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Sessions and requests</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2393224 id2393504 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html">Inter Process Communication</a> &gt; <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">Using Client-Server</a> &gt; </div>
<h1 class="topictitle1">Sessions
and requests</h1>
<div><p>Describes communication between the client and the server in the
client-server framework.</p>

<p>Communication between client and server is represented by a <em>session</em>;
this is initiated by the client. A client thread may have several sessions
with a server. A session can also be shared by all the client threads in a
process, if supported by the server, and also by all threads across all processes,
again if supported by the server. </p>

<p>Sessions are maintained by the Kernel and the important points are: </p>

<ul>
<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-C8D3B5F7-6BCE-5AB2-A11D-F0436F8CE20C"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-C8D3B5F7-6BCE-5AB2-A11D-F0436F8CE20C"><!-- --></a><p>The client has an <samp class="codeph">RSessionBase</samp> handle
to the session. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-80F84FC0-AA11-5C5E-A067-A23D6069DE00"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-80F84FC0-AA11-5C5E-A067-A23D6069DE00"><!-- --></a><p>The server uses a <samp class="codeph">CSession2</samp> -derived
class to represent the session. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-B6405FDE-1ECB-543E-BA11-6280A5CD8DF8"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-B6405FDE-1ECB-543E-BA11-6280A5CD8DF8"><!-- --></a><p>A session may be sharable
between the threads in the client process, between all threads across all
processes, or it can be restricted to the thread connecting to the server. </p>
 </li>

</ul>

<p>If a call to the client interface requires a service from the server, the
client interface must set up and send a message. The message has a 32-bit
operation code to identify the request, and up to four 32-bit parameters.
The message is encapsulated within a <a href="GUID-4AD02F14-1142-372F-9D11-224595932034.html"><span class="apiname">TIpcArgs</span></a> object. The
process can be summarised as follows: </p>

<ul>
<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-2810FEA1-D51E-534E-963C-425D9A3B09C0"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-2810FEA1-D51E-534E-963C-425D9A3B09C0"><!-- --></a><p>The client sends the
message to the server using <samp class="codeph">RSessionBase::SendReceive()</samp>.
This call eventually returns with the completion code. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-785468D3-7D69-5A2C-818D-5961DCCB7FCA"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-785468D3-7D69-5A2C-818D-5961DCCB7FCA"><!-- --></a><p>The Kernel packages
the operation code and parameters and delivers an <samp class="codeph">RMessage2</samp> to
the server. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-7BF7D799-7999-51C8-BEBF-88822703F113"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-7BF7D799-7999-51C8-BEBF-88822703F113"><!-- --></a><p>The server delivers
the message to the appropriate <samp class="codeph">CSession2</samp> object, which deals
with the request. The request is handled by <a href="GUID-D5A30C75-E22C-34E8-913B-7D2CA6AD5C51.html#GUID-D5A30C75-E22C-34E8-913B-7D2CA6AD5C51__GUID-B37413F7-D8FD-35AD-A037-99023D7CE986"><span class="apiname">CSession2::ServiceL()</span></a>.
This is defined as pure virtual in <samp class="codeph">CSession2</samp>, and is implemented
by the class derived from <samp class="codeph">CSession2</samp>. When the session has
finished dealing with the request, it calls <samp class="codeph">RMessage2::Complete()</samp> to
indicate that the service has been performed and to return a 32-bit result
to the client - this is returned from the <samp class="codeph">SendReceive()</samp>. </p>
 </li>

</ul>

<p>The client-server framework also supports the sending of requests asynchronously
to the server. </p>

<p>The following diagram illustrates this: </p>

<div class="fignone" id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-97810C53-3BF6-5ECF-B413-86EEE99E68DA"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-97810C53-3BF6-5ECF-B413-86EEE99E68DA"><!-- --></a>
<img src="GUID-08E31D57-A84D-5B6B-B16F-3F7025A763E9_d0e342402_href.png"/>
<p>Sending messages asynchronously to the server</p>

</div>

<p>A server can support multiple connections from a client in a number of
distinct ways: </p>

<ul>
<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-DFBDEB83-48DE-5A94-A07B-B9BA1715FDE7"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-DFBDEB83-48DE-5A94-A07B-B9BA1715FDE7"><!-- --></a><p>The client may have
a number of concurrent sessions with a particular server. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-C382BBE4-A94B-593E-9C9E-1E2E4DA60587"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-C382BBE4-A94B-593E-9C9E-1E2E4DA60587"><!-- --></a><p>Each session is independent
of any other within the client thread; <samp class="codeph">Connect()</samp> must be
called to initialise each new connection. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-343295A2-AAE6-51AA-AFCF-5CD3CD39A510"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-343295A2-AAE6-51AA-AFCF-5CD3CD39A510"><!-- --></a><p>The client may create
a number of <em>subsessions</em> within a single session. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-7228AA13-B73F-5996-8535-0C959B7C7788"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-7228AA13-B73F-5996-8535-0C959B7C7788"><!-- --></a><p>Each <em>client subsession </em> corresponds
to a <em>subsession object</em> in the server. The client subsession contains
a handle to this subsession object. All communication is via the owning session;
the handle is used to match up corresponding client subsessions and subsession
objects. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-8D01708B-CCC3-5B6C-9C26-4A4BE26A3D0C"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-8D01708B-CCC3-5B6C-9C26-4A4BE26A3D0C"><!-- --></a><p>Subsessions use fewer
Kernel resources than sessions, although they are slightly more complex to
use. </p>
 </li>

</ul>

<p>A server can support the creation of sharable sessions allowing either
all the threads in a client process to share a single session, or allowing
all threads across all processes to share a single session. The important
points are: </p>

<ul>
<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-81929E38-1251-51C9-A3B0-CD82AD519D82"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-81929E38-1251-51C9-A3B0-CD82AD519D82"><!-- --></a><p>The server must support
the sharing of sessions. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-AE8DF750-FABF-55CE-A633-41E96A50413B"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-AE8DF750-FABF-55CE-A633-41E96A50413B"><!-- --></a><p>The connecting thread
can make the session sharable after creation, or it can create the session
as sharable. </p>
 </li>

<li id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-E1962030-B977-5A90-AC3C-5419C2FAAF68"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-E1962030-B977-5A90-AC3C-5419C2FAAF68"><!-- --></a><p>Up to 255 threads can
be concurrently attached to a session. </p>
 </li>

</ul>

<div class="section" id="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-8C971096-BD4A-408A-AF20-15810FAB9D4C"><a name="GUID-9169062F-3B6D-544C-847C-BA859DAB33B9__GUID-8C971096-BD4A-408A-AF20-15810FAB9D4C"><!-- --></a><h2 class="sectiontitle">See also</h2> <p> <a href="GUID-1CC6FEF0-7D1E-5329-8276-22ACFE3DE362.html" title="Describes subsessions within a session.">Subsessions
within a session</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">Using Client-Server</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>