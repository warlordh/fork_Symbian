<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Base Starter Technology"/>
<meta name="abstract" content="This topic describes the purpose of the Base Starter, and which parts of it can be customised by phone developers."/>
<meta name="description" content="This topic describes the purpose of the Base Starter, and which parts of it can be customised by phone developers."/>
<meta name="DC.Relation" scheme="URI" content="GUID-E5459A54-14BC-55C1-B911-63415E4C61A6.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-80698E62-E310-59CA-A524-5CF44C437BE4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E5459A54-14BC-55C1-B911-63415E4C61A6.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Base Starter Technology</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2399606 id2399615 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-80698E62-E310-59CA-A524-5CF44C437BE4.html" title="The Base Starter is a program that runs when the system starts.">Base Starter</a> &gt; <a href="GUID-E5459A54-14BC-55C1-B911-63415E4C61A6.html" title="This section describes the technology, architecture, and source code organization of the Base Starter.">Concepts</a> &gt; </div>
<h1 class="topictitle1">Base
Starter Technology</h1>
<div><p>This topic describes the purpose of the Base Starter, and which
parts of it can be customised by phone developers.</p>

<p>The purpose of the Base Starter is to: </p>

<ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D6418767-A7E8-5C3F-A12D-57B038D6DDEA"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D6418767-A7E8-5C3F-A12D-57B038D6DDEA"><!-- --></a><p>Define a handset's local
drives </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2611D5AC-D6FD-5957-A359-11D5A7200B2F"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2611D5AC-D6FD-5957-A359-11D5A7200B2F"><!-- --></a><p>Define what file systems
(<span class="filepath">.FSY</span>) and file extensions (<span class="filepath">.FXT</span>)
are to be mounted on those drives </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-96772B04-8CC5-5248-A015-48809163B6EA"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-96772B04-8CC5-5248-A015-48809163B6EA"><!-- --></a><p>Associate drive letters
with drives </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-36BFBCDC-0A12-53E0-8DF6-97606089A996"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-36BFBCDC-0A12-53E0-8DF6-97606089A996"><!-- --></a><p>Modify drive start-up
behaviour </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-C8914C2A-4FEA-5367-9C8C-5BD1B8926416"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-C8914C2A-4FEA-5367-9C8C-5BD1B8926416"><!-- --></a><p>Enable <a href="GUID-89BCF9A5-ABBD-5523-BA76-FDB00B806A30.html">fair
scheduling and file caching</a> on a drive by drive basis. </p>
 </li>

</ul>

<p>Handset manufacturers need to customise the Base Starter as part of the
process of porting Symbian platform to a new device. <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BF793E4E-8303-5C94-A297-52C5AD781B6B">Mapping local drives</a> is the most important part of this process, but <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-89ED1556-60A5-5030-8946-7156656B7771">customisation
using TFSStartup</a> is also possible. </p>

<p>Note that there are some <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-AC49186C-F69B-5D5B-8515-3CF8CD91EAF4">activities
that the Base Starter does not do</a>  </p>

<div class="section" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BF793E4E-8303-5C94-A297-52C5AD781B6B"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BF793E4E-8303-5C94-A297-52C5AD781B6B"><!-- --></a><h2 class="sectiontitle">Mapping local
drives</h2> <p>There are two ways to do this: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-F9A1D807-DFF0-563E-B792-0C7AE29F16CA"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-F9A1D807-DFF0-563E-B792-0C7AE29F16CA"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2B95B775-1BD1-5256-86D3-CD3FA12447B9">Create local drive mapping files</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-23B391A9-70B1-54F6-A891-422B5C6274DE"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-23B391A9-70B1-54F6-A891-422B5C6274DE"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A195BD51-80C7-5D87-ABA2-8878CC509B84">Use automatic local drive mapping</a>. </p>
 </li>

</ul>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2B95B775-1BD1-5256-86D3-CD3FA12447B9"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2B95B775-1BD1-5256-86D3-CD3FA12447B9"><!-- --></a><strong>Create local drive mapping
files</strong> </p>
 <p>A local drive mapping file is an ASCII text file that explicitly
defines the drive letter, file system, and file extension to be associated
with a drive. The file contains a set of records, one for each drive, that
specifies this information. Records are also referred to as drive mappings. </p>
 <p>The
file is created as part of your hardware variant's source tree, but is copied
into a standard location in your ROM filing system when you build the ROM. </p>
 <p>A
drive mapping file has a formal structure; the main rules are: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2F5C4942-D39B-5F80-8E31-CAB8E7411554"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2F5C4942-D39B-5F80-8E31-CAB8E7411554"><!-- --></a><p>the file can contain
a maximum of 16 different drive mappings </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BA8CB9C2-F3D7-5A06-9385-6FE7B3472B6C"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BA8CB9C2-F3D7-5A06-9385-6FE7B3472B6C"><!-- --></a><p>each drive mapping is
represented by a separate record; each record occupies one line; each line
is separated by the new line character <samp class="codeph">\n</samp>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D1A6514F-3A2C-5B2E-818B-9933CA98BC1F"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D1A6514F-3A2C-5B2E-818B-9933CA98BC1F"><!-- --></a><p>information is represented
by items separated by at least one blank character </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A6F6AD8B-361F-5DAC-8151-467164281CBD"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A6F6AD8B-361F-5DAC-8151-467164281CBD"><!-- --></a><p>comments can occupy
a whole line or can be added onto the end of a record (i.e. at the end of
line). They are marked by a <samp class="codeph">#</samp> character that must precede
the start of the comment text. </p>
 </li>

</ul>
 <p>A record, or drive mapping, has the following items, each separated
by at least one blank character. Each item must appear in the order described: </p>
 <pre class="codeblock" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-EC69C9D7-C7C3-5687-AB75-2157ABF012D5"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-EC69C9D7-C7C3-5687-AB75-2157ABF012D5"><!-- --></a>&lt;drive_letter&gt; &lt;drive_number&gt; &lt;file_system_filename&gt; &lt;file_system&gt; &lt;file_extension_filename&gt; &lt;flags&gt;</pre>
 
<div class="tablenoborder"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D09A4483-1819-56A5-96C5-167D59C79E45"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D09A4483-1819-56A5-96C5-167D59C79E45" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> &lt;drive_letter&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>A single character between <samp class="codeph">A</samp> and <samp class="codeph">Z</samp> followed
by a colon. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> &lt;drive_number&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The local drive number associated with the drive letter . </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">&lt;file_system_filename&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The filename of the file system that is to be mounted on the drive.
This should be the filename without the <span class="filepath">.FSY</span> extension.
If it is necessary to omit a file system file name for any reason, then this
item should contain the null character: <samp class="codeph">0</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> &lt;file_system&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The name of the file system as implemented by <samp class="codeph">&lt;file_system_filename&gt;</samp>. </p>
 <p>If
the file system name is the same as the file name, as represented by the <samp class="codeph">&lt;file_system_filename&gt;</samp> item,
then supply the null character <samp class="codeph">0</samp>. [Internally, the file system
name is sometimes referred to as the object name.] </p>
 <p>Symbian platform
supplies the following file systems: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BB05125F-DEAA-5881-8B5D-27CF2735598E"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-BB05125F-DEAA-5881-8B5D-27CF2735598E"><!-- --></a><p> <samp class="codeph"> FAT</samp>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-F9CAA425-F382-5131-A2CE-A8813EC2844C"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-F9CAA425-F382-5131-A2CE-A8813EC2844C"><!-- --></a><p> <samp class="codeph"> ROFS</samp> -
read/only file system </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1C9ED727-60A6-5835-B10B-BC5DF0C11763"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1C9ED727-60A6-5835-B10B-BC5DF0C11763"><!-- --></a><p> <samp class="codeph">LFFS</samp> -
logging flash file system </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B175831B-3633-5B56-AD5A-76218DFA6032"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B175831B-3633-5B56-AD5A-76218DFA6032"><!-- --></a><p> <samp class="codeph"> COMP</samp> -
composite file system (but see the description of the <samp class="codeph">FS_COMPOSITE</samp> flag
below) </p>
 </li>

</ul>
 <p>Handset manufacturers may supply other file systems. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> &lt;file_extension_filename&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The filename of the file extension that is to be mounted on the
drive. This should be the filename without the <span class="filepath">.FXT</span> extension.
If it is necessary to omit a file extension file name for any reason, then
this item should contain the null character: <samp class="codeph">0</samp>. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">&lt;flags&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>A set of <em>mount</em> flags that modify the start-up behaviour of
the local drive. More than one flag can be specified, each separated by a
comma, with no intervening blank characters. If no flags apply, then the null
character: <samp class="codeph">0</samp> must be coded. </p>
 <div class="p">
<div class="tablenoborder"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-E1FCA3ED-EF56-5C3E-9596-CBBD7DF53AE1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-E1FCA3ED-EF56-5C3E-9596-CBBD7DF53AE1" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">FS_FORMAT_ALWAYS</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Formats the drive as soon as it has been mounted. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">FS_FORMAT_COLD</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Formats the drive as soon as it has been mounted if the device is
performing a cold boot. This is generally required for internal RAM drives. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_FORMAT_CORRUPT </samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Formats the drive, if it is found to be corrupt when mounted. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_DISMNT_CORRUPT</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Dismounts the drive, if it is found to be corrupt when mounted.
The local drive mapping remains unaltered and the associated file system file
is not unloaded. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_SWAP_CORRUPT-&lt;drv&gt;</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Dismounts the drive, if it is found to be corrupt when mounted,
and swaps the mappings for this drive with the alternative drive <samp class="codeph">&lt;drv&gt;</samp>,
and remounts both. </p>
 <p>The alternative drive <samp class="codeph">&lt;drv&gt;</samp> must
be specified, and must follow a '<samp class="codeph">-</samp>' character, which follows
the <samp class="codeph">FS_SWAP_CORRUPT</samp> symbol. </p>
 <p>For example, to swap
with drive <span class="filepath">Y:</span>, specify: </p>
 <pre class="codeblock" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9CC3B772-73D6-5F12-959A-54090AEE7EB1"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9CC3B772-73D6-5F12-959A-54090AEE7EB1"><!-- --></a>FS_SWAP_CORRUPT-Y</pre>
 <p>This
option is commonly used when handling corrupt flash user-data drives on <span class="filepath">C:</span>.
The corrupt drive is mapped to another drive letter – allowing data to be
extracted from it. The <span class="filepath">C:</span> drive is replaced by a RAM
disk – providing a temporary work disk for the OS, while the main one is restored.
Note that a mapping file must not specify more than one drive for swapping,
i.e. there can only be one occurrence of <samp class="codeph">FS_SWAP_CORRUPT</samp> flag
per mapping file. </p>
 <p>Both drives involved in the swap must be internal
drives. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">FS_SYNC_DRIVE</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Mounts this drive as a synchronous drive. This means that requests
are handled in the main file server thread rather than in a dedicated drive
thread. This option is normally only specified for internal RAM drives. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_SCANDRIVE</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Runs <span class="filepath">Scandrive</span>, once mounted, but only if the
rugged file system is enabled. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">FS_COMPOSITE</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Marks the drive as contributing to the composite file system. The
composite file system allows multiple local drives to be overlaid with each
other, and with the core OS ROM image, and to make them appear as one drive. </p>
 <p>Files
in one drive can add to, replace, or hide (i.e. logically remove) files in
another drive </p>
 <p>There are number of rules: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-73C84D80-12E4-5EB2-9661-6F802696F4E8"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-73C84D80-12E4-5EB2-9661-6F802696F4E8"><!-- --></a><p>the drive letter must
always be Z: </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B8BA7BF4-5451-5B14-80F7-44E37DB08B23"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B8BA7BF4-5451-5B14-80F7-44E37DB08B23"><!-- --></a><p>if the file system is
omitted, i.e. both <samp class="codeph">&lt;file_system_filename&gt;</samp> and <samp class="codeph">&lt;file_system&gt;</samp> are
set to '0', then the the ROFS file system is assumed, and this can be the <em>only</em> drive
marked with <samp class="codeph">FS_COMPOSITE</samp> in a mapping file. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-E64061B1-C789-57D4-BDD2-32548AC9A97B"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-E64061B1-C789-57D4-BDD2-32548AC9A97B"><!-- --></a><p>if the file system is
explicitly specified, i.e. <samp class="codeph">&lt;file_system_filename&gt;</samp> and <samp class="codeph">&lt;file_system&gt;</samp> are
set, then more than one drive can be marked with <samp class="codeph">FS_COMPOSITE</samp>.
However, adding a drive that uses a file system other than ROFS is <em>strongly
discouraged</em> for performance reasons. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2B4F9A89-9907-5417-91B3-94E02F212E42"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2B4F9A89-9907-5417-91B3-94E02F212E42"><!-- --></a><p>the order of the records
is important, as this defines the search order when Symbian platform is working
out which files will contribute to the final ROM. The core OS ROM file system
(containing the kernel, kernel extensions, media drivers, the file server,
file systems and the Base Starter executable) is searched first, followed
by the last drive in the mapping file marked with <samp class="codeph">FS_COMPOSITE</samp>,
followed by the next last drive marked with <samp class="codeph">FS_COMPOSITE</samp> etc. </p>
 </li>

</ul>
 <p>Note: the use of <samp class="codeph">COMP</samp> as a <samp class="codeph">&lt;file_system&gt;</samp> seems
to contradict the use of this flag. <samp class="codeph">COMP</samp> was used to specify
a composite file system that allowed a <em>single</em> drive to be combined
with the ROM file system. For compatibility purposes, and to ensure consistency
of syntax, you can still specify <samp class="codeph">COMP</samp> with <samp class="codeph">FS_COMPOSITE</samp> on
a drive mapping, but you cannot have any other drive mappings marked as <samp class="codeph">FS_COMPOSITE</samp>.
If you specify <samp class="codeph">COMP</samp>, then the underlying file system associated
with that drive is assumed to be <samp class="codeph">ROFS</samp>. </p>
 <p>See <a href="GUID-E55EE9B5-AC5B-5C67-A23C-DDB3F40D174A.html">Mounting multiple ROM images
as a single ROM drive</a> for more detail. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_NO_MOUNT</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Loads the file specified file system and the specified file extension,
and maps the drive as specified, but does not mount the drive. This is often
used in conjunction with <samp class="codeph">FS_SWAP_CORRUPT</samp>. It allows the configuration
for the alternative drive involved in a swap to be specified – but for the
drive not to be mounted and accessible in normal operation. If the drive is
involved in a swap with another, then the <samp class="codeph">FS_NO_MOUNT</samp> state
is ignored and the drive is mounted normally. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">FS_ALLOW_REM_ACC</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>This is reserved for future use. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_NOT_RUGGED</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Marks the mount as not rugged. Mounting the drive without the rugged
file system means that <samp class="codeph">FS_SCANDRIVE</samp> is not supported. If <samp class="codeph">FS_SCANDRIVE</samp> is
also defined, it is ignored. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph"> FS_SYSTEM_DRIVE</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Assigns this drive as the system drive. Applications store user
data on the system drive, and call <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">RFs::GetSystemDriveChar()</span></a> to
discover the drive letter. </p>
 <p>A mapping file can only specify one drive
as the system drive. </p>
 <p>See <a href="GUID-629AB2C9-BEDD-5166-8B09-F8DFF7527C03.html" title="This topic describes the properties and its uses of system drive">the
system drive</a>. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>
 </td>

</tr>

</tbody>

</table>
</div>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A195BD51-80C7-5D87-ABA2-8878CC509B84"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A195BD51-80C7-5D87-ABA2-8878CC509B84"><!-- --></a><strong>Use automatic local drive
mapping</strong> </p>
 <p>If no drive mapping file exists or is unavailable, the
Base Starter decides which file system to mount on each local drive by interrogating
the capabilities of those drives. This is known as auto-detection. </p>
 <p>Internally,
the Base Starter holds a table containing entries for every known supported
local drive configuration. This table is known as the auto-configuration table.
The information supplied by each entry in the table resembles that supplied
by a <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-2B95B775-1BD1-5256-86D3-CD3FA12447B9">local
drive mapping file</a>, and contains the following information: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-0713E2D9-B47F-552D-B4BB-D2B587534F86"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-0713E2D9-B47F-552D-B4BB-D2B587534F86"><!-- --></a><p>The filename of the
file system for this configuration (the <span class="filepath">.FSY</span>). The filename
corresponds to the <samp class="codeph">&lt;file_system_filename&gt;</samp> item in a drive
mapping file entry. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A27734C1-04DC-5741-8C9F-E28DAAC12E9B"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-A27734C1-04DC-5741-8C9F-E28DAAC12E9B"><!-- --></a><p>The object name of the
file system for this configuration. The object name corresponds to the <samp class="codeph"> &lt;file_system&gt;</samp> item
in a drive mapping file entry. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1B40A8A4-C883-5385-8255-023DAA42FD24"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1B40A8A4-C883-5385-8255-023DAA42FD24"><!-- --></a><p>The filename of the
file server extension for this configuration, if applicable. The filename
corresponds to the <samp class="codeph">                   &lt;file_system&gt;</samp> item
in a drive mapping file entry. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D50A002B-A6F5-5CE0-95A8-5327F5D43F2E"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D50A002B-A6F5-5CE0-95A8-5327F5D43F2E"><!-- --></a><p>The set of mount flags;
these correspond to the <samp class="codeph">&lt;flags&gt;</samp> items in a drive mapping
file entry. There is one exception - <samp class="codeph">FS_SWAP_CORRUPT</samp> is not
supported, because it is impossible to auto-detect which drive is to be swapped. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1F79E6A1-FEC3-57A7-8C50-DDC7296610C5"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1F79E6A1-FEC3-57A7-8C50-DDC7296610C5"><!-- --></a><p>A file system identification
function that is used to decide whether the designated file system is really
suitable for this drive. Each function is an internal part of the generic
Base Starter code. </p>
 </li>

</ul>
 <p>The Base Starter uses the following default mapping of drive letters
to drive numbers: </p>
 
<div class="tablenoborder"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-861EC91F-CB71-5E7F-A58F-F14A890C2EC1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-861EC91F-CB71-5E7F-A58F-F14A890C2EC1" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <strong> Local drive number</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong> Drive letter</strong>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">0</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>C</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">1</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>D</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">2</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>E</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">3</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>F</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">4</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>G</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">5</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>H</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">6</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>I</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">7</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>J</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">8</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>K</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">9</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>L</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">10</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>M</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">11</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>N</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">12</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>O</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">13</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>P</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">14</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>Q</p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">15</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>R</p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="section" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-89ED1556-60A5-5030-8946-7156656B7771"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-89ED1556-60A5-5030-8946-7156656B7771"><!-- --></a><h2 class="sectiontitle">Customisation
using TFSStartup</h2> <p>Most of the functionality provided by the Base
Starter is provided by the class <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup</span></a>.
This contains a number of virtual functions with default Symbian implementations.
A handset manufacturer can create a customised version of the Base Starter,
which overrides these functions. </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-49B2FC6B-E0BF-548C-9537-FE02B420EE7A"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-49B2FC6B-E0BF-548C-9537-FE02B420EE7A"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9B842CF3-D1A2-5BC7-8979-42EC7CD9A523">Disabling drive auto-detection</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-90090D6E-2788-590C-8595-4E4423E51F5B"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-90090D6E-2788-590C-8595-4E4423E51F5B"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4AB5A9C6-6D33-58E9-A372-033C1595DB9E">Customising for multiple hardware states</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1D7344CC-0876-5973-8E57-E2619E4D8B32"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1D7344CC-0876-5973-8E57-E2619E4D8B32"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-7098B073-430F-5CA6-91C6-BCF267B33BF3">Overriding the default drive mapping</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9399A990-84B2-553B-900A-DBBD7EC8C04F"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9399A990-84B2-553B-900A-DBBD7EC8C04F"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-904D8CCE-9E16-5A60-B141-9C838B1B8B44">Customising mount flags</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-ED7B2E26-4147-553C-9DCF-06143EEEF2ED"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-ED7B2E26-4147-553C-9DCF-06143EEEF2ED"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-905BFBD9-AD40-5E11-AFED-F791389F1450">Customising the drive initialisation sequence</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4C6122EB-9898-5874-AB65-900F739DC611"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4C6122EB-9898-5874-AB65-900F739DC611"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B93875C5-1B35-5993-89C4-B2CA5F502450">Customising Loadlocale</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-95C61E12-EE0B-57B8-B5FA-EB476471D93C"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-95C61E12-EE0B-57B8-B5FA-EB476471D93C"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-0B60FAF0-5D2F-5A0F-984C-DFB35BC09ED2">Customising the restart mode</a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1A1EDBF0-92B4-5369-9077-210842CA13C6"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1A1EDBF0-92B4-5369-9077-210842CA13C6"><!-- --></a><p> <a href="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D.html#GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4E9AFD2A-57DE-528A-8F41-C79EBE44B2A0">Customising other behaviour</a>  </p>
 </li>

</ul>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9B842CF3-D1A2-5BC7-8979-42EC7CD9A523"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-9B842CF3-D1A2-5BC7-8979-42EC7CD9A523"><!-- --></a><strong>Disabling drive auto-detection</strong> </p>
 <p>The
most common customisation is to use the supplied version of the Base Starter
and to create one or more local drive mapping files . In this case, savings
in code space can be made by removing the code that deals with auto-detection.
This is achieved by adding the following line to the <span class="filepath">MMP</span> file
describing the Base Starter, and then rebuilding it. </p>
 <pre class="codeblock" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4D382A63-638C-5AF2-9535-88C7E3AB0869"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4D382A63-638C-5AF2-9535-88C7E3AB0869"><!-- --></a>MACRO AUTODETECT_DISABLE</pre>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4AB5A9C6-6D33-58E9-A372-033C1595DB9E"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4AB5A9C6-6D33-58E9-A372-033C1595DB9E"><!-- --></a><strong>Customising for multiple
hardware states</strong> </p>
 <p>If the state of your hardware varies, and it requires
different mapping files for different states, then it is still possible to
use the local drive mapping scheme. Examples of hardware state variations
might be differences in the state of a switch or jumper setting, or the presence
or absence of a hardware feature. In this situation, the ROM can be built
with more than one mapping file. A custom version of the Base Starter provides
its own version of the virtual function <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartUp::LocalDriveMappingFileName()</span></a>;
this checks the appropriate settings, and returns the name of the appropriate
local drive mapping file. The returned name is the full path name. </p>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-7098B073-430F-5CA6-91C6-BCF267B33BF3"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-7098B073-430F-5CA6-91C6-BCF267B33BF3"><!-- --></a><strong>Overriding the default drive
mapping</strong> </p>
 <p>To override the default mapping of drive letters to drive
numbers on a drive by drive basis, a custom version of the Base Starter provides
its own version of the virtual function <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartUp::DefaultLocalDrive()</span></a>. </p>
 <p>To
override the auto-configuration table used by the automatic local drive mapping
scheme, for example to add support for a new <span class="filepath">.FSY</span>, a
custom version of the Base Starter provides its own version of the virtual
function <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartUp::GetNextStandardFSInfoEntry()</span></a>. </p>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-904D8CCE-9E16-5A60-B141-9C838B1B8B44"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-904D8CCE-9E16-5A60-B141-9C838B1B8B44"><!-- --></a><strong>Customising mount flags</strong> </p>
 <p>Whether
you use the automatic local drive mapping scheme or an explicit local drive
mapping file, you can provide support for additional mount flags. A custom
version of the Base Starter provides its own version of the virtual functions: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-8F1D6582-946C-5D25-AEE7-95563233BDDF"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-8F1D6582-946C-5D25-AEE7-95563233BDDF"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartUp::ParseCustomMountFlags()</span></a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-C65F29D7-8BFD-5B84-B184-57C734F3D5EF"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-C65F29D7-8BFD-5B84-B184-57C734F3D5EF"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartUp::HandleCustomMountFlags()</span></a>  </p>
 </li>

</ul>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-905BFBD9-AD40-5E11-AFED-F791389F1450"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-905BFBD9-AD40-5E11-AFED-F791389F1450"><!-- --></a><strong>Customising the drive initialisation
sequence</strong> </p>
 <p>To override the entire local drive initialisation sequence
provided by the generic version of the Base Starter, a custom version of the
Base Starter provides its own version of the virtual function <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartUp::LocalDriveInit()</span></a>. </p>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B93875C5-1B35-5993-89C4-B2CA5F502450"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-B93875C5-1B35-5993-89C4-B2CA5F502450"><!-- --></a><strong>Customising Loadlocale</strong> </p>
 <p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">User::UTCOffset()</span></a> is called within the <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">LoadLocale()</span></a> function. Customise <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::LoadLocale()</span></a> so
that the offset behaviour is correct for your time zone. </p>
 <p>Setting the <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">User::UTCOffset()</span></a> is required within EStart
to provide backward compatibility and because it provides the system time
to components before the timezone/locale services are initialised. </p>
 <p>See <a href="GUID-15E048BA-E158-508D-9DB4-C9DF9A546090.html">setting the universal time
offset</a>. </p>
  <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-0B60FAF0-5D2F-5A0F-984C-DFB35BC09ED2"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-0B60FAF0-5D2F-5A0F-984C-DFB35BC09ED2"><!-- --></a><strong>Customising the restart
mode</strong> </p>
 <p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::GetStartupMode()</span></a> and <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::GetStartupModeFromFile()</span></a> must be
implemented to get the restart mode at start-up. </p>
 <p>Symbian platform
does not define any meaning to restart mode values. It is for the use of the
device manufacturer. </p>
 <p>The restart mode is defined by the HAL attribute <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">EPersistStartupM</span></a>. This is a <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TAttribute</span></a> enum
value defined in class <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">HALData</span></a> in <span class="filepath">..\hal\inc\hal_data.h</span>. </p>
 <p>To
use this attribute, define it in your variant’s <span class="filepath">config.hcf</span> file
and set an initial value in your variant’s <span class="filepath">values.hda</span> file.
The template port defines the attribute as settable using the following definition
in the <span class="filepath">config.hcf</span> file. </p>
 <pre class="codeblock" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-DCB65835-DB05-5092-B4D0-5ABA551773F8"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-DCB65835-DB05-5092-B4D0-5ABA551773F8"><!-- --></a>EPersistStartupModeKernel : set = ProcessPersistStartupMode</pre>
 <p>The value can be changed using <samp class="codeph">HAL::Set()</samp>. <samp class="codeph">ProcessPersistStartupMode</samp> is
the name of a function internal to Symbian platform. If you choose to make
the attribute settable, you must use this definition. </p>
 <p>Calls to <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">HAL::Get()</span></a> are routed to the function <samp class="codeph">Template::VariantHal()</samp> in
your variant's <span class="filepath">variant.cpp</span> file, and handled by the <samp class="codeph">EVariantHalGetPersistedStartupMode</samp> case. </p>
 <p>Calls
to <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">HAL::Set()</span></a> are routed to the function <samp class="codeph">Template::VariantHal()</samp> in
your variant's <span class="filepath">variant.cpp</span> file, and handled by the <samp class="codeph">EVariantHalPersistStartupMode</samp> case. </p>
 <p>You
need to do the following: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1B0499AB-4320-598D-B4FD-89B610C8CC2D"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-1B0499AB-4320-598D-B4FD-89B610C8CC2D"><!-- --></a><p>If you choose to make
the custom startup mode settable (in Symbian platform terminology, the attribute
is said to be derived), you need to implement <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::GetStartupMode()</span></a>.
Derived attributes are saved when the system is closed down. The function <samp class="codeph">GetStartupMode()</samp> is
called before the file server starts. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-EB91080D-1321-52B1-9EEA-718B02413928"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-EB91080D-1321-52B1-9EEA-718B02413928"><!-- --></a><p>If you choose to make
the custom startup mode non-settable (in Symbian platform terminology, the
attribute is said to be non-derived), you need to implement <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::GetStartupModeFromFile()</span></a>.
Non-derived attributes are read from file, and this function is called after
the file server has started. </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-8C418384-C30C-59E2-9E2A-542701C4D0DF"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-8C418384-C30C-59E2-9E2A-542701C4D0DF"><!-- --></a><p>You need to provide
an implementation for your <samp class="codeph">Template::VariantHal()</samp> function
in your <span class="filepath">variant.cpp</span> file. </p>
 </li>

</ul>
 <p>The example below is the OMAP H4 variant implementation of <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">GetStartupModeFromFile()</span></a> and <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">GetStartupMode()</span></a> found
in <span class="filepath">...\dev1\omap_hrp\h4estart\estartmain.cpp</span>. </p>
 <pre class="codeblock" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-8BD6A664-7A7E-580E-AD33-46C7B6AB4FB5"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-8BD6A664-7A7E-580E-AD33-46C7B6AB4FB5"><!-- --></a>TInt TH4FSStartup::GetStartupModeFromFile()
    {
    if (iStartupMode != EStartupModeUndefined)
        {
        TInt r = ReadAndReset();
        return r;
        }
    return KErrNone;
    }

TInt TH4FSStartup::GetStartupMode()
    {
    TInt r = ReadAndReset();
    return r;
    }

TInt TH4FSStartup::ReadAndReset()
    {
    TInt value;
    TInt r = HAL::Get(HALData::EPersistStartupModeKernel, value);
    if (r == KErrNone)
        {
        iStartupMode = value;
        }
    r = HAL::Set(HALData::EPersistStartupModeKernel, EStartupModeUndefined);
    return r;
    }</pre>
 <p>See <a href="GUID-2D977A02-5928-5441-8AE7-42A722F2A4B8.html#GUID-2D977A02-5928-5441-8AE7-42A722F2A4B8__GUID-4DA41221-40B9-5BC7-B2C6-7C6EB4522508">User-Side
Hardware Abstraction</a>. </p>
 <p id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4E9AFD2A-57DE-528A-8F41-C79EBE44B2A0"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-4E9AFD2A-57DE-528A-8F41-C79EBE44B2A0"><!-- --></a><strong>Customising other behaviour</strong> </p>
 <p>You
can change other default behaviour. For example, to add additional functionality
related to File Server initialisation, or the initialisation of other base
related components, then the following virtual functions can also be customised.
Follow the links to the individual functions for more detail: </p>
 <ul>
<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-DF81E0C5-3404-50BA-B91D-D57CA5B0C08C"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-DF81E0C5-3404-50BA-B91D-D57CA5B0C08C"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::Init()</span></a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-3D245F97-00D2-561E-A752-2ACC2EFBEC92"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-3D245F97-00D2-561E-A752-2ACC2EFBEC92"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::Run()</span></a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-F700923A-3E2C-5BE0-8EBB-911C7A8C1D56"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-F700923A-3E2C-5BE0-8EBB-911C7A8C1D56"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::InitialiseHAL()</span></a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D60B9ADD-EB13-5FB1-A632-488383D89289"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-D60B9ADD-EB13-5FB1-A632-488383D89289"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::StartSystem()</span></a>  </p>
 </li>

<li id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-93DD7CF9-77BA-56E2-8BB6-617EC6CF3865"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-93DD7CF9-77BA-56E2-8BB6-617EC6CF3865"><!-- --></a><p> <a href="GUID-7A6C0343-7B98-3429-9162-4C0357594230.html"><span class="apiname">TFSStartup::Close()</span></a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-AC49186C-F69B-5D5B-8515-3CF8CD91EAF4"><a name="GUID-8BA1EEC2-78A3-54CC-95D9-81BF2659963D__GUID-AC49186C-F69B-5D5B-8515-3CF8CD91EAF4"><!-- --></a><h2 class="sectiontitle">Activities
that the Base Starter does not do</h2> <p>The Base Starter is responsible
for mapping local drives to drive letters and for loading the appropriate
file systems on local drives. It does <em>not</em> install media drivers, and
is not responsible for deciding which local drive a media driver will register
with. This is done by the individual media drivers and peripheral controllers
when they are initialised. </p>
 <p>See <a href="GUID-A70A01D2-467E-5BA8-A01D-6182558F3F52.html#GUID-A70A01D2-467E-5BA8-A01D-6182558F3F52__GUID-4A8DEEAB-32C4-5431-8226-5623E2BD9098">Registering
the media driver</a> for information about how to register a media driver. </p>
 <p>See
also <a href="GUID-5C223AD5-4676-58B4-B3A5-066F6B69AA4D.html#GUID-5C223AD5-4676-58B4-B3A5-066F6B69AA4D__GUID-868866C8-E90C-5291-8732-BB4E86D6B43E">Local
Media Subsystem</a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E5459A54-14BC-55C1-B911-63415E4C61A6.html" title="This section describes the technology, architecture, and source code organization of the Base Starter.">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>