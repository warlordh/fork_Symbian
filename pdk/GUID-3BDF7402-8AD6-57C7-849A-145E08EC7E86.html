<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Using Calendar Entry Time Iteration"/>
<meta name="abstract" content="This topic introduces Calender iterator classes and describes how device implementers can use instance iterators for searching and sorting."/>
<meta name="description" content="This topic introduces Calender iterator classes and describes how device implementers can use instance iterators for searching and sorting."/>
<meta name="DC.Relation" scheme="URI" content="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F22B8035-CD08-4181-B03A-759E92CA967B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using Calendar Entry Time Iteration</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858252 id2858283 id2858368 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-F22B8035-CD08-4181-B03A-759E92CA967B.html">Organizer Guide</a> &gt; <a href="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html">Calendar Guide</a> &gt; <a href="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html">Tutorials</a> &gt; </div>
<h1 class="topictitle1">Using Calendar Entry Time Iteration</h1>
<div><p>This topic introduces Calender iterator classes and describes how device implementers can use instance iterators for searching and sorting. </p>
<div class="section"><h2 class="sectiontitle">Required background</h2> <p>General knowledge of searching and sorting as well as <a href="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html">Calendar</a>. </p>
 <p>The following terms are referred to within this topic </p>
 <dl><dt class="dlterm">Iterator</dt>
 <dd><p>An object that allows a program to move through each element within a range of data. </p>
 </dd>
  <dt class="dlterm">Instance iterator</dt>
 <dd><p>For the Calendar component an instance is an occurence of a Calendar entry. Therefore, an instance iterator points to each occurence of a Calendar entry. </p>
 </dd>
  <dt class="dlterm">Sort criteria</dt>
 <dd><p>Rules that decide the order in which Calendar instances are arranged. </p>
 </dd>
  </dl>
 </div>
 <div class="section"><h2 class="sectiontitle">Introduction</h2> <p>Instance iteration is a function of the <a href="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html">Calendar</a> component within the PIM Application Services collection. This document describes the classes within Calendar that enable searching and sorting of Calendar instances. The iterators used for searching and sorting are created using three distinct factory methods of the <a href="GUID-58BA8611-A364-3E30-B5F0-E5787E19C48C.html"><span class="apiname">CCalInstanceView</span></a> class. Each iterator has a different behaviour which is described in the following sections </p>
 <ul><li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-769BCC5B-9FEB-5DC2-B085-43B803FB6A38"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-769BCC5B-9FEB-5DC2-B085-43B803FB6A38"><!-- --></a><p><a href="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86.html#GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-C5AD3E96-A40C-5DE2-B0F1-38BF349580DA">Iterating over instances in a time range view</a>  </p>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-A9549EAC-5440-5AA1-9A13-3DFB29BF775F"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-A9549EAC-5440-5AA1-9A13-3DFB29BF775F"><!-- --></a><p><a href="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86.html#GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-E8A1810A-00EB-59E6-BC0A-17F58C603D31">Iterating over all instances, from a starting instance</a>  </p>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-EFD4B921-8CD7-5E6C-AC8E-737D87B3CC22"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-EFD4B921-8CD7-5E6C-AC8E-737D87B3CC22"><!-- --></a><p><a href="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86.html#GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-640721A8-A26E-5C53-9E8F-7AA4DB66902E">Iterating over a repeating meeting schedule, from a starting instance</a>  </p>
 </li>
 </ul>
 <p><strong>CCalInstanceIterator</strong> </p>
 <p>The instance iterator class <a href="GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7.html"><span class="apiname">CCalInstanceIterator</span></a> provides standard functions for iterating through a set of Calendar instances </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-9E516778-E6AE-5A76-A0B6-610E22D480F6"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-9E516778-E6AE-5A76-A0B6-610E22D480F6"><!-- --></a>CCalInstance* CCalInstanceIterator::NextL();
CCalInstance* CCalInstanceIterator::PreviousL();
TBool CCalInstanceIterator::HasMore() const;
TInt CCalInstanceIterator::Count() const;
</pre>
 <p> <a href="GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7.html#GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7__GUID-8A6F3455-ED23-3C84-B056-2092A8B7EE18"><span class="apiname">CCalInstanceIterator::NextL()</span></a> returns the next instance in the set. If there are no more instances to be returned then it returns a NULL pointer. </p>
 <p> <a href="GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7.html#GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7__GUID-82DA6CF2-E7E2-33B8-B4AE-9B42FF784BB4"><span class="apiname">CCalInstanceIterator::PreviousL()</span></a> returns the previous instance in the set. If there are no more instances to be returned then the API returns a NULL pointer. </p>
 <p> <a href="GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7.html#GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7__GUID-3B6962D3-3833-343D-ADA1-B07158845626"><span class="apiname">CCalInstanceIterator::HasMore()</span></a> returns <samp class="codeph">ETrue</samp> when there are more instances to be returned by <samp class="codeph">NextL()</samp>, and <samp class="codeph">EFalse</samp> when there are not. </p>
 <p> <strong> Note:</strong> It is advised that <a href="GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7.html#GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7__GUID-3B6962D3-3833-343D-ADA1-B07158845626"><span class="apiname">CCalInstanceIterator::HasMore()</span></a> is not used. It has no advantage and is less efficient than checking whether the value returned by <samp class="codeph">NextL()</samp> is a NULL pointer or not. </p>
 <p> <a href="GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7.html#GUID-3028274E-F033-3218-BA44-2BC2B0BE58E7__GUID-64E1A2C8-866B-3011-8B65-D9E6C78A1EA4"><span class="apiname"> CCalInstanceIterator::Count()</span></a> returns the number of instances that are in the set of instances defined by the parameters that were used to create the iterator. </p>
 <p> <strong> Note:</strong> It is advised that <samp class="codeph">CCalInstanceIterator::Count()</samp> is not used because it takes a long time to work out the number of instances in the set. </p>
 <p>The iterator has been designed for efficient memory usage. The instances that are returned are owned by the calling application and should therefore be deleted by the calling application. So that the calling application benefits from this when iterating, it is recommended that <samp class="codeph">CCalInstance</samp> objects are queried, as needed, and then deleted before the application moves on to the next instance. </p>
 <p>Please note that the instance iterator has undefined behaviour if changes are made to the Calendar data file after the iterator has been created. Therefore, if an entry is stored, updated, or deleted by your application or another application the iterator should be destroyed and recreated. </p>
 <p><strong>CCalFindInstanceSettings</strong> </p>
 <p>This instance settings class is used to set filtering options when creating two of the iterators. </p>
 <p>The following functions use the instance settings class </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-14F667B6-3B81-5F62-90BF-EF2819D300B6"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-14F667B6-3B81-5F62-90BF-EF2819D300B6"><!-- --></a>
CCalFindInstanceSettings* CCalFindInstanceSettings::NewL(CalCommon::TCalViewFilter aFilter, const CalCommon::TCalTimeRange&amp; aTimeRange);
void CCalFindInstanceSettings::SetTextSearchL(const CCalInstanceView::TCalSearchParams&amp; aSearchParams);           </pre>
 <p>The constructor of this class takes a time range and a view filter, which describe the types of instances that should be returned. </p>
 <p>An application can also optionally specify some search text using the <samp class="codeph">CCalFindInstanceSettings::SetSearchTextL()</samp> function. </p>
 <p>Four APIs in the <samp class="codeph">CCalInstanceSettings</samp> class support customised sorting and filtering by priority and 32-bit user integer </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-E168CBBB-CF3D-54BB-B1C0-CAE0DAC27684"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-E168CBBB-CF3D-54BB-B1C0-CAE0DAC27684"><!-- --></a>// Define the filter for the 32 bit user integer
void SetUserIntFilter(const CalCommon::TCalUserIntFilter&amp; aUserIntFilter);
</pre>
 <p>The parameter class <samp class="codeph">CalCommon::TCalUserIntFilter</samp> has two members </p>
 <ul><li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-536050CC-8F04-5A0E-80CC-D658438E132C"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-536050CC-8F04-5A0E-80CC-D658438E132C"><!-- --></a><p>Mask – specifies which bits are valid in the filter. </p>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-2A6445CA-3299-50DA-B0DE-577705B39BF2"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-2A6445CA-3299-50DA-B0DE-577705B39BF2"><!-- --></a><p>Value – specifies the matched value. </p>
 </li>
 </ul>
 <p>A <a href="GUID-BB7C2921-86A6-30B3-8092-4338A88C36CE.html"><span class="apiname">CCalFindInstanceSettings</span></a> object with an empty <samp class="codeph">CCalSortCriteria</samp> object calls <a href="GUID-58BA8611-A364-3E30-B5F0-E5787E19C48C.html#GUID-58BA8611-A364-3E30-B5F0-E5787E19C48C__GUID-961D3CE4-3C92-3A15-BDD1-19FF3D970F83"><span class="apiname">CCalInstanceView::FindInstanceL()</span></a>. The instances return with the default sort order. </p>
 <p>Instances are ordered first by instance time. For instances with equal times the default sort order, applied by <samp class="codeph">CCalInstanceView::FindInstanceL()</samp>, is as follows </p>
 <ul><li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-1FE5706F-5A81-5882-BB7C-68BC3F554069"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-1FE5706F-5A81-5882-BB7C-68BC3F554069"><!-- --></a><p>To-do entries. Two or more to-do entries are ordered by due date, priority then start date </p>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-D299087F-0121-54EC-9FB7-8369EEFA5B66"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-D299087F-0121-54EC-9FB7-8369EEFA5B66"><!-- --></a><p>Anniversaries </p>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-7F2AAFDB-E28E-5BF0-A9DA-381EAB1EF690"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-7F2AAFDB-E28E-5BF0-A9DA-381EAB1EF690"><!-- --></a><p>Day notes </p>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-56F3700D-3542-54A0-8CCA-E6470228A436"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-56F3700D-3542-54A0-8CCA-E6470228A436"><!-- --></a><p>Appointments. Two or more appointments are ordered by start time then end time. </p>
 </li>
 </ul>
 <p>If two instances are the same then completed to-do instances appear after non-completed ones. </p>
 <p><strong>CCalSortCriteria</strong> </p>
 <p>The <a href="GUID-E702E469-D282-3C85-9F78-6E8472EACB9C.html"><span class="apiname">CCalSortCriteria</span></a> class represents a sort criterion sequence. Items within the sequence are represented by the <a href="GUID-9AE83544-CC85-3872-8CBA-4D6EBF765E7C.html"><span class="apiname">CCalSortCriterion</span></a> class. Sequence items are applied to determine the order of the calendar instances. If the first criterion is to order instances by end time and the second criterion is to order instances by priority, the instances are sorted by end time and then by priority. </p>
 <p>You can fetch the <samp class="codeph">CCalSortCriteria</samp> through <samp class="codeph">CCalFindInstanceSettings</samp> using the following functions </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-9F5C391F-3CCF-5C75-90BF-B9FA2B83DEEB"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-9F5C391F-3CCF-5C75-90BF-B9FA2B83DEEB"><!-- --></a>
CCalSortCriteria&amp; SortCriteria(); 
const CCalSortCriteria&amp; SortCriteria() const;</pre>
 <p>You can perform operations on <samp class="codeph">CCalSortCriteria</samp> using the functions below. </p>
 <ul><li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-C127C9C3-9B98-541F-8D4A-D51657053839"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-C127C9C3-9B98-541F-8D4A-D51657053839"><!-- --></a><p>To append a sort criterion to the end of the array of sort criteria, represented by a <samp class="codeph">CCalSortCriteria</samp> object </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-48CF9A8C-72D5-5A5E-A7AC-5000886FADDD"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-48CF9A8C-72D5-5A5E-A7AC-5000886FADDD"><!-- --></a>void AppendCriterionL(CalCommon::TCalSortAttribute aAttr, CalCommon::TCalSortDirection aDir);</pre>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-4C2447A5-E07C-5586-85DF-482A1AC007FA"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-4C2447A5-E07C-5586-85DF-482A1AC007FA"><!-- --></a><p>To return the number of sort orders contained in the <samp class="codeph">CCalSortCriteria</samp> object </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-F93DDC7F-567C-5EDD-B602-57374B3ECE4B"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-F93DDC7F-567C-5EDD-B602-57374B3ECE4B"><!-- --></a>TInt Count() const;</pre>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-EBDF7C1C-45E8-5F12-A0A8-9C8F455B59D7"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-EBDF7C1C-45E8-5F12-A0A8-9C8F455B59D7"><!-- --></a><p>To return a sort criterion at the specified index </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-9A648625-7CE9-5AC3-9264-12A319F85FAE"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-9A648625-7CE9-5AC3-9264-12A319F85FAE"><!-- --></a>const CCalSortCriterion&amp; AtL(TInt aIndex) const;</pre>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-2AF9C67A-5306-52F0-81BB-4769B7423890"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-2AF9C67A-5306-52F0-81BB-4769B7423890"><!-- --></a><p>To set the order to follow when sorting the instances according to their type </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-93C9F817-6587-5DEB-93D5-0DC234D84B6A"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-93C9F817-6587-5DEB-93D5-0DC234D84B6A"><!-- --></a>void SetEntryTypeOrderL(const RArray&lt;CCalEntry::TType&gt;&amp; aTypeOrder);</pre>
 </li>
 <li id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-665C765F-7B04-5228-8693-62282661FDC0"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-665C765F-7B04-5228-8693-62282661FDC0"><!-- --></a><p>To return the type order retained by the sort criteria object </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-BA85A3B7-8A53-50F6-8824-3020778CBF90"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-BA85A3B7-8A53-50F6-8824-3020778CBF90"><!-- --></a>const RArray&lt;CCalEntry::TType&gt;&amp;  EntryTypeOrder() const;</pre>
 </li>
 </ul>
 </div>
 <div class="section" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-C5AD3E96-A40C-5DE2-B0F1-38BF349580DA"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-C5AD3E96-A40C-5DE2-B0F1-38BF349580DA"><!-- --></a><h2 class="sectiontitle">Iterating over instances in a time range view</h2> <p>This iterator is given as an alternative to using the normal <a href="GUID-61153F93-1A72-3122-9693-1242235987F7.html"><span class="apiname">FindInstanceL()</span></a> call to populate a month view. The benefit of using the iterator is that large views can be created without running out of application memory because the application can create only one instance of the view at a time. The disadvantage is that the iterator is not as fast as the normal <samp class="codeph">FindInstanceL()</samp> call. This is a decision that must be made by the application developer. If there are too many instances for the normal <samp class="codeph">FindInstanceL()</samp> call to work without running out of memory then this iterator could be used to populate the view where it was not possible before. </p>
 <p>This iterator is created through the <samp class="codeph">FindInstanceL()</samp> API </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-EE013B7A-6C9E-5291-BF5B-68720006D185"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-EE013B7A-6C9E-5291-BF5B-68720006D185"><!-- --></a>
CCalInstanceIterator* CCalInstanceView::FindInstanceL(const CCalFindInstanceSettings&amp; aSettings) const;
</pre>
 <p>Iteration starts from the beginning of the time range and instances are returned in the same order as they are from a <samp class="codeph">FindInstanceL()</samp> call. </p>
 </div>
 <div class="section" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-E8A1810A-00EB-59E6-BC0A-17F58C603D31"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-E8A1810A-00EB-59E6-BC0A-17F58C603D31"><!-- --></a><h2 class="sectiontitle">Iterating over all instances, from a starting instance</h2> <p>This iterator enables calendar applications to iterate through all instances in the calendar, but starting from a specified instance. </p>
 <p>The function below is used to create this version of the iterator </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-8146E186-49FF-5738-A782-890AE27085DB"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-8146E186-49FF-5738-A782-890AE27085DB"><!-- --></a>
CCalInstanceIterator* CCalFindInstanceSettings::FindInstanceL(const
CCalFindInstanceSettings&amp; aSettings, TCalLocalUid aLocalId, const
TCalTime&amp; aInstanceTime) const; 
          </pre>
 <p>Note that <a href="GUID-BB7C2921-86A6-30B3-8092-4338A88C36CE.html"><span class="apiname">CCalFindInstanceSettings</span></a> is used here. <samp class="codeph">CCalFindInstanceSettings</samp> requires the application to provide a time range. It is expected that an application will not want to choose a time range because it is not known how far away the next or previous instance is. When specifying the time range in this iterator it is acceptable to use min time to max time. </p>
 <p>The starting instance is selected by specifying the local UID of the entry that that instance belongs to, and the time of that instance. If either the time of the instance is incorrect or the local UID does not refer to an entry currently in the calendar store then construction leaves with <samp class="codeph">KErrNotFound</samp>. </p>
 <p>Here is some example code that demonstrates how to use the iterator </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-330AB91F-D449-5FBC-9F89-02CA9437A9BD"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-330AB91F-D449-5FBC-9F89-02CA9437A9BD"><!-- --></a>
// Find an instance to start from
CCalInstance&amp; startingInstance = GetInstanceFromMonthView();

// Set up the find instance settings
TCalTime startRange;
startRange.SetTimeLocalL(TCalTime::MinTime());
TCalTime endRange;
endRange.SetTimeLocalL(TCalTime::MaxTime());
CalCommon::TCalTimeRange timeRange(startRange, endRange);
CCalFindInstanceSettings* settings = CCalFindInstanceSettings::NewL(CalCommon::EIncludeAll, timeRange);
CleanupStack::PushL(settings);

// Create the iterator
CCalInstanceIterator* iterator = instanceView-&gt;FindInstanceL(*settings, startingInstance.Entry()-&gt;LocalUidL(),    startingInstance.Time());
CleanupStack::PopAndDestroy(settings);
CleanupStack::PushL(iterator);

// Find the next instance
CCalInstance* nextInstance = iterator-&gt;NextL();
delete nextInstance;

// Find the previous instance
CCalInstance* previousInstance = iterator-&gt;PreviousL();
delete previousInstance;
CleanupStack::PopAndDestroy(iterator);  </pre>
 </div>
 <div class="section" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-640721A8-A26E-5C53-9E8F-7AA4DB66902E"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-640721A8-A26E-5C53-9E8F-7AA4DB66902E"><!-- --></a><h2 class="sectiontitle">Iterating over a repeating meeting schedule, from a starting
          instance </h2> <p>This iterator enables applications to iterate through all the instances of a repeating meeting schedule. This means that any instances that are defined by the same guide are considered by the iterator. Instances of other meetings are ignored. For example, this would allow an application to iterate through the instances of a repeating to-do. The user may then mark individual instances as completed. </p>
 <p>The iterator can be created using the following function </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-0781CCA8-6D4C-5B34-88DF-5FD18134A9A0"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-0781CCA8-6D4C-5B34-88DF-5FD18134A9A0"><!-- --></a>
CCalInstanceIterator* CCalInstanceView::FindInstanceByUidL(const TDesC8&amp; aUid, const TCalTime&amp; aInstanceTime) const; </pre>
 <p>In a similar way to the previously described iterator, the starting instance is specified by providing the time of the starting instance. This time, however, the application provides the UID of the repeating meeting schedule and not the local UID of the entry. The provided UID is used when considering which instance should be returned. Only those instances of entries belonging to the specified UID are considered. Again if the instance time is incorrect or the UID does not refer to an entry that is currently in the calendar store then construction of the iterator leaves with <samp class="codeph">KErrNotFound</samp>. </p>
 <p>Here is a code example that demonstrates this iterator </p>
 <pre class="codeblock" id="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-8B73994B-208E-57F6-83E6-E3298BE8913E"><a name="GUID-3BDF7402-8AD6-57C7-849A-145E08EC7E86__GUID-8B73994B-208E-57F6-83E6-E3298BE8913E"><!-- --></a>
// Find an instance to start from
CCalInstance&amp; startingInstance = GetInstanceFromMonthView();

// Create the iterator
CCalInstanceIterator* iterator = instanceView-&gt;FindInstanceByUidL(startingInstance.Entry()-&gt;UidL(), startingInstance.Time());
CleanupStack::PushL(iterator);

// Find the next instance in the repeat meeting schedule
CCalInstance* nextInstance = iterator-&gt;NextL();
delete nextInstance;

// Find the previous instance in the repeat meeting schedule
CCalInstance* previousInstance = iterator-&gt;PreviousL();
delete previousInstance;
CleanupStack::PopAndDestroy(iterator);</pre>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A60C4549-9FAA-496A-B743-D395A461B61F.html">Tutorials</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-00631ED2-1B7F-5FC4-9E81-4B6DF7946631.html">Calendar</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>