<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="PNOK Messages"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>PNOK Messages</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0"><a name="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403500 id2403620 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html" title="The Bluetooth GPS Positioning Module (Bluetooth GPS PSY) connects the LBS subsystem to an external Bluetooth GPS device.">Bluetooth GPS Positioning Module</a> &gt; <a href="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html" title="These documents describe NMEA and PNOK messages supported by the Bluetooth GPS PSY.">Bluetooth GPS PSY Reference</a> &gt; </div>
<h1 class="topictitle1"> PNOK Messages</h1>
<div><div><div>This document describes the PNOK messages supported by the Bluetooth GPS PSY. </div>
 <p>The target audiences for this document are device creators and GPS hardware vendors who want to know which PNOK messages are sent from the PSY to a GPS device and which messages the PSY expects to receive from the device. </p>
 </div>
<div class="section"><h2 class="sectiontitle">Introduction</h2> <p>The Bluetooth GPS PSY supports Nokia PNOK extensions to the NMEA 0183 standard. </p>
 <p>The PSY polls the Bluetooth GPS device to check if it supports PNOK. If it does, PNOK messages beginning with the string <samp class="codeph">$PNOK</samp> are used instead of the NMEA <samp class="codeph">$PSRF</samp> messages described in <a href="GUID-CCEAFF83-11E6-511D-9A3E-E5D986F4FCF8.html" title="This document describes the NMEA messages supported by the Bluetooth GPS PSY.">NMEA messages</a>. </p>
 <p>The PNOK messages used for communication between the PSY and a GPS device are listed in the following sections. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Required background</h2> <p>Knowledge of the<a href="http://www.nmea.org/content/nmea_standards/nmea_standards.asp" target="_blank">The NMEA 0183 Protocol</a> is helpful in understanding this document. Knowledge of the PNOK protocol is required. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">PNOK query message</h2> <p>The PSY sends the message <samp class="codeph">$PNOK*1A\r\n</samp> to the GPS device to query support for PNOK. </p>
 <p>The GPS device returns an <samp class="codeph">OK</samp> message if it supports PNOK. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">GPS initialisation messages</h2> <p>The messages <samp class="codeph">GPGGA, GPRMC, GPGSV, GPGSA</samp> and <samp class="codeph">STAT</samp> are turned on with an update interval of one second. See NMEA message for a brief description of the meaning of the NMEA messages. The message STAT requests periodic updates. </p>
 <p>Message : <samp class="codeph">$PNOK,MSGS,1,1,1,1,,,1*21\r\n</samp>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Power saving mode message</h2> <p>When the PSY initialises the GPS device, it sends the message <samp class="codeph">LOWPWR</samp> to turn on GPS power saving mode. </p>
 <p>Message: <samp class="codeph">$PNOK,LOWPWR,1*2A\r\n</samp>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Night Mode message</h2> <p> <em>Night Mode</em> sets any device display or indicators for use in dark conditions. A GPS device may darken its display when it receives a Night Mode on message. </p>
 <p>Message for setting night mode off: <samp class="codeph">$PNOK,NIGHTMODE,0*75\r\n</samp>. </p>
 <p>Message for setting night mode on: <samp class="codeph">$PNOK,NIGHTMODE,1*74\r\n</samp>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Hardware and software version messages</h2> <p>The PSY sends the message VER to request Bluetooth and GPS hardware and software versions. </p>
 <p>Message: <samp class="codeph">$PNOK,VER*77\r\n</samp>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Messages summary</h2> <p>This section describes the messages the PSY sends and receives from a GPS device. </p>
 <p><strong>Command and confirmation messages</strong> </p>
 <p>The table below lists the command messages sent from the PSY and confirmation messages sent from the GPS device. </p>
 
<div class="tablenoborder"><a name="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0__GUID-E54EC600-29D3-508F-B63B-5B41813F8876"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-B143DF73-98F6-5491-8328-F5E12AE493A0__GUID-E54EC600-29D3-508F-B63B-5B41813F8876" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1634131e169">PNOK message</th>
 <th class="cellrowborder" valign="top" id="d1634131e172">Meaning</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1634131e169 "><p>OK </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1634131e172 "><p>GPS device supports PNOK messages </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1634131e169 "><p>MSGS </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1634131e172 "><p>Set NMEA messages to return periodically </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1634131e169 "><p>LOWPWR </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1634131e172 "><p>Low power mode </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1634131e169 "><p>NIGHTMODE </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1634131e172 "><p>Current night mode status </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1634131e169 "><p>VER </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1634131e172 "><p>Version information </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1634131e169 "><p>TIME </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1634131e172 "><p>Reference time </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p><strong>Event messages</strong> </p>
 <p>The STAT message is sent from hardware to the PSY to return periodic status information. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-CD8BF818-ED63-5504-8382-346776D3B78F.html" title="These documents describe NMEA and PNOK messages supported by the Bluetooth GPS PSY.">Bluetooth GPS PSY Reference</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>