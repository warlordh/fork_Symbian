<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Inter-thread data transfer"/>
<meta name="abstract" content="Describes how data is transferred between threads."/>
<meta name="description" content="Describes how data is transferred between threads."/>
<meta name="DC.Relation" scheme="URI" content="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Inter-thread data transfer</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5"><a name="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2393224 id2393504 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-3786D8E6-17A9-52E4-A8DF-CFCDC3039854.html">Inter Process Communication</a> &gt; <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">Using Client-Server</a> &gt; </div>
<h1 class="topictitle1">Inter-thread
data transfer</h1>
<div><p>Describes how data is transferred between threads.</p>

<p>The client-server message protocol supports the passing of a 32-bit request
code and four 32-bit parameters from client to server and returning a 32-bit
result from the server to the client. The parameters may be interpreted as
plain integers or pointers; pointer types may be untyped (<samp class="codeph">TAny*</samp>)
or descriptor types (<samp class="codeph">TDesC8*</samp> and <samp class="codeph">TDesC16*</samp>)
that the server can use to access the client’s address space. The request
code, parameters, and the parameter types are packaged into a <a href="GUID-4AD02F14-1142-372F-9D11-224595932034.html"><span class="apiname">TIpcArgs</span></a> object.
The parameter types are stored in the kernel side message object so that the
kernel can check that subsequent operations requested by the server using
the message are: </p>

<ul>
<li id="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-1F925301-81D0-5F84-ABEE-BB4DB576DBC1"><a name="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-1F925301-81D0-5F84-ABEE-BB4DB576DBC1"><!-- --></a><p>correct; for example,
checking that the source and target descriptors are either both 8-bit or both
16-bit descriptors </p>
 </li>

<li id="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-EE7CCC5F-0013-55EA-B473-763785F5CD90"><a name="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-EE7CCC5F-0013-55EA-B473-763785F5CD90"><!-- --></a><p>permitted by the client;
for example, checking that when the server tries to write to a client descriptor,
that the client descriptor is <a href="GUID-49D4E917-57EA-39AE-8941-144AA8AC2584.html"><span class="apiname">TDes</span></a> -derived (modifiable),
rather than <a href="GUID-52D07F46-2162-380C-A775-C3BB335C42F5.html"><span class="apiname">TDesC</span></a> -derived (non-modifiable) </p>
 </li>

</ul>

<div class="p"><div class="note"><span class="notetitle">Note:</span> NOTE:</div>
 although you can pass untyped pointers, it is not possible
to directly access memory in another thread’s address space using an arbitrary
pointer as this is inherently insecure. The ability to pass a pointer between
a client and server is therefore only of value when the client and server
are within the same process. In this case, the use of a pointer is obviously
not limited to pointing to a descriptor, but may also be used to point to
an arbitrary data structure containing information to be shared between the
client and server. </div>

<p>It is important to note that a server may not run until some arbitrary
time after a client issues a request. Any descriptor containing data to be
passed to the server must be guaranteed to exist until the request completes.
For this reason, any such descriptor must <em>not</em> live on the program stack.
Typically, such a descriptor would be a component of an object which is allocated
on the heap. </p>

<p>The following diagram illustrates the general idea. In this case, there
are three parameters, one of which is an integer, and the other two being
pointers to descriptors. </p>

<div class="fignone" id="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-C3369B01-2A0D-5AB2-973B-386FDBBB6B86"><a name="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-C3369B01-2A0D-5AB2-973B-386FDBBB6B86"><!-- --></a>
<img src="GUID-2105B5F0-2D00-5ECA-8859-A8A432423327_d0e342857_href.png"/>
<p>Inter-thread data transfer</p>

</div>

<div class="section" id="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-EE636E39-A171-484D-AAF4-7996D04C8EEC"><a name="GUID-E651C7A7-D6EB-533E-A97A-360D089DE7A5__GUID-EE636E39-A171-484D-AAF4-7996D04C8EEC"><!-- --></a><h2 class="sectiontitle">See also</h2> <p> <a href="GUID-79BAF19D-F003-5468-9C01-6E918B06C36D.html" title="These documents describe descriptor concepts.">Descriptor
concepts</a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-6047DB3F-DC92-51DF-9EEB-00E79E890B54.html">Using Client-Server</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>