<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="OpenGL ES Porting Guide"/>
<meta name="abstract" content="This topic provides a guide for implementers of OpenGL ES on the Symbian platform. It is designed to be used in conjunction with the EGL Porting Guide. It does not specify how to implement OpenGL ES itself."/>
<meta name="description" content="This topic provides a guide for implementers of OpenGL ES on the Symbian platform. It is designed to be used in conjunction with the EGL Porting Guide. It does not specify how to implement OpenGL ES itself."/>
<meta name="DC.Relation" scheme="URI" content="GUID-FF5B53C9-F8E4-5A57-9CD9-05BB0BFD9045.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-AB93B01C-B6C2-5B24-ADEF-95706584D625.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CBC43846-22BB-5AAF-89FE-3CF4F11B76F6.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FF5B53C9-F8E4-5A57-9CD9-05BB0BFD9045.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-90A4BDE2-839A-5A37-ACAA-EB33FE39DE54.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BB7F358E-3AC8-566B-8AE3-52FA0F9082C6.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-011A0A93-42DF-5235-BC8E-7BD88B572277.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1A8ED0EB-B3B7-553F-95E3-2120D877966B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC3A8785-3ED3-5696-A5ED-AB66588A5C14.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>OpenGL ES Porting Guide</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2386845 id2386859 id2386874 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-AB93B01C-B6C2-5B24-ADEF-95706584D625.html" title="The components within the OpenGLES collection provide access to OpenGL ES on the Symbian platform. OpenGL ES, an open standard developed by the Khronos Group, provides an API for 2D and 3D graphics on embedded systems, such as smartphones.">OpenGLES Collection</a> &gt; <a href="GUID-CBC43846-22BB-5AAF-89FE-3CF4F11B76F6.html" title="The OpenGLES Interface component provides a consistent interface to OpenGL ES on the Symbian platform, and enables users and providers of OpenGL ES to be binary compatible. OpenGL ES is an open standard developed by the Khronos Group.">OpenGLES Interface Component</a> &gt; <a href="GUID-FF5B53C9-F8E4-5A57-9CD9-05BB0BFD9045.html" title="This section provides information for OpenGL ES implementers working with the Symbian platform. This section should be used in conjunction with the EGL documentation, particularly the EGL Porting Guide.">OpenGLES Implementer's Guide</a> &gt; </div>
<h1 class="topictitle1">OpenGL ES Porting Guide</h1>
<div><p>This topic provides a guide for implementers of OpenGL ES on the Symbian platform. It is designed to be used in conjunction with the EGL Porting Guide. It does not specify how to implement OpenGL ES itself. </p>
<p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a> and <a href="GUID-F64E6551-670E-5E12-8103-DE504D3EC94F.html" title="ScreenPlay provides improved support for graphics hardware acceleration and some other new features. However, it is possible to use the Symbian platform without enabling ScreenPlay. This is called the non-ScreenPlay variant (sometimes referred to as the non-NGA variant). This topic provides an introduction to the graphics architecture when ScreenPlay is not enabled.">non-ScreenPlay</a>. <strong>Target audience</strong>: Device creators. </p>
 <div class="section"><h2 class="sectiontitle">Required functionality </h2> <p>The implementation DLL must implement all of the standard functions declared in the <a href="GUID-12D5C140-DFDA-549B-9CCF-EF7488B832AE.html" title="The OpenGLES Interface component provides the Symbian platform with an interface to the open-source, cross-platform OpenGL ES APIs defined by the Khronos Group. The component includes the Khronos-released header files, some Symbian-specific header files, LIB, DEF and MMP files and UIDs. It does not provide any implementations of the APIs.">OpenGLES Interface component</a> and optionally any implementation-specific functions. Alternatively, implementation-specific functions can be placed into a separate DLL. </p>
 <p>In order to avoid future binary compatibility issues, the reserved ordinal entry points are reserved for new functions introduced into the specification. Therefore you must not use them for implementation-specific functions. </p>
 </div>
 <div class="section"><h2 class="sectiontitle"> LIB files </h2> <p>The OpenGL ES implementation must not deliver the LIB files, because they are provided by the <a href="GUID-12D5C140-DFDA-549B-9CCF-EF7488B832AE.html" title="The OpenGLES Interface component provides the Symbian platform with an interface to the open-source, cross-platform OpenGL ES APIs defined by the Khronos Group. The component includes the Khronos-released header files, some Symbian-specific header files, LIB, DEF and MMP files and UIDs. It does not provide any implementations of the APIs.">OpenGLES Interface component</a> and are part of the interface declaration and not its implementation. To prevent LIB files being automatically generated, place the <samp class="codeph">NOEXPORTLIBRARY</samp> directive in the MMP project file that builds the implementation DLL. </p>
 <p>The LIB files delivered in the OpenGLES Interface component have only OpenGL ES standard functions and no implementation-specific functions. This is to ensure that client programs do not link to implementation-specific functions and so are portable across OpenGL ES implementations. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Extension functions</h2> <p>An OpenGL ES implementation can optionally provide extension functions. When you add an extension function, if possible do not add new exports to the OpenGL ES library, because this means you must also add them to the DEF file. This may lead to an ordinal conflict and therefore a compatibility break for clients in the futureâ€”for example, if the specification introduces new functions and these are added to the DEF file at the same ordinal position. </p>
 <p>Clients can use the standard EGL function <samp class="codeph">eglGetProcAddress()</samp> to access the extension functionality instead. If function exports cannot be avoided, place them in a separate library so that they can have their own DEF file. If required, this can be linked to the OpenGL ES implementation so that <samp class="codeph">eglGetProcAddress()</samp> can also return the address. </p>
 <p><strong>glQueryMatrixxOES </strong> </p>
 <p>The <samp class="codeph">glQueryMatrixxOES()</samp> extension function is an exception to this rule. It has been explicitly added to the OpenGL ES 1.0 and 1.1 DEF files (<span class="filepath">openglesu.def</span> and <span class="filepath">opengles11u.def</span>, respectively. This function is therefore expected to be present, even if stubbed out, in implementations of OpenGL ES 1.0 and 1.1. However, this approach has changed in OpenGL ES 1.1 v1. This entry is not present in <span class="filepath">libglesv1_cm11u.def</span> and <samp class="codeph">eglGetProcAddress()</samp> should be used instead to call the <samp class="codeph">glQueryMatrixxOES()</samp> extension. </p>
 <p>Note that the <samp class="codeph">glQueryMatrixxOES()</samp> extension has been deprecated in OpenGL ES 1.1. Instead you can get the various matrices by calling <samp class="codeph">GetFixedv()</samp> or <samp class="codeph">GetFloatv()</samp>, or by using the <samp class="codeph">OES_matrix_get()</samp> core extension. </p>
 </div>
 <div class="section"><h2 class="sectiontitle"> Internal functions</h2> <p>Sometimes internal access to the OpenGL ES implementation is requiredâ€”for example, in a bench marking or regression test for the OpenGL ES implementation. To avoid tight coupling with a specific implementation in these circumstances, it is recommended that the OpenGL ES implementation provides a separate vendor-specific LIB file containing the internal API calls. Then appropriate clients can link to that internal LIB file when required. This mechanism ensures that normal clients never see the internal API calls. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">UIDs</h2> <p>Symbian platform libraries are given unique identifiers when they are built. The following UIDs have been allocated for OpenGL ES implementations: </p>
 
<div class="tablenoborder"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-FEDE5BE7-956E-5794-86F9-7343940714A9"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-FEDE5BE7-956E-5794-86F9-7343940714A9" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1180448e164">Library</th>
 <th class="cellrowborder" valign="top" id="d1180448e167">UID2</th>
 <th class="cellrowborder" valign="top" id="d1180448e170">UID3</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1180448e164 "><p>OpenGL ES 1.1 v1 Common Profile </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e167 "><p> <samp class="codeph">0x1000008d</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e170 "><p> <samp class="codeph">0x102836BE </samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1180448e164 "><p>OpenGL ES 1.1 Common Profile </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e167 "><p> <samp class="codeph">0x1000008d</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e170 "><p> <samp class="codeph">0x101FCABD</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1180448e164 "><p>OpenGL ES 1.1 Common-Lite Profile </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e167 "><p> <samp class="codeph">0x1000008d</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e170 "><p> <samp class="codeph">0x101FCAE8</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1180448e164 "><p>OpenGL ES 2.0 </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e167 "><p> <samp class="codeph">0x1000008d</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e170 "><p> <samp class="codeph">0x10285A7A</samp>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section"><h2 class="sectiontitle">ROM building </h2> <p>Building a ROM image for a target platform involves using IBY files. There is a generic IBY file called <span class="filepath">opengles.iby</span> for the OpenGL ES implementation. This must not be replaced. However, you can create an implementation-specific IBY file. This should have a unique name in the format <span class="filepath">opengles_adaptation.iby</span>, where <span class="filepath">adaptation</span> is replaced by the vendor's name. For example: </p>
 <pre class="codeblock" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-E3F09E47-5BD8-5BC2-A401-6083D616B086"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-E3F09E47-5BD8-5BC2-A401-6083D616B086"><!-- --></a>// OPENGLES_VENDOR.IBY
    
#ifndef __OPENGLES_VENDOR_IBY__
#define __OPENGLES_VENDOR_IBY__
    
REM OpenGL ES implementation
    
// Includes the EGL entry points.
file=ABI_DIR/BUILD_DIR/libGLES_CM.dll      sys/bin/libGLES_CM.dll
    
// Does NOT include the EGL entry points.
file=ABI_DIR/BUILD_DIR/libGLESv1_CM.dll    sys/bin/libGLESv1_CM.dll
    
#endif</pre>
 <p>This IBY file must be exported by the <span class="filepath">bld.inf</span> file to the <span class="filepath">\epoc32\rom\include\</span> folder. </p>
 <p>You can include this implementation-specific IBY file in a device ROM configuration file by adding the following line to a top-level OBY file like this: </p>
 <pre class="codeblock" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-74FB1F80-7281-519F-98C6-956D5A191C5C"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-74FB1F80-7281-519F-98C6-956D5A191C5C"><!-- --></a>#define OPENGLES_DRV &lt;opengles_vendor.iby&gt;</pre>
 <p>This is the preferred method. However, an alternative is to specify the IBY on the BUILDROM command line like this: </p>
 <pre class="codeblock" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-A2ED5B58-F6D5-5AA6-8D8E-AF3B35814E50"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-A2ED5B58-F6D5-5AA6-8D8E-AF3B35814E50"><!-- --></a>BUILDROM ... â€“DOPENGLES_DRV="^&lt;"opengles_vendor.iby"^&gt;" ... </pre>
 <p>Notice that the ^ character is used as an escape character for the &lt; and &gt; characters. </p>
 <p>See <a href="GUID-946E64D6-3E5D-5264-AD5D-29D3AD296543.html" title="The Graphics package contains a number of adaptation and customization components. These are called adaptations in this topic. Symbian provides implementations of these components. However, device creators can create their own implementationsâ€”for example, to take advantage of the specific hardware that is available in a particular device. This topic describes how to select adaptations for inclusion in a ROM.">Selection of Adaptations</a> for more information. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Project file macros</h2> <p>When providing an implementation of OpenGL ES (rather than merely using OpenGL ES), the header files must be included in such a way that the functions are declared as exported symbols (rather than imported symbols). This is a distinction seen at link-time. To achieve this, place the following macros in the implementation's MMP file: </p>
 
<div class="tablenoborder"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-BBB999B5-129C-5AA6-BF26-22611F422CCE"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-BBB999B5-129C-5AA6-BF26-22611F422CCE" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1180448e344">OpenGL ES API</th>
 <th class="cellrowborder" valign="top" id="d1180448e347">MMP Project File Macro</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1180448e344 "><p>OpenGL ES 1.X </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e347 "><p> <samp class="codeph">MACRO __GL_EXPORTS</samp>  </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1180448e344 "><p>OpenGL ES 2.0 </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1180448e347 "><p> <samp class="codeph">MACRO SYMBIAN_OGLES_DLL_EXPORTS</samp>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section"><h2 class="sectiontitle"> Example project (MMP) file </h2> <p>Here is an example MMP file: </p>
 <pre class="codeblock" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-9A804D2B-6F9E-540C-AF0A-6E8E6D99E4DA"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-9A804D2B-6F9E-540C-AF0A-6E8E6D99E4DA"><!-- --></a>#include "/epoc32/include/platform/GLES/openglesuids.hrh"       // For uids
    
// These statements are always required:
target          libGLES_CM.dll                         // Destination filename
targettype      dll                                    // Binary build type
capability      All -TCB                               // Platform Security requirement
uid             KUidSharedDllUidValue    KUidOpenGLESCommonProfileDllUidValue
vendorid        &lt;your vendor id in hex&gt;
noexportlibrary                                        // Suppress generation of LIB/DSO file
DEFFILE         opengles.def

macro           __GL_EXPORTS
      
// These statements are examples and may vary:
userinclude     ../include                             // Local include files
systeminclude   /epoc32/include                        // General Symbian include files
     
sourcepath      ../opengles                            // Relative path to source files
     
source          context.cpp                            // Source files
source          display.cpp
source          egl.cpp
source          surface.cpp
     
library         euser.lib 
library         fbscli.lib                             // For CFbsBitmap, etc.
library         bitgdi.lib                             // For CFbsBitmapDevice, CFbsBitGc, etc.
library         ws32.lib                               // For RWindow, Direct Screen Access, etc.</pre>
 </div>
 <div class="section"><h2 class="sectiontitle">Example bld.inf file </h2> <p>The <span class="filepath">bld.inf</span> file specifies the exports and the MMP files. For example: </p>
 <pre class="codeblock" id="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-D3C2ABB3-EB06-5900-A5A9-1FB0F41E80EA"><a name="GUID-7DD1BC7B-B3F7-515D-8DC8-B699B947B434__GUID-D3C2ABB3-EB06-5900-A5A9-1FB0F41E80EA"><!-- --></a>PRJ_PLATFORMS
DEFAULT    
    
PRJ_EXPORTS
opengles_vendor.iby       /epoc32/rom/include/opengles_vendor.iby
    
PRJ_MMPFILES
./opengles.mmp</pre>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-FF5B53C9-F8E4-5A57-9CD9-05BB0BFD9045.html" title="This section provides information for OpenGL ES implementers working with the Symbian platform. This section should be used in conjunction with the EGL documentation, particularly the EGL Porting Guide.">OpenGLES Implementer's Guide</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-90A4BDE2-839A-5A37-ACAA-EB33FE39DE54.html">Variability Choices</a></div>
<div><a href="GUID-BB7F358E-3AC8-566B-8AE3-52FA0F9082C6.html" title="The OpenGL ES 2.0 standard allows vendor implementations to support shader programs as pre-compiled binaries, source code to be compiled when the OpenGL ES 2.0 program is run, or both. At the time of writing, the Khronos Group has not defined the Application Binary Interface (ABI) for shader binaries. These are intended to be registered by hardware vendors with Khronos. This would result in updates to the header file GLES2/gl2ext.h.">OpenGL ES 2.0 Shader Programs</a></div>
<div><a href="GUID-011A0A93-42DF-5235-BC8E-7BD88B572277.html">Security
                Threats and Measures</a></div>
<div><a href="GUID-1A8ED0EB-B3B7-553F-95E3-2120D877966B.html" title="OpenVG is a royalty-free, cross-platform API that provides a low-level hardware acceleration interface for vector graphics libraries such as Flash and SVG. OpenVG is targeted primarily at handheld devices that require portable acceleration of high-quality vector graphics for user interfaces and text on small screen devicesâ€”while enabling hardware acceleration to provide fluidly interactive performance at very low power levels.">OpenGL ES Collection Overview</a></div>
<div><a href="GUID-DC3A8785-3ED3-5696-A5ED-AB66588A5C14.html" title="This is a guide for implementers of EGL working with the Symbian platform.">EGL Porting Guide</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>