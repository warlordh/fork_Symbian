<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Architecture"/>
<meta name="abstract" content="The telephony server plug-in is the interface between the telephony server and the baseband. This topic describes the architectural relationship between the telephony server plug-in components."/>
<meta name="description" content="The telephony server plug-in is the interface between the telephony server and the baseband. This topic describes the architectural relationship between the telephony server plug-in components."/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0395BA8-E197-5C2D-A9CD-F4FF021C5A8E.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F4A99C9F-21E8-57BF-9DE7-EA6C091C22E5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D0395BA8-E197-5C2D-A9CD-F4FF021C5A8E.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Architecture</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563496 id2562268 id2562240 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html" title="Cellular Baseband Services provide a common interface to telephony services for applications and higher level platform components. The framework is independent of the underlying network services.">Cellular Baseband Services Guide</a> &gt; <a href="GUID-F4A99C9F-21E8-57BF-9DE7-EA6C091C22E5.html" title="Telephony server plug-ins translate modem messages into Symbian platform types. Symbian platform provides interfaces which must be implemented in the TSY for effective communication between the modem and Symbian platform. This section describes the telephony server plug-ins (TSYs).">Telephony Server Plug-ins</a> &gt; <a href="GUID-D0395BA8-E197-5C2D-A9CD-F4FF021C5A8E.html" title="This topic gives the conceptual information for telephony server plug-ins.">Concepts</a> &gt; </div>
<h1 class="topictitle1">Architecture</h1>
<div><p>The telephony server plug-in is the interface between the telephony server and the baseband. This topic describes the architectural relationship between the telephony server plug-in components. </p>
<p>The CTSY inherits its base class from the <a href="GUID-C1795E41-CB12-3116-8F57-51ADDD6A264D.html"><span class="apiname">telephony</span></a> Server. The server can be <a href="GUID-E0BA28A0-5546-3378-A330-ECF27BA81035.html"><span class="apiname">CCallBase</span></a>, <a href="GUID-38F19E7C-A1BC-3E8B-805B-3944775B2D63.html"><span class="apiname">CPhoneBase</span></a> or <a href="GUID-78926205-95F5-332B-9B94-0611AA084B4D.html"><span class="apiname">CLineBase</span></a>. CTSY has two main APIs: </p>
 <p><strong>TSY plug-in API </strong> </p>
 <p>This API is used for communication with the telephony server. The telephony client sends the request to the telephony server for any communication that requires baseband connection. The telephony server forwards these requests to the LTSY through TSY plug-in API. </p>
 <p><strong>Common TSY plug-in API </strong> </p>
 <p>This interface is used for the communication between the CTSY and the LTSY. The CTSY forwards the telephony client request to the LTSY using the Common TSY plug-in API as CTSY messages. The CTSY messages are converted to baseband requests by the LTSY. </p>
 <p>The CTSY is implemented as a static <samp class="codeph">DLL</samp> and it is loaded during device boot time by the telephony server. The telephony server and the CTSY run in the same thread. Since it is a static DLL, the initialisation will not fail. </p>
 <div class="fignone" id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-08D9122B-F7B8-5B90-AC7E-B8FF222657BF"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-08D9122B-F7B8-5B90-AC7E-B8FF222657BF"><!-- --></a><img src="GUID-9DCD62DF-C523-5D00-85CD-5AC82C9E9F02_d0e57241_href.png"/></div>
 <p>There are two variants of Common TSY: </p>
 <ul><li id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-A21A18D2-11D8-5895-ADD0-4421091D2C5C"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-A21A18D2-11D8-5895-ADD0-4421091D2C5C"><!-- --></a><p>Common TSY without Dispatcher </p>
 </li>
 <li id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-8AF22528-A9B6-5465-A817-0E2CDBE13EE0"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-8AF22528-A9B6-5465-A817-0E2CDBE13EE0"><!-- --></a><p>Common TSY with Dispatcher </p>
 </li>
 </ul>
 <div class="section" id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-2B86BD4F-66D5-514A-9EA3-17A711B02DE8"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-2B86BD4F-66D5-514A-9EA3-17A711B02DE8"><!-- --></a><h2 class="sectiontitle">Common TSY without Dispatcher</h2> <p>Telephony clients send requests which can be mode specific or mode independent. The mode can be GSM or UMTS. These requests are passed on to CTSY by the telephony server (ETel). The mode independent requests are handled by CTSY and the mode specific requests are handled by the extension modules such as <a href="GUID-6412C1AF-CD93-3AE4-87CA-0CA8C37EBCE0.html"><span class="apiname">CMmPhoneGsmWcdmaExtInterface</span></a>. A mode specific extension module may process the requests related to specific technologies such as GSM or UMTS. </p>
 <div class="fignone" id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-701013DE-D163-5952-87AA-B6599A47E0C6"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-701013DE-D163-5952-87AA-B6599A47E0C6"><!-- --></a><span class="figcap">Figure 1. 
             Common TSY without Dispatcher 
          </span> <img src="GUID-7A6FFAD1-5358-5050-9728-5C51B5B225AF_d0e57273_href.png"/></div>
 <p>The CTSY is independent of the LTSY and the baseband. The generic interface allows licensees to modify the LTSY and baseband, but allows easy integration. The phone engine is the main user of the CTSY but other processes such as the SIM Application Toolkit (SAT) can also use the CTSY. The phone engine is created by the telephony server when the phone boots. The phone engine initialises the CTSY and the LTSY when a first request call is made by one of the clients. The CTSY creates the message manager and the message router proxy. The LTSY creates a message router and message handlers. </p>
 <p id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-20F2C7C0-C290-5D38-8075-E8A82E45CA6C"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-20F2C7C0-C290-5D38-8075-E8A82E45CA6C"><!-- --></a><strong>Message manager</strong> </p>
 <p>The message manager separates the CTSY from the LTSY. Telephony client requests are all processed by the message manager and passed to the LTSY using the message router. <a href="GUID-AC6F8F0B-1B08-3A02-B82E-0E5D9222325C.html"><span class="apiname">CMmMessageRouterBase</span></a> provides the required implementation for routing the client request to the LTSY. When the requests are acknowledged, the message manager forwards the response message to the client. Each client is identified by a unique IPC number. LTSY should use the <a href="GUID-9BD0D6D7-60F2-36BB-982E-7FA557BF3A28.html"><span class="apiname">MmMessageManagerCallback</span></a> interface to respond to the telephony clients. </p>
 <p>The requests passed from CTSY to LTSY should be sent as a packaged data using the <a href="GUID-1394910A-F1D8-315D-B0B3-9B34C89940CB.html"><span class="apiname">CmDataPackage</span></a> template. The template class allows packing of two parameters together. </p>
 <p id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-1CE2A549-33F7-5B9C-9DC8-D7FCE2A6C7B6"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-1CE2A549-33F7-5B9C-9DC8-D7FCE2A6C7B6"><!-- --></a><strong>Message router proxy</strong> </p>
 <p>The message router proxy handles the response from the baseband to the CTSY. Message router proxy implements the <a href="GUID-A80C1727-0165-3A3A-BDE6-A8AD50688535.html"><span class="apiname">MmMessageMangerCallBack</span></a> which is used by the LTSY to respond back to the CTSY request messages using the <a href="GUID-564D8ECF-A70E-30CC-9C68-F6BECBCBAC6E.html"><span class="apiname">Complete()</span></a> method. </p>
 </div>
 <div class="section" id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-0F0C43F2-471D-5E89-8F2A-C59777B8D904"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-0F0C43F2-471D-5E89-8F2A-C59777B8D904"><!-- --></a><h2 class="sectiontitle">Common TSY with Dispatcher</h2> <p>In the second variant of the CTSY a new layer is provided to decrease the development time of the LTSY. This new layer, between the CTSY and the LTSY, is known as the dispatch layer. The dispatch layer provides a simple interface to be implemented in the LTSY. The dispatch layer handles the packing and unpacking of messages between the CTSY and LTSY. The LTSY is responsible for the implementation of the functions defined in the dispatcher classes and translating the requests to baseband commands. </p>
 <div class="fignone" id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-5F413A61-3346-5710-848C-E48177D34DBD"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-5F413A61-3346-5710-848C-E48177D34DBD"><!-- --></a><img src="GUID-2F48BCBA-9256-50B6-A8D1-02617655FEED_d0e57326_href.png"/></div>
 <p><strong>CTSY</strong> </p>
 <p>The CTSY implements the message manager. The message manager processes the incoming client requests and pass them to appropriate dispatcher class through the message router. The acknowledgements from the dispatcher class are passed back to the clients through the telephony server. </p>
 <p><strong>Dispatcher</strong> </p>
 <p>The dispatch layer provides the following: </p>
 <ul><li id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-98C9CEF6-7C04-55ED-BC19-F9335F9AABD7"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-98C9CEF6-7C04-55ED-BC19-F9335F9AABD7"><!-- --></a><p> <strong>LTSY factory classes</strong>  </p>
 <p>The factory classes creates the required interfaces for communication between the LTSY and the CTSY. </p>
 </li>
 <li id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-5288D29B-DD65-5F46-BF32-54228195CB53"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-5288D29B-DD65-5F46-BF32-54228195CB53"><!-- --></a><p> <strong>Message router</strong>  </p>
 <p>The message router is responsible to call the appropriate dispatcher class function. </p>
 </li>
 <li id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-CB3EB222-6C3B-5DA6-A91F-0714B846ABCF"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-CB3EB222-6C3B-5DA6-A91F-0714B846ABCF"><!-- --></a><p> <strong>Dispatcher classes </strong>  </p>
 <p>The <a href="GUID-B89575A8-5F36-59FA-9FA3-48E2985E54C9.html#GUID-B89575A8-5F36-59FA-9FA3-48E2985E54C9__GUID-162746DD-E2E2-548F-8026-5C4281BF0CC5">dispatcher classes</a> are grouped according to the functional areas. </p>
 </li>
 <li id="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-4E850C80-6CF0-5770-A915-F3B2ED58E3F2"><a name="GUID-95A4DB2E-77CB-5151-8D7C-948C30348E13__GUID-4E850C80-6CF0-5770-A915-F3B2ED58E3F2"><!-- --></a><p> <strong>Call-back functions</strong>  </p>
 <p>The LTSY uses the call-back function to acknowledge previous request or to notify an event. </p>
 </li>
 </ul>
 <p> <em>Note:</em> Some of the functions may not be implemented in the LTSY. When the dispatcher receives a request for an unsupported function it returns <samp class="codeph">KErrNotSupported</samp> to the clients. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-D0395BA8-E197-5C2D-A9CD-F4FF021C5A8E.html" title="This topic gives the conceptual information for telephony server plug-ins.">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>