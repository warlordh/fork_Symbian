<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Enabling additional touch events for your application"/>
<meta name="abstract" content="The Symbian platform provides additional touch events to enable drag events and to specify screen areas for touch events."/>
<meta name="description" content="The Symbian platform provides additional touch events to enable drag events and to specify screen areas for touch events."/>
<meta name="DC.Relation" scheme="URI" content="GUID-26A4F760-C85A-4030-8910-15D239323E9D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-94005A46-B4C6-4A30-A8E8-1B9C2D583D50.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-29486886-CB54-4A83-AD6D-70F971A86DFC.html"/>
<meta name="DC.Relation" scheme="URI" content="Chunk1444803053.html#GUID-A9330FEF-C559-4E2B-B064-0151FDADEA8C"/>
<meta name="DC.Relation" scheme="URI" content="GUID-26A4F760-C85A-4030-8910-15D239323E9D.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-33D93E96-98A9-4116-9028-3241D76A1036"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Enabling additional touch events for your application</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-33D93E96-98A9-4116-9028-3241D76A1036"><a name="GUID-33D93E96-98A9-4116-9028-3241D76A1036"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2561792 id2561806 id2561942 id2840148 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-94005A46-B4C6-4A30-A8E8-1B9C2D583D50.html">Classic UI Guide</a> &gt; <a href="GUID-29486886-CB54-4A83-AD6D-70F971A86DFC.html">Application and UI frameworks</a> &gt; <a href="Chunk1444803053.html#GUID-A9330FEF-C559-4E2B-B064-0151FDADEA8C">Event handling</a> &gt; <a href="GUID-26A4F760-C85A-4030-8910-15D239323E9D.html">Touch-specific events</a> &gt; </div>
<h1 class="topictitle1">Enabling additional touch events for your application</h1>
<div><p>The Symbian platform provides additional touch events to
enable drag events and to specify screen areas for touch events.</p>

<p>By default, the Symbian platform sends only <span class="parmname">EButton1Up</span> and <span class="parmname">EButton1Down</span> touch events to applications.</p>

<p>If you want to enable <span class="parmname">EDrag</span> touch events,
implement <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-66B1D0C0-BFBB-36DB-BCC2-5563895251D5"><span class="apiname">CCoeControl::EnableDragEvents()</span></a> in your
container class.</p>

<p>When the mobile device user drags the stylus on the screen, <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-5375D595-CF6A-38F6-9D62-E8DDF2D2BCF6"><span class="apiname">TPointerEvent::EDrag()</span></a> events are sent. When dragging stops,
the application receives the event <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-5BADE607-E845-34B2-9C2D-B6882B7D4288"><span class="apiname">TPointerEvent::EButton1Up()</span></a>.</p>

<pre class="codeblock">void CTableauControl::ConstructL( const TRect&amp; aRect )
    {
    // This is parent window
    CreateWindowL();

    EnableDragEvents();

    SetRect( aRect );
    SetExtentToWholeScreen();
    
    
    // Initialize component array
    InitComponentArrayL();
    
    
	 //Implement your own logic here
  	 ActivateL();
    }</pre>

<p>It is enough that the container control set <samp class="codeph">EnableDragEvents()</samp> in its construction. <samp class="codeph">EnableDragEvents()</samp> need not
be set again for the child controls to receive dragging events.</p>

<div class="section" id="GUID-33D93E96-98A9-4116-9028-3241D76A1036__GUID-7B30F0D5-1EAE-4F40-B04F-6A3953BCC634"><a name="GUID-33D93E96-98A9-4116-9028-3241D76A1036__GUID-7B30F0D5-1EAE-4F40-B04F-6A3953BCC634"><!-- --></a><h2 class="sectiontitle">Controlling
which control receives a touch event</h2><p>Particularly when you
are receiving drag events it may be that an object in the window may
be drawn by one control, while the pointer is over another control.
In cases where you want to ensure that pointer events are received
by the intended control, implement <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-172FDC09-7870-3FD0-9252-340178C58C28"><span class="apiname">CCoeControl::SetPointerCapture()</span></a>.</p>
<p>When a control receives a <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-26CE2524-04BC-3592-A7E5-7EEC792A466E"><span class="apiname">TPointerEvent::EButton1Down()</span></a> event, all events will be sent to this control until the next <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-5BADE607-E845-34B2-9C2D-B6882B7D4288"><span class="apiname">TPointerEvent::EButton1Up()</span></a> event. If you want to have
events to be sent to another control before the<a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-5BADE607-E845-34B2-9C2D-B6882B7D4288"><span class="apiname">TPointerEvent::EButton1Up()</span></a> event, call <samp class="codeph">SetPointerCapture(ETrue)</samp> from the new
control. </p>
<p>When the new control has received its pointer event
and <a href="GUID-1FFA0073-3D83-388E-A824-08C31F90CC54.html#GUID-1FFA0073-3D83-388E-A824-08C31F90CC54__GUID-5BADE607-E845-34B2-9C2D-B6882B7D4288"><span class="apiname">TPointerEvent::EButton1Up()</span></a> has been received,
you have to call <samp class="codeph">SetPointerCapture(EFalse)</samp> from the
new control to stop events being sent to it indefinitely.</p>
</div>

<div class="section" id="GUID-33D93E96-98A9-4116-9028-3241D76A1036__GUID-8C337F8B-346A-430A-9A7A-A48B53031421"><a name="GUID-33D93E96-98A9-4116-9028-3241D76A1036__GUID-8C337F8B-346A-430A-9A7A-A48B53031421"><!-- --></a><h2 class="sectiontitle">Specifying
screen areas for touch events</h2><p>To specify screen areas (<samp class="codeph">TRect</samp>) for touch events, see the example below.</p>
<pre class="codeblock">void CTableauControl::HandlePointerEventL(const TPointerEvent&amp; aPointerEvent)
    {
    // Does the user point exit text on screen? 
    // iExitRect is rectangle of the text area on screen.
    if (iExitRect.Contains(aPointerEvent.iPosition))
        {
        if (iEikonEnv-&gt;QueryWinL(_L("Klondike"),_L("Exit?")))
            {
            // Exit was pointed, then do exit   
            (static_cast&lt;CKlondikeAppUi*&gt;(iEikonEnv-&gt;AppUi()))-&gt;HandleCommandL(EEikCmdExit);
            return;
            }
        }
    ...
    }</pre>
</div>

<div class="section" id="GUID-33D93E96-98A9-4116-9028-3241D76A1036__GUID-8B12AF1C-A98A-416D-A586-807CFC2B839D"><a name="GUID-33D93E96-98A9-4116-9028-3241D76A1036__GUID-8B12AF1C-A98A-416D-A586-807CFC2B839D"><!-- --></a><h2 class="sectiontitle">Ignoring
events other than pointer up in your control</h2><p>In cases where
you want to make sure your control receives only touch <span class="parmname">EButton1Up</span> events after receiving a touch <span class="parmname">EButton1Down</span> event, implement <a href="GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160.html#GUID-B06F99BD-F032-3B87-AB26-5DD6EBE8C160__GUID-885AF2EB-587A-323B-99B5-019B2E7EBC78"><span class="apiname">CCoeControl::IgnoreEventsUntilNextPointerUp()</span></a>. </p>
</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-26A4F760-C85A-4030-8910-15D239323E9D.html">Touch-specific events</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>