<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Examples Showing the use of the SIP Profile API"/>
<meta name="DC.Relation" scheme="URI" content="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-057F1F82-56AF-5696-853E-79196A3D567E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-6E221034-9A01-53AB-8374-315C38CCA21E"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Examples Showing the use of the SIP Profile API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2397680 id2397782 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-057F1F82-56AF-5696-853E-79196A3D567E.html">SIP</a> &gt; <a href="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html">SIP Profile API</a> &gt; </div>
<h1 class="topictitle1">Examples
Showing the use of the SIP Profile API</h1>
<div>
<p>The following sections describe how to use the SIP Profile API. </p>

<ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-D5503066-5783-5D3D-9EC3-DBC7CEE398B3"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-D5503066-5783-5D3D-9EC3-DBC7CEE398B3"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-82D83B96-FF89-5F6A-9A65-C448F103A2F5">Creating a SIP profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EE2733CC-B951-5970-BC00-2D8F3E0F6EFA"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EE2733CC-B951-5970-BC00-2D8F3E0F6EFA"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-72003F70-79B8-5D23-977D-E736AD3E5B42">Modifying a SIP Profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-6FCDC117-944D-57D6-BB49-77845972077E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-6FCDC117-944D-57D6-BB49-77845972077E"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-27B07919-C5D5-5F8A-B2A3-AC2577E19C92">Enabling a SIP profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-CBD94827-C48F-5E91-88F8-A2E962BB08B9"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-CBD94827-C48F-5E91-88F8-A2E962BB08B9"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-628DCA48-F8B4-5E6F-AC1B-731EAB1A9D62">Disabling a SIP profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-610AAF1B-B350-5102-9DA4-82FBC04FC527"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-610AAF1B-B350-5102-9DA4-82FBC04FC527"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E607BA8F-50CC-5CF6-9D7E-E31319825507">Destroying a SIP Profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3108093C-35E5-56C2-A3C2-03527816E537"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3108093C-35E5-56C2-A3C2-03527816E537"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EABE2455-4D59-58AE-8D02-24FD4A7A82B1">Retrieving a profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1BE93BE1-2B70-53C8-B6FD-48278322517F"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1BE93BE1-2B70-53C8-B6FD-48278322517F"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-471F4EBB-2FE4-561D-9B74-555061797C45">Refreshing a SIP profile</a>  </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-F6CD986B-C019-58E6-B71D-39F42AB03AA6"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-F6CD986B-C019-58E6-B71D-39F42AB03AA6"><!-- --></a><p> <a href="GUID-6E221034-9A01-53AB-8374-315C38CCA21E.html#GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-289B2BF5-AF58-5E1E-B905-F1255EFC7FEB">Stopping SIP registration</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-82D83B96-FF89-5F6A-9A65-C448F103A2F5"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-82D83B96-FF89-5F6A-9A65-C448F103A2F5"><!-- --></a><h2 class="sectiontitle">Creating a
SIP profile</h2> <p> <a href="GUID-5266AB0D-705C-3011-A92B-DA82BC212999.html"><span class="apiname"> CSIPManagedProfileRegistry</span></a> manages
the SIP profiles and provides the functions to add, update, and remove profiles
at run time. </p>
 <p>The following steps describes how to create a SIP profile. </p>
 <a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-F9ECD3BD-52AC-5370-8336-4EEB619B1F58"><!-- --></a><ol id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-F9ECD3BD-52AC-5370-8336-4EEB619B1F58">
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-C0A00EF9-72F1-53DB-8CCB-BE7B4BF3D7F3"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-C0A00EF9-72F1-53DB-8CCB-BE7B4BF3D7F3"><!-- --></a><p>Create a default profile
that uses the <a href="GUID-A9C883F9-3C6D-32BF-A278-4DCBDA18F687.html"><span class="apiname">CreateL()</span></a> interface of <a href="GUID-B2F66C7C-4E81-307C-B836-314D0A89D8D6.html"><span class="apiname">CSIPManagedProfileRegistry()</span></a>. <a href="GUID-A9C883F9-3C6D-32BF-A278-4DCBDA18F687.html"><span class="apiname">CreateL()</span></a> returns
an object of type <samp class="codeph">CSIPManagedProfile</samp>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-76CD5953-C5A9-51C0-9E66-2444AFE458D6"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-76CD5953-C5A9-51C0-9E66-2444AFE458D6"><!-- --></a><p>Use <samp class="codeph">SetParameter()</samp> of <a href="GUID-CDE67614-1A7A-3082-8D8D-71645668A0DE.html"><span class="apiname">CSIPManagedProfile</span></a> to
set the value for the profile parameters. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-8F762BAF-0D4B-580D-8A8B-BE3B68C2BF90"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-8F762BAF-0D4B-580D-8A8B-BE3B68C2BF90"><!-- --></a><p>Use <a href="GUID-5266AB0D-705C-3011-A92B-DA82BC212999.html#GUID-5266AB0D-705C-3011-A92B-DA82BC212999__GUID-50D99686-5C79-3F7F-9C7D-4FC23EE41832"><span class="apiname">CSIPManagedProfileRegistry::SaveL()</span></a> to
save the profile when the values are set. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1B40AA8E-6326-5631-B83E-5230192FBC0E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1B40AA8E-6326-5631-B83E-5230192FBC0E"><!-- --></a><p>When you call <a href="GUID-475D1AF4-F8C2-3243-99DC-43419979A858.html"><span class="apiname">SaveL()</span></a>,
wait until <a href="GUID-92312598-A5DA-36B9-AF46-E7EE80452792.html"><span class="apiname">EProfileCreated</span></a> event is reported in the observer.
When the event is received the profile is created. </p>
 </li>

</ol>
 <div class="fignone" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-13F7B1AB-7F1A-544F-AC9C-26780E4FC517"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-13F7B1AB-7F1A-544F-AC9C-26780E4FC517"><!-- --></a>
<img src="GUID-46A91D57-7864-53AD-903C-B978B0C61DAD_d0e555714_href.jpg"/>
</div>
 <p>The following code snippet shows how to create and save a profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EFDEE0D4-00C9-520E-B1FA-18E48702DE7F"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EFDEE0D4-00C9-520E-B1FA-18E48702DE7F"><!-- --></a>/*Client must create an instance of the CSIP class. The API used for this is, here TUid must be an application UID.*/

CSIP* CSIP::NewL(const TUid&amp; aUid, MSIPObserver&amp; aObserver); 

/* CSIPManagedProfileRegistry manages SIP profiles and provides functions for adding, updating, or removing profiles at run time. */

iManagedProfileRegistry= CSIPManagedProfileRegistry::NewL(aObserver);

/* CreateL() of CSIPManagedProfileRegistry is used to create a profile with default values. This takes ProfileType as parameter so define a profile type.*/

/*  Profilename */
    _LIT8( KProfileName, "ims" );
    
    // Used to set and get the parameters of the profile
    CSIPManagedProfile* aProfile = NULL;
    
    // Set the profile type , profile name.
    TSIPProfileTypeInfo typeInfo;
    typeInfo.iSIPProfileClass = TSIPProfileTypeInfo:: EIms;
    typeInfo.iSIPProfileName = KProfileName;
    
    // Creates the profile of type IETF with default values  
    aProfile = iManagedProfileRegistry-&gt;CreateL( typeInfo );

    // Set the values in the newly created profile.
    TUint32 iapId(11);
    aProfile-&gt;SetParameter(KSIPAccessPointId,iapId);
    
            _LIT8(aor,"sip:user@192.168.0.35");
    aProfile-&gt;SetParameter(KSIPUserAor,aor);
 
// Save the profile
    iManagedProfileRegistry-&gt;SaveL(*aProfile);

// Wait for EProfileCreated event on the observer.
</pre>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-72003F70-79B8-5D23-977D-E736AD3E5B42"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-72003F70-79B8-5D23-977D-E736AD3E5B42"><!-- --></a><h2 class="sectiontitle">Modifying a
SIP Profile</h2> <p>The following steps describe how to modify a SIP profile. </p>
 <a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-AFE64969-68F3-594C-8324-F0943694AB19"><!-- --></a><ol id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-AFE64969-68F3-594C-8324-F0943694AB19">
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FE7DBAA3-03C5-5CFC-BFB8-C63DDF7AA6A3"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FE7DBAA3-03C5-5CFC-BFB8-C63DDF7AA6A3"><!-- --></a><p>The profile is modified
when you change the profile parameters and save the updated profile to the
permanent store. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-6B61FCF7-C753-534E-BF2D-293FE7A16F6E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-6B61FCF7-C753-534E-BF2D-293FE7A16F6E"><!-- --></a><p>When the updated profile
is saved to the permanent store the application gets the event notification <samp class="codeph">EProfileUpdated</samp>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-614CA2D4-ED93-58A7-B3FC-8F86C3BA3A7C"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-614CA2D4-ED93-58A7-B3FC-8F86C3BA3A7C"><!-- --></a><p>Depending on the updated
parameters, the update leads to no actions, to registration or to re-registration.
The profile is re-registered if it is configured for auto-registration when
the profile is updated. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-9A12EC08-7C67-551E-A7FE-5A114A36F721"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-9A12EC08-7C67-551E-A7FE-5A114A36F721"><!-- --></a><p>The profile must not
be used by another application while you update the profile. Use the <a href="GUID-5266AB0D-705C-3011-A92B-DA82BC212999.html#GUID-5266AB0D-705C-3011-A92B-DA82BC212999__GUID-E6E0D735-28EC-3BFD-8359-68FDC39108EE"><span class="apiname">CSIPManagedProfileRegistry::IsInUseL</span></a> API
to check if the profile is currently in use. </p>
 </li>

</ol>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-27B07919-C5D5-5F8A-B2A3-AC2577E19C92"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-27B07919-C5D5-5F8A-B2A3-AC2577E19C92"><!-- --></a><h2 class="sectiontitle">Enabling a
SIP profile</h2> <p>The following steps describe how to enable a SIP profile. </p>
 <a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1D340099-1F58-5E19-8380-1CC187CB7632"><!-- --></a><ol id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1D340099-1F58-5E19-8380-1CC187CB7632">
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-7E306B08-C5A3-534F-9122-17D81BDAB5C2"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-7E306B08-C5A3-534F-9122-17D81BDAB5C2"><!-- --></a><p>A client of the SIP
Profile API must create a <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a> object. </p>
 <p> <strong>Note</strong>:
The client must provide an instance of the class <a href="GUID-AFB2603A-8A35-3E70-8EC2-229C9726F00B.html"><span class="apiname">CSIP</span></a> to
create an object of the type <samp class="codeph">CSIPProfileRegistry</samp>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E8B43A46-B6F0-5466-A039-D0565EAA0895"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E8B43A46-B6F0-5466-A039-D0565EAA0895"><!-- --></a><p>The client must implement
the callback functions defined in the <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html"><span class="apiname">MSIPProfileRegistryObserver</span></a> interface
to get notified when the status of the profile is changed. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FDB514C2-5B6A-5FB6-AECD-BEF264DD700B"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FDB514C2-5B6A-5FB6-AECD-BEF264DD700B"><!-- --></a><p>Create an instance of <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a> using
a retrieve function of the <a href="GUID-DDB0FD0C-267F-3AAB-8519-78065180E0BD.html"><span class="apiname">CSIPPProfileRegistry</span></a> class. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-B3B9F1DF-A195-5E37-84BD-2A951C472BC8"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-B3B9F1DF-A195-5E37-84BD-2A951C472BC8"><!-- --></a><p>The profile parameters
are read from the getter functions of the <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-47997C80-FE84-5FAF-A5A1-E634215BD362"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-47997C80-FE84-5FAF-A5A1-E634215BD362"><!-- --></a><p>The client can use the
profile when you enable it through <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a> and
leaves on failure. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FBC081E2-D61E-58DB-9237-6673FB9231E0"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FBC081E2-D61E-58DB-9237-6673FB9231E0"><!-- --></a><p>The user must check
the profile status after the <a href="GUID-93D33C84-8A6B-3A94-9797-1412489323F0.html"><span class="apiname">EnableL</span></a> function is called.
If the profile is not registered after this function is called, the user must
wait until it gets a notification through the <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html"><span class="apiname">MSIPProfileRegistryObserver</span></a> callback
interface about the profile registration. </p>
 </li>

</ol>
 <div class="fignone" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-9300C461-D490-5E0B-84A6-AD40F95B8DE7"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-9300C461-D490-5E0B-84A6-AD40F95B8DE7"><!-- --></a>
<img src="GUID-5C52B6B9-546C-5152-A968-B91CB3D885A0_d0e555849_href.jpg"/>
</div>
 <p>The following code snippet shows how to enable a SIP profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1A52EE02-D6E9-5795-995B-6B5ADFD131B4"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1A52EE02-D6E9-5795-995B-6B5ADFD131B4"><!-- --></a>
/*With the assumption that the profile was created and is saved to the persistent storage. */
//Create an Instance of SIP client

iSip = CSIP::NewL( aAppUid );

//use CSIPProfileRegistry to get the saved profile.

iProfileRegistry = CSIPProfileRegistry::NewL(*iSip, *this);

//Retrieve the profiles by the AOR

_LIT8(KAor,"sip:user@10.192.192.43");
TDesC8 aor(KAor);

RPointerArray&lt;CSIPProfile&gt; profiles;

/* Find and put the matching profiles by the given AOR into the pointer array.
Returns the set of profiles which has the provided AOR.*/

iProfileRegistry-&gt;ProfilesL(KAor,profiles); 

// Check the profile count. Get the required profile if the count is positive non-zero.
TInt profile_cnt =   profiles.Count() ;
iProfile = profiles[0];
iProfileRegistry-&gt;EnableL( *iProfile, *this );

//Application gets the event EProfileRegistered if the registration is successful. 
</pre>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-628DCA48-F8B4-5E6F-AC1B-731EAB1A9D62"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-628DCA48-F8B4-5E6F-AC1B-731EAB1A9D62"><!-- --></a><h2 class="sectiontitle">Disabling a
SIP profile</h2> <p>The following steps describes how to disable a SIP
profile. </p>
 <ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-8EF332BF-6FD9-50B2-B29C-A24B29B4829D"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-8EF332BF-6FD9-50B2-B29C-A24B29B4829D"><!-- --></a><p>A client of the SIP
Profile API must create a <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a> object </p>
 <p> <strong>Note</strong>:
The client must provide an instance of the class <a href="GUID-AFB2603A-8A35-3E70-8EC2-229C9726F00B.html"><span class="apiname">CSIP</span></a> to
create a <a href="GUID-E8D080AD-4494-3880-B5CE-3487CA7D76E9.html"><span class="apiname">CSIPProfileRegistry</span></a> object. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-0715DDFB-639B-5843-BFC8-75E53D807698"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-0715DDFB-639B-5843-BFC8-75E53D807698"><!-- --></a><p>The client must implement
the callback functions defined in the <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html"><span class="apiname">MSIPProfileRegistryObserver</span></a> interface
to get notified with the events when the status of the profile is changed. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-8C06A1DB-BAE9-5718-B10D-3D262981B100"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-8C06A1DB-BAE9-5718-B10D-3D262981B100"><!-- --></a><p>Use retrieve function
of the class <a href="GUID-DDB0FD0C-267F-3AAB-8519-78065180E0BD.html"><span class="apiname">CSIPPProfileRegistry</span></a> to create an instance
of <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-4A1D7F52-7146-541C-91AE-E9CB5B8D5DD5"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-4A1D7F52-7146-541C-91AE-E9CB5B8D5DD5"><!-- --></a><p>The profile parameters
are read from the getter functions of the <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3D2ADA9A-DC9B-501D-B6DA-68BDA1B747FA"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3D2ADA9A-DC9B-501D-B6DA-68BDA1B747FA"><!-- --></a><p>Check the registration
status of the profile that uses the getter functions of <a href="GUID-68AE6070-0410-3671-9E68-A7785B8271CD.html"><span class="apiname">CSIPProfile</span></a>.
Disable the profile if it is registered. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E042394C-6AF3-5951-8F26-C4473DBDD143"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E042394C-6AF3-5951-8F26-C4473DBDD143"><!-- --></a><p>An application gets
the notification event <samp class="codeph">EProfileDeregistered</samp> if the de-registration
is successful, otherwise it leaves. The error is sent to the application through
the <samp class="codeph">ProfileRegistryErrorOccurred</samp> callback function. </p>
 </li>

</ul>
 <p>The following code snippet shows how to disable a SIP profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-40C08581-81ED-5A7E-90D9-36966992191A"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-40C08581-81ED-5A7E-90D9-36966992191A"><!-- --></a>/*With the assumption that the profile was created and is saved to the persistent storage. 
//Create an instance of SIP client
iSip = CSIP::NewL( aAppUid

/*use CSIPProfileRegistry to get the saved profile.*/
iProfileRegistry = CSIPProfileRegistry::NewL(*iSip, *this);

 /*Retrieve the profiles by the AOR*/
_LIT8(KAor,"sip:user@10.192.192.43");
TDesC8 aor(KAor);
 
RPointerArray&lt;CSIPProfile&gt; profiles;

// Find and put the matching profiles by the given AOR into the pointer array
// Returns the set of profiles which has the provided AOR.
iProfileRegistry-&gt;ProfilesL(KAor,profiles); 

/* Check the profile count. Get the required profile if the count is positive non-zero.*/
TInt profile_cnt =   profiles.Count() ;
iProfile = profiles[0];

// Registered is a bool type variable. Check the registration status of the iProfile. 
// Registered holds TRUE if it is registered otherwise FALSE
iProfile-&gt;GetParameter( KSIPProfileRegistered, registered );  

/* If the iProfile is registered ( the Registered variable must hold TRUE for iProfile )*/
/* Disable API returns KErrNone if the profile was disabled successfully otherwise there is a system-wide error.*/
CSIPProfileRegistry::Disable(*iProfile)
</pre>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E607BA8F-50CC-5CF6-9D7E-E31319825507"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E607BA8F-50CC-5CF6-9D7E-E31319825507"><!-- --></a><h2 class="sectiontitle">Destroying
a SIP Profile</h2> <p>When you destroy a SIP profile it is permanently
removed from the permanent storage and it cannot be used. The profile information
is removed from the <span class="filepath">sipprofiles.dat</span> file in Epoc32\winscw\c\private\101F413C. </p>
 <p>The
following steps describe how to destroy a SIP profile. </p>
 <a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-04F9358C-2AED-58F7-9404-01A4588590D1"><!-- --></a><ol id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-04F9358C-2AED-58F7-9404-01A4588590D1">
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3E72E3A2-3A3B-5433-8F38-6EB5AE517E50"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3E72E3A2-3A3B-5433-8F38-6EB5AE517E50"><!-- --></a><p>When the profile is
destroyed the application gets the event <samp class="codeph">EProfileDestroyed</samp>. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-D562B0C1-DC27-5615-AB19-70A978C4AF41"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-D562B0C1-DC27-5615-AB19-70A978C4AF41"><!-- --></a><ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EDF14357-0BCB-539C-B569-01F19C02265E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EDF14357-0BCB-539C-B569-01F19C02265E"><!-- --></a><p>Registered: The removal
is two-step process, de-register the profile and remove the profile. </p>
 </li>

</ul>
 <ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-A1EC272B-AF21-572D-B16E-367EF21796BE"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-A1EC272B-AF21-572D-B16E-367EF21796BE"><!-- --></a><p>De-registered : Removes
the profile from the permanent storage and the application is notified with
the event EProfileDestroyed. </p>
 </li>

</ul>
 </li>

</ol>
 <p>The following code snippet shows how to disable a profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-0784D25C-7AA0-53C1-B386-AC54F072833D"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-0784D25C-7AA0-53C1-B386-AC54F072833D"><!-- --></a>//Function leaves on failure.
CSIPManagedProfileRegistry::DestroyL(CSIPProfile&amp; aSIPProfile);
</pre>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EABE2455-4D59-58AE-8D02-24FD4A7A82B1"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EABE2455-4D59-58AE-8D02-24FD4A7A82B1"><!-- --></a><h2 class="sectiontitle">Retrieving
a profile</h2> <p><strong>Retrieving a default profile</strong> </p>
 <p>The following
code snippet shows how to retrieve the default profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3D64A865-38B6-539F-8C6B-CE10996B24A3"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3D64A865-38B6-539F-8C6B-CE10996B24A3"><!-- --></a>// Retrieving a default profile.
CSIPProfile* profile = iProfileRegistry-&gt;DefaultProfileL();

// When a client retrieves a profile, its ownership is transferred to that client, so it becomes responsible 
// for deleting the instances when they are no longer needed.

delete profile;
</pre>
 <p><strong>Retrieving profiles by type</strong> </p>
 <p>The following code
snippet shows how to retrieve profiles by type. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-26097346-72B3-51A9-ABB3-37B8B138B28D"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-26097346-72B3-51A9-ABB3-37B8B138B28D"><!-- --></a>// To retrieve more than one profile, the client must create
// an RPointerArray object to holding pointers to instances of CSIPProfile.

RPointerArray&lt;CSIPProfile&gt; profiles;

// The wanted type is defined using a variable of type TSIPProfileTypeInfo.

TSIPProfileTypeInfo type;
type.iSIPProfileClass = TSIPProfileTypeInfo::EInternet;
type.iSIPProfileName = _L8("IETF");

// Profiles matching a given type are returned in the array.
iProfileRegistry-&gt;ProfilesL(type, profiles);
...
// When a client retrieves a profile, its ownership is transferred to that
// client, so it becomes responsible for deleting the instances when they are
// no longer needed.
profiles.ResetAndDestroy();
</pre>
 <p><strong>Retrieving profiles by matching an AOR</strong> </p>
 <p>The
following code snippet shows how to retrieve profiles by matching an AOR. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-71C88079-A622-5C95-B6C4-91066E99D021"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-71C88079-A622-5C95-B6C4-91066E99D021"><!-- --></a>// To retrieve more than one profile, the client must create
// an RPointerArray object to hold pointers to instances of CSIPProfile.
RPointerArray&lt;CSIPProfile&gt; profiles;

// Profiles matching a given AOR are returned in the array.
iProfileRegistry-&gt;ProfilesL(_L8( "sip:jane.doe@foo.com" ), profiles );
...

// When a client retrieves a profile, its ownership is transferred to that
// client, so it becomes responsible for deleting the instances when they are no longer needed.
profiles.ResetAndDestroy();
</pre>
 </div>

<div class="section"><h2 class="sectiontitle">Getting the registration events</h2> <p>The following code
snippet shows how to get the registration events for different scenarios. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-4BCCE827-AD41-5DB0-A71F-611F1DF4BE25"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-4BCCE827-AD41-5DB0-A71F-611F1DF4BE25"><!-- --></a>// A callback function, which must be implemented by the client, is called when the registration status 
of a profile owned by the client is changed.

void CMySIPClient:: ProfileRegistryEventOccurred(TUint32 aProfileId,
MSIPProfileRegistryObserver::TEvent aEvent)
  {
  iProfileId = aProfileId;
  switch(aEvent)
    {
    case EProfileCreated:
      {
      iEventId = EAdded;
      break;
      }
    case EProfileUpdated:
      {
      iEventId = EUpdated;
      break;
      }
    case EProfileRegistered:
      {
      iEventId = CMySIPClient::ERegistered;
      break;
      }
    case EProfileDeregistered:
      {
      iEventId = CMySIPClient::EDeregistered;
      break;
      }
    case EProfileDestroyed:
      {
      iEventId = ERemoved;
      break;
      }
    default:
      break;
    }
}</pre>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-471F4EBB-2FE4-561D-9B74-555061797C45"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-471F4EBB-2FE4-561D-9B74-555061797C45"><!-- --></a><h2 class="sectiontitle">Refreshing
a SIP profile</h2> <p>The SIP profile can use either WLAN or GPRS connections
to register to the SIP server. In case of WLAN, a registered SIP profile changes
its state to an unregistered state when the handset is out of WLAN coverage.
On re-entering the WLAN zone, the WLAN automatically scans to identify the
available access points and then the SIP profile is automatically registered
back with the server. This process is time consuming and is not efficient.
So, the client uses the <a href="GUID-1AEB6899-9942-3BBC-9ABA-8C0ACFCE3174.html"><span class="apiname">RefreshEnableL()</span></a> function to: </p>
 <ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-A19E0054-71CA-55A4-BF75-9481189D81DC"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-A19E0054-71CA-55A4-BF75-9481189D81DC"><!-- --></a><p>Initiate the SIP registration
automatically. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E42A6C7C-0238-5C33-9CDA-4691801D8E04"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-E42A6C7C-0238-5C33-9CDA-4691801D8E04"><!-- --></a><p>Reduce the response
time for the SIP registration. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-54F38CF7-D29D-5D30-954E-D7DD88D6B022"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-54F38CF7-D29D-5D30-954E-D7DD88D6B022"><!-- --></a><p>Improve the efficiency
of the application using the SIP stack during registration. </p>
 </li>

</ul>
 <p>The <a href="GUID-D5A82B9C-A86E-318F-85D7-B9DC69968DB0.html"><span class="apiname">RefreshEnableL</span></a> API refreshes the connection
on the used access point if it is not active. Refresh enabling a profile means
that the user has enabled the profile but is unregistered because of a connection
loss. For example, in a WLAN network, a connection refresh request to the
bearer monitor starts the WLAN scanning if it is stopped. When the Connection
Active notification is received, the stack automatically registers the profile
and gives a notification to the client with the event <a href="GUID-F78ECFEB-441F-3D55-9909-A3F82F738F7E.html"><span class="apiname">EProfileRegistered</span></a> through
the <a href="GUID-91663686-42B7-3C88-B773-3C5343CDCFCE.html"><span class="apiname">MSIPProfileRegistryObserver</span></a>. </p>
 <p>To refresh enable
a profile, do the following steps: </p>
 <ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-221E3B9E-86DF-5200-ADA6-55E724688028"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-221E3B9E-86DF-5200-ADA6-55E724688028"><!-- --></a><p>Start the SIP Profile
server. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-59833E8F-9619-5C72-8891-2E2D63B6B8CF"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-59833E8F-9619-5C72-8891-2E2D63B6B8CF"><!-- --></a><p>Fetch the profile that
must be refresh enabled from the SIP Profile Server. </p>
 <ul>
<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-0C52D86D-3ADA-5D6D-AEC5-07D1554A9C11"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-0C52D86D-3ADA-5D6D-AEC5-07D1554A9C11"><!-- --></a><p>If the profile is not
Enabled the <a href="GUID-E72E5C9A-ADAE-346A-8EF9-DACD7D23F318.html"><span class="apiname">RefreshEnable</span></a> API leaves with <samp class="codeph">KErrArgument</samp> error. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EFC454B5-6F99-58A3-B3ED-9983DE0C1A4E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-EFC454B5-6F99-58A3-B3ED-9983DE0C1A4E"><!-- --></a><p>If the profile is Enabled
and in a Registered state then the API leaves with <samp class="codeph">KErrAlreadyExists</samp> error. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-6B5728C4-F42C-5208-A6E4-1AF5641A13E3"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-6B5728C4-F42C-5208-A6E4-1AF5641A13E3"><!-- --></a><p>If the profile is Enabled
and in an Unregistered state then the <a href="GUID-E72E5C9A-ADAE-346A-8EF9-DACD7D23F318.html"><span class="apiname">RefreshEnable</span></a> API
refreshes the connection through <a href="GUID-2A070F4D-A35B-3505-BE86-E6C7A2F27B94.html#GUID-2A070F4D-A35B-3505-BE86-E6C7A2F27B94__GUID-956F2ADC-40D6-3C15-949A-80789DF04550"><span class="apiname">CSIPConnection::RefreshConnection()</span></a> API.
The profile receives notification about the active connection and it automatically
registers again and sends <a href="GUID-F78ECFEB-441F-3D55-9909-A3F82F738F7E.html"><span class="apiname">EProfileRegistered</span></a> event to the
application. </p>
 </li>

</ul>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-9CA4CA87-17C7-54D0-AEAF-F415DA5D934E"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-9CA4CA87-17C7-54D0-AEAF-F415DA5D934E"><!-- --></a><p>A REGISTER request sent
to the registrar server. </p>
 </li>

<li id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FF40934C-588D-5ED6-8041-410103FB6D53"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-FF40934C-588D-5ED6-8041-410103FB6D53"><!-- --></a><p>The registration status
of the profile is set to Registered. </p>
 </li>

</ul>
 <p>The following sequence diagram shows how to enable a profile to refresh. </p>
 <div class="fignone" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-5EF1953C-E56D-59C2-B443-F1B77DD7E73D"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-5EF1953C-E56D-59C2-B443-F1B77DD7E73D"><!-- --></a>
<img src="GUID-8D9FE811-3F8A-5C2A-B76A-5C0248179590_d0e556164_href.jpg"/>
</div>
 <p>The following code describes how to refresh enable a profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1A13F3D3-C4B7-50E5-B5AF-F0CABF02758C"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-1A13F3D3-C4B7-50E5-B5AF-F0CABF02758C"><!-- --></a>//Checks if the profile is already enabled and requests the Profile Agent to refresh it.
// If the profile is not enabled it leaves with KErrArgument. 

void RefreshEnableL(CSIPProfile&amp; aSIPProfile, MSIPConnectionObserver&amp; aObserver)
</pre>
 </div>

<div class="section" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-289B2BF5-AF58-5E1E-B905-F1255EFC7FEB"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-289B2BF5-AF58-5E1E-B905-F1255EFC7FEB"><!-- --></a><h2 class="sectiontitle">Stopping SIP
registration</h2> <p>In a setup, where there is no registrar, the SIP stack
tries to send REGISTER messages to the network for at least 3 minutes and
reserves the access point usage. During these 3 minutes the client cannot
use another WLAN access point without destroying the <a href="GUID-BED8A733-2ED7-31AD-A911-C1F4707C67FD.html"><span class="apiname">RConnection</span></a>. </p>
 <p>The <a href="GUID-A36FEEBB-C9E1-3C99-9B9E-09C7530F31C4.html"><span class="apiname">ForceDisable</span></a> API
of the SIP stack stops all registration attempts and releases the access point.
The <a href="GUID-A36FEEBB-C9E1-3C99-9B9E-09C7530F31C4.html"><span class="apiname">ForceDisable</span></a> API in the profile agent module improves
the responsiveness of the applications using the SIP stack. It avoids situations
where an application is waiting for the SIP stack to complete a registration
procedure. </p>
 <p>To use the <a href="GUID-A36FEEBB-C9E1-3C99-9B9E-09C7530F31C4.html"><span class="apiname">ForceDisable</span></a> API the application
must have Network Control capability. If the application does not have Network
Control capability and invokes the <a href="GUID-A36FEEBB-C9E1-3C99-9B9E-09C7530F31C4.html"><span class="apiname">ForceDisable</span></a> API, then
it receives <samp class="codeph">ErrPermissionDenied (-46</samp>) error. Sending a <a href="GUID-A36FEEBB-C9E1-3C99-9B9E-09C7530F31C4.html"><span class="apiname">ForceDisable</span></a> API
does not force the SIP stack to send any message to the network, instead it
destroys the SIP transaction for that profile and cleans all the resources
associated with that profile. The Profile Agent also notifies all the observers
with the event <a href="GUID-1B01576C-59DC-3958-9631-3094ED0DB46D.html"><span class="apiname">EProfileForciblyDisabled</span></a>. </p>
 <p>The following
code describes how to forcibly disable a profile. </p>
 <pre class="codeblock" id="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3D1556EB-AD13-5640-8104-83D08BF0D207"><a name="GUID-6E221034-9A01-53AB-8374-315C38CCA21E__GUID-3D1556EB-AD13-5640-8104-83D08BF0D207"><!-- --></a>// With the assumption that the profile is created and is saved to the persistent storage create an instance of the SIP client
iSip = CSIP::NewL( aAppUid );

// Use CSIPProfileRegistry to get the saved profile.
iProfileRegistry = CSIPProfileRegistry::NewL(*iSip, *this);

// Retrieve the profiles by the AOR
_LIT8(KAor,"sip:user@10.192.192.43");
TDesC8 aor(KAor); 
RPointerArray&lt;CSIPProfile&gt; profiles;

// Find and add the matching profiles by the given AOR into the pointer array
// Returns the set of profiles which has the provided AOR.
iProfileRegistry-&gt;ProfilesL(KAor,profiles); 

// Check the profile count. Get the required profile if the count is positive non-zero.
TInt profile_cnt =   profiles.Count() ;
iProfile = profiles[0];

// If the iProfile is registered (the Registered variable must hold TRUE for iProfile)
// Disable API returns KErrNone if the profile is disabled successfully otherwise there is a system-wide error.
CSIPProfileRegistry::ForceDisable(*iProfile);</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-399EAC59-643D-5DED-AB67-9F021CA5687A.html">SIP Profile API</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>