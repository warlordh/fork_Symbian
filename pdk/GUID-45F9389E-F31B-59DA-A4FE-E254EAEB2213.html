<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Simulation PSY Settings API"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1B3FDBF4-4213-5242-A05C-11ADE6C1501A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1B3FDBF4-4213-5242-A05C-11ADE6C1501A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1A9BA6A1-C6BB-5196-B2D8-355A78B79AE3.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-22DB5009-A552-55F7-97EF-1C454E510782.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Simulation PSY Settings API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403651 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-1B3FDBF4-4213-5242-A05C-11ADE6C1501A.html" title="The Simulation Positioning Module (Simulation PSY) enables application developers and device creators to test location-aware applications by providing location information without the need for a GPS module or a network connection.">Simulation Positioning Module</a> &gt; </div>
<h1 class="topictitle1">Simulation PSY Settings API</h1>
<div><p>This guide describes how to use the Simulation PSY Settings API to control which data file is loaded by Simulation PSY. It is intended for application developers and device creators. </p>
 <div class="section" id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-8ACF20AB-C9BA-5328-B120-E1369CE36AC8"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-8ACF20AB-C9BA-5328-B120-E1369CE36AC8"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>Simulation PSY loads a data file which contains simulated position data. As an application developer, you can create your own data files containing simulated position data to test your applications. </p>
 <p>The API described in this document allows you to set two properties: </p>
 <ul><li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-F1B43038-9A0B-5683-84B5-2EB0020FCC03"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-F1B43038-9A0B-5683-84B5-2EB0020FCC03"><!-- --></a><p>The name of the data file loaded by Simulation PSY. </p>
 <p>If you create your own data file, you must use this API to tell the PSY where to find it. </p>
 </li>
 <li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-D6BFDD83-C5F1-574A-B672-862BDD4F2AFC"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-D6BFDD83-C5F1-574A-B672-862BDD4F2AFC"><!-- --></a><p>The Data Set Mode used by Simulation PSY. </p>
 <p>The Data Set Modes are described in <a href="GUID-22DB5009-A552-55F7-97EF-1C454E510782.html">Simulation PSY User Guide</a>. </p>
 </li>
 </ul>
 <p>The Simulation PSY Settings API uses the Central Repository API. </p>
 </div>
 <div class="section" id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-931110FC-E746-5B48-9BF7-7982C10601AC"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-931110FC-E746-5B48-9BF7-7982C10601AC"><!-- --></a><h2 class="sectiontitle"> API specification</h2> <p>The Simulation PSY Settings API defines two Central Repository keys: </p>
 <ul><li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-69C9A8C0-D9D2-5137-AD91-FCB82F1093E2"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-69C9A8C0-D9D2-5137-AD91-FCB82F1093E2"><!-- --></a><p> <a href="GUID-15F449EB-FBD9-3C0E-90F5-1A128A39FAFA.html"><span class="apiname">KCRKeySimPSYSimulationFile</span></a> defines the location of the simulation data file that Simulation PSY uses as its source of position data. </p>
 </li>
 <li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-CDC81383-29D9-57F3-AE1C-0A06EFABF474"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-CDC81383-29D9-57F3-AE1C-0A06EFABF474"><!-- --></a><p> <a href="GUID-395C2157-4442-3C80-86A4-9534975361FC.html"><span class="apiname">KCRKeySimPSYCommonDataSet</span></a> defines whether the PSY operates in Independent Data Set Mode or Common Data Set Mode. </p>
 <p>For more information see <a href="GUID-22DB5009-A552-55F7-97EF-1C454E510782.html">Simulation PSY User Guide</a>. </p>
 </li>
 </ul>
 <p>The keys are defined in the header file <span class="filepath">SimulationPSYInternalCRKeys.h</span>. </p>
 </div>
 <div class="section" id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-CC0C8811-9554-5C69-92F7-6835EDBF91FC"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-CC0C8811-9554-5C69-92F7-6835EDBF91FC"><!-- --></a><h2 class="sectiontitle">Using the Simulation PSY Settings API</h2> <p><strong>Setting the data file </strong> </p>
 <p>To change the data file that Simulation PSY uses as its source of position data, an application must set a fully qualified file name before opening its client subsession. Simulation PSY reads the data file name from the Central Repository when a subsession that uses the PSY is opened. </p>
 <p>To set a file name, a client application must: </p>
 <ul><li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-75ECDA16-0EB0-5FD5-8617-C19DA7260939"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-75ECDA16-0EB0-5FD5-8617-C19DA7260939"><!-- --></a><p>Open a repository using the Central Repository UID <a href="GUID-DA34EFF1-6F9E-3C4A-ADDF-3A60EFB25144.html"><span class="apiname">KCRUidSimulationPSY</span></a>. </p>
 </li>
 <li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-334A874C-4768-535A-998B-D072E66343FF"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-334A874C-4768-535A-998B-D072E66343FF"><!-- --></a><p>Write a fully qualified filename of type TDesC16 to the key <a href="GUID-15F449EB-FBD9-3C0E-90F5-1A128A39FAFA.html"><span class="apiname">KCRKeySimPSYSimulationFile</span></a>. </p>
 </li>
 <li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-3657255E-7733-52BF-A99F-459C8FFCACFF"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-3657255E-7733-52BF-A99F-459C8FFCACFF"><!-- --></a><p>Close the repository </p>
 </li>
 </ul>
 <p>If a client does not set the data file name, Simulation PSY tries to use the default NMEA data file <span class="filepath">default.nme</span>. If this default data file is missing, the PSY operates in Fixed Data Mode as described in <a href="GUID-22DB5009-A552-55F7-97EF-1C454E510782.html">Simulation PSY User Guide</a>. </p>
 <p><strong>Setting the Data Set Mode </strong> </p>
 <p>To set the Data Set mode, a client must: </p>
 <ul><li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-32D46AB9-8AC8-5F3A-9A32-C054990427E6"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-32D46AB9-8AC8-5F3A-9A32-C054990427E6"><!-- --></a><p>Open a repository using the Central Repository UID <a href="GUID-DA34EFF1-6F9E-3C4A-ADDF-3A60EFB25144.html"><span class="apiname">KCRUidSimulationPSY</span></a>. </p>
 </li>
 <li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-1BE8479E-1DC9-5F9D-81E4-EDAF97F6E97F"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-1BE8479E-1DC9-5F9D-81E4-EDAF97F6E97F"><!-- --></a><p>Write a value to the key <a href="GUID-395C2157-4442-3C80-86A4-9534975361FC.html"><span class="apiname">KCRKeySimPSYCommonDataSet</span></a>. </p>
 <p>Set a value of 1 if the Common Data Set mode is required. </p>
 <p>Set a value of 0 if Independent Data Set mode is required. This is the default setting. </p>
 </li>
 <li id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-619B39CD-5690-513A-8CCF-1503C99DB3E2"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-619B39CD-5690-513A-8CCF-1503C99DB3E2"><!-- --></a><p>Close the repository </p>
 </li>
 </ul>
 <p>In practice you will probably want to set the data file and the Data Set Mode as part of the same operation. An example is shown below. </p>
 <pre class="codeblock" id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-8FD27F15-158A-5FF7-9EE1-23B104A4EABB"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-8FD27F15-158A-5FF7-9EE1-23B104A4EABB"><!-- --></a>
#include &lt;centralrepository.h&gt;
#include &lt;SimulationPSYInternalCRKeys.h&gt;
...

// Declare a data file containing simulated movement data

_LIT(KSimulationFile, "c:\\system\\data\\simulationData.sps" );

// Open a repository
CRepository* repository = CRepository::NewLC(KCRUidSimulationPSY);

// Set the simulation file
User::LeaveIfError(repository-&gt;Set(KCRKeySimPSYSimulationFile, KSimulationFile));

// Set Common Data Set mode
User::LeaveIfError(repository-&gt;Set(KCrKeySimPSYCommonDataSet, 1);

// Close the repository
CleanupStack::PopAndDestroy(repository);

// ‘KSimulationFile’ is ready for use.
</pre>
 <p>Note: Capability <samp class="codeph">WriteDeviceData</samp> is required to write the Central Repository settings. </p>
 </div>
 <div class="section" id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-689C0C92-8AE2-55DE-8A1A-E762048FED6E"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-689C0C92-8AE2-55DE-8A1A-E762048FED6E"><!-- --></a><h2 class="sectiontitle">Code architecture</h2> <div class="fignone" id="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-0BE8DB62-853D-51F4-B40A-1FDC4745AE00"><a name="GUID-45F9389E-F31B-59DA-A4FE-E254EAEB2213__GUID-0BE8DB62-853D-51F4-B40A-1FDC4745AE00"><!-- --></a><span class="figcap">Figure 1. 
             Figure 1: Files needed by a Simulation PSY Settings client 
          </span> <img src="GUID-FE1F6768-FCF8-5670-8621-DC0DBDB0B706_d0e470145_href.png"/></div>
 <p>The <span class="filepath">centralrepository.lib</span> file contains information needed at link time by the client. The <span class="filepath">centralrepository.dll</span> file contains the run-time information. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-1B3FDBF4-4213-5242-A05C-11ADE6C1501A.html" title="The Simulation Positioning Module (Simulation PSY) enables application developers and device creators to test location-aware applications by providing location information without the need for a GPS module or a network connection.">Simulation Positioning Module</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-1A9BA6A1-C6BB-5196-B2D8-355A78B79AE3.html" title="The Simulation Positioning PSY enables application developers and device creators to test Location Based Services enabled applications by providing simulated position updates without the need for a real GPS module or network connection.">Simulation
                PSY Overview</a></div>
<div><a href="GUID-22DB5009-A552-55F7-97EF-1C454E510782.html">Simulation PSY User
                Guide</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>