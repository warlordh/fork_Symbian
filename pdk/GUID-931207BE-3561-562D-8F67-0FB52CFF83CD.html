<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Audio Component Framework Tutorial"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EC4CE675-3EE7-58F7-A872-E72548B0C9A5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-567AB683-5D92-533D-B4D8-813E70316DA3.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DDBE3874-60B0-5CAB-A782-294A32412C0B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Audio Component Framework Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2405098 id2397272 id2397286 id2397317 id2397332 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html">Multimedia Guide</a> &gt; <a href="GUID-EC4CE675-3EE7-58F7-A872-E72548B0C9A5.html" title="The Sound Device collection provides a common interface for all audio functionality. Key audio components in the Sound Device collection are the Advanced Audio Adaptation Framework (A3F) DevSound and Audio Component Framework.">Sound Device Collection</a> &gt; <a href="GUID-567AB683-5D92-533D-B4D8-813E70316DA3.html" title="The Advanced Audio Adaptation Framework (A3F) Audio Component Framework component provides a common interface for accessing audio resources, playing tones, and configuring audio for playing and recording.">A3F Audio Component Framework Component</a> &gt; <a href="GUID-DDBE3874-60B0-5CAB-A782-294A32412C0B.html" title="This section describes the Audio Component Framework library.">Audio Component Framework Library</a> &gt; <a href="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html" title="This section describes how to the use Audio Component Framework library.">Audio Component Framework Library Tutorials</a> &gt; </div>
<h1 class="topictitle1">Audio
Component Framework Tutorial</h1>
<div>
<p>This tutorial describes how to use the Audio Component Framework (ACF). </p>

<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>The purpose of this tutorial is to show
you how to create an audio processing group containing a context, an audio
stream and three audio processing units. </p>
 <p><strong>Required
Background</strong> </p>
 <p>The following entities, specific to the Advanced Audio
Adaptation Framework (A3F), are used to create an audio processing group: </p>
 <ul>
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-437689C6-7501-5BBA-BC9C-CE35B6A104C7"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-437689C6-7501-5BBA-BC9C-CE35B6A104C7"><!-- --></a><p>Context - one or more
audio streams. </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-D9B2967A-6BED-54DD-B1CF-90E9BCC60A79"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-D9B2967A-6BED-54DD-B1CF-90E9BCC60A79"><!-- --></a><p>Audio stream - a source,
a codec and a sink. </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-18329FD1-5363-57E4-BA69-4B737F58879D"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-18329FD1-5363-57E4-BA69-4B737F58879D"><!-- --></a><p>Source - a source of
multimedia data. </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-B1158E48-D25E-5B54-BF27-435C4C6059C7"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-B1158E48-D25E-5B54-BF27-435C4C6059C7"><!-- --></a><p>Codec - an encoder or
decoder of multimedia data. </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-7BB58E22-E16A-5916-9A42-C2244904217C"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-7BB58E22-E16A-5916-9A42-C2244904217C"><!-- --></a><p>Gain control - a controller
of gain balance. </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-58F62DBD-7F05-59CD-8FCD-20095A4D10F8"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-58F62DBD-7F05-59CD-8FCD-20095A4D10F8"><!-- --></a><p>Sink - a consumer of
multimedia data. </p>
 </li>

</ul>
 <p><strong>Introduction</strong> </p>
 <p>To
define audio functionality, the client must group the required audio processing
units into an audio processing group. The starting point for the group is
the context. Once a context has been created, an audio stream can be added
to it. Once the audio stream has been added, the necessary audio processing
units can be added. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Using ACF </h2> <p>The framework described in this document
allows you to manage and manipulate an audio processing group. </p>
 <p><strong>Basic
Procedure</strong> </p>
 <p>The high level steps to create a context are shown here: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-269C487C-3778-586C-8B4D-6FA44FC14B65"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-269C487C-3778-586C-8B4D-6FA44FC14B65">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-153626D8-0BE8-520A-9309-EEF8F588872F"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-153626D8-0BE8-520A-9309-EEF8F588872F"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-DD660782-09C6-5F45-9E1B-F9F1BAF48759">Create an ACF Factory</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2DC88104-A404-5AAA-9293-77AD3CA3029C"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2DC88104-A404-5AAA-9293-77AD3CA3029C"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9027F6F9-F8AB-5A87-A1D3-9A554C014296">Create and Configure the Context</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2F225F37-F1D5-55B3-A3D6-CEC6F9ED4D61"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2F225F37-F1D5-55B3-A3D6-CEC6F9ED4D61"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-97F42EDA-96C6-53DC-926D-20EE32660730"> Create and Configure the Audio Stream</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-0371A58A-47A6-5004-BC47-B844B16588F8"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-0371A58A-47A6-5004-BC47-B844B16588F8"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-72F15689-BF39-5B01-BF77-5E3AA5258992">Add the Audio Source</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-217A1FBF-11AA-5F34-9597-9DBA8B3418D3"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-217A1FBF-11AA-5F34-9597-9DBA8B3418D3"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-CB8D6E17-4977-590C-8153-0D0403370583"> Add the Audio Codec</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-0D6331F7-153D-5DB0-AF5A-7848C7A9B4B4"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-0D6331F7-153D-5DB0-AF5A-7848C7A9B4B4"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A2B536EF-3188-55FA-965A-F648742A94F8">Add the Audio Sink</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-78ED0513-F30E-5A2C-B65B-0F07BD10491F"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-78ED0513-F30E-5A2C-B65B-0F07BD10491F"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-F4E5DAD7-74D0-5946-98E5-D13C3FDF0F0D"> Commit the Changes</a>  </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-90BE6318-8993-5B60-86DC-81B810388990"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-90BE6318-8993-5B60-86DC-81B810388990"><!-- --></a><p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html#GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A09373E4-877F-5738-89CC-8D3F2CE52FC2">Initialize the Audio Stream</a>  </p>
 </li>

</ol>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-DD660782-09C6-5F45-9E1B-F9F1BAF48759"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-DD660782-09C6-5F45-9E1B-F9F1BAF48759"><!-- --></a><strong>Creating an ACF Factory</strong> </p>
 <p>The
steps to create an ACF Factory are shown here: </p>
 <ul>
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AD1CAAA7-6E8F-578D-9968-C9338C0FBAD8"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AD1CAAA7-6E8F-578D-9968-C9338C0FBAD8"><!-- --></a><p>Construct a new instance
of <samp class="codeph">CAudioContextFactory</samp> using the <a href="GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73.html#GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73__GUID-D8C563D4-34AC-3460-BE6F-A19D3B1D5D23"><span class="apiname">CAudioContextFactory::NewL()</span></a> factory
function. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6BB8B93D-9506-507C-A946-C410CF69B711"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6BB8B93D-9506-507C-A946-C410CF69B711"><!-- --></a>IMPORT_C static CAudioContextFactory* NewL();</pre>
 </li>

</ul>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9027F6F9-F8AB-5A87-A1D3-9A554C014296"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9027F6F9-F8AB-5A87-A1D3-9A554C014296"><!-- --></a><strong>Creating and Configure the
Context</strong> </p>
 <p>The steps to create and configure the context are shown
here: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-5462F1CE-8F88-5403-A8A9-764A46886553"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-5462F1CE-8F88-5403-A8A9-764A46886553">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6EB47771-E421-5220-9521-A9D082096233"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6EB47771-E421-5220-9521-A9D082096233"><!-- --></a><p>Call <a href="GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73.html#GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73__GUID-59496D3F-A541-35AA-BADB-28E487503955"><span class="apiname">CAudioContextFactory::CreateAudioContext()</span></a> to
create the new context. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-480E8697-ACA4-56E6-97B9-756B45F4D7EF"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-480E8697-ACA4-56E6-97B9-756B45F4D7EF"><!-- --></a>IMPORT_C TInt CreateAudioContext(MAudioContext*&amp; aContext);</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6BC71F5F-51BD-5ED6-90A7-263566856518"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6BC71F5F-51BD-5ED6-90A7-263566856518"><!-- --></a><p>Set the client information
for the new context by calling <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-AC784D04-E300-3295-9FA0-7D4E3F7BC768"><span class="apiname">MAudioContext::SetClientSettings()</span></a>.
Client settings contain information about the client application utilising
the audio functionality. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-22A53038-3363-5AC7-AA58-B6C9B015FC9D"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-22A53038-3363-5AC7-AA58-B6C9B015FC9D"><!-- --></a>virtual TInt SetClientSettings(const TClientContextSettings&amp; aSettings)=0;</pre>
 <p> <strong>Note:</strong> This must be called before any call to <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a>. </p>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-0C3D2D9C-3211-50E6-A581-A85207E8F3A2"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-0C3D2D9C-3211-50E6-A581-A85207E8F3A2"><!-- --></a><p>Register a context observer
using <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-AE870243-CC91-3259-9525-8BB6A5BECEDA"><span class="apiname">MAudioContext::RegisterAudioContextObserver()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AF678CDA-D78A-58D2-B123-BD04A2C1538A"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AF678CDA-D78A-58D2-B123-BD04A2C1538A"><!-- --></a>virtual TInt RegisterAudioContextObserver(MAudioContextObserver&amp; aObserver) = 0;</pre>
 </li>

</ol>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-97F42EDA-96C6-53DC-926D-20EE32660730"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-97F42EDA-96C6-53DC-926D-20EE32660730"><!-- --></a><strong>Creating and Configuring
an Audio Stream</strong> </p>
 <p>The steps to create and configure an audio stream
are shown here: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-8638DCAA-226E-5344-9371-6E804D9E53F0"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-8638DCAA-226E-5344-9371-6E804D9E53F0">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6783138A-BDD3-5F71-983C-C734C23CE847"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-6783138A-BDD3-5F71-983C-C734C23CE847"><!-- --></a><p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-E05FA869-2B49-319C-9172-2A7F40338F92"><span class="apiname">MAudioContext::CreateAudioStream()</span></a> to
add a new audio stream to the existing context. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2B99714B-E38A-5913-B2B0-7CB1252CCFE3"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2B99714B-E38A-5913-B2B0-7CB1252CCFE3"><!-- --></a>virtual TInt CreateAudioStream(MAudioStream*&amp; aStream)=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-191EE083-1AA1-5665-8F01-E4AB738D114B"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-191EE083-1AA1-5665-8F01-E4AB738D114B"><!-- --></a><p>Set the type of audio
being processed in the audio stream by calling <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-DB79EE0B-128D-3F54-8220-F0860085BF20"><span class="apiname">MAudioStream::SetAudioType()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-E37BCB2A-1E37-5178-A01E-387D6C74C9F7"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-E37BCB2A-1E37-5178-A01E-387D6C74C9F7"><!-- --></a>virtual TInt SetAudioType(const TAudioTypeSettings&amp; aAudioTypeSettings)=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-81E11C16-7D5C-501B-8C97-C3CBB9FA62D7"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-81E11C16-7D5C-501B-8C97-C3CBB9FA62D7"><!-- --></a><p>Register an audio stream
observer by calling <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-7A67C317-826C-33B2-B586-3F295B700A28"><span class="apiname">MAudioStream::RegisterAudioStreamObserver()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-EAC5AE8D-4684-5864-9D5C-3A4F7F5C10B9"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-EAC5AE8D-4684-5864-9D5C-3A4F7F5C10B9"><!-- --></a>virtual TInt RegisterAudioStreamObserver(MAudioStreamObserver&amp; aObserver)=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-4EB3CA79-3800-545B-B1ED-4983119F8837"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-4EB3CA79-3800-545B-B1ED-4983119F8837"><!-- --></a><p>Set the audio configuration
using <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-79DB5B64-9289-3033-A55B-AF9E66D9C8FE"><span class="apiname">MAudioStream::SetConfiguration()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-13BB80D5-772C-5911-96AF-1E6368B0481A"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-13BB80D5-772C-5911-96AF-1E6368B0481A"><!-- --></a>virtual TInt SetConfiguration(const TAudioConfiguration&amp;  aConfig)=0;</pre>
 </li>

</ol>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-72F15689-BF39-5B01-BF77-5E3AA5258992"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-72F15689-BF39-5B01-BF77-5E3AA5258992"><!-- --></a><strong>Adding a Source</strong> </p>
 <p>The
audio stream cannot operate until a source, a codec and a sink have been added.
To add a source: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2AF428FA-EEAC-5A7B-A889-873BF1FF56D3"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2AF428FA-EEAC-5A7B-A889-873BF1FF56D3">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9F966F71-069C-590B-8198-FB23390486A1"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9F966F71-069C-590B-8198-FB23390486A1"><!-- --></a><p>Create a new audio processing
unit by calling <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-989C9D1A-C208-3515-BD71-E578365B5996"><span class="apiname">MAudioContext::CreateAudioProcessingUnit()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-F1E16AA9-40E3-5B48-87C2-93456DF0B32E"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-F1E16AA9-40E3-5B48-87C2-93456DF0B32E"><!-- --></a>virtual TInt CreateAudioProcessingUnit(TUid aTypeId, MAudioProcessingUnit*&amp; aProcessingUnit)=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-E5A75B70-B2F3-5E1D-B054-A9C103918E08"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-E5A75B70-B2F3-5E1D-B054-A9C103918E08"><!-- --></a><p>Call <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-7EEDFC7D-338B-320E-9F5D-86A87ED9C75E"><span class="apiname">MAudioStream::AddSource()</span></a> to
add a source for the audio stream. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-15FDCAC5-0F0F-5853-94CB-D929268505B3"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-15FDCAC5-0F0F-5853-94CB-D929268505B3"><!-- --></a>virtual TInt AddSource(MAudioProcessingUnit* aSource)=0;</pre>
 <p> <strong>Note:</strong> This call is asynchronous, if <samp class="codeph">KErrNone</samp> is
returned, there will be a subsequent callback on <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-3D1B6F92-0363-3101-90F7-792B597A90CD"><span class="apiname">MAudioStreamObserver::AddProcessingUnitComplete()</span></a>. </p>
 </li>

</ol>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-CB8D6E17-4977-590C-8153-0D0403370583"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-CB8D6E17-4977-590C-8153-0D0403370583"><!-- --></a><strong>Adding a Codec</strong> </p>
 <p>To
add a codec: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2287DB65-C53F-5453-8681-18463392040D"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-2287DB65-C53F-5453-8681-18463392040D">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AC11195A-4760-5416-A270-42D45592AF57"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AC11195A-4760-5416-A270-42D45592AF57"><!-- --></a><p>Create another new audio
processing unit by calling <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-989C9D1A-C208-3515-BD71-E578365B5996"><span class="apiname">MAudioContext::CreateAudioProcessingUnit()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-4819B6BF-AD60-50D5-A176-FAA905DEDC8E"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-4819B6BF-AD60-50D5-A176-FAA905DEDC8E"><!-- --></a>virtual TInt CreateAudioProcessingUnit(TUid aTypeId, MAudioProcessingUnit*&amp; aProcessingUnit)=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AF4A8DA1-2540-5C6D-B905-006B2702E964"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-AF4A8DA1-2540-5C6D-B905-006B2702E964"><!-- --></a><p>Call <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-FF7925E4-4E7D-3996-A1EB-64B8C0F5AE81"><span class="apiname">MAudioStream::AddAudioCodec()</span></a> to
add the codec. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9E587B45-5F65-5DD6-82D0-4BE5D3757A54"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-9E587B45-5F65-5DD6-82D0-4BE5D3757A54"><!-- --></a>virtual TInt AddAudioCodec(MAudioProcessingUnit* aCodec)=0;</pre>
 <p> <strong>Note:</strong> This call is asynchronous, if <samp class="codeph">KErrNone</samp> is
returned, there will be a subsequent callback on <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-3D1B6F92-0363-3101-90F7-792B597A90CD"><span class="apiname">MAudioStreamObserver::AddProcessingUnitComplete()</span></a>. </p>
 </li>

</ol>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A2B536EF-3188-55FA-965A-F648742A94F8"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A2B536EF-3188-55FA-965A-F648742A94F8"><!-- --></a><strong>Adding a Sink</strong> </p>
 <p>To
add a sink: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-4BD12D1E-5230-5A60-9552-E02C5CB0F089"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-4BD12D1E-5230-5A60-9552-E02C5CB0F089">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-BE2E694B-1E7A-573E-9399-74A51493AD43"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-BE2E694B-1E7A-573E-9399-74A51493AD43"><!-- --></a><p>Create another audio
processing unit by calling <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-989C9D1A-C208-3515-BD71-E578365B5996"><span class="apiname">MAudioContext::CreateAudioProcessingUnit()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A41B7B0A-A221-55D3-A12D-9FA67075CA38"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A41B7B0A-A221-55D3-A12D-9FA67075CA38"><!-- --></a>virtual TInt CreateAudioProcessingUnit(TUid aTypeId, MAudioProcessingUnit*&amp; aProcessingUnit)=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-C42682A9-D9D0-59CB-8F69-311ED51ACD82"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-C42682A9-D9D0-59CB-8F69-311ED51ACD82"><!-- --></a><p>Call <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-643AD421-6C4B-3B72-A59B-E54CA85B43B3"><span class="apiname">MAudioStream::AddSink()</span></a> to
add the sink for the audio stream. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A5DE284E-8938-501E-BF6E-742E57C9AD18"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A5DE284E-8938-501E-BF6E-742E57C9AD18"><!-- --></a>virtual TInt AddSink(MAudioProcessingUnit* aSink)=0;</pre>
 <p> <strong>Note:</strong> This call is asynchronous, if <samp class="codeph">KErrNone</samp> is
returned, there will be a subsequent callback on <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-3D1B6F92-0363-3101-90F7-792B597A90CD"><span class="apiname">MAudioStreamObserver::AddProcessingUnitComplete()</span></a>. </p>
 </li>

</ol>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-F4E5DAD7-74D0-5946-98E5-D13C3FDF0F0D"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-F4E5DAD7-74D0-5946-98E5-D13C3FDF0F0D"><!-- --></a><strong>Committing the Changes</strong> </p>
 <p>To
apply the changes made to the audio processing group, the client must call
a <a href="GUID-8330AA6E-8FA1-3F72-8AA6-6C24E9764B4B.html"><span class="apiname">Commit()</span></a>. The <samp class="codeph">Commit()</samp> call is the mechanism
for implementing requested changes and all changes are considered to be pending
until successfully committed. </p>
 <p>On success, the client is informed by
the appropriate <a href="GUID-67CA5D62-BCAA-393B-8452-FB2210859FDA.html"><span class="apiname">ContextEvent()</span></a> callback. <a href="GUID-570E513B-55CB-31B0-A325-C910D58C3F2C.html"><span class="apiname">KUidA3FContextUpdateComplete</span></a> signals
that all changes have been completed and <samp class="codeph">Commit()</samp> can now
be called again, if required. </p>
 <p> <strong>Note:</strong> The A3F <samp class="codeph">Commit()</samp> cycle
is transactional, that is, if a <samp class="codeph">Commit()</samp> fails, then all
changes are rolled back. </p>
 <p>The steps to commit the context are shown
here: </p>
 <ul>
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-19A12981-9F8D-5B7E-AE85-7E7DA447C7F7"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-19A12981-9F8D-5B7E-AE85-7E7DA447C7F7"><!-- --></a><p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> to
apply the changes to the audio processing group. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-73021763-BBD6-5A4D-B104-CBB048821028"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-73021763-BBD6-5A4D-B104-CBB048821028"><!-- --></a>virtual TInt Commit()=0;</pre>
 </li>

</ul>
 <p id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A09373E4-877F-5738-89CC-8D3F2CE52FC2"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-A09373E4-877F-5738-89CC-8D3F2CE52FC2"><!-- --></a><strong>Initializing the Audio Stream</strong> </p>
 <p>During
construction, the audio stream is in the <a href="GUID-1C3D1D45-FCC4-36DE-A9E8-994AA3987D35.html"><span class="apiname">EUninitialized</span></a> state.
In order to relate the audio stream to a physical adaptation, it must be transitioned
to the <a href="GUID-9BC5AFA4-5C7A-3908-9CAB-9BC362D6494A.html"><span class="apiname">EInitialized</span></a> state.</p>
 <p>The steps
to initialize the audio stream are shown here: </p>
 <a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-56EF988D-387A-5C7C-A0C2-162695B323B2"><!-- --></a><ol id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-56EF988D-387A-5C7C-A0C2-162695B323B2">
<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-C537C9CA-8CD4-55DB-9EF9-E57FB25F07D4"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-C537C9CA-8CD4-55DB-9EF9-E57FB25F07D4"><!-- --></a><p>To request a transition
to <samp class="codeph">EInitialized</samp>, call <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-1DFCCA16-7AD0-3AAF-87B8-96F0546DF488"><span class="apiname">MAudioStream::Initialize()</span></a>. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-BA552930-6A5A-57B0-829F-67D681716273"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-BA552930-6A5A-57B0-829F-67D681716273"><!-- --></a>virtual TInt Initialize()=0;</pre>
 </li>

<li id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-12EF44BC-FFD5-5517-86B6-84F63FB2340E"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-12EF44BC-FFD5-5517-86B6-84F63FB2340E"><!-- --></a><p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> to
apply the state change. </p>
 <pre class="codeblock" id="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-B438156F-FBA6-5555-B6C7-440424275BE9"><a name="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD__GUID-B438156F-FBA6-5555-B6C7-440424275BE9"><!-- --></a>virtual TInt Commit()=0;</pre>
 </li>

</ol>
 <p> <strong>Note:</strong> This is one example of a state change to an audio stream.
There are other state changes, for example, the transition from the <a href="GUID-F424EEAA-C98B-39B2-B19A-FE2A665B02B8.html"><span class="apiname">EPrimed</span></a> to <a href="GUID-5DC87A99-1993-34BE-A1AA-84FF98B2ED24.html"><span class="apiname">EActive</span></a> state
which starts the audio processing. For more information, see <a href="GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2.html#GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2__GUID-28D6AB9C-8F4F-573A-853D-726138249390">Stream States</a> in the <a href="GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2.html">Advanced
Audio Adaptation Framework Technology Guide</a>. </p>
 </div>

<div class="section"><h2 class="sectiontitle">See Also</h2> <p><a href="GUID-06A43E09-CC6D-5799-A0F7-68B5696F4ADB.html">Audio
Component Library Overview</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html" title="This section describes how to the use Audio Component Framework library.">Audio Component Framework Library Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>