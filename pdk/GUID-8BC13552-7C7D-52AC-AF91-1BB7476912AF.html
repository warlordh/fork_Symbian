<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="System Health Manager Overview"/>
<meta name="DC.Relation" scheme="URI" content="GUID-70DA7D35-3EF3-5B9B-9E86-28893021A4A1.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-AC1BBF7B-4195-5F83-B4DD-02965CB9A5CE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-70DA7D35-3EF3-5B9B-9E86-28893021A4A1.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-484B27EF-3FA1-5193-97EC-B9699AE49026.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-723F8716-1FDD-57B4-B685-672D3A755592.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>System Health Manager Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF"><a name="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2519078 id2519506 id2519514 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html" title="Device Services provides device specific services to control phone resources and establish remote controlled connection with the external devices. It also monitors the phone resources and provides stage shutdown mechanism.">Device Services Guide</a> &gt; <a href="GUID-AC1BBF7B-4195-5F83-B4DD-02965CB9A5CE.html" title="System Health Management contains the System Health Manager component, formerly known as the System Monitor, which monitors and restarts processes and applications.">System Health Management</a> &gt; <a href="GUID-70DA7D35-3EF3-5B9B-9E86-28893021A4A1.html">System Health Manager</a> &gt; </div>
<h1 class="topictitle1">System Health Manager Overview</h1>
<div><p>The System Health Manager (SHMA) was previously known as the System Monitor (SysMon). It monitors running processes (system servers) and attempts to restart them if they fail unexpectedly. It may restart the device if it is unable to restart the process. </p>
 <p>A application may use the SysMon API to request monitoring for itself or other applications. Only an application with <samp class="codeph">ProtServ</samp> capability, however, may request that the device be restarted. </p>
 <div class="section"><h2 class="sectiontitle">Purpose</h2> <p>Certain applications and background process are essential for the device or for certain applications to function correctly. The System Health Manager ensures that the device remains completely functional by restarting applications or processes, or the device itself, if they stop unexpectedly. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Background</h2> <p>SHMA uses System State Manager (SSM) for process monitoring. SSM provides the required information such as number of restart attempts that can be made, start-up modes and properties. See <a href="GUID-788BD091-186A-5E25-B058-952C7629A8D4.html" title="System State Manager (SSM) is a Symbian platform component that manages the state of a device throughout its life cycle. SSM extends the existing Generic Start-up Architecture (GSA) and also manages the system state and the system-wide property.">System State Manager</a>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Key concepts and terms</h2> <dl><dt class="dlterm">Relaunch policy</dt>
 <dd><p>Specifies the behaviour when a process fails unexpectedly. See <a href="GUID-484B27EF-3FA1-5193-97EC-B9699AE49026.html#GUID-484B27EF-3FA1-5193-97EC-B9699AE49026__GUID-30C01801-01F4-5C20-9CA0-910498D47982">Relaunch policy</a>. </p>
 </dd>
  <dt class="dlterm">Retry Failure policy</dt>
 <dd><p>Specifies the behaviour when a failed process fails to restart. See <a href="GUID-484B27EF-3FA1-5193-97EC-B9699AE49026.html#GUID-484B27EF-3FA1-5193-97EC-B9699AE49026__GUID-6A9855C6-0D0E-5D4F-9042-5BA34F3E002C">Retry Failure policy</a>. </p>
 </dd>
  </dl>
 </div>
 <div class="section"><h2 class="sectiontitle">Architecture</h2> <p>The SHMA is simple and self explanatory. A client must instantiate an <samp class="codeph">RSysMonSession</samp> to open a session for monitoring. </p>
 <p>Monitoring is started with a call to <samp class="codeph">RSysMonSession::MonitorL()</samp> or <samp class="codeph">RSysMonSession::MonitorSelfL()</samp>. Before calling one of these functions, however, the client must create and populate a <a href="GUID-99C4720B-9441-38E0-BBFA-BBCB845BD642.html"><span class="apiname">CSsmStartupProperties</span></a> object containing the required monitoring and restart configurations. <a href="GUID-99C4720B-9441-38E0-BBFA-BBCB845BD642.html"><span class="apiname">CSsmStartupProperties</span></a> has a series of <samp class="codeph">Set...()</samp> functions which are used to determine the monitoring and restart behaviour for the process to be monitored. </p>
 <div class="fignone" id="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF__GUID-67305BB8-6D0E-5957-96D0-A880CCDC8626"><a name="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF__GUID-67305BB8-6D0E-5957-96D0-A880CCDC8626"><!-- --></a><span class="figcap">Figure 1. 
             System Health Manager Architecture 
          </span> <img src="GUID-C02F7A8B-E6D1-5DB5-A3CA-08875A196199_d0e163441_href.png"/></div>
 <p>Process monitoring can also be set up using a resource file. <a href="GUID-0ABC00DB-068B-3757-855B-0849259F7793.html"><span class="apiname">CResourceFile</span></a> accesses a resource file and reads the resource data into a buffer and the data is interpreted using <a href="GUID-E468FC5F-0392-3385-887A-C5AB0E0009CC.html"><span class="apiname">RResourceReader</span></a> class. </p>
 <p>Process monitoring is normally configured for processes using <samp class="codeph">SSM_START_PROCESS_INFO</samp> and <samp class="codeph">SSM_START_APP_INFO</samp> resources in a static command list. These are defined in <samp class="codeph">ssmcmd.rh</samp>. Note that these structures add monitor, startup mode and a localisable error message to <samp class="codeph">SSM_START_PROCESS_INFO</samp> and <samp class="codeph">SSM_START_APP_INFO</samp>. See <a href="GUID-723F8716-1FDD-57B4-B685-672D3A755592.html#GUID-723F8716-1FDD-57B4-B685-672D3A755592__GUID-91438FCA-D06F-5779-98E9-D353692BE59F">Examples</a>. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">APIs</h2> <p>SysMon API has the following classes: </p>
 
<div class="tablenoborder"><a name="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF__GUID-F27E311B-0F1C-5E00-AB55-A0A22483B5A1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-8BC13552-7C7D-52AC-AF91-1BB7476912AF__GUID-F27E311B-0F1C-5E00-AB55-A0A22483B5A1" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1326979e166">Class</th>
 <th class="cellrowborder" valign="top" id="d1326979e169">Description</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1326979e166 "><p> <a href="GUID-19467402-8575-33F0-817D-339D39982D39.html"><span class="apiname">RSysMonSession</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1326979e169 "><p>Client-side SysMon session API </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1326979e166 "><p> <a href="GUID-99C4720B-9441-38E0-BBFA-BBCB845BD642.html"><span class="apiname">CSsmStartupProperties</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1326979e169 "><p>Contains process starter information. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1326979e166 "><p> <a href="GUID-C6E2A0AA-01AA-3648-BE3B-6CF2A641294B.html"><span class="apiname">TSsmMonitorInfo</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1326979e169 "><p>Convenience class combining restart property information. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section"><h2 class="sectiontitle">Typical uses</h2> <p>System Health Manager is used for requesting and cancelling monitoring for a process. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-70DA7D35-3EF3-5B9B-9E86-28893021A4A1.html">System Health Manager</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-484B27EF-3FA1-5193-97EC-B9699AE49026.html">System Health Manager
                Concepts</a></div>
<div><a href="GUID-723F8716-1FDD-57B4-B685-672D3A755592.html" title="This tutorial describes how to request and cancel monitoring for a process.">Requesting and cancelling
                monitoring for a process</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>