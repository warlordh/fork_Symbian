<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Bluetooth GPS PSY Events API Overview"/>
<meta name="abstract" content="The Bluetooth GPS PSY Events API uses the Publish and Subscribe (P&amp;S) service to notify clients about the state of the PSY and the connected Bluetooth GPS device. The API is for developers who write components to notify users of changes in the Bluetooth GPS PSY state."/>
<meta name="description" content="The Bluetooth GPS PSY Events API uses the Publish and Subscribe (P&amp;S) service to notify clients about the state of the PSY and the connected Bluetooth GPS device. The API is for developers who write components to notify users of changes in the Bluetooth GPS PSY state."/>
<meta name="DC.Relation" scheme="URI" content="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FE910347-7CC1-5241-B443-88AD3F5A96EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F84E7419-7F31-5E18-8854-27CB1F9F890E.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Bluetooth GPS PSY Events API Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403469 id2403500 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-5CBF9CB3-1914-571C-B634-715EAF1272DA.html" title="The Data Source Modules collection contains components that enable the LBS subsystem to obtain position data.">Data Source Modules</a> &gt; <a href="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html" title="The Bluetooth GPS Positioning Module (Bluetooth GPS PSY) connects the LBS subsystem to an external Bluetooth GPS device.">Bluetooth GPS Positioning Module</a> &gt; </div>
<h1 class="topictitle1">Bluetooth GPS PSY Events API Overview</h1>
<div><p>The Bluetooth GPS PSY Events API uses the Publish and Subscribe (P&amp;S) service to notify clients about the state of the PSY and the connected Bluetooth GPS device. The API is for developers who write components to notify users of changes in the Bluetooth GPS PSY state. </p>
<div class="section"><h2 class="sectiontitle">Purpose</h2> <p>A client of this API would typically be a UI component that reports the status of the Bluetooth GPS PSY to a device user. The component would typically be a Notifier or a UI component in a status bar. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Library details</h2> <p>This API consists of a set of P&amp;S keys defined in the header file <span class="filepath">BtGpsPsyPrivatePSKeys.h</span>. Applications must link with <samp class="codeph">euser.lib</samp>  <samp class="codeph"/>to use this API. </p>
 </div>
 <div class="section" id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-8901A822-7CD5-5023-88B9-F912BEC0086D"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-8901A822-7CD5-5023-88B9-F912BEC0086D"><!-- --></a><h2 class="sectiontitle">Description</h2> <p id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-96A15FD9-025B-54C7-97BC-5FA1518FA83C"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-96A15FD9-025B-54C7-97BC-5FA1518FA83C"><!-- --></a><strong>Use cases</strong> </p>
 <p>The use cases of this API are: </p>
 <ul><li id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-A28956BB-4A79-5BC7-A7F3-7722EC69DAB7"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-A28956BB-4A79-5BC7-A7F3-7722EC69DAB7"><!-- --></a><p>Listening for changes in state of the Bluetooth GPS PSY and the connected Bluetooth GPS device. </p>
 </li>
 <li id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-19F54031-565F-54C8-92F7-0C07D92D62F0"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-19F54031-565F-54C8-92F7-0C07D92D62F0"><!-- --></a><p>Retrieving the current state of the Bluetooth GPS PSY. </p>
 </li>
 </ul>
 <p id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-739D861D-8BE9-5BFD-81AE-4F7D8E5536CA"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-739D861D-8BE9-5BFD-81AE-4F7D8E5536CA"><!-- --></a><strong>API class structure</strong> </p>
 <p>This API doesnâ€™t define any classes. It defines a Bluetooth GPS PSY events P&amp;S category <a href="GUID-8E951395-C57E-3F23-AB0D-CAF24343B935.html"><span class="apiname">KPsUidBluetoothGpsPsy</span></a>, some keys and some enumerated types for key values. These are defined in the <span class="filepath">BtGpsPsyPrivatePSKeys.h</span>. </p>
 </div>
 <div class="section" id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-DA9B90A9-DAE4-5995-9790-528C622B0BA3"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-DA9B90A9-DAE4-5995-9790-528C622B0BA3"><!-- --></a><h2 class="sectiontitle">Using the Bluetooth GPS PSY Events API</h2> <p>To listen for Bluetooth GPS PSY state changes, clients subscribe for notifications of changes in P&amp;S keys from the <a href="GUID-8E951395-C57E-3F23-AB0D-CAF24343B935.html"><span class="apiname">KPsUidBluetoothGpsPsy</span></a> category. When a state change is reported, the client reads the new value and can respond to the change event (such as by showing a dialog to the user). An API client does not require any capabilities to read key values. </p>
 <p>See <a href="GUID-FE910347-7CC1-5241-B443-88AD3F5A96EF.html" title="This topic explains the operations that can be performed using publish and subscribe.">Using Publish and Subscribe</a> for details of how to get key values and subscribe for notification of value changes. </p>
 <p>The following table describes Bluetooth GPS PSY P&amp;S keys and values which are defined in <span class="filepath">BtGpsPsyPrivatePSKeys.h</span>. </p>
 
<div class="tablenoborder"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-06E6ECA2-9C6B-50DB-9292-671B76319CC1"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-06E6ECA2-9C6B-50DB-9292-671B76319CC1" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d291417e112">Keys</th>
 <th class="cellrowborder" valign="top" id="d291417e115">Description</th>
 <th class="cellrowborder" valign="top" id="d291417e118">Possible values</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-DD9E328E-D841-394B-B52D-092D23D2B7AE.html"><span class="apiname">KBluetoothGpsPsyState</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>The current state of the PSY. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Whether the PSY is loaded and whether it is connected to a particular type of device (PNOK or non PNOK) etc. </p>
 <p>Defined by <a href="GUID-F28631C5-711C-3943-803C-FA659AD9CDBD.html"><span class="apiname">TBTGPSPSYState</span></a>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-8DAAA1F1-05E4-3A4A-87B5-86C2E6BEDE5E.html"><span class="apiname"> KBluetoothGpsPsyBatteryLevel</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>The battery charge remaining in the Bluetooth GPS device. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>A value between 0-100 (100 means battery is full) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-B17D619A-91FA-3E6E-80D4-EFEF5898979E.html"><span class="apiname"> KBluetoothGpsPsyBatteryState</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>The battery charge remaining in the Bluetooth GPS device represented in three different bands: </p>
 <ul><li id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-67A699BC-B9EB-5266-8AD7-0C45FE0AAD28"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-67A699BC-B9EB-5266-8AD7-0C45FE0AAD28"><!-- --></a><p>Low: voltage level &lt; 10% </p>
 </li>
 <li id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-32328D4E-9348-50C4-8356-3B9DC7CB724F"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-32328D4E-9348-50C4-8356-3B9DC7CB724F"><!-- --></a><p>High: voltage level &gt; 90% </p>
 </li>
 <li id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-37933EDE-3FA1-5C4B-82E4-66F7CAD9F029"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-37933EDE-3FA1-5C4B-82E4-66F7CAD9F029"><!-- --></a><p>Normal: voltage level 10%-90%. </p>
 </li>
 </ul>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Defined by <a href="GUID-53DF8A44-47B4-3EC4-B7BF-FE11C2226102.html"><span class="apiname">TBTGPSBatteryState</span></a>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-118FD9B6-22DD-3621-9502-BE4526CE7EF8.html"><span class="apiname"> KBluetoothGpsPsyExtAntennaState</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Whether an external antenna is connected to Bluetooth GPS device. </p>
 <p>An external antenna can be connected to a GPS device when it is in an environment where the GPS signal is weak or blocked. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Defined by <a href="GUID-2587BFB7-E7C0-3B78-9494-F8FBC16DE508.html"><span class="apiname">TBTGPSExtAntennaState</span></a>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-06B16896-9C2E-3EBF-A701-A377055EDC78.html"><span class="apiname">KBluetoothGpsPsyExtPowerState</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Whether a battery charger is connected to the Bluetooth GPS device. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Defined by <a href="GUID-8B3DE9EF-B163-3C00-8799-A6D53A0B1196.html"><span class="apiname">TBTGPSExtPowerState</span></a>. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-673A43DB-EAE9-37A5-9465-7BD69DD6470B.html"><span class="apiname">KBluetoothGpsPsyVersion</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Version of Bluetooth GPS PSY currently in use. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Descriptor with maximum length 32. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-BF9130DC-B3BB-335A-94FB-6C1352162F36.html"><span class="apiname"> KBluetoothGpsPsyBtHwVersion</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Version of Bluetooth hardware in the Bluetooth GPS device. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Descriptor with maximum length 32. </p>
 <p> </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-6C53B9F4-3537-38A6-A59B-497AAC734E64.html"><span class="apiname">KBluetoothGpsPsyBtSwVersion</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Version of Bluetooth software in the Bluetooth GPS device. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Descriptor with maximum length 32. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-9905E244-9E97-3690-A870-3B79C4E7205A.html"><span class="apiname"> KBluetoothGpsPsyGpsHwVersion</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Version of GPS chipset in the Bluetooth GPS device. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Descriptor with maximum length 32. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d291417e112 "><p> <a href="GUID-CAC8CE54-DF10-3190-97B0-840F850AE21A.html"><span class="apiname">KBluetoothGpsPsyGpsSwVersion</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e115 "><p>Version of GPS software in the Bluetooth GPS device. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d291417e118 "><p>Descriptor with maximum length 32. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-626F69E4-730F-55EE-A93C-B050ED6A11CC"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-626F69E4-730F-55EE-A93C-B050ED6A11CC"><!-- --></a><strong>Listening for changes in the state of Bluetooth GPS PSY</strong> </p>
 <p>Figure 1 is a sequence diagram describing notifications to the client about Bluetooth GPS PSY state changes. </p>
 <div class="fignone" id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-6DEDC4E6-97DD-513A-BBC1-A4EA24521B1F"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-6DEDC4E6-97DD-513A-BBC1-A4EA24521B1F"><!-- --></a><span class="figcap">Figure 1. 
                Figure 1. Registering for and receiving Bluetooth GPS device state
                change events. 
             </span> <img src="GUID-147C77CB-16A1-548B-A1C7-05F2C5FF9E27_d0e466307_href.png"/></div>
 <p id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-0FD168EE-E566-5C33-B1C0-84594659410B"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-0FD168EE-E566-5C33-B1C0-84594659410B"><!-- --></a><strong>Retrieving current state of Bluetooth GPS PSY</strong> </p>
 <p>Figure 2 shows a sequence diagram that describes retrieval of the current state of Bluetooth GPS PSY. </p>
 <div class="fignone" id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-E44DF87A-B4A7-5793-8B78-0437450B1FB6"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-E44DF87A-B4A7-5793-8B78-0437450B1FB6"><!-- --></a><span class="figcap">Figure 2. 
                Figure 2. Getting the current value of a Bluetooth GPS property. 
             </span> <img src="GUID-D5707217-DE3F-551D-82C9-C82D3047D90E_d0e466321_href.png"/></div>
 <p id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-B6C7FF94-5CCB-5434-9EC3-9DFCF3E01CE5"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-B6C7FF94-5CCB-5434-9EC3-9DFCF3E01CE5"><!-- --></a><strong>Error handling</strong> </p>
 <p>The Bluetooth GPS PSY Events API does not define or use any error codes. Refer to the <a href="GUID-C4776034-D190-3FC4-AF45-C7F195093AC3.html"><span class="apiname">RProperty</span></a> class description in reference documentation for further details on error handling when using Publish and Subscribe. </p>
 <p id="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-9BCD48ED-CAA1-57D5-8DE0-A05FA1BFE2F9"><a name="GUID-1D81831A-FFC9-50E7-9FA1-EC0958060588__GUID-9BCD48ED-CAA1-57D5-8DE0-A05FA1BFE2F9"><!-- --></a><strong>Memory overhead</strong> </p>
 <p>The Bluetooth GPS PSY Events API does not require any additional memory above that needed for normal use of Publish and Subscribe. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-5454AFE9-ADC2-5980-85FC-3FF457B638D0.html" title="The Bluetooth GPS Positioning Module (Bluetooth GPS PSY) connects the LBS subsystem to an external Bluetooth GPS device.">Bluetooth GPS Positioning Module</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-FE910347-7CC1-5241-B443-88AD3F5A96EF.html" title="This topic explains the operations that can be performed using publish and subscribe.">Using Publish and Subscribe</a></div>
<div><a href="GUID-F84E7419-7F31-5E18-8854-27CB1F9F890E.html" title="The Bluetooth GPS PSY Settings Storage API defines Central Repository keys for storing and retrieving the settings of the Bluetooth GPS PSY. The API is for developers who write applications to get and set Bluetooth GPS PSY settings.">Bluetooth
                GPS PSY Settings Storage API Overview</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>