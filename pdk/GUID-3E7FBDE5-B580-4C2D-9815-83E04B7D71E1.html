<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Switching from Cell ID to Terminal-Assisted Positioning"/>
<meta name="abstract" content="How to get an assisted GPS terminal-assisted position when the network positioning preference is SUPL."/>
<meta name="description" content="How to get an assisted GPS terminal-assisted position when the network positioning preference is SUPL."/>
<meta name="DC.Relation" scheme="URI" content="GUID-816334A7-488B-5F91-8C2E-47076D875013.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-816334A7-488B-5F91-8C2E-47076D875013.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-547161C2-BE55-4248-92EE-63612D64F480.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-299B6CAB-3D4C-4FA5-A00E-244D04F0B6AB.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Switching from Cell ID to Terminal-Assisted Positioning</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403195 id2403262 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html" title="The Network Adaptation collection contains Protocol Module ECOM plug-ins that can be used by the Network Gateway to support location and privacy requests.">Network Adaptation</a> &gt; <a href="GUID-816334A7-488B-5F91-8C2E-47076D875013.html" title="The LBS subsystem contains a reference Network Protocol Module that supports the Open Mobile Alliance (OMA) SUPL V1.0 standard. This section contains documentation that describes the Symbian platform reference SUPL Protocol Module, its supporting components and APIs, its runtime behaviour and details about how it is configured by device creators.">SUPL Protocol Module</a> &gt; </div>
<h1 class="topictitle1">Switching
from Cell ID to Terminal-Assisted Positioning</h1>
<div><p>How to get an assisted GPS terminal-assisted position when the
network positioning preference is SUPL.</p>

<div class="section" id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-37503598-3E2C-4254-BE48-4806B0D5E2B5"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-37503598-3E2C-4254-BE48-4806B0D5E2B5"><!-- --></a>   <p>SUPL
(Secure User Plane Location) enables a device to communicate with a SUPL server
over an IP connection. A client application requests a position from the network
using SUPL. To receive the position the client must be able to connect to
the Location subsystem. The client must then select the Network Proxy PSY
(NPP) module as its source. The NPP module must be configured to use the SUPL
PSY. </p>
While the SUPL PSY module can use cell-based positioning, enhanced
cell-based positioning and AGPS terminal-assisted positioning, the SUPL Network
Server may optionally use AGPS terminal-assisted positioning, though this
is not usually advised.<p>With AGPS terminal-assisted positioning the client
application therefore requests a position from the network using an AGPS Terminal.
The steps below describe the process.</p>
     </div>

<a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2"><!-- --></a><ol id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2"><li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-B53B2F90-233B-42D8-A083-57DC29B6251C"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-B53B2F90-233B-42D8-A083-57DC29B6251C"><!-- --></a><span>The client must
open a connection to the server by calling <a href="GUID-0ADC4654-7F7B-3B53-A2F9-7035670F501B.html#GUID-0ADC4654-7F7B-3B53-A2F9-7035670F501B__GUID-23285930-A1D5-3A97-AED4-E979BFA96FDD"><span class="apiname">RPositionServer::Connect()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-A66E2C33-E992-4832-93BC-58ACE995A734"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-A66E2C33-E992-4832-93BC-58ACE995A734"><!-- --></a><span>The client must
then open RPositioner by calling <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-AF3D9B5F-8025-3AFF-A101-82025520EBD6"><span class="apiname">RPositioner::Open()</span></a> and
specify the UID of the Network Proxy PSY.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-3"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-3"><!-- --></a><span>The client application
sends a location request to the Location subsystem by calling <a href="GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575.html#GUID-1EAEB7EF-0AC7-37C7-B35F-C9B780FFC575__GUID-321F6046-3551-3ACE-B0A3-26D51FAEB477"><span class="apiname">RPositioner::NotifyPositionUpdate()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-FD076E9C-8A18-4692-920E-D3CAFD64A262-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-4"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-FD076E9C-8A18-4692-920E-D3CAFD64A262-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-4"><!-- --></a><span>The Location subsystem
forwards the location request to the SUPL Protocol module by calling <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5__GUID-E52AC2F2-6E42-370B-93EB-48389E062E33"><span class="apiname">CLbsNetworkProtocolBase::RequestNetworkLocation()</span></a>.
(In the default configuration SUPL is used for cell-based positioning).</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-C91844EA-4E31-4EAD-981F-6C83EBDD3D67-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-5"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-C91844EA-4E31-4EAD-981F-6C83EBDD3D67-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-5"><!-- --></a><span>The SUPL protocol
module communicates with an external SUPL server, which decides to use terminal-assisted
GPS positioning instead of cell-based positioning. </span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-C38775F8-AF05-48A0-99A5-AA0AD63055AB-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-6"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-C38775F8-AF05-48A0-99A5-AA0AD63055AB-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-6"><!-- --></a><span>The SUPL Protocol
Module requests a measurement update from the Location subsystem by calling <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4__GUID-676C6200-0A3A-331D-9776-17CA53E8A1D7"><span class="apiname">MLbsNetworkProtocolObserver::ProcessLocationRequest()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-675B9902-D5B8-4292-8F61-6599E7E128FA"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-675B9902-D5B8-4292-8F61-6599E7E128FA"><!-- --></a><span>The Location subsystem
requests a measurement update from the AGPS module by calling <a href="GUID-A458AA58-8BD6-303B-89E5-C99000376615.html#GUID-A458AA58-8BD6-303B-89E5-C99000376615__GUID-C5784C56-C6BA-3D11-AFEB-D08CA8E3E083"><span class="apiname">CLbsLocationSourceGpsBase::RequestLocationUpdate()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-1C189927-94B0-4EED-BA3B-318A6D7E2E34"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-1C189927-94B0-4EED-BA3B-318A6D7E2E34"><!-- --></a><span>The AGPS module
produces a position update by calling <a href="GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590.html#GUID-CE22C141-E1DC-38BB-AC11-76853A7B2590__GUID-170901F1-435D-3BC1-985B-49BA0876BD92"><span class="apiname">MLbsLocationSourceGpsObserver::UpdateLocation()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-ACF90C9D-DD31-4990-84E6-435AA802E564"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-ACF90C9D-DD31-4990-84E6-435AA802E564"><!-- --></a><span>The Location subsystem
forwards the measurement update to the network by calling <a href="GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5.html#GUID-479C43CF-8787-3596-93ED-F03A8E5CA2F5__GUID-A4F669B3-52D7-32B7-A2B6-76F5C9B954E2"><span class="apiname">CLbsNetworkProtocolBase::ProcessLocationUpdate()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-5B71C7FE-FB91-4096-9DCD-3C8053862213"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-5B71C7FE-FB91-4096-9DCD-3C8053862213"><!-- --></a><span>The measurement
is sent to the SUPL server, which calculates and returns the position.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-C38775F8-AF05-48A0-99A5-AA0AD63055AB-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-11"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-C38775F8-AF05-48A0-99A5-AA0AD63055AB-GENID-1-12-1-19-1-1-9-1-6-1-12-1-3-2-11"><!-- --></a><span>The SUPL Protocol
module returns the cell-based position by calling <a href="GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4.html#GUID-A97ABAA7-46B0-3E26-97C6-123C92CCEEE4__GUID-CAB9645E-91AD-326B-8803-45F28505CCCC"><span class="apiname">MLbsNetworkProtocolObserver::ProcessLocationUpdate()</span></a>.</span>
</li>
<li id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-A0638E54-9F51-468E-9DD3-B43A0C0AAAAA"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-A0638E54-9F51-468E-9DD3-B43A0C0AAAAA"><!-- --></a><span>The Location subsystem
completes the client request.</span>
</li>
</ol>

<div class="section" id="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-9E3C75F6-B100-440A-B02A-C745374139E9"><a name="GUID-3E7FBDE5-B580-4C2D-9815-83E04B7D71E1__GUID-9E3C75F6-B100-440A-B02A-C745374139E9"><!-- --></a>SUPL has enabled the
client application to receive the AGPS terminal-assisted position from the
network. </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-816334A7-488B-5F91-8C2E-47076D875013.html" title="The LBS subsystem contains a reference Network Protocol Module that supports the Open Mobile Alliance (OMA) SUPL V1.0 standard. This section contains documentation that describes the Symbian platform reference SUPL Protocol Module, its supporting components and APIs, its runtime behaviour and details about how it is configured by device creators.">SUPL Protocol Module</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-547161C2-BE55-4248-92EE-63612D64F480.html" title="Using SUPL to request a cell-based position.">SUPL Cell
Based Positioning Request</a></div>
<div><a href="GUID-299B6CAB-3D4C-4FA5-A00E-244D04F0B6AB.html" title="Using the network to provide a SUPL cell-based position should a request based on the Control Plane fail.">Control Plane
Cell Position Attempt Fallback to SUPL</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>