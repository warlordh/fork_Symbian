<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="MessageQueue Example"/>
<meta name="abstract" content="This example application shows the use of message queue in interprocess communication using the RMsgQueue class."/>
<meta name="description" content="This example application shows the use of message queue in interprocess communication using the RMsgQueue class."/>
<meta name="DC.Relation" scheme="URI" content="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>MessageQueue Example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2398849 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html" title="This describes the example code for the User Library component.">User Library Example Code</a> &gt; </div>
<h1 class="topictitle1">MessageQueue Example</h1>
<div><p>This example application shows the use of message queue
in interprocess communication using the RMsgQueue class.</p>

<div class="section" id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-ED679CA7-FF4C-4E69-8663-5DA46A3D94F4"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-ED679CA7-FF4C-4E69-8663-5DA46A3D94F4"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-d72e85ad-4659-4f66-9cb3-f084e9505709.zip" target="_blank">MessageQueueExample.zip</a>.</p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-d72e85ad-4659-4f66-9cb3-f084e9505709.html">browse</a> to view the example code.</p>
 </div>

<div class="section" id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-39D2064D-AD24-4785-956F-18A0CAD57B81"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-39D2064D-AD24-4785-956F-18A0CAD57B81"><!-- --></a><h2 class="sectiontitle">Description</h2> <p>The example describes the global message queue. The following
sections provide more information. </p>
 <p><strong> MessageQueueExample</strong> </p>
 <p>The example comprises two processes: a Collector, which
collects words from the user via the console, and an Inverter, which
periodically reverses the order of the collected words. The Collector
and the Inverter pass words to each other using two message queues:
InverterInQ and InverterOutQ. The Collector is the main process which
starts the Inverter process. The Collector process takes user input
in form of different words and sends to the Inverter process via message
queue. The Inverter process receives messages at a regular interval
of 10 seconds, inverts the words in the message and sends it back
to the Collector. </p>
 <p>The Collector creates an active object to
collect words from the user and another active object to receive words
from the Inverter. Each active object has its own console for display.
More information about running the example is given in the build section
of this document. </p>
 <p><strong>Design</strong> </p>
 <p>The following block
diagram describes the example in more detail. </p>
 <div class="fignone" id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-27A0C389-EDDD-5E17-82EE-2727F21803AF"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-27A0C389-EDDD-5E17-82EE-2727F21803AF"><!-- --></a>
<img src="GUID-CD7F507C-CDD5-5612-BA1B-72641D28FA4A_d0e359491_href.png"/>
</div>
<p><span class="filepath">CCollector.exe</span> is the Collector process.
The user starts the Collector and creates an active scheduler and
two global message queues. It also starts the Inverter process called <span class="filepath">Inverter.exe</span>. The Collector creates one active object
to collect words from the user and another active object to monitor
its input queue (InverterOutQ). The active object to collect words
is an object of class CCollector and the active object which monitors <samp class="codeph">InverterOutQ</samp> is an object of class <a href="GUID-A39BC295-2845-3018-B8B8-49418277E7EB.html"><span class="apiname">CMsgQActive</span></a>. The two active objects have different consoles (one for user input
and one for displaying the output message). </p>
<p> The user inputs
words in the console. The set of words goes to the <samp class="codeph">InverterInQ</samp> when the "<samp class="codeph">Enter</samp>" key is pressed. If the "<samp class="codeph">ESC</samp>" key is pressed, the system stops and sends the command
to the Inverter process to stop.</p>
<p> The Inverter is another process
which opens the global message queues. It creates an active scheduler
and implements a periodic timer. The timer wakes every 10 seconds
to receive the words from the <samp class="codeph">InverterInQ</samp>. It also
checks for a stop command, which closes the message queue and the
two process. The Inverter inverts the received words and sends the
result to <samp class="codeph">InverterOutQ</samp>. </p>
<p>In the Collector process,
the active object that monitors the <samp class="codeph">InveterOutQ</samp> opens
the message queue, receives the received words and displays  them
in its console. It uses the <a href="GUID-22E24B08-175B-3446-9D48-9AC4B1663E35.html"><span class="apiname">NotifyDataAvailable(TRequestStatus&amp;)</span></a> API to monitor the queue for the next set of data. </p>
<p>The Class
diagram of the example is shown below </p>
<div class="fignone" id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-E93EF1D6-1B9D-4C76-80B0-1FF660B5C75A"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-E93EF1D6-1B9D-4C76-80B0-1FF660B5C75A"><!-- --></a>
<img src="GUID-3560E862-CB68-584F-B9B6-FCD9F0D202DC_d0e359539_href.png"/>
</div>
 </div>

<div class="section" id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-86B04D06-7046-49BD-AE1A-57D5E406F864"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-86B04D06-7046-49BD-AE1A-57D5E406F864"><!-- --></a><h2 class="sectiontitle">Class
summary</h2><ul>
<li><p> <a href="GUID-3CECC9FC-58C1-3117-AAF2-FDF88341F56F.html"><span class="apiname">CPeriodic</span></a> - Periodic timer active object.</p>
</li>

<li><p><a href="GUID-5195B8D1-851E-3BEE-A72D-1841C0937300.html"><span class="apiname"> RMsgQueue</span></a> - A handle to a message queue.</p>
</li>

<li><p><a href="GUID-9DD1EA2B-DC59-315C-8E9C-CE6D9461B695.html"><span class="apiname"> RProcess </span></a> - A handle to a process.</p>
</li>

<li><p><a href="GUID-067293BF-B28C-3CEC-92F4-1351A795EA7F.html"><span class="apiname"> CActive</span></a> - The core class of the active
object abstraction.</p>
</li>

</ul>
</div>

<div class="section" id="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-F8D41313-760D-417E-834C-09D41F4EDB06"><a name="GUID-C21BB0E4-7AF7-58E5-AAD6-8CE67399460C__GUID-F8D41313-760D-417E-834C-09D41F4EDB06"><!-- --></a><h2 class="sectiontitle">Build</h2> <p>The example builds an executable called <span class="filepath">Inverter.exe</span> and <span class="filepath">Collector.exe</span> in the standard locations. </p>
 <p>To run the example, first build <span class="filepath">Inverter.exe</span> and start <span class="filepath">Collector.exe</span> from the file system
or from your IDE. After launching the .exes (and depending on the
emulator you are using) you may need to navigate away from the application
launcher or shell screen to view the console. </p>
 <p>A message input
console is used for user input and an output message console is used
to display inverted words. The output message console that is displayed
at startup. The user can switch between two consoles by <span class="cmdname">Ctrl+Shift+Alt+t </span> combination. </p>
 <p>The input message console is used to input
words. A user presses enter to send the words to the Inverter and
presses <span class="cmdname">ESC</span> to exit the application. When a user
presses "Enter" the words go to the <samp class="codeph">InverterInQ</samp>.
The Inverter opens the <samp class="codeph">InverterInQ</samp> at periodic intervals
of 10 secs and inverts the words which it sends to the collector via <samp class="codeph">InverterOutQ</samp>. The Collector opens the <samp class="codeph">InverterOutQ</samp> and display the words in the output message console. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html" title="This describes the example code for the User Library component.">User Library Example Code</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>