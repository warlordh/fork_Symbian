<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="SMP Example"/>
<meta name="abstract" content="This example demonstrates symmetric multiprocessing using multiple threads."/>
<meta name="description" content="This example demonstrates symmetric multiprocessing using multiple threads."/>
<meta name="DC.Relation" scheme="URI" content="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-C7B748CF-D080-5448-98AF-1634D821E713"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>SMP Example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-C7B748CF-D080-5448-98AF-1634D821E713"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2392081 id2398849 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-A63025D1-7FD4-5120-8A1F-537D6B70103D.html" title="The User Library allows the applications and services that run on a phone to access the functionality provided by the Symbian platform Kernel.">User Library</a> &gt; <a href="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html" title="This describes the example code for the User Library component.">User Library Example Code</a> &gt; </div>
<h1 class="topictitle1"> SMP Example</h1>
<div><p>This example demonstrates symmetric multiprocessing using
multiple threads. </p>

<p>This example shows the differences between code running in a unicore
environment and in a multiprocessor environment.</p>

<div class="section" id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7AC2BE12-4F01-4140-8379-672475DE7681"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7AC2BE12-4F01-4140-8379-672475DE7681"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-577596d8-76a2-4a41-aa0f-deefe5638e23.zip" target="_blank">SmpExample.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-577596d8-76a2-4a41-aa0f-deefe5638e23.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7A70847E-40A2-4267-9BD4-36F88F48C84A"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7A70847E-40A2-4267-9BD4-36F88F48C84A"><!-- --></a><h2 class="sectiontitle">Class
summary</h2><ul>
<li><p><a href="GUID-B0E661BC-4058-3256-B9C3-5A4FD52F6DE5.html"><span class="apiname">RThread</span></a> - A handle to a thread.</p>
</li>

<li><p><a href="GUID-F4A68645-2265-307F-B951-8295827E000B.html"><span class="apiname">RDbStoreDatabase</span></a> - DBMS Store database implementation</p>
</li>

</ul>
</div>

<div class="section" id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-BE13F08D-09FD-41DF-9210-D46EBECADA69"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-BE13F08D-09FD-41DF-9210-D46EBECADA69"><!-- --></a><h2 class="sectiontitle">Design
and implementation</h2> <p>The example creates two databases named
DBforSMP1.db and DBforSMP2.db and three threads: </p>
 <ul>
<li id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-F4EE1C84-FE30-5C99-872B-1881D852CAEA"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-F4EE1C84-FE30-5C99-872B-1881D852CAEA"><!-- --></a><p> <samp class="codeph">WriterThread1</samp>: It creates the DBforSMP1.db database and writes integers to it.
The thread has the lowest priority amongst all the threads. </p>
 </li>

<li id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7B2D0419-E069-59FA-A6CE-70EBC203F656"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7B2D0419-E069-59FA-A6CE-70EBC203F656"><!-- --></a><p> <samp class="codeph">WriterThread2</samp>: It creates the DBforSMP2.db database and writes some integers to
it. The thread has highest priority amongst all the threads. </p>
 </li>

<li id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7C9584F2-E6C8-5A02-B4C2-4845CF4BAA36"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-7C9584F2-E6C8-5A02-B4C2-4845CF4BAA36"><!-- --></a><p> <samp class="codeph">ReaderThread</samp>: It reads the two databases and prints the output to the console.
It has normal priority. </p>
 </li>

</ul>
 <p>In a unicore enviroment, the threads are executed according
to their priorities. This means first <samp class="codeph"> WriterThread2</samp>, then <samp class="codeph">ReaderThread</samp> and finally <samp class="codeph">WriterThread1</samp> is executed. Hence <samp class="codeph">ReaderThead</samp> can only print the
contents of the DBforSMP2.db in the console because DBforSMP1 is empty.
in an SMP environment, threads run simultaneously and <samp class="codeph">ReaderThread</samp> can print the contents of both the databases. </p>
 </div>

<div class="section" id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-3686F166-C4DD-4269-9B9C-F0027F53547E"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-3686F166-C4DD-4269-9B9C-F0027F53547E"><!-- --></a><h2 class="sectiontitle">Building
and configuring</h2> <p>To build the example: </p>
 <ul>
<li id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-037442C7-2436-5152-9A3E-9DC0B4283A9C-GENID-1-12-1-18-1-1-9-1-4-1-25-1-30-1-3-5-3-1"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-037442C7-2436-5152-9A3E-9DC0B4283A9C-GENID-1-12-1-18-1-1-9-1-4-1-25-1-30-1-3-5-3-1"><!-- --></a><p>The example
builds an executable called <span class="filepath">smpexample.exe</span> in
the standard location. </p>
 </li>

<li id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-B7C849B9-0885-5253-A78B-71854F86D772-GENID-1-12-1-18-1-1-9-1-4-1-25-1-30-1-3-5-3-2"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-B7C849B9-0885-5253-A78B-71854F86D772-GENID-1-12-1-18-1-1-9-1-4-1-25-1-30-1-3-5-3-2"><!-- --></a><p>You can build
the example from your IDE or the command line. </p>
 <p>If you use
an IDE, import the <span class="filepath">bld.inf</span> file of the example
into your IDE, and use the build command of the IDE. </p>
 <p>If you
use the command line, open a command prompt, and set the current directory
to the source code directory of the example. You can then build the
example with the SBSv1 build tools with the following commands: </p>
 <p><kbd class="userinput">bldmake bldfiles</kbd> </p>
 <p><kbd class="userinput">abld
build</kbd> </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-F773B722-7612-4BAF-99CB-84E39CE10C40"><a name="GUID-C7B748CF-D080-5448-98AF-1634D821E713__GUID-F773B722-7612-4BAF-99CB-84E39CE10C40"><!-- --></a><h2 class="sectiontitle">Running
the example</h2> <p>To test the example in an SMP environment,
add <samp class="codeph">crazyscheduling on</samp>in the <span class="filepath">epoc32\data\epoc.ini</span> file. This emulates SMP behaviour in the techview emulator. Execute
the example in both unicore and multiprocessor environment and see
the difference. Run the example following the instructions provided
in the console. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-0D61EBFF-F513-5911-B234-09F36E5E3DC8.html" title="This describes the example code for the User Library component.">User Library Example Code</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>