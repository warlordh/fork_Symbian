<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="System Information"/>
<meta name="abstract" content="This topic describes various system information related to the device drivers."/>
<meta name="description" content="This topic describes various system information related to the device drivers."/>
<meta name="DC.Relation" scheme="URI" content="GUID-CB3A8650-751C-4DAA-9408-7AEB3C7FD41A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C22974D8-CFB9-4A83-BE58-CCC97EA8DF13.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-CB3A8650-751C-4DAA-9408-7AEB3C7FD41A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>System Information</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2387995 id2388032 id2388099 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html" title="The device driver framework and how to implement a device driver.">Device Driver Guide</a> &gt; <a href="GUID-C22974D8-CFB9-4A83-BE58-CCC97EA8DF13.html" title="This set of documents explains how to write a device driver.">Device Driver Writing Guide</a> &gt; <a href="GUID-CB3A8650-751C-4DAA-9408-7AEB3C7FD41A.html" title="This section explains how to make a valid Symbian Platform driver.">Minimal Driver Requirements</a> &gt; </div>
<h1 class="topictitle1">System
Information</h1>
<div><p>This topic describes various system information related to the
device drivers.</p>

<div class="section" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-8968BABB-32E5-4998-8E69-C8389D1E6B63"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-8968BABB-32E5-4998-8E69-C8389D1E6B63"><!-- --></a><h2 class="sectiontitle">Presence
of PDD</h2>              <p>Some drivers may only require an LDD, and not provide
a PDD. However, if the driver has a PDD, then the driver must inform the framework
of this. The LDD should set the <a href="GUID-7616AA05-83E6-3989-AB9D-11AE01245BEB.html#GUID-7616AA05-83E6-3989-AB9D-11AE01245BEB__GUID-EB891156-94D9-323A-AB23-7B5994CD95E3"><span class="apiname">DLogicalDevice::iParseMask</span></a> bitmask
with the <a href="GUID-DD3574F6-5EA7-3E2E-B906-E1E320DE10CD.html"><span class="apiname">KDeviceAllowPhysicalDevice</span></a> flag. If this flag
is not set, then the Kernel assumes that the driver does not have a PDD. </p>
 <pre class="codeblock" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-F4A44E78-EA90-5D75-BC1F-48EF684F7F58"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-F4A44E78-EA90-5D75-BC1F-48EF684F7F58"><!-- --></a>// Logical Channel Second stage constructor
DExDriverLogicalDevice:: DExDriverLogicalDevice ()
    {
    iParseMask = KDeviceAllowPhysicalDevice | KDeviceAllowUnit;
    ...
    }</pre>
     </div>

<div class="section" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-EFC4AE5D-6506-4B1F-A4E4-DBA31B456593"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-EFC4AE5D-6506-4B1F-A4E4-DBA31B456593"><!-- --></a></div>

<div class="section" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-E983D7DF-52C4-46FC-B633-BF08519D949D"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-E983D7DF-52C4-46FC-B633-BF08519D949D"><!-- --></a><h2 class="sectiontitle">Capabilities</h2> <p>The
device driver framework provides a method to set and provide general information
to the user on the capabilities of the device driver. Typically, implementations
simply return the version number of the LDD. The device driver framework allows
both the LDD and PDD to set the device capabilities. </p>
 <p>The user typically
calls the <a href="GUID-92BAC78E-8ACF-3952-8E77-CCF93ED3BDC9.html#GUID-92BAC78E-8ACF-3952-8E77-CCF93ED3BDC9__GUID-9C38652A-0135-360D-A54F-A9542C45E608"><span class="apiname">RDevice::GetCaps()</span></a> function to retrieve the device
capabilities. </p>
 <pre class="codeblock" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-6801C06D-EEA1-505B-968A-8EF354961183"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-6801C06D-EEA1-505B-968A-8EF354961183"><!-- --></a>RDevice device;
r = device.Open(KDriverName);
if (r==KErrNone)
    {
    TPckgBuf&lt;RExDriver::TUartCaps&gt; caps;
    device.GetCaps(caps);         
    ...
    device.Close();
    }</pre>
 <p> <em>Note:</em> The device capabilities in this context
refer to the services that the driver can offer. Do not confuse this with
the idea of platform security capabilities, which are completely different. </p>
</div>

<div class="section" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-73AD1B0E-2A31-4D44-A19C-E64A78281C27"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-73AD1B0E-2A31-4D44-A19C-E64A78281C27"><!-- --></a><h2 class="sectiontitle"> HAL handlers</h2> <p>Symbian
platform provides a Hardware Abstraction Layer (HAL) interface that can be
used by device drivers and kernel extensions to provide information on device
specific attributes to user code. It comprises set and get interfaces used
by the Kernel and by user code. The attributes are divided into groups of
similar functionality, each of which is managed by a function called a HAL
handler. </p>
 <p>Drivers must register any HAL handlers they provide, and
de-register them when unloading. Kernel extensions do not remove their HAL
handlers. </p>
 <pre class="codeblock" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-EE9D2192-92F1-5C9D-9E9C-4CFD5D2C6304"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-EE9D2192-92F1-5C9D-9E9C-4CFD5D2C6304"><!-- --></a>// Adds a HAL entry handling function for the specified group of 
// HAL entries.
Kern::AddHalEntry(EHalGroupDisplay, &amp;handler, this, 1);

// Removes the HAL handler
TInt Kern::RemoveHalEntry(EHalGroupDisplay);</pre>
 <p>The arguments
to <samp class="codeph">AddHalEntry()</samp> are the ID of a HAL group, a pointer to
the handler function and a pointer to a data structure that will be passed
to the handler function. The HAL handler function prototype is defined by <a href="GUID-A65A16CA-488D-3A16-A034-F01C9C0B9D15.html"><span class="apiname">THalFunc</span></a>. </p>
 <pre class="codeblock" id="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-B3B4A844-FA9B-54CC-A02C-90BB2388AFC8"><a name="GUID-22CCA5B5-D4AB-4ABC-94C6-CD85EC470238__GUID-B3B4A844-FA9B-54CC-A02C-90BB2388AFC8"><!-- --></a>// Implementation of the kernel extension's exported function
EXPORT_C void TExClientInterface::MyExAPI()
    {
    …
    ExController-&gt;MyExAPI();
    …
    }

LOCAL_C TInt halFunction(TAny* aPtr, TInt aFunction, TAny* a1, 
        TAny* a2)
    {
    DLcdPowerHandler* pH=(DLcdPowerHandler*)aPtr;
    return pH-&gt;HalFunction(aFunction,a1,a2);
    }

TInt DLcdPowerHandler::HalFunction(TInt aFunction, TAny* a1, 
TAny* a2)
    {
    ...
    switch(aFunction)
        {
        ...
        }
    }</pre>
 <p>When the user calls <a href="GUID-BD00E7FC-C234-3111-87A5-10F79EB0F2B8.html#GUID-BD00E7FC-C234-3111-87A5-10F79EB0F2B8__GUID-9454F1B2-D525-3D6D-A872-C6457CACD4FC"><span class="apiname">HAL::Set()</span></a> or <a href="GUID-BD00E7FC-C234-3111-87A5-10F79EB0F2B8.html#GUID-BD00E7FC-C234-3111-87A5-10F79EB0F2B8__GUID-573C49D6-7763-37AE-B2B2-4C8FB1327E21"><span class="apiname">HAL::Get()</span></a>,
it invokes the corresponding <samp class="codeph">halFunction()</samp> of the HAL function
group. </p>
</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-CB3A8650-751C-4DAA-9408-7AEB3C7FD41A.html" title="This section explains how to make a valid Symbian Platform driver.">Minimal Driver Requirements</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>