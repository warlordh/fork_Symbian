<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Testing the PRM PSL"/>
<meta name="abstract" content="This document describes using the test suite for the PRM."/>
<meta name="description" content="This document describes using the test suite for the PRM."/>
<meta name="DC.Relation" scheme="URI" content="GUID-4804B6E0-9199-5F3E-984A-4B00B3984E45.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3773A78D-F491-52EB-AA1D-201636497F28.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-4804B6E0-9199-5F3E-984A-4B00B3984E45.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2ECF13A1-9D56-5740-A09F-8267E6A45DD9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B1CE51BC-B452-5FC9-9C00-35447AF40671.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-66FD040B-133E-57CF-80DD-9369F62709C6.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E7F91A65-235D-589C-9A8C-0B207D19A24B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C8DF0CB0-92F4-5F9E-A8F1-7DE50954C4F1.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-66E5F769-1156-54CA-94BC-8912159A1240"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Testing the PRM PSL</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-66E5F769-1156-54CA-94BC-8912159A1240"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2399872 id2400380 id2400389 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html" title="EKA2 is the principal Hardware and Kernel Services module. It manages the CPU and memory resources of a phone, and provides an architecture for device drivers to manage other hardware resources.">Kernel Architecture (EKA2)</a> &gt; <a href="GUID-3773A78D-F491-52EB-AA1D-201636497F28.html" title="This topic describes how to implement a power controller in a base port.">Power Management Tutorials</a> &gt; <a href="GUID-4804B6E0-9199-5F3E-984A-4B00B3984E45.html" title="This tutorial describes the steps needed to successfully port the PRM for a particular device.">Porting the Power Resource Manager</a> &gt; </div>
<h1 class="topictitle1">Testing
the PRM PSL</h1>
<div><p>This document describes using the test suite for the PRM. </p>

<div class="section" id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-A009D3D3-BD1B-40B8-B39D-8F35AD5FCF1E"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-A009D3D3-BD1B-40B8-B39D-8F35AD5FCF1E"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>Use this test suite to ensure that your
Power Resource Manager implementation runs correctly. </p>
 <p><strong>Introduction</strong> </p>
 <p> <samp class="codeph">T_PRMACCTST</samp> is
a test application that verifies the resources registered with the PSL of
the PRM. For more information refer to the description of individual test
cases in <span class="filepath">e32test/resourceman/acctst/t_prmacctst.cpp</span>. </p>
 <p>The
following tasks are preformed by the test suite: </p>
 <ul>
<li id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-86D22263-7F34-5F98-A673-909C64F1B929"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-86D22263-7F34-5F98-A673-909C64F1B929"><!-- --></a><p>enumerate all registered
resources, </p>
 </li>

<li id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-82F19722-C930-55CA-B7DF-B10F23660F5E"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-82F19722-C930-55CA-B7DF-B10F23660F5E"><!-- --></a><p>check that resources
behave consistently with their properties, </p>
 </li>

<li id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-37BA8D2B-E226-55EE-99DE-B0DA34D2CD1C"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-37BA8D2B-E226-55EE-99DE-B0DA34D2CD1C"><!-- --></a><p>ensure that resources
are reset to their default level when not in use, </p>
 </li>

<li id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-6A399DB5-996B-503D-AE5B-F89797FB6722"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-6A399DB5-996B-503D-AE5B-F89797FB6722"><!-- --></a><p>ensure all actual resources
dependencies have been declared (only the extended version of the PRM allows
dependencies). </p>
 </li>

</ul>
 <p>To ensure that single-user resources are available to the test application, <samp class="codeph">T_PRMACCTST</samp> is
coupled with a kernel extension, <samp class="codeph">D_PRMACCTST</samp> that takes control
of such resources immediately after the PRM has been initialised. It then
releases the resources when the test application ends. </p>
 </div>

<div class="section" id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-99C0A3AE-5C14-4B6E-9623-FE536E259D08"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-99C0A3AE-5C14-4B6E-9623-FE536E259D08"><!-- --></a><h2 class="sectiontitle">Using the test suite</h2> <p>The instructions to run the
PRM acceptance test suite are as follows: </p>
 <a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-2C3603D2-1CFD-55AF-B2D1-9532A09FA6A3"><!-- --></a><ol id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-2C3603D2-1CFD-55AF-B2D1-9532A09FA6A3">
<li id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-90FBCCDF-C195-5007-AB19-C2910D7CD1AB"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-90FBCCDF-C195-5007-AB19-C2910D7CD1AB"><!-- --></a><p>build the test code
in <span class="filepath">e32test/resourceman/acctst</span>, </p>
 </li>

<li id="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-5DA609A8-64D1-5533-820D-2115B0412D8A"><a name="GUID-66E5F769-1156-54CA-94BC-8912159A1240__GUID-5DA609A8-64D1-5533-820D-2115B0412D8A"><!-- --></a><p>build a rom for H4HRP
of type <samp class="codeph">prmacctst</samp> in <span class="filepath">e32/rombuild</span>: </p>
 <p><kbd class="userinput">rom
-v=h4hrp -I=armv5 -b=urel -t=prmacctst</kbd> </p>
 <p>This command generates
a self-starting ROM. The test output is captured from the default debug port
of the device. </p>
 </li>

</ol>
 <p>To build a manual test ROM (so the test application does not run
automatically), use the <samp class="codeph">-d=MANUALROM</samp> option. The usual ESHELL
command prompt will be displayed and the test application can be run by calling <samp class="codeph">T_PRMACCTST</samp>. </p>
 <p> <strong>Note</strong>:
This test must be run with minimal required components because the test driver
is a kernel extension and takes control of all single-user resources during
its entry point. This test randomly changes the state of all the resources
between a minimum and maximum value. If there are any restrictions on a resources
state change (i.e. the resource state can be only be changed to a certain
value) then that resource should not be registered while running this test. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-4804B6E0-9199-5F3E-984A-4B00B3984E45.html" title="This tutorial describes the steps needed to successfully port the PRM for a particular device.">Porting the Power Resource Manager</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-2ECF13A1-9D56-5740-A09F-8267E6A45DD9.html" title="This tutorial describes how to port the Platform Specific Layer (PSL) of the Power Resource Manager (PRM) and how to modify clients, such as device drivers, to use the PRM framework.">Porting the
Power Resource Manager</a></div>
<div><a href="GUID-B1CE51BC-B452-5FC9-9C00-35447AF40671.html" title="This document describes how to write and use power resources.">Implement
the controllable power resources</a></div>
<div><a href="GUID-66FD040B-133E-57CF-80DD-9369F62709C6.html" title="This document describes how to implement the Platform Specific Layer for the Power Resource Manager.">Implement
the PSL for the target</a></div>
<div><a href="GUID-E7F91A65-235D-589C-9A8C-0B207D19A24B.html" title="This document describes how to port client drivers to use the PRM.">Port client
drivers to use the PRM</a></div>
<div><a href="GUID-C8DF0CB0-92F4-5F9E-A8F1-7DE50954C4F1.html" title="This document describes how to debug the PRM using internal macros.">Debugging
the PRM</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>