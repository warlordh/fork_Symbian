<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Managing a Dynamic Startup Configuration"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C1BEF313-ED22-5904-9648-740D069331ED.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8C42900-CA69-5F5B-914A-B085EBB45815.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-4FE55BA2-FEA3-5A4F-A329-7C76623C7E60.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C1BEF313-ED22-5904-9648-740D069331ED.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-70202CC9-BC49-539A-8255-4B0B9C24A702.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-623B375B-6EAD-53A2-AB4E-CCDF1BDB5057.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Managing a Dynamic Startup Configuration</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2520040 id2380079 id2380087 id2380102 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">Generic Application Support Guide</a> &gt; <a href="GUID-F8C42900-CA69-5F5B-914A-B085EBB45815.html">Application Launch Services</a> &gt; <a href="GUID-4FE55BA2-FEA3-5A4F-A329-7C76623C7E60.html">After Market Application Starter</a> &gt; <a href="GUID-C1BEF313-ED22-5904-9648-740D069331ED.html">AMA Starter Tutorial</a> &gt; </div>
<h1 class="topictitle1">Managing
a Dynamic Startup Configuration</h1>
<div>
<div class="section"><h2 class="sectiontitle">Introduction</h2> <p>Managing a Dynamic Startup Configuration
(DSC) corresponds to the process of <a href="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1.html#GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-29F02099-0371-5FF5-B6A1-7C035096ED68">adding</a>, <a href="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1.html#GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-E331B03E-28BA-567E-9E84-5E7DFFEEDCEC">modifying</a> and
removing items from a DSC. For example, a device creator can add an AMC (After
Market Component) to a DSC, which is required to be started at phone boot
time along with other AMCs. Another example can be a device creator wishing
to change the start up behavior of an AMC, so that it can start in the background. </p>
 <p>You
can use <a href="GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F.html"><span class="apiname">RDscStore</span></a> and <a href="GUID-54F2480A-07A1-3FA1-920D-5F1D3469C40B.html"><span class="apiname">CDscItem</span></a> to manage
a DSC. <a href="GUID-54F2480A-07A1-3FA1-920D-5F1D3469C40B.html"><span class="apiname">CDscItem</span></a> is dependant upon common startup classes <a href="GUID-90F95A8A-A901-3987-99ED-57F1A57F1C09.html"><span class="apiname">CStartupProperties</span></a>, <a href="GUID-CE6290FD-9E85-3587-851E-F50791556DCE.html"><span class="apiname">TStartupMethod</span></a>, <a href="GUID-117F3C1B-9E2D-34D2-9353-7CB8C9369D27.html"><span class="apiname">TStartupType</span></a> and <a href="GUID-60321D90-AC11-349A-9CA7-CDC962A63A07.html"><span class="apiname">TRestartAction</span></a>. </p>
 <p>Usage
of <a href="GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F.html"><span class="apiname">RDscStore</span></a> is straightforward. You need to create an
instance of <a href="GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F.html"><span class="apiname">RDscStore</span></a>, call <samp class="codeph">OpenL()</samp> and
use the functions as appropriate. Most of the functions leave with error codes,
rather than returning. The error code is typically <samp class="codeph">KErrNotReady</samp>,
if the DSC database is not set up, or the code returned by the encapsulated
database client. </p>
 <p>Note that <a href="GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F.html"><span class="apiname">RDscStore</span></a> is NOT derived
from <a href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html"><span class="apiname">RSessionBase</span></a>. </p>
 </div>

<div class="section"><h2 class="sectiontitle">Procedure</h2> <p id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-29F02099-0371-5FF5-B6A1-7C035096ED68"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-29F02099-0371-5FF5-B6A1-7C035096ED68"><!-- --></a><strong>Adding
an item to a DSC</strong> </p>
 <a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-03CFC3E5-19C7-5CCF-BC8B-9FA78BDB2AF4"><!-- --></a><ol id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-03CFC3E5-19C7-5CCF-BC8B-9FA78BDB2AF4">
<li id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-231AB326-E496-5F5F-940E-A85884A2FBB2"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-231AB326-E496-5F5F-940E-A85884A2FBB2"><!-- --></a><p>Create the DSC item
using <a href="GUID-54F2480A-07A1-3FA1-920D-5F1D3469C40B.html"><span class="apiname">CDscItem</span></a>. </p>
 <pre class="codeblock" id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-F193D641-FBA7-53EC-B736-B770B54343F6"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-F193D641-FBA7-53EC-B736-B770B54343F6"><!-- --></a>TUid        iDscUid;
iDscUid = TUid::Uid(KDefaultSymbianDsc);

//Create the instance
CDscItem* dscItem = CDscItem::NewL();
CleanupStack::PushL(dscItem);

dscItem-&gt;SetDscId(iDscUid);

//Define the name of the AMC    
_LIT( filename, "mypackage.exe"); 

//Arguments for the AMC
TPtrC    amaArgs;
...

//Set the file parameters for the AMC
dscItem-&gt;SetFileParamsL(filename, amaArgs);

//Set the start-up properties for the AMC
dscItem-&gt;SetStartupTypeL(TStartupType::EStartProcess);
dscItem-&gt;SetStartMethodL(TStartMethod::EFireAndForget);
dscItem-&gt;SetNoOfRetriesL(TNoOfRetries::ERetry0);

...

CleanupStack::PopAndDestroy(dscItem);</pre>
 </li>

<li id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-C5431C80-CBE7-5D12-B701-0C28F09FFFBC"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-C5431C80-CBE7-5D12-B701-0C28F09FFFBC"><!-- --></a><p>Add the DSC item to
the DSC using <a href="GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F.html#GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F__GUID-11BA9684-72EF-329F-B94B-223515E1133A"><span class="apiname">RDscStore::AddItemL()</span></a>. </p>
 <pre class="codeblock" id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-994924FF-9657-580F-AA2E-C0564868BA67"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-994924FF-9657-580F-AA2E-C0564868BA67"><!-- --></a>RDscStore    dscClient;
dscClient.OpenL();
CleanupClosePushL(dscClient);

...

dscClient.AddItemL(*dscItem);
CleanupStack::PopAndDestroy();</pre>
 </li>

</ol>
 <p id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-E331B03E-28BA-567E-9E84-5E7DFFEEDCEC"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-E331B03E-28BA-567E-9E84-5E7DFFEEDCEC"><!-- --></a><strong>Modifying an item
in a DSC</strong> </p>
 <a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-DF840BDC-1799-50F4-8BAB-89891FEC35AC"><!-- --></a><ol id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-DF840BDC-1799-50F4-8BAB-89891FEC35AC">
<li id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-F60BD2CA-F3C7-5CAA-97F0-64AE5810790F"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-F60BD2CA-F3C7-5CAA-97F0-64AE5810790F"><!-- --></a><p>Make changes to the
DSC item as per your requirement using the functions of <a href="GUID-54F2480A-07A1-3FA1-920D-5F1D3469C40B.html"><span class="apiname">CDscItem</span></a>. </p>
 <pre class="codeblock" id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-F48EBB29-4318-592E-ABF6-4B3D5A10DDA9"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-F48EBB29-4318-592E-ABF6-4B3D5A10DDA9"><!-- --></a>CDscItem* dscItem = CDscItem::NewL();
CleanupStack::PushL(dscItem);

//Change the start-up properties for the AMC
dscItem-&gt;SetStartupTypeL(TStartupType::EStartApp);
dscItem-&gt;SetStartMethodL(TStartMethod::EWaitForStart);
dscItem-&gt;SetNoOfRetriesL(TNoOfRetries::ERetry1);

...

CleanupStack::PopAndDestroy(dscItem);</pre>
 </li>

<li id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-C6592B4D-45CA-5034-8739-F659755AD5C2"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-C6592B4D-45CA-5034-8739-F659755AD5C2"><!-- --></a><p>Pass the updated DSC
item to the DSC using <a href="GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F.html#GUID-EB3CA81E-8684-3851-A556-1C91CAD3891F__GUID-9BB82550-B622-3777-BC4B-6966D4EC6995"><span class="apiname">RDscStore::UpdateItemL()</span></a>. </p>
 <pre class="codeblock" id="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-8EF684B4-29C4-50BA-9CE7-22BABB676666"><a name="GUID-E3941FAF-988E-5FB3-8E62-84E192E41EA1__GUID-8EF684B4-29C4-50BA-9CE7-22BABB676666"><!-- --></a>RDscStore    dscClient;
dscClient.OpenL();
CleanupClosePushL(dscClient);

...

dscClient.UpdateItemL(*dscItem);
CleanupStack::PopAndDestroy();</pre>
 </li>

</ol>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C1BEF313-ED22-5904-9648-740D069331ED.html">AMA Starter Tutorial</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-70202CC9-BC49-539A-8255-4B0B9C24A702.html"> After Market
Application Starter Overview</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-623B375B-6EAD-53A2-AB4E-CCDF1BDB5057.html">Creating
a Dynamic Startup Configuration</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>