<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Using Extended Interfaces"/>
<meta name="abstract" content="Framework developers define and publish extension interfaces to the existing interfaces used in the framework. Once an interface extension is published by the framework developer, plug-in developers implement the extension if required."/>
<meta name="description" content="Framework developers define and publish extension interfaces to the existing interfaces used in the framework. Once an interface extension is published by the framework developer, plug-in developers implement the extension if required."/>
<meta name="DC.Relation" scheme="URI" content="GUID-41D80358-473F-5B50-A09A-4F5601EAC4A9.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9E92EE30-F2E2-5F28-BB2A-391C09EC69D2.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-110A0151-5719-51BC-8506-C18BE57FB400.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-41D80358-473F-5B50-A09A-4F5601EAC4A9.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using Extended Interfaces</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2383459 id2383473 id2383529 id2383537 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html">Low Level Libraries and Frameworks</a> &gt; <a href="GUID-9E92EE30-F2E2-5F28-BB2A-391C09EC69D2.html">Plug-in Framework</a> &gt; <a href="GUID-110A0151-5719-51BC-8506-C18BE57FB400.html">Plug-in Framework Tutorials</a> &gt; <a href="GUID-41D80358-473F-5B50-A09A-4F5601EAC4A9.html">Framework Developer Tutorials</a> &gt; </div>
<h1 class="topictitle1">Using
Extended Interfaces</h1>
<div><p>Framework developers define and publish extension interfaces to
the existing interfaces used in the framework. Once an interface extension
is published by the framework developer, plug-in developers implement the
extension if required. </p>

<a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-D3DD03B6-79C0-5C7A-B263-A4AC2E50266E"><!-- --></a><ol id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-D3DD03B6-79C0-5C7A-B263-A4AC2E50266E"><li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-BA6F73F2-BA5C-5A2B-A405-D2FD99C06954"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-BA6F73F2-BA5C-5A2B-A405-D2FD99C06954"><!-- --></a><span/><br/>
 Identify the published instantiation and extended interface UIDs and
header files of the framework. 
</li>
<li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-27966E9C-33EF-5BC3-9E5E-FA3C68A60AFD"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-27966E9C-33EF-5BC3-9E5E-FA3C68A60AFD"><!-- --></a><span/><br/>
 Create a <a href="GUID-641A276D-F618-50CE-BA5A-658DCC26BAB5.html" title="The format of implementation project file is dependent on the version of the Symbian platform used. The differences basically reflect the introduction of platform security into Symbian OS v9.0 and later versions.">new
project file</a> (<span class="filepath">.mmp</span>) with <samp class="codeph">targettype</samp> variable
set as PLUGIN3. Allocate UIDs for the the plug-in implementations and plug-in
DLL (UID3) as shown in the code snippet below. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-080E8FC5-5114-5CBE-BF83-C7E4164CC0CC"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-080E8FC5-5114-5CBE-BF83-C7E4164CC0CC"><!-- --></a>TARGET         cimplementationclass.dll
TARGETTYPE     PLUGIN3
CAPABILITY    All -TCB

// PLUGIN3 recognition UID followed by the UID for this dll
UID 0x10009D93 0x10009E37
VENDORID 0x70000001

SOURCEPATH    ../src
SOURCE        cimplementationclass.cpp 

USERINCLUDE    ../src
SYSTEMINCLUDE     /epoc32/include

START RESOURCE    cimplementationclass.rss
TARGET cimplementationclass.rsc
END

LIBRARY     euser.lib
LIBRARY     ecom.lib
</pre>
 
</li>
<li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-E9B72208-C9EB-50C3-A5FE-849D34371314"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-E9B72208-C9EB-50C3-A5FE-849D34371314"><!-- --></a><span/><br/>
 Create a new resource file (<span class="filepath">.rss</span>) of <a href="GUID-9A9103E4-27B0-5CF3-855A-DCD44795A5C0.html" title="The properties of the implementation are published in a compiled resource file. This file is known as the registration resource file of the implementation and has a.rss extension. The plug-in framework reads the resource files to find the interface implementations available on the system. In case of an implementation collection, the collection has one registration resource file and the properties of all the implementations of the collection are described in the file.">format
version 3</a>. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-33EB82EB-1CD7-5213-9B74-3F760290795E"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-33EB82EB-1CD7-5213-9B74-3F760290795E"><!-- --></a>CImplementationClass.rss
#include &lt;ecom/registryinfov3.rh&gt;

RESOURCE REGISTRY_INFO theInfo
    {
    resource_format_version = RESOURCE_FORMAT_VERSION_3;
    dll_uid = 0x10009E37;
    interfaces = 
    {
    INTERFACE_INFO
        {
        instantiation_interface_uid = 0x10009DBB;
        implementations = 
        {
        IMPLEMENTATION_INFO
            {
            info_format = IMPLEMENTATION_INFO_RECORD_TYPE1; 
            implementation_uid = 0x10009E38;
            version_no = 1;
            display_name = "Extended Interface Example";
            default_data = {"Extended Interface Example||up to 255 chars", "Max. two strings allowed"};
            opaque_data = {"up to 255 chars", “max. 2 strings allowed”};
            extended_interfaces = {0x10009E44, 0x10009E45};
            flags = FLAG_ROM_ONLY;                    
            }    
        };
        }
    };
    }
</pre>
 
</li>
<li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-5D92F8AC-6440-5426-A79A-8D5CBE6D2E60"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-5D92F8AC-6440-5426-A79A-8D5CBE6D2E60"><!-- --></a><span/><br/>
 Implement the interfaces in the plug-in implementation source files. 
 Implementing an interface extension in a plug-in implementation can
be done in either of the two ways: 
<a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-3FCA938B-5515-5707-B583-08A398B138C3"><!-- --></a><ol type="a" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-3FCA938B-5515-5707-B583-08A398B138C3">
<li class="substepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-34A3E29D-0195-5B41-AAA9-F8A9EDF6BCA0"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-34A3E29D-0195-5B41-AAA9-F8A9EDF6BCA0"><!-- --></a><span/><br/>
  Inheritance: The instantiation interface object is also of the type
of the extended interface object. When a user wants to instantiate the extended
interface object, the implementation simply returns a re-cast of the instantiation
interface object. 
 The example below shows implementing an interface extension using inheritance. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-CE4895D9-14DB-55A5-8D61-36C4613DF453"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-CE4895D9-14DB-55A5-8D61-36C4613DF453"><!-- --></a>//Implementing an interface extension using multiple inheritance
class CImplementationClass : public CExampleInterface, public MExampleInterfaceExtended
{

public:
    static CImplementationClass* NewL();
    static TAny* GetExtendedInterfaceL(TAny* aInstantiationInterface,const TUid&amp; aExtendedInterfaceUid,TUint32&amp; aBitFlags,TAny*&amp; aReleaseObject);
    static void ReleaseExtendedInterface(TAny* aExtendedInterface, const TUid&amp; aExtendedInterfaceUid);

    ~ CImplementationClass() {}
    virtual void DoMethodL(); // from original interface
    virtual void DoMethodExtended();  //from MExampleInterfaceExtended
private:
    CImplementationClass() {}
};

</pre>
 
</li>

<li class="substepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-C9A0347A-1EC9-5D30-A6DF-57E0C121387E"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-C9A0347A-1EC9-5D30-A6DF-57E0C121387E"><!-- --></a><span/><br/>
   Realizing the extended interface as separate class and objects. When
users fetch the extended interface object, the implementation allocates a
new object. 
 The example below shows implementing an interface extension using realisation. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-99C45102-442C-56F5-8054-3C88C64FE1DE"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-99C45102-442C-56F5-8054-3C88C64FE1DE"><!-- --></a>// Implementing an interface extension using realization

class CImplementationClassExtended : public CBase, public MExampleInterfaceExtended2
{
public:
    static CImplementationClassExtended* NewL();
    ~ CImplementationClassExtended() {}
    virtual void DoMethodExtended2();  //from MExampleInterfaceExtended2
private:
    CImplementationClassExtended() {}
};
</pre>
 
</li>

</ol>

</li>
<li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-2E92FD5E-03E0-5587-B6D1-0CA7EEDBFA44"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-2E92FD5E-03E0-5587-B6D1-0CA7EEDBFA44"><!-- --></a><span/><br/>
 Implement <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-C7F147AC-6D77-3169-AAB4-B27262B4333B"><span class="apiname">REComSession::CreateImplementationL()</span></a>,<a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-760E4CCE-8E33-3B72-B143-380503F6ACC5"><span class="apiname">REComSession::GetExtendedInterfaceL()</span></a>,<a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-8F83D14E-F340-32B4-969C-5DC9E6EA1DB0"><span class="apiname">REComSession::ManuallyReleaseExtendedInterfaceL()</span></a> functions of the instantiation interface. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-FC783C9A-1990-5DDB-9266-6469B9558EE0"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-FC783C9A-1990-5DDB-9266-6469B9558EE0"><!-- --></a>TAny* CImplementationClass::GetExtendedInterfaceL(TAny* aInstantiationInterface,
const TUid&amp; aExtendedInterfaceUid,
TUint32&amp; aBitFlags,
TAny*&amp; aReleaseObject)
    {
    TAny* ret = NULL;
    aBitFlags &amp;= ~KReleaseRequiredMask; // clear release flag
    switch (aExtendedInterfaceUid.iUid)
    {
    case 0x10009E44: 
        {
            // release not required, so do not modify aBitFlags.
         // re-cast Instantiation object as Extended Interface object
        ret = static_cast&lt;MExampleInterfaceExtended *&gt; (static_cast&lt;CImplementationClass *&gt;(aObject));
        break;
        }    
    case 0x10009E45: 
        {
          CImplementationClassExtended *classExt = CImplementationClassExtended::NewL();
        aReleaseObject = classExt;
        aBitFlags |= KReleaseRequiredMask; // Indicate release is required
        // Multiple inheritance involved – Cbase and the M class. Must use
            // either dynamic_cast or static_cast to add offset to the base pointer       
        ret = static_cast&lt;MExampleInterfaceExtended2*&gt;(classExt);
        break;
           }                
    }
    return ret;
    }
</pre>
 
 The plug-in framework releases the extended interface object when the
user destroys the instantiation interface object. Alternatively, if the framework
wants to release the extended interface earlier, they can call the <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-8F83D14E-F340-32B4-969C-5DC9E6EA1DB0"><span class="apiname">REComSession::ManuallyReleaseExtendedInterfaceL()</span></a>  
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-A058A010-9875-52F6-ABF2-8B329F50B750"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-A058A010-9875-52F6-ABF2-8B329F50B750"><!-- --></a>void CImplementationClass::ReleaseExtendedInterface(TAny* aExtendedInterface, const TUid&amp; aExtendedInterfaceUid)
    {
    switch (aExtendedInterfaceUid.iUid)
    {
    case 0x10009E45:
        {
            // this Extended Interface object require release.
        CImplementationClassExtended* classExt = static_cast&lt;CImplementationClassExtended*&gt;(aReleaseObject);
        delete classExt;
        break;
        }                
    }
    }    
</pre>
 
 The aInstanceKey parameter is returned by <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-C7F147AC-6D77-3169-AAB4-B27262B4333B"><span class="apiname">REComSession::CreateImplementationL()</span></a>.
It identifies the instantiation interface object instance. The aExtendedInterfaceUid
parameter identifies the extended interface required. 
</li>
<li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-6E73075E-E907-5984-9571-D7A77FC2D05A"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-6E73075E-E907-5984-9571-D7A77FC2D05A"><!-- --></a><span/><br/>
 Export the instantiation functions into a TImplementationProxy3 table. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-7CFF8E49-3B6F-5DAB-883F-1347B907F77E"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-7CFF8E49-3B6F-5DAB-883F-1347B907F77E"><!-- --></a>const TImplementationProxy3 KImplementationTable[] =
    {
    IMPLEMENTATION_PROXY_ENTRY3(0x10009E38, CImplementationClass::NewL, CImplementationClass::GetExtendedInterfaceL,CImplementationClass::ReleaseExtenedInterface)
    };

EXPORT_C const TImplementationProxy3* ImplementationGroupProxy(TInt&amp; aTableCount)
    {
    aTableCount = sizeof(KImplementationTable) / sizeof(TImplementationProxy3);
    return KImplementationTable;
    }

</pre>
 
</li>
<li class="stepexpand" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-5790D794-A201-5E9F-AE2E-DC698878CCF5"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-5790D794-A201-5E9F-AE2E-DC698878CCF5"><!-- --></a><span/><br/>
 Export the release functions into a TImplementationProxy3 table. 
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-22DB44AF-EDE6-52C0-ADBE-216F95E3FB5C"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-22DB44AF-EDE6-52C0-ADBE-216F95E3FB5C"><!-- --></a>void CImplementationClass::ReleaseExtendedInterface(TAny* aExtendedInterface, const TUid&amp; aExtendedInterfaceUid)
    {
    switch (aExtendedInterfaceUid.iUid)
    {
    case 0x10009E45:
        {
            // this Extended Interface object require release.
        CImplementationClassExtended* classExt = static_cast&lt;CImplementationClassExtended*&gt;(aReleaseObject);
        delete classExt;
        break;
        }                
    }
    }    

</pre>
 
</li>
</ol>

<div class="section"><p>To instantiate and use an extended interface, the plug-in user
must: </p>
 <ul>
<li id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-A8A28B3D-D94E-5AC9-8C3F-275A4C8F89DE"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-A8A28B3D-D94E-5AC9-8C3F-275A4C8F89DE"><!-- --></a><p>Identify plug-ins that
support the desired interface extensions using <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-AE9D4F24-8554-3151-AAF3-D63F400821C4"><span class="apiname">REComSession::ListImplementationsL()</span></a>. </p>
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-987C54C2-F1AF-57C6-95DA-37F1572AD1B4"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-987C54C2-F1AF-57C6-95DA-37F1572AD1B4"><!-- --></a>IMPORT_C static void ListImplementationsL(TUid aInterfaceUid, 
RExtendedInterfacesArray&amp; aExtendedInterfaces,
    const TEComResolverParams&amp; aResolutionParameters,
    RImplInfoPtrArray&amp; aImplInfoArray);
</pre>
 <p>The “aInterfaceUid” parameter specifies the instantiation
interface. All of the implementations returned in “aImplInfoArray” support
all the extensions listed in the “aExtendedInterfaces” parameter. </p>
 </li>

<li id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-ED513B5A-9F51-5B5C-AB58-E961CAFEFD92"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-ED513B5A-9F51-5B5C-AB58-E961CAFEFD92"><!-- --></a><p>Select one from the
array and create an instantiation interface object. </p>
 </li>

<li id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-C4A2263B-08D1-5D44-99B2-840EE4849B35"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-C4A2263B-08D1-5D44-99B2-840EE4849B35"><!-- --></a><p>Call <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-760E4CCE-8E33-3B72-B143-380503F6ACC5"><span class="apiname">REComSession::GetExtendedInterfaceL()</span></a> API
to get an extended interface object. </p>
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-B9EE4751-EA4B-5BB6-A6DA-3083FE0CCE36"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-B9EE4751-EA4B-5BB6-A6DA-3083FE0CCE36"><!-- --></a>IMPORT_C static TAny* GetExtenedInterfaceL(const TUid&amp; aInstanceKey, 
const TUid&amp; aExtendedInterfaceUid);
</pre>
 <p>The aInstanceKey parameter identifies the instantiation interface
object returned by <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-1344F049-81C4-3D17-AF46-8B5584680ADB__GUID-C7F147AC-6D77-3169-AAB4-B27262B4333B"><span class="apiname">REComSession::CreateImplementationL()</span></a>. </p>
 </li>

</ul>
 <p>The example code depicts the above steps: </p>
 <pre class="codeblock" id="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-5D0D622D-3CA6-5CDB-B035-F68A580949AA"><a name="GUID-50E6EEB5-45D2-5B95-BDEA-5615F586DA9C__GUID-5D0D622D-3CA6-5CDB-B035-F68A580949AA"><!-- --></a>
const TUid KExampleInterfaceUid = {0x10009DBB}; // the Instantiation Interface
const TUid KExtendedInterfaceUid1 = {0x10009E44};
const TUid KExtendedInterfaceUid2 = {0x10009E45};

// Set up extended interfaces UID list which form part of the resolution criteria.
RArray&lt;TUid&gt; extendedInterfaces;
CleanupClosePushL(extendedInterfaces);
extendedInterfaces.AppendL(KExtendedInterfaceUid1);
extendedInterfaces.AppendL(KExtendedInterfaceUid2);

// set up resolve parameter
_LIT8(KExampleImplementationData,"Extended Interface Example");
TEComResolverParams ResolverParams;
ResolverParams.SetDataType(KExampleImplementationData());
ResolverParams.SetGenericMatch(ETrue);

TUid instanceKey;
CExampleInterface* instantiateIf = static_cast&lt;CExampleInterface*&gt;(
    REComSession::CreateImplementationL(KExampleInterfaceUid,
                                       extendedInterfaces,
                                       instanceKey,
                                       ResolverParams) );
CleanupStack::PopAndDestroy(&amp;extendedInterfaces);

CleanupStack::PushL(instantiateIf);
// May want to TRAP here if KErrNotSupported is handled, i.e. extension optional
MExampleInterfaceExtended2* ext2 = static_cast&lt;MExampleInterfaceExtended2*&gt;(
  REComSession::GetExtendedInterfaceL(instanceKey, KExtendedInterfaceUid2));

instantiateIf-&gt;DoMethodL();  // access old interface function
ext2-&gt;DoMethodExtended2();   // access extension function

// Calling ManuallyReleaseExtendedInterface is optional. Do this
// if want to release extended object early.
REComSession::ManuallyReleaseExtendedInterface(instanceKey,KExtendedInterfaceUid2);

REComSession::DestroyedImplementation(instanceKey);
CleanupStack::PopAndDestroy(instantiateIf);
</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-41D80358-473F-5B50-A09A-4F5601EAC4A9.html">Framework Developer Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>