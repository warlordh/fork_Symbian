<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Writing a Client MTM"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7FCDAC24-BFEF-590B-B569-04AA262EBF06.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B394A824-8745-505E-8429-8B9B6D418387.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DD27A452-8B0F-5C6D-A2E6-FC21145468B6.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7FCDAC24-BFEF-590B-B569-04AA262EBF06.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-59217FA7-3078-53CA-88B3-78D6FB788271.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E180D222-CC4F-5007-93FC-C339BBE708BC.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Writing a Client MTM</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82"><a name="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2404348 id2404397 id2404434 id2404652 id2404690 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">Messaging Middleware Guide</a> &gt; <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">Messaging Framework</a> &gt; <a href="GUID-B394A824-8745-505E-8429-8B9B6D418387.html">Message Server and Store</a> &gt; <a href="GUID-DD27A452-8B0F-5C6D-A2E6-FC21145468B6.html">Message Server and Store Tutorials</a> &gt; <a href="GUID-7FCDAC24-BFEF-590B-B569-04AA262EBF06.html">MTM Implementation Tutorial</a> &gt; </div>
<h1 class="topictitle1">Writing
a Client MTM</h1>
<div><div><p>This section describes the initial steps to be performed to write
a Client MTM. It does not explain the implementation of all <a href="GUID-E180D222-CC4F-5007-93FC-C339BBE708BC.html">Client
MTM functionality</a>. You can refer the <a href="GUID-232E2D33-8BC1-5CC3-A4DF-2C99900E1083.html">Client
MTM example</a> for detailed implementation steps </p>
</div>

<div class="section"><p>The main function of the Client MTM is to load the entry currently
referred to by the MTM’s context, and save it once any changes have been made
to it. An individual entry’s store is represented by the <a href="GUID-8CB90FA2-A6CF-3FA2-81FF-7D22EFD9C2CE.html"><span class="apiname">CMsvStore</span></a> class.
Finally, after any changes are made to a store that stores the message body, <a href="GUID-8CB90FA2-A6CF-3FA2-81FF-7D22EFD9C2CE.html#GUID-8CB90FA2-A6CF-3FA2-81FF-7D22EFD9C2CE__GUID-F1D4FE2A-8BB9-3CC2-9C30-DC053848A6B5"><span class="apiname">CMsvStore::CommitL()</span></a> must
be called to commit those changes. </p>
 </div>

<a name="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-6A78327C-5D21-5913-9404-7153B2002264"><!-- --></a><ol id="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-6A78327C-5D21-5913-9404-7153B2002264"><li class="stepexpand" id="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-BC043CD5-E41A-5534-A2ED-0C6003723004"><a name="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-BC043CD5-E41A-5534-A2ED-0C6003723004"><!-- --></a><span/><br/>
 Derive a class from the <a href="GUID-177AF50B-14EF-3C45-AE22-1FEE5678261D.html"><span class="apiname">CBaseMtm</span></a> class. 
</li>
<li class="stepexpand" id="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-7A80C910-9012-57FF-8A7A-4A63631BBE33"><a name="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-7A80C910-9012-57FF-8A7A-4A63631BBE33"><!-- --></a><span/><br/>
 Register it using the <a href="GUID-0D5D7FAC-4F14-3046-92FB-873B8350FF4C.html"><span class="apiname">CRegisteredMtmDll</span></a> parameter. 
</li>
<li class="stepexpand" id="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-B0606F56-C9D4-532F-B866-2D2AF54EC71C"><a name="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-B0606F56-C9D4-532F-B866-2D2AF54EC71C"><!-- --></a><span/><br/>
 Create a session with Message Server using the <a href="GUID-2DA04D96-F0AD-3FDC-9E36-1C27D889AF4B.html"><span class="apiname">CMsvSession</span></a> parameter. 
</li>
<li class="stepexpand" id="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-72F50006-EA9B-5BF3-8A8F-BC51C4434F9D"><a name="GUID-1E2DB50A-D8D7-595D-8448-77F057655E82__GUID-72F50006-EA9B-5BF3-8A8F-BC51C4434F9D"><!-- --></a><span/><br/>
 Create the <a href="GUID-AF724192-6580-3DE3-9287-3A005C0AA932.html"><span class="apiname">CMsvOperation</span></a> -based classes for performing
the different operations that are required for your Messaging protocol. See <a href="GUID-E180D222-CC4F-5007-93FC-C339BBE708BC.html#GUID-E180D222-CC4F-5007-93FC-C339BBE708BC__GUID-6DD0912E-1E82-5BAD-889C-5FA79E5E800C">Client-side
operations</a>. 
</li>
</ol>

<div class="example"><h2 class="sectiontitle">Client MTM example</h2><pre class="codeblock">// 
// CTextMtmClient
//      Implements CBaseMtm to provide Client-side Text MTM     
//

EXPORT_C CTextMtmClient* CTextMtmClient::NewL(CRegisteredMtmDll&amp; aRegisteredMtmDll, CMsvSession&amp; aMsvSession)
// Factory function
    {
    CTextMtmClient* self = new (ELeave) CTextMtmClient(aRegisteredMtmDll,aMsvSession);
    CleanupStack::PushL(self);
    self-&gt;ConstructL();
    CleanupStack::Pop();
    return self;
    }</pre>
 <p>For more details on implementing all Client
MTM functions, see <a href="GUID-232E2D33-8BC1-5CC3-A4DF-2C99900E1083.html">example
code</a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-7FCDAC24-BFEF-590B-B569-04AA262EBF06.html">MTM Implementation Tutorial</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-59217FA7-3078-53CA-88B3-78D6FB788271.html">MTM overview</a></div>
<div><a href="GUID-E180D222-CC4F-5007-93FC-C339BBE708BC.html">Client MTM</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>