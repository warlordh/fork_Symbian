<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Using Sensor Channels APIs"/>
<meta name="abstract" content="The Sensor Channel establishes a data exchange connection between the sensor framework and hardware using the sensor channel APIs."/>
<meta name="description" content="The Sensor Channel establishes a data exchange connection between the sensor framework and hardware using the sensor channel APIs."/>
<meta name="DC.Relation" scheme="URI" content="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-44FDDA27-1A5D-42B5-8DE0-D9E88EB75C93.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BA0D9DA9-3B54-4964-A4D6-9ADA4DEB7231.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-83630B57-D842-4B60-8AF0-D2965251DE29.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0CA7F22E-59D7-4D65-9D6C-735E4E0F0454.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E93EE459-8CF4-42A1-B06C-E78E56FD25A0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-09E44FE5-6BEE-49FF-8BBF-CBB3C066EE10.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-60EE22AA-402D-4FC2-9AD1-B3AEF822E8DC.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E3ADCC42-ACFC-49FC-88FF-8196CE61014B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using Sensor Channels APIs</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2519078 id2519748 id2519763 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-F8C8CE42-E7C9-5AFC-86BC-B78F677F1B05.html" title="Device Services provides device specific services to control phone resources and establish remote controlled connection with the external devices. It also monitors the phone resources and provides stage shutdown mechanism.">Device Services Guide</a> &gt; <a href="GUID-E3ADCC42-ACFC-49FC-88FF-8196CE61014B.html" title="The Sensors Services collection provides Sensors Framework, which allows clients to request and receive sensor information from the different sensors on a device.">Sensor Services</a> &gt; <a href="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html" title="Sensors Framework provides a framework for creating plug-ins and connecting client applications with the sensor hardware.">Sensors Framework</a> &gt; </div>
<h1 class="topictitle1">Using
Sensor Channels APIs</h1>
<div><p>The Sensor Channel establishes a data exchange connection between
the sensor framework and hardware using the sensor channel APIs.</p>

<a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-12-1-11-1-1-8-1-4-1-5-1-3-1"><!-- --></a><ol id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-12-1-11-1-1-8-1-4-1-5-1-3-1"><li class="stepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-12-1-11-1-1-8-1-4-1-5-1-3-1-1"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-12-1-11-1-1-8-1-4-1-5-1-3-1-1"><!-- --></a><span>Include the library <strong>SensrvClient.lib</strong> in
your <strong>.mmp</strong> file.</span>
</li>
<li class="stepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-4F637EBD-BD56-44FA-A984-E93CC4B2B3B6"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-4F637EBD-BD56-44FA-A984-E93CC4B2B3B6"><!-- --></a><span>Include the following
header files, as they are required for accessing sensor channels regardless
of the channel type: </span>
 <ul>
<li><p>sensrvchannel.h</p>
</li>

<li><p>sensrvchannelinfo.h</p>
</li>

<li><p>sensrvtypes.h</p>
</li>

<li><p>sensrvchannelfinder.h</p>
</li>

<li><p>sensrvdatalistener.h</p>
</li>

</ul>
<p>In addition to these, include the
necessary header files based on the type of channel to be used. For information
about channel-specific header files, see <a href="GUID-F1935106-C730-4C64-A19A-0FC04F0E7121.html">Types
of Sensor Channels</a>.</p>

</li>
<li class="stepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-F5BC52B6-67DD-4F59-889B-C5DE4C69029B"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-F5BC52B6-67DD-4F59-889B-C5DE4C69029B"><!-- --></a><span>Retrieve details
about the required sensor channel. For details. see <a href="GUID-44FDDA27-1A5D-42B5-8DE0-D9E88EB75C93.html" title="You can retrieve a list of sensor channels that are available for a particular sensor type. Once you get the list of sensor channels that are active, you can perform any required operations such as configuring sensor channel properties, controlling sensor channels and so on.">Querying
for Sensor Channels</a>.</span>
</li>
<li class="stepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-FBBD3A8B-F240-4DC0-B516-3A51FDD86A88"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-FBBD3A8B-F240-4DC0-B516-3A51FDD86A88"><!-- --></a><span>Connect to the sensor
by opening a connection with the sensor channel.</span>
<a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-C9E5B9FC-C637-4DEB-AAAF-E38C6CD9A18A"><!-- --></a><ol type="a" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-C9E5B9FC-C637-4DEB-AAAF-E38C6CD9A18A">
<li class="substepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-CA2CFF9C-3168-4060-AC39-8CB6FBA4BCA2"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-CA2CFF9C-3168-4060-AC39-8CB6FBA4BCA2"><!-- --></a><span>Create an instance
of <samp class="codeph">CSensrvChannel</samp> and specify the instance of <samp class="codeph">TSensrvChannelInfo</samp> returned
by <a href="GUID-5F108D03-C8A6-3EF9-B103-2E8916633602.html#GUID-5F108D03-C8A6-3EF9-B103-2E8916633602__GUID-E58BAF1B-57AA-3E85-A4F9-8C6C29043FBD"><span class="apiname">CSensrvChannelFinder::FindChannelsL()</span></a>, as a parameter
in the <samp class="codeph">NewL()</samp> constructor.</span>
 <pre class="codeblock"> CSensrvChannel* sensorChannel;
 sensorChannel = CSensrvChannel::NewL(channelInfoList[0]);// channelInfoList is
//   returned by the CSensrvChannelFinder::FindChannelsL()funtion</pre>

</li>

<li class="substepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-30E6033F-E316-4BDB-AF22-2369463DF709"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-30E6033F-E316-4BDB-AF22-2369463DF709"><!-- --></a><span>Open the sensor
channel using <a href="GUID-22DC917F-D833-3531-AB2D-A6E2D52EF844.html#GUID-22DC917F-D833-3531-AB2D-A6E2D52EF844__GUID-277A4940-2E5E-3E8E-AB61-552CD2375F3C"><span class="apiname">CSensrvChannel::OpenChannelL()</span></a> function.</span>
 <pre class="codeblock">channel-&gt;OpenChannelL();</pre>

</li>

</ol>

</li>
<li class="stepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-7A414271-040C-4107-B047-9416747C66A6"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-7A414271-040C-4107-B047-9416747C66A6"><!-- --></a><span>Perform any of the
following operations:</span>
 <ul>
<li><a href="GUID-BA0D9DA9-3B54-4964-A4D6-9ADA4DEB7231.html" title="You can implement a data listener to receive data from the sensors. Based on the data received, you can perform specific actions on the Symbian device. For example, if you receive information from the sensor about the distance between the device and the user then based on this information, you can disable or enable the loudspeaker mode on the Symbian device.">Receive data from
sensors</a></li>

<li><a href="GUID-09E44FE5-6BEE-49FF-8BBF-CBB3C066EE10.html" title="The sensor channel APIs enable you to receive notifications when a sensor channel is added or removed. This ensures that you are informed of changes to sensor channels whenever there is a change. For example, you can receive notifications when a specific proximity sensor channel is added.">Listen for channel
changes</a></li>

<li><a href="GUID-83630B57-D842-4B60-8AF0-D2965251DE29.html" title="A sensor channel is associated with properties such as channel availability status, data transmission rate, data format and so on. Also, each field in the data type supplied by a sensor channel can have its own properties. The channel properties can be retrieved using the CSensrvChannel::GetPropertyL() and CSensrvChannel::GetAllPropertiesL() functions.">Retrieve channel
properties</a></li>

<li><a href="GUID-0CA7F22E-59D7-4D65-9D6C-735E4E0F0454.html" title="The channel properties can be configured using the CSensrvChannel::SetProperty() function.">Set channel properties</a></li>

<li><a href="GUID-E93EE459-8CF4-42A1-B06C-E78E56FD25A0.html" title="The sensor channel APIs enable the client applications to be notified about the changes to properties associated with a sensor channel.">Listen for channel
property changes</a></li>

<li><a href="GUID-60EE22AA-402D-4FC2-9AD1-B3AEF822E8DC.html" title="Conditional listening enables you to receive sensor data feeds based on a specific condition. For example, you can choose to receive sensor feeds that are only movement specific.">Receive channel
data based on conditions</a></li>

</ul>

</li>
<li class="stepexpand" id="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-61840C55-476C-4DC3-A946-A440330B9DE5"><a name="GUID-4B709839-8EEF-4AD2-9868-9AF0176B1E5B__GUID-61840C55-476C-4DC3-A946-A440330B9DE5"><!-- --></a><span>Close the channel.</span>
 <pre class="codeblock">channel-&gt;CloseChannel();</pre>
<div class="important"><span class="importanttitle">Important:</span>  A
channel must be closed when not required, as it reduces power consumption
of the Symbian device. An open sensor channel keeps the device processor active
each time data arrives. Therefore, the processor does not change to idle state
even when the device user is not performing any operations on the device.</div>

</li>
</ol>

</div>
<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="GUID-44FDDA27-1A5D-42B5-8DE0-D9E88EB75C93.html">Querying for Sensor Channels</a></strong><br/>
You can retrieve a list of sensor channels that are available for a particular sensor type. Once you get the list of sensor channels that are active, you can perform any required operations such as configuring sensor channel properties, controlling sensor channels and so on.</li>
<li class="ulchildlink"><strong><a href="GUID-BA0D9DA9-3B54-4964-A4D6-9ADA4DEB7231.html">Receiving Data from Sensors</a></strong><br/>
You can implement a data listener to receive data from the sensors. Based on the data received, you can perform specific actions on the Symbian device. For example, if you receive information from the sensor about the distance between the device and the user then based on this information, you can disable or enable the loudspeaker mode on the Symbian device.</li>
<li class="ulchildlink"><strong><a href="GUID-83630B57-D842-4B60-8AF0-D2965251DE29.html">Retrieving Channel Properties</a></strong><br/>
A sensor channel is associated with properties such as channel availability status, data transmission rate, data format and so on. Also, each field in the data type supplied by a sensor channel can have its own properties. The channel properties can be retrieved using the <samp class="codeph">CSensrvChannel::GetPropertyL()</samp> and <samp class="codeph">CSensrvChannel::GetAllPropertiesL()</samp> functions.</li>
<li class="ulchildlink"><strong><a href="GUID-0CA7F22E-59D7-4D65-9D6C-735E4E0F0454.html">Setting Channel Properties</a></strong><br/>
The channel properties can be configured using the <samp class="codeph">CSensrvChannel::SetProperty()</samp> function.</li>
<li class="ulchildlink"><strong><a href="GUID-E93EE459-8CF4-42A1-B06C-E78E56FD25A0.html">Listening for Property Changes</a></strong><br/>
The sensor channel APIs enable the client applications to be notified about the changes to properties associated with a sensor channel.</li>
<li class="ulchildlink"><strong><a href="GUID-09E44FE5-6BEE-49FF-8BBF-CBB3C066EE10.html">Listening for Channel Changes</a></strong><br/>
The sensor channel APIs enable you to receive notifications when a sensor channel is added or removed. This ensures that you are informed of changes to sensor channels whenever there is a change. For example, you can receive notifications when a specific proximity sensor channel is added.</li>
<li class="ulchildlink"><strong><a href="GUID-60EE22AA-402D-4FC2-9AD1-B3AEF822E8DC.html">Receiving Channel Data based on Conditions</a></strong><br/>
Conditional listening enables you to receive sensor data feeds based on a specific condition. For example, you can choose to receive sensor feeds that are only movement specific.</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-9102DB10-3B93-4E79-9125-25791CEEBEFB.html" title="Sensors Framework provides a framework for creating plug-ins and connecting client applications with the sensor hardware.">Sensors Framework</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>