<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MFdcInterfaceV1"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-F8B74E22-4DE3-383D-9FF9-7CAB4DD7E9DF"/>

<title>MFdcInterfaceV1</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-F8B74E22-4DE3-383D-9FF9-7CAB4DD7E9DF"><a name="GUID-F8B74E22-4DE3-383D-9FF9-7CAB4DD7E9DF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2425855 id2425860 id2425865 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MFdcInterfaceV1 Class Reference</h1>
	<table class="signature"><tr><td>class MFdcInterfaceV1</td></tr></table><div class="section"><div>
			<p>Mixin for the FDC API. </p>

		</div></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-A7C0B157-309C-32EF-B661-3129490E2FB6">Mfi1DeviceDetached</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a>)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-E36041D9-0711-3621-B2AA-C2C3E713194E">Mfi1NewFunction</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a>, const <a href="GUID-399F3F71-FF53-3D9A-9A9A-0E1B20F4B21A.html">TArray</a>&lt; <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a> &gt; &amp;, const <a href="GUID-F1643307-2D53-3DEC-944D-42E330EAF56C.html">TUsbDeviceDescriptor</a> &amp;, const <a href="GUID-B0C1EDC7-DB16-324A-BC5B-E2A3F7FA022E.html">TUsbConfigurationDescriptor</a> &amp;)</td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-A7C0B157-309C-32EF-B661-3129490E2FB6"><a name="GUID-A7C0B157-309C-32EF-B661-3129490E2FB6"><!-- --></a>
		<h2 class="topictitle2">Mfi1DeviceDetached(TUint)</h2>
		<table class="signature"><tr><td>void</td><td>Mfi1DeviceDetached</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a></td><td>aDeviceId</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Called when a device is detached. The device is one of those which have previously been notified to the Function Driver in a Mfi1NewFunction call. Any RUsbInterface handles which were opened as a result of the corresponding earlier Mfi1NewFunction call should be closed as they will be useless.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a> aDeviceId</td><td>This serves to identify the device which has disappeared. This will be the device ID given in a previously completed Mfi1NewFunction call.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-E36041D9-0711-3621-B2AA-C2C3E713194E"><a name="GUID-E36041D9-0711-3621-B2AA-C2C3E713194E"><!-- --></a>
		<h2 class="topictitle2">Mfi1NewFunction(TUint, const TArray&lt; TUint &gt; &amp;, const TUsbDeviceDescriptor &amp;, const TUsbConfigurationDescriptor &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>Mfi1NewFunction</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a></td><td>aDeviceId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-399F3F71-FF53-3D9A-9A9A-0E1B20F4B21A.html">TArray</a>&lt; <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a> &gt; &amp;</td><td>aInterfaces,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-F1643307-2D53-3DEC-944D-42E330EAF56C.html">TUsbDeviceDescriptor</a> &amp;</td><td>aDeviceDescriptor,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-B0C1EDC7-DB16-324A-BC5B-E2A3F7FA022E.html">TUsbConfigurationDescriptor</a> &amp;</td><td>aConfigurationDescriptor</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Called when a device is attached.</p>

				<p>The Function Driver Framework has determined that this Function Driver is the most suitable to drive at least one of the interfaces in the device's selected configuration.</p>

				<p>Each call to this method represents an attempt by the Function Driver Framework to get the Function Driver Controller to take ownership of interfaces (exactly one Function) on the device.</p>

				<p>Not all the interfaces contained may be relevant to this Function Driver. Some interfaces may be relevant to this Function Driver, but should *not* be claimed in this call, as described below.</p>

				<p>The device's entire device descriptor and configuration descriptor are given.</p>

				<p>The Function Driver Framework provides a collection (aInterfaces) of interfaces which it is offering to the Function Driver Controller. The Function Driver Controller MUST take ownership of the first of these by calling <a href="GUID-C802273A-F9F2-3E14-93E6-F76DF0DBB946.html#GUID-746E81DC-ECD1-3A87-8EDA-DF774F56CEC5">MFdcPluginObserver::TokenForInterface</a> (the Function Driver Controller was selected by the Function Driver Framework on the basis of its default_data field matching this particular interface). The Function Driver Controller MUST also take ownership of as many following interfaces as make up a single Function as defined by the relevant USB Class, again by calling <a href="GUID-C802273A-F9F2-3E14-93E6-F76DF0DBB946.html#GUID-746E81DC-ECD1-3A87-8EDA-DF774F56CEC5">MFdcPluginObserver::TokenForInterface</a> for them.</p>

				<p>The Function Driver Controller may examine interface descriptors for the interfaces it is being offered using the bInterfaceNumber items in aInterfaces, and the <a href="GUID-B0C1EDC7-DB16-324A-BC5B-E2A3F7FA022E.html#GUID-B0C1EDC7-DB16-324A-BC5B-E2A3F7FA022E">TUsbConfigurationDescriptor</a> given (aConfigurationDescriptor).</p>

				<p>Once exactly one Function has been claimed, the Function Driver Controller may return from this method. The Function Driver Framework does not make further attempts to load Function Drivers for the interfaces that have been claimed, whether an error is returned or not. If an error is returned, then (a) the FDF will send a driver loading error to USBMAN, and (b) the FDC must not have opened ANY RUsbInterfaces as a result of this call to Mfi1NewFunction. It is important for the Function Driver Controller to claim all the interfaces it should, even if it finds out early on that it won't be able to handle the Function for environmental or other reasons. The FDC may also return an error indicating that the Class-specific descriptors are incorrectly formatted.</p>

				<p>The FD is not required to open RUsbInterface handles during Mfi1NewFunction. If it does, then it can pass any failure back as a return value to Mfi1NewFunction and this will be relayed to USBMAN as a driver loading error. If it does not, then the FD must itself take responsibility for relaying relevant failures to the user. (This is in aid of the 'no silent failures' requirement.)</p>

				<p>This method may be called zero or more times for each device attached, depending on the interfaces present in the device's active configuration and on the other FDs present on the phone. If this function is called (and returns KErrNone) one or more times on a particular FDC, then Mfi1DeviceDetached will be called exactly once when the device is detached. If on device attachment this function is called one or more times for a particular FDC, and each time the FDC returns an error, then no device detachment notification will be given to that FDC. Hence any RUsbInterface handles successfully opened in a call to this function should be cleaned up immediately if the function returns error.</p>

				<p>
					<a href="GUID-C802273A-F9F2-3E14-93E6-F76DF0DBB946.html#GUID-746E81DC-ECD1-3A87-8EDA-DF774F56CEC5">MFdcPluginObserver::TokenForInterface</a>.</p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a> aDeviceId</td><td>This is the ID of the new device. This identifier is private between the Function Driver Framework and the Function Driver. Its significance is to identify a device when it is removed (see Mfi1DeviceDetached). It is not equivalent to the device address or to anything else. </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-399F3F71-FF53-3D9A-9A9A-0E1B20F4B21A.html">TArray</a>&lt; <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint</a> &gt; &amp; aInterfaces</td><td>A collection of interface numbers (bInterfaceNumber) which are being offered to the Function Driver Controller. The Function Driver Controller uses items in this array in calls to MFdcPluginObserver::TokenForInterface. Ownership of the array is retained by the FDF. </td></tr><tr><td class="parameter">const <a href="GUID-F1643307-2D53-3DEC-944D-42E330EAF56C.html">TUsbDeviceDescriptor</a> &amp; aDeviceDescriptor</td><td>The device descriptor of the device. Ownership is retained by the FDF. </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-B0C1EDC7-DB16-324A-BC5B-E2A3F7FA022E.html">TUsbConfigurationDescriptor</a> &amp; aConfigurationDescriptor</td><td>The selected configuration descriptor of the device. Ownership is retained by the FDF. </td></tr></table></div>

	</div>

	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>