<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Optional Features Notification API"/>
<meta name="abstract" content="This document details linkage to the notification API and how to subscribe for notification of feature changes."/>
<meta name="description" content="This document details linkage to the notification API and how to subscribe for notification of feature changes."/>
<meta name="DC.Relation" scheme="URI" content="GUID-9B32E6D3-D8D2-5353-9491-7E94D95D00EB.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0CA63AEB-9A80-51C6-AE7F-E747D6B3B789.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-9B32E6D3-D8D2-5353-9491-7E94D95D00EB.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B01EDE29-0861-52B0-97BE-8B41E580817F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-747869DD-ECD1-5515-B876-0D7D753B1CD9.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F55EAA3A-5D30-5983-9053-7C3935D99802.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Optional Features Notification API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2859830 id2859850 id2860064 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html">Feature Management</a> &gt; <a href="GUID-0CA63AEB-9A80-51C6-AE7F-E747D6B3B789.html" title="The Feature Manager is used to customise software by manipulating feature flags.">Feature Manager</a> &gt; <a href="GUID-9B32E6D3-D8D2-5353-9491-7E94D95D00EB.html">Feature Registry</a> &gt; </div>
<h1 class="topictitle1">Optional
Features Notification API</h1>
<div><p>This document details linkage to the notification API and how to
subscribe for notification of feature changes. </p>

<div class="section" id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-55F2A846-8A70-5F4D-B297-7678F82B56DC"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-55F2A846-8A70-5F4D-B297-7678F82B56DC"><!-- --></a><h2 class="sectiontitle">Interface class
and linkage</h2> <p>A Notify API is provided by the <a href="GUID-4A0F7FCB-C3ED-3F0E-AB1D-5D96D5625595.html"><span class="apiname">RFeatureRegistryNotify</span></a> class,
declared in <span class="filepath">featreg.h</span>, supplied by <span class="filepath">featreg.dll</span> and
linked through <span class="filepath">featreg.lib</span>. </p>
 </div>

<div class="section" id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-5C18F9BD-DA86-5DD3-8286-6B3097869BA3"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-5C18F9BD-DA86-5DD3-8286-6B3097869BA3"><!-- --></a><h2 class="sectiontitle">Subscribing
for notification of feature changes</h2> <p>The <a href="GUID-4A0F7FCB-C3ED-3F0E-AB1D-5D96D5625595.html"><span class="apiname">RFeatureRegistryNotify</span></a> class
has the following member functions that allow you to subscribe for notification
of changes in the Feature Registry: </p>
 <pre class="codeblock" id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-55B5F119-E275-5105-9B32-61ABFA3C927A"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-55B5F119-E275-5105-9B32-61ABFA3C927A"><!-- --></a>inline RFeatureRegistryNotify();
TInt Open();
void Subscribe(TRequestStatus &amp;aNotifyStatus);
void Cancel();
void Close();
    </pre>
 <p>To use the API requires an instance of the <samp class="codeph">RFeatureRegistryNotify</samp> class
to be Opened and Subscribed to. It will usually be employed in Active Objects
in an Active Scheduler. At any time while the instance is open, call <a href="GUID-B61994E7-B88B-38FE-86AE-1B9834F1816D.html"><span class="apiname">Cancel()</span></a> to
ensure the object is not subscribed for notification. If it previously was
subscribed, the asynchronous <a href="GUID-D7A5E7E3-5EA0-3DBC-A34A-072E4705930D.html"><span class="apiname">Subscribe()</span></a> request is completed
with <a href="GUID-6F4A88DA-F54E-3848-9C32-942D6F5F4F3E.html"><span class="apiname">KErrCancel</span></a>. </p>
 <p>When a <samp class="codeph">Subscribe()</samp> request
completes successfully, will know that the Feature Registry has changed. You
must re-query the features you are interested in, to determine whether the
change affected affects you. </p>
 <p>To ensure changes are not missed, always
re-subscribe before querying the Feature Registry. </p>
 <p> <strong>Note: </strong>  </p>
 <ul>
<li id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-FF101FF0-0330-548D-9B4B-7663D8514CC7"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-FF101FF0-0330-548D-9B4B-7663D8514CC7"><!-- --></a><p>Most clients do not
require run-time notification of feature changes. The vast majority of features
are not removable, and most applications can be restarted if a feature needs
to be rediscovered. The potential use of this API are long-running system
tasks that monitor a variety of features, and applications that use software
that becomes supported or unsupported as add-on devices are attached and detached
(that is, plug and play devices). </p>
 </li>

<li id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-DC33F66D-77A1-5CC2-A8A7-F47B0E7DFE69"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-DC33F66D-77A1-5CC2-A8A7-F47B0E7DFE69"><!-- --></a><p>While the class <a href="GUID-4A0F7FCB-C3ED-3F0E-AB1D-5D96D5625595.html"><span class="apiname">RFeatureRegistryNotify</span></a> is
currently marked as internal to Symbian, the intention is to reclassify it
as <strong>publishedAll</strong> in a later release of Symbian platform. Therefore,
contrary to expectations, this class <em>can</em> be used as described. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-AF622B78-9C99-5696-A3F5-89716A568FB5"><a name="GUID-9F9D6764-D86E-5665-B51A-04A4D3949FB4__GUID-AF622B78-9C99-5696-A3F5-89716A568FB5"><!-- --></a><h2 class="sectiontitle">Preconditions
for feature notification</h2> <p>It is not expected that many clients will
require run-time notification of feature changes. The vast majority of features
are not removable, and most applications can be restarted if a feature needs
to be rediscovered. This API is likely to be used by long-running system tasks
that monitor a variety of features, and applications that use software that
becomes supported or unsupported as add-on devices are attached and detached
(that is, plug and play devices). </p>
 <p>Notification is for any change in
the Feature Registry. The recipient must determine if the status of any feature
they are interested in has changed. </p>
 <p>The current implementation of
Feature Registry is a constant ROM-based configuration file. The API is provided
for forward compatibility. Applications can be written now anticipating run-time
feature changes in a future implementation. Alternatively, applications can
be written in the future once run-time updates do occur, and the API will
be present – but will never notify – on older devices so there will be no
compatibility issues. </p>
 <p>It is possible for Symbian and licensees to
force notification for testing purposes. This is a side-effect of the current
implementation, is @internalComponent and not guaranteed to work into the
future. Running <span class="filepath">featregsetup.exe</span> (a binary included with
the component) currently forces notification. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-9B32E6D3-D8D2-5353-9491-7E94D95D00EB.html">Feature Registry</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-B01EDE29-0861-52B0-97BE-8B41E580817F.html" title="This document details how to identify optional features for querying with the Feature Registry.">Identifying
                Optional Features</a></div>
<div><a href="GUID-747869DD-ECD1-5515-B876-0D7D753B1CD9.html" title="This document details how to query a device for the presence of single features and multiple features using the Feature Registry.">Optional
Features Query                 API</a></div>
<div><a href="GUID-F55EAA3A-5D30-5983-9053-7C3935D99802.html">Feature Registry
                Overview</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>