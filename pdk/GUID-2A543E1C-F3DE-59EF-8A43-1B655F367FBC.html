<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Audio Processing Tutorial"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EC4CE675-3EE7-58F7-A872-E72548B0C9A5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-567AB683-5D92-533D-B4D8-813E70316DA3.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DDBE3874-60B0-5CAB-A782-294A32412C0B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Audio Processing Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2405098 id2397272 id2397286 id2397317 id2397332 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html">Multimedia Guide</a> &gt; <a href="GUID-EC4CE675-3EE7-58F7-A872-E72548B0C9A5.html" title="The Sound Device collection provides a common interface for all audio functionality. Key audio components in the Sound Device collection are the Advanced Audio Adaptation Framework (A3F) DevSound and Audio Component Framework.">Sound Device Collection</a> &gt; <a href="GUID-567AB683-5D92-533D-B4D8-813E70316DA3.html" title="The Advanced Audio Adaptation Framework (A3F) Audio Component Framework component provides a common interface for accessing audio resources, playing tones, and configuring audio for playing and recording.">A3F Audio Component Framework Component</a> &gt; <a href="GUID-DDBE3874-60B0-5CAB-A782-294A32412C0B.html" title="This section describes the Audio Component Framework library.">Audio Component Framework Library</a> &gt; <a href="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html" title="This section describes how to the use Audio Component Framework library.">Audio Component Framework Library Tutorials</a> &gt; </div>
<h1 class="topictitle1">Audio Processing Tutorial</h1>
<div><p>This tutorial describes how to use the Advanced Audio Adaptation Framework for audio processing. </p>
 <div class="section"><h2 class="sectiontitle">Purpose</h2> <p>The purpose of this tutorial is to show you how to play and record audio using the Advanced Audio Adaptation Framework (A3F). </p>
 <p><strong>Required Background</strong> </p>
 <p>To understand this document, you need to be familiar with A3F. For more information, see: </p>
 <ul><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-DFEF3900-032F-5DF6-AB8F-F5C697F41A5E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-DFEF3900-032F-5DF6-AB8F-F5C697F41A5E"><!-- --></a><p><a href="GUID-4AAABD77-C08E-5EE2-A02A-3B412EA6D23F.html">Advanced Audio Adaptation Framework Overview</a> </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-76EA5B9D-DF81-5191-A78D-9419E64F4E67"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-76EA5B9D-DF81-5191-A78D-9419E64F4E67"><!-- --></a><p><a href="GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2.html"> Advanced Audio Adaptation Framework Technology Guide </a>  </p>
 </li>
 </ul>
 <p><strong>Introduction</strong> </p>
 <p>To start using A3F for audio processing, you must: </p>
 <a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B9F4198E-7322-5AB2-B361-5DC83D6B2D10"><!-- --></a><ol id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B9F4198E-7322-5AB2-B361-5DC83D6B2D10"><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-25A4D909-A969-5879-897A-883639DD3DBB"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-25A4D909-A969-5879-897A-883639DD3DBB"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5E3EBCF5-7906-5573-BB8F-39444DAF54DE"> Construct a new Audio Context Factory</a>. </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-EA23F2DA-9D37-5958-9EDC-409FB02A83A4"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-EA23F2DA-9D37-5958-9EDC-409FB02A83A4"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9AB74084-14A1-5470-BB1E-799BD4765DF1"> Initialize an audio stream</a>. </p>
 </li>
 </ol>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5E3EBCF5-7906-5573-BB8F-39444DAF54DE"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5E3EBCF5-7906-5573-BB8F-39444DAF54DE"><!-- --></a><strong>Construction</strong> </p>
 <p>Each client that wants to use audio resources must have an instance of <a href="GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73.html"><span class="apiname">CAudioContextFactory</span></a> associated with it. To construct a new instance, use the <a href="GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73.html#GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73__GUID-D8C563D4-34AC-3460-BE6F-A19D3B1D5D23"><span class="apiname">CAudioContextFactory::NewL()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C69564C1-54CD-5797-94BD-06DF9F4BAE8F"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C69564C1-54CD-5797-94BD-06DF9F4BAE8F"><!-- --></a>static IMPORT_C CAudioContextFactory* NewL();</pre>
 <p>Once created, you can use <a href="GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73.html"><span class="apiname">CAudioContextFactory</span></a> to create a reference to an <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html"><span class="apiname">MAudioContext</span></a> pointer. To create the reference, call <a href="GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73.html#GUID-C4AD7B75-9027-3F62-889C-ADEF5E6DBC73__GUID-59496D3F-A541-35AA-BADB-28E487503955"><span class="apiname">CAudioContextFactory::CreateAudioContext()</span></a>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-215B3B74-5339-5B82-9431-6D3DE84C2C25"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-215B3B74-5339-5B82-9431-6D3DE84C2C25"><!-- --></a>IMPORT_C TInt CreateAudioContext(MAudioContext*&amp; aContext);</pre>
 <p>To observe the commit cycle, you must register an audio context observer using the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-AE870243-CC91-3259-9525-8BB6A5BECEDA"><span class="apiname">MAudioContext::RegisterAudioContextObserver()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5FC122B3-769D-5801-9160-8D9B6E5C0B6E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5FC122B3-769D-5801-9160-8D9B6E5C0B6E"><!-- --></a>virtual Tint RegisterAudioContextObserver(MAudioContextObserver&amp; aObserver);</pre>
 <p>For more information about the commit cycle, see <a href="GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2.html#GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2__GUID-C13977B1-D855-5D46-913C-15059421C225">The Commit Cycle</a> in the <a href="GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2.html">Advanced Audio Adaptation Framework Technology Guide</a>. </p>
 <p>You use the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html"><span class="apiname">MAudioContext</span></a> class to create references to all of the audio components you require. To create an <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html"><span class="apiname">MAudioStream</span></a> reference, call the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-E05FA869-2B49-319C-9172-2A7F40338F92"><span class="apiname">MAudioContext::CreateAudioStream()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CFEEAD67-FF15-5C5E-A8CD-E8D55783E50E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CFEEAD67-FF15-5C5E-A8CD-E8D55783E50E"><!-- --></a>virtual Tint CreateAudioStream(MAudioStream*&amp; aAudioStream);</pre>
 <p>You can create other audio components by calling the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-989C9D1A-C208-3515-BD71-E578365B5996"><span class="apiname">MAudioContext::CreateAudioProcessingUnit()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B3FEA557-C59B-516E-998D-7C604173FB0A"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B3FEA557-C59B-516E-998D-7C604173FB0A"><!-- --></a>virtual TInt CreateAudioProcessingUnit(TUid aTypeId, MAudioProcessingUnit*&amp; aProcessingUnit);</pre>
 <p>The supported audio processing unit TypeIDs are defined in <span class="filepath">audioprocessingunittypeuids.h</span>. The supported TypeIDs are as follows: </p>
 <ul><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-FF1ED2C4-97CC-50E0-9180-A118C35DD45D"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-FF1ED2C4-97CC-50E0-9180-A118C35DD45D"><!-- --></a><p> <a href="GUID-ED0C5B7A-3EBA-3D1D-BA9C-BBB9BB7A2BC1.html"><span class="apiname">KUidAudioStream</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-8E72BEF8-9935-50A6-9969-AA2E52DD4BD6"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-8E72BEF8-9935-50A6-9969-AA2E52DD4BD6"><!-- --></a><p> <a href="GUID-D8C317BF-A107-3941-9322-14BA06CD9D2E.html"><span class="apiname">KUidMmfBufferSource</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-BE3C9DEB-4F89-5466-8EC7-06F7FA5DABF1"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-BE3C9DEB-4F89-5466-8EC7-06F7FA5DABF1"><!-- --></a><p> <a href="GUID-0C9C7FDA-B9AC-3B0A-853B-BA2AD1836C74.html"><span class="apiname">KUidAudioDeviceSource</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-00DA5671-E7B9-5B34-ACF3-6527FFCAF667"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-00DA5671-E7B9-5B34-ACF3-6527FFCAF667"><!-- --></a><p> <a href="GUID-430A9FC1-E17A-32C9-8F3D-772A8B1F678F.html"><span class="apiname">KUidAudioCodec</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-FD67D84F-A9E2-57AA-A89B-3AC4B2DB6E5B"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-FD67D84F-A9E2-57AA-A89B-3AC4B2DB6E5B"><!-- --></a><p> <a href="GUID-F53B4801-B222-3064-89D8-8C14804585B3.html"><span class="apiname">KUidAudioDecoder</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1ED7CFB2-769A-5474-9A3C-56D31281D438"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1ED7CFB2-769A-5474-9A3C-56D31281D438"><!-- --></a><p> <a href="GUID-9160FFFF-4864-35C7-8876-EF3DFF7F4D1C.html"><span class="apiname">KUidAudioEncoder</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-60C2AE00-CF45-541C-BEDD-380FEAB21C70"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-60C2AE00-CF45-541C-BEDD-380FEAB21C70"><!-- --></a><p> <a href="GUID-61D5783B-31F8-3931-9F59-4778033FA28F.html"><span class="apiname">KUidMmfBufferSink</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2121172B-637A-55F8-8AC5-49459D75C671"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2121172B-637A-55F8-8AC5-49459D75C671"><!-- --></a><p> <a href="GUID-7F26E1FD-5094-398C-9E4B-55FBECA8D555.html"><span class="apiname">KUidAudioDeviceSink</span></a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-DF916501-3577-5B6A-A1D3-60B2848C9D40"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-DF916501-3577-5B6A-A1D3-60B2848C9D40"><!-- --></a><p> <a href="GUID-D4AD30D5-E290-3866-9BEC-37C5F96D28BF.html"><span class="apiname">KUidAudioGainControl</span></a>  </p>
 </li>
 </ul>
 <p>Before making changes to a stream and committing them, you must set the Process ID that identifies the client. Note that you must do this before making any calls to <samp class="codeph">Commit()</samp>. To set the client information, call the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-AC784D04-E300-3295-9FA0-7D4E3F7BC768"><span class="apiname">MAudioContext::SetClientSettings()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2EA5B1A7-3B35-5DEB-BB74-95F4F0FF2E7D"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2EA5B1A7-3B35-5DEB-BB74-95F4F0FF2E7D"><!-- --></a>virtual TInt SetClientSettings(const TClientContextSettings&amp; aSettings);</pre>
 <p>Depending on the codec type, you set either the data supplier to be informed about <a href="GUID-11595177-B5B0-3EEC-8064-0D79F4BF3D2C.html#GUID-11595177-B5B0-3EEC-8064-0D79F4BF3D2C__GUID-D8819B8E-8EFA-36DA-A6EA-6D534225BC7F"><span class="apiname">MMMFDataSupplier::BufferToBeFilled</span></a> notifications, or the data consumer to be informed about <a href="GUID-BC675A52-D3B5-3F97-B986-8643A8FEFE59.html#GUID-BC675A52-D3B5-3F97-B986-8643A8FEFE59__GUID-171DCE0F-2999-3151-8B7F-010C4E1F97AB"><span class="apiname">MMMFAudioDataConsumer::BufferToBeEmptied</span></a> notifications. You must do this before you add the data source or data sink to the audio stream. For a buffer source, using codec type <a href="GUID-F53B4801-B222-3064-89D8-8C14804585B3.html"><span class="apiname">KUidAudioDecoder</span></a>, you can set the data supplier by obtaining the <a href="GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803.html"><span class="apiname">MMMFBufferSource</span></a> extension interface for the audio source. Once you have the extension interface, use the <a href="GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803.html#GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803__GUID-79FB5506-C63C-3672-A25D-21F748237326"><span class="apiname">MMMFBufferSource::SetDataSupplier()</span></a> function for registration: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1221AC2C-BF14-5405-B9AA-BC9D4D336296"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1221AC2C-BF14-5405-B9AA-BC9D4D336296"><!-- --></a>virtual Tint SetDataSupplier(MMMFAudioDataSupplier&amp; aSupplier);</pre>
 <p>For a buffer sink, using codec type <a href="GUID-9160FFFF-4864-35C7-8876-EF3DFF7F4D1C.html"><span class="apiname">KUidAudioEncoder</span></a>, you can set the data consumer by obtaining the <a href="GUID-72D6CC6A-D119-3A88-BADD-106B1D1EE1AA.html"><span class="apiname">MMMFBufferSink</span></a> extension interface for the audio sink. Once you have the extension interface, use the <a href="GUID-72D6CC6A-D119-3A88-BADD-106B1D1EE1AA.html#GUID-72D6CC6A-D119-3A88-BADD-106B1D1EE1AA__GUID-29D1297E-3B8E-39D9-B15B-6019619CCB82"><span class="apiname">MMMFBufferSink::SetDataConsumer()</span></a> function for registration: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-11FD86AE-F27E-5DE9-9B67-9F267EEA7EE2"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-11FD86AE-F27E-5DE9-9B67-9F267EEA7EE2"><!-- --></a>virtual Tint SetDataConsumer(MMMFAudioDataConsumer&amp; aConsumer);</pre>
 <p>After you have created your audio processing units, you must then add them to an audio stream in order to control them. The following Audio Stream API functions are available for adding audio processing units: </p>
 <ul><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-80F508D6-1BB9-5321-B769-70A35295785E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-80F508D6-1BB9-5321-B769-70A35295785E"><!-- --></a><p> <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-7EEDFC7D-338B-320E-9F5D-86A87ED9C75E"><span class="apiname">MAudioStream::AddSource()</span></a>  </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2EB5A95F-4B35-577C-AE30-5C1C260FBBB5"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2EB5A95F-4B35-577C-AE30-5C1C260FBBB5"><!-- --></a>virtual TInt AddSource(MAudioProcessingUnit* aSource);</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-46614A7E-0DC3-5531-8C73-7553A1342034"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-46614A7E-0DC3-5531-8C73-7553A1342034"><!-- --></a><p> <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-643AD421-6C4B-3B72-A59B-E54CA85B43B3"><span class="apiname">MAudioStream::AddSink()</span></a>  </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B038C60A-A0F9-50B1-843C-275D7858D87C"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B038C60A-A0F9-50B1-843C-275D7858D87C"><!-- --></a>virtual TInt AddSink(MAudioProcessingUnit* aSink);</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-394C930A-5523-5B53-82EA-F3628847D352"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-394C930A-5523-5B53-82EA-F3628847D352"><!-- --></a><p> <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-FF7925E4-4E7D-3996-A1EB-64B8C0F5AE81"><span class="apiname">MAudioStream::AddAudioCodec()</span></a>  </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5C019254-CC30-55E4-835C-3E28849BE2D3"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-5C019254-CC30-55E4-835C-3E28849BE2D3"><!-- --></a>virtual TInt AddAudioCodec(MAudioProcessingUnit* aCodec);</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9BD8DE4B-2303-5F4A-AB26-C7D90D525A3C"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9BD8DE4B-2303-5F4A-AB26-C7D90D525A3C"><!-- --></a><p> <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-34CE5337-61A9-35B7-BCB4-5BB6B2BD6E5B"><span class="apiname">MAudioStream::AddGainControl()</span></a>  </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-0B9F11B5-C98B-5706-8677-54D28A0C34C8"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-0B9F11B5-C98B-5706-8677-54D28A0C34C8"><!-- --></a>virtual TInt AddGainControl(MAudioProcessingUnit* aGainControl);</pre>
 </li>
 </ul>
 <p>Before transferring the audio stream to the <samp class="codeph">Initialized</samp> state, you must define the audio format that the codec should use. This requires Audio Processing Unit API functions to fetch the codec extension interface. The TypeID to fetch this interface is <a href="GUID-430A9FC1-E17A-32C9-8F3D-772A8B1F678F.html"><span class="apiname">KUidAudioCodec</span></a> and the function for this is <samp class="codeph">TAny*
                Interface(TUid aType);</samp>. </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-09EEE69E-56CD-59CA-8354-0F1592786643"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-09EEE69E-56CD-59CA-8354-0F1592786643"><!-- --></a>virtual TAny* Interface(TUid aType);</pre>
 <p>You must cast the returned interface to the corresponding extension interface, that is, <a href="GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8.html"><span class="apiname">MAudioCodec</span></a>. The <a href="GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8.html"><span class="apiname">MAudioCodec</span></a> extension interface allows codec-specific functions like <a href="GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8.html#GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8__GUID-B466E6D5-DC68-3E4A-810A-5000954DF767"><span class="apiname">MAudioCodec::SetFormat()</span></a> to be called: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-17DECCDC-0424-5178-9AC8-223DA9A37FFF"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-17DECCDC-0424-5178-9AC8-223DA9A37FFF"><!-- --></a>virtual TInt SetFormat(TUid aFormat);</pre>
 <p>The audio format UIDs are defined in <span class="filepath">audioformatuids.h</span>. </p>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9AB74084-14A1-5470-BB1E-799BD4765DF1"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9AB74084-14A1-5470-BB1E-799BD4765DF1"><!-- --></a><strong>Initialization</strong> </p>
 <p>When you have finished configuring the required settings for your audio components, you can request that the audio stream be transitioned to the <samp class="codeph">Initialized</samp> state. You use the Audio Stream API <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-1DFCCA16-7AD0-3AAF-87B8-96F0546DF488"><span class="apiname">MAudioStream::Initialize()</span></a> function to prepare the stream to transition from <samp class="codeph">EUninitialized</samp> to <samp class="codeph">EInitialized</samp>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-02DC6FE2-9528-5AF5-99C1-BAA0A2E76BE9"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-02DC6FE2-9528-5AF5-99C1-BAA0A2E76BE9"><!-- --></a>virtual TInt Initialize();</pre>
 <p>After the required changes have been made to the stream, you must make a call to the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> function. Your request for audio resources is dependent on a successful commit cycle. A successful commit cycle means that you have changed the stream state to <samp class="codeph">EInitialized</samp>. </p>
 <p>Once <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-1DFCCA16-7AD0-3AAF-87B8-96F0546DF488"><span class="apiname">MAudioStream::Initialize()</span></a> has been successfully committed, A3F calls <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-1EFF05A7-AEF2-3CAB-A899-CA3B8CD3EEA8"><span class="apiname">MAudioStreamObserver::StateEvent()</span></a>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-093C7E9D-B500-527E-B8BD-EF43CD1F45F6"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-093C7E9D-B500-527E-B8BD-EF43CD1F45F6"><!-- --></a>virtual void StateEvent(MAudioStream&amp; aStream , TInt aReason, TAudioState aNewState)=0;</pre>
 <p>If <a href="GUID-D80EC952-D551-346A-B115-BD617ECAB8B9.html"><span class="apiname">aNewState</span></a> is <samp class="codeph">EInitialized</samp>, and <a href="GUID-3336EC2B-4FB8-3FD0-A702-0CB50DE059B4.html#GUID-3336EC2B-4FB8-3FD0-A702-0CB50DE059B4__GUID-576DD504-B977-37ED-8EA3-2100685D070A"><span class="apiname">MAudioContextObserver::ContextEvent()</span></a> is called on the <a href="GUID-3336EC2B-4FB8-3FD0-A702-0CB50DE059B4.html"><span class="apiname">MAudioContextObserver</span></a> with event <a href="GUID-570E513B-55CB-31B0-A325-C910D58C3F2C.html"><span class="apiname">KUidA3FContextUpdateComplete</span></a>, then the process of initialization is complete. Otherwise one of the system wide error codes is returned. </p>
 <p> <strong>Note</strong>: <samp class="codeph">ContextEvent()</samp> is a callback in the same thread context as the A3F client. </p>
 <p>If the transition to <samp class="codeph">EInitialized</samp> fails, it may be caused by one of the following: </p>
 <ul><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-7FCDC39D-469F-503C-B9E4-736A5C06B284"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-7FCDC39D-469F-503C-B9E4-736A5C06B284"><!-- --></a><p>The <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-1EFF05A7-AEF2-3CAB-A899-CA3B8CD3EEA8"><span class="apiname">MAudioStreamObserver::StateEvent()</span></a> callback gives an error code <samp class="codeph">KErrNotReady</samp> if, for example, the codec format is not set when committing the transition to <samp class="codeph">EInitialized</samp>. </p>
 <p>The <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-1EFF05A7-AEF2-3CAB-A899-CA3B8CD3EEA8"><span class="apiname">MAudioStreamObserver::StateEvent()</span></a> callback provides information about the new state of stream, if the state change was involved with the commit cycle, and an error code if there were any problems with the state change. </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2384281D-D4C9-52F5-B0E3-980733C5B044"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-2384281D-D4C9-52F5-B0E3-980733C5B044"><!-- --></a><p>The commit cycle can also fail, for example, because of pre-emption. </p>
 <p>The <a href="GUID-3336EC2B-4FB8-3FD0-A702-0CB50DE059B4.html#GUID-3336EC2B-4FB8-3FD0-A702-0CB50DE059B4__GUID-576DD504-B977-37ED-8EA3-2100685D070A"><span class="apiname">MAudioContextObserver::ContextEvent()</span></a> callback indicates the event and an error code if there were any problems with the commit cycle. </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle">Using A3F </h2> <p>The following sections describe how to manage and manipulate audio streams for audio playing and recording. </p>
 <p><strong>Basic Procedure</strong> </p>
 <p>The high level steps involved in processing audio are shown here: </p>
 <a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-AED76DEC-7246-5A92-B81F-8BC426B56032"><!-- --></a><ol id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-AED76DEC-7246-5A92-B81F-8BC426B56032"><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C355F9D4-CEF0-5A31-AA6C-86DCA277EEDB"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C355F9D4-CEF0-5A31-AA6C-86DCA277EEDB"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-14D6294E-64FB-58D9-85F8-FAE2A14367B1"> Configuring</a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4272405E-96AB-5A31-AF5A-E3E1E780EA9C"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4272405E-96AB-5A31-AF5A-E3E1E780EA9C"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-F6BC242F-E977-5A57-B90D-00D8A6AF5BF8"> Playing</a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-00999D8E-8C01-54DC-95EA-06C68EBEC735"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-00999D8E-8C01-54DC-95EA-06C68EBEC735"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C91CCA5D-2E5B-58D0-9EEE-B5F6C0095E2A">Recording</a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-D7A791C3-C155-5F22-A483-C3E07FB23450"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-D7A791C3-C155-5F22-A483-C3E07FB23450"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E2FC5EC6-57C0-53BB-9A5F-DC8BDA12E725"> Pausing and Continuing</a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-6B39D2C0-0874-50C7-8213-83252A198801"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-6B39D2C0-0874-50C7-8213-83252A198801"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-495DC719-47C6-50B0-9A2D-9B00BEBA0E38"> Stopping While Playing</a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-D9D2E80F-5791-5788-A476-43E569D20C49"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-D9D2E80F-5791-5788-A476-43E569D20C49"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-93CB9072-728A-598E-AD61-141D7FC9257E">Stopping While Recording</a>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CF413CE3-A4FD-56BB-9967-A8D4616E791C"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CF413CE3-A4FD-56BB-9967-A8D4616E791C"><!-- --></a><p><a href="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC.html#GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CBD49226-AC35-5890-81F7-885E97A14E30"> Retrieving the Time Streamed</a>. </p>
 </li>
 </ol>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-14D6294E-64FB-58D9-85F8-FAE2A14367B1"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-14D6294E-64FB-58D9-85F8-FAE2A14367B1"><!-- --></a><strong> Configuring</strong> </p>
 <p>You can configure the following settings while the stream is in the <samp class="codeph">EInitialized</samp> state: </p>
 <ul><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1CE3E5CC-472C-5444-B98A-08512C4599E3"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1CE3E5CC-472C-5444-B98A-08512C4599E3"><!-- --></a><p>To change the channels used for audio processing, use the <a href="GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8.html#GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8__GUID-ECD29200-00F9-328D-B301-8281BCD5CDCE"><span class="apiname">MAudioCodec::SetMode()</span></a> function to set the mode: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-32134EBA-B023-5391-BB17-1FF185DCA8C7"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-32134EBA-B023-5391-BB17-1FF185DCA8C7"><!-- --></a>virtual Tint SetMode(TUid aMode);</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C8922EA4-E4AB-5928-8C39-C413C7DB5A69"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C8922EA4-E4AB-5928-8C39-C413C7DB5A69"><!-- --></a><p>To set the sampling rate, use the <a href="GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8.html#GUID-863B02CA-CE78-3F63-AC42-E94D3226FDA8__GUID-54C1EEC1-05D6-31BD-91DB-62AFEA903704"><span class="apiname">MAudioCodec::SetSampleRate()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1CFE1C46-E71A-56B6-92D9-575F892042F4"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-1CFE1C46-E71A-56B6-92D9-575F892042F4"><!-- --></a>virtual Tint SetSampleRate(Tint aSampleRate);</pre>
 </li>
 </ul>
 <p>You can configure the following settings before or during audio processing: </p>
 <ul><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-57842993-925D-524D-9F65-7F08A9B08605"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-57842993-925D-524D-9F65-7F08A9B08605"><!-- --></a><p>To set the audio priority and preference-related settings for the implementation, use the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-DB79EE0B-128D-3F54-8220-F0860085BF20"><span class="apiname">MAudioStream::SetAudioType()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E6C08570-F0D1-5F69-BDD3-E2EA35839B3D"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E6C08570-F0D1-5F69-BDD3-E2EA35839B3D"><!-- --></a>virtual Tint SetAudioType(TAudioTypeSettings&amp; aAudioTypeSettings) const;</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4926C991-1653-5644-91AF-C042315CC858"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4926C991-1653-5644-91AF-C042315CC858"><!-- --></a><p>To change gain settings, fetch the <a href="GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23.html"><span class="apiname">MAudioGainControl</span></a> extension interface and use <a href="GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23.html#GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23__GUID-A4EA6112-1395-3B57-BFB0-E63D851ECDE8"><span class="apiname">MAudioGainControl::SetGain()</span></a>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-6A4B7541-BE21-512F-A6F0-0DF8C0CD6682"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-6A4B7541-BE21-512F-A6F0-0DF8C0CD6682"><!-- --></a>virtual Tint SetGain(RArray&lt;TAudioChannelGain&gt;&amp; aChannels);</pre>
 <p>The <a href="GUID-DAF4E3A2-90EC-3DDA-A7C9-4A5C8A7FED7C.html"><span class="apiname">aRampDuration</span></a> parameter defines the period over which to raise the gain. The <a href="GUID-577B3EEB-C87A-39DD-BADB-9D5975AC45EF.html"><span class="apiname">aGain</span></a> value can be any value between zero and <a href="GUID-1C455D65-DA40-305D-A59D-972626F4ECEC.html"><span class="apiname">aMaxGain</span></a> (the maximum gain). To obtain <a href="GUID-1C455D65-DA40-305D-A59D-972626F4ECEC.html"><span class="apiname">aMaxGain</span></a>, use the <a href="GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23.html#GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23__GUID-CE1B2FA0-6DC7-3DCA-842F-6756A48FF70C"><span class="apiname">MAudioGainControl::GetMaxGain()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-25097B9A-1841-5614-B0B4-7BEF29F2E307"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-25097B9A-1841-5614-B0B4-7BEF29F2E307"><!-- --></a>virtual Tint GetMaxGain(TInt&amp; aMaxGain) const</pre>
 <p>Alternatively you can set the gain on a channel-by-channel basis. Setting the gain this way also allows you to define a gain ramp. To set the channel gain with a ramp, use <a href="GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23.html#GUID-BA791F19-78BC-3995-BB1E-7F272B7A1A23__GUID-A4EA6112-1395-3B57-BFB0-E63D851ECDE8"><span class="apiname">MAudioGainControl::SetGain()</span></a>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-950EE839-955B-5E90-97FB-F2490897C545"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-950EE839-955B-5E90-97FB-F2490897C545"><!-- --></a>virtual Tint SetGain(RArray&lt;TAudioChannelGain&gt;&amp; aChannels, TUid aRampOperation, const TTimeIntervalMicroSeconds&amp; aRampDuration);</pre>
 <p>The UID determines how the ramp is interpreted. The following table describes the different ramps: </p>
 
<div class="tablenoborder"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-72DCEEC7-FE40-5CAB-8F0A-0BC8A5554D60"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-72DCEEC7-FE40-5CAB-8F0A-0BC8A5554D60" frame="border" border="1" rules="all"><tbody><tr><td class="cellrowborder" valign="top"><p> <a href="GUID-707A476C-1790-34DB-B1E5-5435578E01AA.html"><span class="apiname">KNullUid</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>The value of <samp class="codeph">aRampDuration</samp> is ignored and the gain changes immediately. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <a href="GUID-CA54ED0F-6B37-32FF-AA70-2033EC3472BB.html"><span class="apiname">KGainSawTooth</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>An explicit 0 to <samp class="codeph">aGain</samp> sweep, rising linearly. If the channel is active, the effective gain drops to 0, as soon as possible, after the request. If <samp class="codeph">KGainSawTooth</samp> is used when the stream is not in the <samp class="codeph">EActive</samp> state, then it acts as a fade-in during the subsequent <samp class="codeph">Activate()</samp> transition. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <a href="GUID-010E9327-CD26-3910-B30D-86DB0982B125.html"><span class="apiname">KGainFadeOut</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>A drop from the current gain to 0, dropping linearly over the <samp class="codeph">aRampDuration</samp> period. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <a href="GUID-86875DD9-437B-3757-B744-C51274281D52.html"><span class="apiname">KGainRamped</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>A gradual change from the current gain value to <samp class="codeph">aGain</samp> over the <samp class="codeph">aRampDuration</samp> period </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top"><p> <a href="GUID-2EFB7E8D-DC62-39E5-A282-819013060B6C.html"><span class="apiname">KGainContinue</span></a>  </p>
 </td>
 <td class="cellrowborder" valign="top"><p>If a previous ramp operation is in progress, then this continues but the concept of “target gain” is updated using the new values. The value of <samp class="codeph">aRampDuration</samp> is ignored and the previous ramp duration is re-used, minus the time already spent ramping. The smoothness of this operation depends on the implementation. If no ramp operation is in progress, then this is the same as <samp class="codeph">KNullUid</samp>. Note that this option is intended as a way of changing gain values without stopping an ongoing ramp operation. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </li>
 </ul>
 <p>Once you have finished setting configuration values, you must apply them using the <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-74265309-6B3F-5DCF-AE59-BDD53B765D0A"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-74265309-6B3F-5DCF-AE59-BDD53B765D0A"><!-- --></a>virtual Tint Commit();</pre>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-F6BC242F-E977-5A57-B90D-00D8A6AF5BF8"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-F6BC242F-E977-5A57-B90D-00D8A6AF5BF8"><!-- --></a><strong>Playing</strong> </p>
 <p>Playing audio starts with the stream in the <samp class="codeph">EInitialized</samp> state. The steps to play audio are shown here: </p>
 <a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C7587083-F8C2-5D16-A5AE-8FC3845C0BA4"><!-- --></a><ol id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C7587083-F8C2-5D16-A5AE-8FC3845C0BA4"><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-0CA63DE5-3065-5952-962C-BF72D1A363DC"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-0CA63DE5-3065-5952-962C-BF72D1A363DC"><!-- --></a><p>Request a transition from <samp class="codeph">EInitialized</samp> to <samp class="codeph">EIdle</samp> using the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-023F6F3A-8ABB-31C6-84C8-AB06CCDC7C3D"><span class="apiname">MAudioStream::Load()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-8084A363-2B4B-57B2-AFEE-BB3108764692"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-8084A363-2B4B-57B2-AFEE-BB3108764692"><!-- --></a>virtual TInt MAudioStream::Load();</pre>
 <p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> to commit the state change. </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9E2C9B01-78FA-58F1-A2EC-A46DC96F9DAD"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9E2C9B01-78FA-58F1-A2EC-A46DC96F9DAD"><!-- --></a><p>Once the commit cycle is complete and <samp class="codeph">StateEvent</samp> is informed about the new state, request a transition to the <samp class="codeph">EActive</samp> state by calling <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-44094278-9D86-3FCE-BB2B-3CD88606BE19"><span class="apiname">MAudioStream::Activate()</span></a>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-33E76BF5-CDE7-59AE-B86D-269FBF8147CA"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-33E76BF5-CDE7-59AE-B86D-269FBF8147CA"><!-- --></a>virtual TInt Activate();</pre>
 <p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> to commit the state change. The state transition and audio playing take effect once the commit cycle has successfully completed. </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-11BA8048-DAA4-512C-A31B-92154ED8FE19"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-11BA8048-DAA4-512C-A31B-92154ED8FE19"><!-- --></a><p>When the first buffer is ready to be filled with audio data, an <a href="GUID-11595177-B5B0-3EEC-8064-0D79F4BF3D2C.html#GUID-11595177-B5B0-3EEC-8064-0D79F4BF3D2C__GUID-A029B562-5EB8-3795-B88C-CA8D90E60991"><span class="apiname">MMMFDataSupplier::BufferToBeFilled()</span></a> notification is received: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-82372A29-3565-5970-98B1-432A873162DD"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-82372A29-3565-5970-98B1-432A873162DD"><!-- --></a>virtual void BufferToBeFilled(CMMFBuffer* aBuffer)=0;</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-EF520B84-1BBD-5941-9B26-CFD0D4012802"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-EF520B84-1BBD-5941-9B26-CFD0D4012802"><!-- --></a><p>After filling the buffer, respond by using the <a href="GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803.html#GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803__GUID-9E3C1A38-ED76-3954-8B6E-A88286FC841C"><span class="apiname">MMMFBufferSource::BufferFilled()</span></a> extension interface function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-78AA9109-04CE-5124-84B4-6C1663B97043"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-78AA9109-04CE-5124-84B4-6C1663B97043"><!-- --></a>virtual Tint BufferFilled(CMMFBuffer* aBuffer);</pre>
 <p>This is similar to the existing <a href="GUID-2D3F7471-9B92-5E49-B8BC-E0FA7AA709D7.html" title="This document provides an overview of DevSound.">DevSound</a> behaviour. For more information, see <a href="GUID-53A5AC8D-8A43-505F-A0B6-9E34F3CF23BE.html" title="This tutorial describes you how to start playing, pausing and resuming, stopping, retrieving the number of samples in the audio data.">Playing audio</a>. </p>
 </li>
 </ol>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C91CCA5D-2E5B-58D0-9EEE-B5F6C0095E2A"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C91CCA5D-2E5B-58D0-9EEE-B5F6C0095E2A"><!-- --></a><strong> Recording</strong> </p>
 <p>Recording audio starts with the steam in the <samp class="codeph">EInitialized</samp> state. The steps to record audio are shown here: </p>
 <a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-09916C95-AE95-55A9-B899-A8F208723766"><!-- --></a><ol id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-09916C95-AE95-55A9-B899-A8F208723766"><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4FCE3888-94D3-5EBE-B340-2CB4CD0FC246"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4FCE3888-94D3-5EBE-B340-2CB4CD0FC246"><!-- --></a><p>Request a transition from <samp class="codeph">EInitialized</samp> to <samp class="codeph">EIdle</samp> using the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-023F6F3A-8ABB-31C6-84C8-AB06CCDC7C3D"><span class="apiname">MAudioStream::Load()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CD7F335F-E73F-5035-8F63-9CDD602C20CD"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CD7F335F-E73F-5035-8F63-9CDD602C20CD"><!-- --></a>virtual TInt MAudioStream::Load();</pre>
 <p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> to commit the state change. </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-8DDCE8FB-6B08-5AE1-B7A2-D1EAFF9E1B5E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-8DDCE8FB-6B08-5AE1-B7A2-D1EAFF9E1B5E"><!-- --></a><p>Once the commit cycle is complete and <samp class="codeph">StateEvent</samp> is informed about the new state, request a transition to the <samp class="codeph">EActive</samp> state by calling <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-44094278-9D86-3FCE-BB2B-3CD88606BE19"><span class="apiname">MAudioStream::Activate()</span></a>: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E5D9F936-6193-5551-8F13-F1CF58FC36F7"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E5D9F936-6193-5551-8F13-F1CF58FC36F7"><!-- --></a>virtual TInt Activate();</pre>
 <p>Call <a href="GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3.html#GUID-67BE95B2-BE4A-32AF-8BDF-92FD8FBE6DC3__GUID-7011BDC1-C4D8-3BB5-9B7C-8729FADCE67E"><span class="apiname">MAudioContext::Commit()</span></a> to commit the state change. The state transition and audio recording take effect once the commit cycle has successfully completed. </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-6E35385A-718E-5F0E-97E0-EDFD44B93708"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-6E35385A-718E-5F0E-97E0-EDFD44B93708"><!-- --></a><p>When the first buffer is ready to be emptied of audio data, an <a href="GUID-7752B59D-9E3A-357B-B5DD-C4C89FEE7D5A.html#GUID-7752B59D-9E3A-357B-B5DD-C4C89FEE7D5A__GUID-36C036D8-B0D9-3439-B009-9684C261DE64"><span class="apiname">MMMFDataConsumer::BufferToBeEmptied()</span></a> notification is received: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4BF5B98C-F496-5AD9-9C0A-BA6B92FB2CA1"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-4BF5B98C-F496-5AD9-9C0A-BA6B92FB2CA1"><!-- --></a>virtual void BufferToBeEmptied(CMMFBuffer* aBuffer)=0;</pre>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-3A914F79-837D-5ADD-B8B1-70ACBAB7D2D1"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-3A914F79-837D-5ADD-B8B1-70ACBAB7D2D1"><!-- --></a><p>After emptying the buffer, respond by using the <a href="GUID-72D6CC6A-D119-3A88-BADD-106B1D1EE1AA.html#GUID-72D6CC6A-D119-3A88-BADD-106B1D1EE1AA__GUID-6724D6C0-AA02-3181-B6D0-6DF40728A257"><span class="apiname">MMMFBufferSink::BufferEmptied()</span></a> extension interface function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B3342CF3-0AEA-5356-8076-4DB3A8A53F30"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-B3342CF3-0AEA-5356-8076-4DB3A8A53F30"><!-- --></a>virtual Tint BufferEmptied(CMMFBuffer* aBuffer);</pre>
 <p>This is similar to the existing <a href="GUID-2D3F7471-9B92-5E49-B8BC-E0FA7AA709D7.html" title="This document provides an overview of DevSound.">DevSound</a> behaviour. For more information, see <a href="GUID-3FC6342D-D09C-5C7F-8E03-3DA7B29D2CC8.html" title="This tutorial describes how to start, pause and resume, stop and retrieve the audio samples for audio recording.">Recording Audio</a>. </p>
 </li>
 </ol>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E2FC5EC6-57C0-53BB-9A5F-DC8BDA12E725"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-E2FC5EC6-57C0-53BB-9A5F-DC8BDA12E725"><!-- --></a><strong> Pausing and Continuing</strong> </p>
 <p>To pause the audio currently being processed, use the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-19E9A726-DB06-3080-B685-35ACE8C48ED6"><span class="apiname">MAudioStream::Prime()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-0E1999ED-FD4C-5632-AE99-0E2B741503B6"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-0E1999ED-FD4C-5632-AE99-0E2B741503B6"><!-- --></a>virtual Tint Prime();</pre>
 <p>Calling <samp class="codeph">Prime()</samp> requests a transition to the <samp class="codeph">EPrimed</samp> state. After calling <samp class="codeph">Prime()</samp>, the state change must be committed. </p>
 <p> <samp class="codeph">Prime()</samp> temporarily stops the audio process. To continue audio processing from the <samp class="codeph">EPrimed</samp> state, use the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-44094278-9D86-3FCE-BB2B-3CD88606BE19"><span class="apiname">MAudioStream::Activate()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-167DD5B0-EF69-50B0-9564-E47BFF615C5A"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-167DD5B0-EF69-50B0-9564-E47BFF615C5A"><!-- --></a>virtual Tint Activate();</pre>
 <p>After a successful commit cycle, the stream is transitioned to the <samp class="codeph">EActive</samp> state, and processing resumes from the pause point. </p>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-495DC719-47C6-50B0-9A2D-9B00BEBA0E38"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-495DC719-47C6-50B0-9A2D-9B00BEBA0E38"><!-- --></a><strong>Stopping While Playing</strong> </p>
 <p>To stop audio processing while playing audio, use the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-338A5254-F6C0-3F9D-8635-CECF3B18AE26"><span class="apiname">MAudioStream::Stop()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-AB5032AA-5B2C-5BE5-A7E7-CD77227DE7A9"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-AB5032AA-5B2C-5BE5-A7E7-CD77227DE7A9"><!-- --></a>Virtual Tint Stop();</pre>
 <p> <samp class="codeph">Stop()</samp> can be called while the stream state is <samp class="codeph">EActive</samp> or <samp class="codeph">EPrimed</samp>. </p>
 <p> <strong>Note:</strong> After calling <samp class="codeph">Stop()</samp>, do not call <a href="GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803.html#GUID-4429668D-1F6F-3C0A-AEFA-45449D80D803__GUID-9E3C1A38-ED76-3954-8B6E-A88286FC841C"><span class="apiname">MMMFBufferSource::BufferFilled()</span></a> for any outstanding <a href="GUID-11595177-B5B0-3EEC-8064-0D79F4BF3D2C.html#GUID-11595177-B5B0-3EEC-8064-0D79F4BF3D2C__GUID-A029B562-5EB8-3795-B88C-CA8D90E60991"><span class="apiname">MMMFDataSupplier::BufferToBeFilled()</span></a> callbacks, as the buffer may not be valid anymore. </p>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-93CB9072-728A-598E-AD61-141D7FC9257E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-93CB9072-728A-598E-AD61-141D7FC9257E"><!-- --></a><strong>Stopping While Recording</strong> </p>
 <p>To stop audio processing while recording audio, use the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-338A5254-F6C0-3F9D-8635-CECF3B18AE26"><span class="apiname">MAudioStream::Stop()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-752F4CF7-E84D-52AF-9ED3-2899C639E43F"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-752F4CF7-E84D-52AF-9ED3-2899C639E43F"><!-- --></a>Virtual Tint Stop();</pre>
 <p> <samp class="codeph">Stop()</samp> can be called while the stream state is <samp class="codeph">EActive</samp> or <samp class="codeph">EPrimed</samp>. </p>
 <p> <strong>Note:</strong> Calling <samp class="codeph">Stop()</samp> breaks the recording cycle and some buffers of audio data may be lost. To guarantee that no recorded data is lost when stopping, transition the stream from <samp class="codeph">EActive</samp> to <samp class="codeph">EPrimed</samp>, and wait for <a href="GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C.html#GUID-D2075F61-F6FA-3FAE-9FBB-20CEFE81334C__GUID-1B9E88D3-ACB0-3A50-A18D-217B8F9E4B82"><span class="apiname">MAudioStreamObserver::ProcessingFinished()</span></a> to return. Upon receiving the callback, transition the stream from: </p>
 <a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-21113168-7523-5D39-BBA6-945665B53739"><!-- --></a><ol id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-21113168-7523-5D39-BBA6-945665B53739"><li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C3F11D6B-7F02-507B-A9BB-F850491C8C93"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C3F11D6B-7F02-507B-A9BB-F850491C8C93"><!-- --></a><p> <samp class="codeph">EPrimed</samp> to <samp class="codeph">EIdle</samp>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-351D09AB-D078-5E55-9B70-193FA9867D76"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-351D09AB-D078-5E55-9B70-193FA9867D76"><!-- --></a><p> <samp class="codeph">EIdle</samp> to <samp class="codeph">EInitialized</samp>  </p>
 </li>
 <li id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C32D2D9B-1A15-53A3-BBBC-AF897267E635"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-C32D2D9B-1A15-53A3-BBBC-AF897267E635"><!-- --></a><p> <samp class="codeph">EInitialized</samp> to <samp class="codeph">EUninitialized</samp>  </p>
 </li>
 </ol>
 <p id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CBD49226-AC35-5890-81F7-885E97A14E30"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-CBD49226-AC35-5890-81F7-885E97A14E30"><!-- --></a><strong>Retrieving the Time Streamed</strong> </p>
 <p>To retrieve the duration of the audio that has been processed, use the <a href="GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6.html#GUID-C5B1FE01-DCFC-3CA5-931B-E371AEC918A6__GUID-0C4DBDDA-BE83-35DD-B14E-BF0F3D78EB3B"><span class="apiname">MAudioStream::GetStreamTime()</span></a> function: </p>
 <pre class="codeblock" id="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9D927CE5-1646-5A40-A745-E4252C6F458E"><a name="GUID-2A543E1C-F3DE-59EF-8A43-1B655F367FBC__GUID-9D927CE5-1646-5A40-A745-E4252C6F458E"><!-- --></a>virtual TInt GetStreamTime(TTimeIntervalMicroSeconds&amp; aStreamTime);</pre>
 <p>The result returned is the microseconds processed since the last <samp class="codeph">EIdle</samp> state. <samp class="codeph">GetStreamTime()</samp> returns a zero value until audio processing starts. The function returns the time processed when the stream is in the <samp class="codeph">EPrimed</samp> and <samp class="codeph">EActive</samp> states. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">See Also</h2> <p><a href="GUID-931207BE-3561-562D-8F67-0FB52CFF83CD.html">Audio Component Framework Tutorial</a>  </p>
 <p><a href="GUID-B0449B60-B78E-5CC1-8FAF-E5EE24D88EB2.html">Advanced Audio Adaptation Framework Technology Guide</a>  </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C25DEDBC-83B8-5502-BD2A-9561F81551A0.html" title="This section describes how to the use Audio Component Framework library.">Audio Component Framework Library Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>