<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="System Start Example"/>
<meta name="DC.Relation" scheme="URI" content="GUID-AF30D941-BFD8-5260-9588-C5DA6983F558.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-97CCEF05-8F3D-5802-A33A-ED349084D524.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-AF30D941-BFD8-5260-9588-C5DA6983F558.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B386CA7A-F527-5584-9455-371E623DCF76"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>System Start Example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B386CA7A-F527-5584-9455-371E623DCF76"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563674 id2563648 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-97CCEF05-8F3D-5802-A33A-ED349084D524.html">Application Framework Guide</a> &gt; <a href="GUID-AF30D941-BFD8-5260-9588-C5DA6983F558.html">System Startup</a> &gt; </div>
<h1 class="topictitle1"> System Start Example</h1>
<div>
<div class="section" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-1B233701-DF98-46DD-A9F0-1DBBBD8F07E3"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-1B233701-DF98-46DD-A9F0-1DBBBD8F07E3"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to
download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-e4fe3134-4d3b-443f-80fe-374972df6f9b.zip" target="_blank"> SysStart.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-e4fe3134-4d3b-443f-80fe-374972df6f9b.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-F3EFB022-A771-50D2-9C36-FFEFA4924441"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-F3EFB022-A771-50D2-9C36-FFEFA4924441"><!-- --></a><h2 class="sectiontitle"> Description</h2> <p>This example demonstrates the use of resource files at the time
of System Start-up. System starter is an architecture designed to
provide a consistent, transparent, easily customisable method of starting
components (i.e. servers and applications) at device boot. It allows
an ordering of components according to criticality and dependency
by means of a Static Start-up Configuration (SSC). </p>
 </div>

<div class="section" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-9C5B0C4B-32F9-4F39-8C3E-F5188A6D54AA"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-9C5B0C4B-32F9-4F39-8C3E-F5188A6D54AA"><!-- --></a><h2 class="sectiontitle">Related APIs</h2><ul>
<li><p><samp class="codeph">egSysStart::E32Main ()</samp></p>
</li>

<li><p><samp class="codeph">egSysStart::Simple ()</samp></p>
</li>

</ul>
</div>

<div class="section" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-693F8259-B441-50F2-8E2A-EB2A57E5665A"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-693F8259-B441-50F2-8E2A-EB2A57E5665A"><!-- --></a><h2 class="sectiontitle">Resource
files</h2> <p>In this example a resource file <samp class="codeph">SSCForStartupMode0.rss</samp> is used at Start-up. </p>
 <p>On a target device booting normally,
the SSC <samp class="codeph">SSCForStartupMode0.rss</samp> is always used for
start-up. This SSC is associated with startup mode zero, which is
defined as <a href="GUID-6866563D-8AF5-3F3F-A777-50B264194B83.html"><span class="apiname">EStartupModeUndefined</span></a> in e32modes.h.
The System Starter architecture provides an ability to select between
a number of static Start-up configurations (rss files) depending on
the desired Start-up Mode, for example: Full, Emergency, Charging,
or Test. Each of these modes may require different sets of components
and order of execution. </p>
 <p>The start-up process in the resource
file is staged via an ordering of Start-up States or phases. These
states cannot be removed or their values altered. They appear in the
following order: </p>
 <p> <a href="GUID-D3303938-1F27-319A-836A-FE4242E91696.html#GUID-D3303938-1F27-319A-836A-FE4242E91696__GUID-96874644-A26A-36E6-AFE4-568B2DA8C2E5"><span class="apiname">TStartupCommandType::EStartupStateUndefined</span></a> – Value before the system enters its first state/ undefined state. </p>
 <p> <a href="GUID-D3303938-1F27-319A-836A-FE4242E91696.html#GUID-D3303938-1F27-319A-836A-FE4242E91696__GUID-1FF1DBF6-7AB1-33E0-8D10-AADE02B7D440"><span class="apiname">TStartupCommandType::EStartupStateCriticalStatic</span></a> – Within this Start-up State all ROM based (static) components or
resources that are critical to the operation of the phone function
are started. </p>
 <p> <a href="GUID-D3303938-1F27-319A-836A-FE4242E91696.html#GUID-D3303938-1F27-319A-836A-FE4242E91696__GUID-A5FB6340-2EA8-32A3-8138-95DD326BC123"><span class="apiname">TStartupCommandType::EStartupStateCriticalDynamic</span></a> – Within this Start-up State all non-ROM based (dynamic) components
or resources that are critical to the operation of the phone function
are started. </p>
 <p> <a href="GUID-D3303938-1F27-319A-836A-FE4242E91696.html#GUID-D3303938-1F27-319A-836A-FE4242E91696__GUID-5883EFE6-36A6-30EB-851B-9FD26C1C9B03"><span class="apiname">TStartupCommandType::EStartupStateNonCritical</span></a> – Within this Start-up State all ROM based (static) or non-ROM based
(dynamic) components or resources that are non-critical to the operation
of the phone function are started. All components that have not already
been started and are required at device boot are started in this Start-up
State. </p>
 <p>This allows start-up to be split into separate, distinct
states with a defined order. Within each state, a <samp class="codeph">STATE_INFO</samp> structure containing information regarding that state is located.
This contains the following information: </p>
 
<div class="tablenoborder"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-A370B739-910B-55E5-9C92-FAC72362FDCB"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-A370B739-910B-55E5-9C92-FAC72362FDCB" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">Id</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The id of the state as defined in the custom header file </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">Name</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>A text string describing the state </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">Command_list</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The name of the Command array in the SSC which contains
the list of Commands to invoke in that state </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <samp class="codeph">Next</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p>The name of the Command array corresponding to the next
state </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>Following the <samp class="codeph">STATE_INFO</samp> structure in
the SSC is a <samp class="codeph">COMMAND_ARRAY</samp> structure. This contains
details of all commands to be executed within that list. Its name
matches the command_list identifier in the <samp class="codeph">STATE_INFO</samp> struct and contains one array entry: Commands. The Command entry
contains a list of all commands to be executed. Each instance in the
rss file is headed with the <samp class="codeph">START_PROCESS_INFO </samp> identifier
and contains any value needed to override the defaults specified in <samp class="codeph">startup.rh</samp>. </p>
 
<div class="tablenoborder"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-7E7519BC-54C9-59E7-AB07-46748C6F7A44"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-7E7519BC-54C9-59E7-AB07-46748C6F7A44" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-44EDEC24-A19F-5991-9528-11804376ABB2"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-44EDEC24-A19F-5991-9528-11804376ABB2"><!-- --></a>Type</pre>
 </td>

<td class="cellrowborder" valign="top"><p>Set by default. Should not be specified in the SSC. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-7559D8D5-DD16-5E7B-86EB-0337ED7ACCE7"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-7559D8D5-DD16-5E7B-86EB-0337ED7ACCE7"><!-- --></a>Path</pre>
 </td>

<td class="cellrowborder" valign="top"><p>The location of the binary e.g. path = "Z:\sys\bin\fbserv.exe" </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-C4C5EE86-3E58-552B-8607-F1AC8B6EDCD1"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-C4C5EE86-3E58-552B-8607-F1AC8B6EDCD1"><!-- --></a>Args</pre>
 </td>

<td class="cellrowborder" valign="top"><p>Arguments passed to the process. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-6C04D96F-6B77-5368-9B48-9BC9D35B6710"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-6C04D96F-6B77-5368-9B48-9BC9D35B6710"><!-- --></a>start_method</pre>
 </td>

<td class="cellrowborder" valign="top"><p>The enum <samp class="codeph">TStartupCommandType</samp> is defined
in <samp class="codeph">startup.hrh</samp>. Currently it takes one of three values: </p>
 <ul>
<li id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-EB15D58C-A9FC-5C92-A5F6-23CA7D547C86"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-EB15D58C-A9FC-5C92-A5F6-23CA7D547C86"><!-- --></a><p> <a href="GUID-119A71D6-F979-345B-8AC7-7768F68A36BE.html"><span class="apiname">EFireAndForget</span></a> (the default) </p>
 </li>

<li id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-FC24705E-4144-5FCA-AA4D-04871C5ED6F9"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-FC24705E-4144-5FCA-AA4D-04871C5ED6F9"><!-- --></a><p> <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a>  </p>
 </li>

<li id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-BE71C616-0E0B-5916-9058-43B0CA5A278F"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-BE71C616-0E0B-5916-9058-43B0CA5A278F"><!-- --></a><p> <a href="GUID-3C5930DE-E84C-3170-AC5A-BCFC16D6AE77.html"><span class="apiname">EDeferredWaitForStart</span></a>  </p>
 </li>

</ul>
 <p>Use <a href="GUID-119A71D6-F979-345B-8AC7-7768F68A36BE.html"><span class="apiname">EFireAndForget</span></a> if there is no need
for the process to be started serially in other words as soon as the
process has been invoked, the System Starter can continue with starting
the next process without waiting for the process to rendezvous. </p>
 <p>Use <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a> if the process needs to
get to a certain stage before starting the next process. The starter
cannot continue with the next Command until a rendezvous has been
made with the first process. </p>
 <p>Note that the apparc component
must be started with mode <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a> to allow
connection with the server to take place. </p>
 <p>Use <a href="GUID-3C5930DE-E84C-3170-AC5A-BCFC16D6AE77.html"><span class="apiname">EDeferredWaitForStart</span></a> if there is no need to start the process serially, but at a later
stage there is a command which cannot be invoked until this process
has initialized. Using this value allows a number of commands to be
started and the System Starter to wait for them all at a later point
in the SSC. This ensures later on that the initializations of all <a href="GUID-3C5930DE-E84C-3170-AC5A-BCFC16D6AE77.html"><span class="apiname">EDeferredWaitForStart</span></a> commands have completed. </p>
 <p> <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a> and <a href="GUID-3C5930DE-E84C-3170-AC5A-BCFC16D6AE77.html"><span class="apiname">EDeferredWaitForStart</span></a> depend upon receiving a rendezvous from the started process. By
default this is performed automatically by EikonEnv. If however, you
wish your component to perform its own rendezvous, then the following
function should be overridden in your AppUi class and return <samp class="codeph">EFalse.</samp>  </p>
 <p> <samp class="codeph">TBool CCoeAppUi::FrameworkCallsRendezvous();</samp>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-1E9E11D2-3BAA-54F2-9481-6A1987CF4100"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-1E9E11D2-3BAA-54F2-9481-6A1987CF4100"><!-- --></a>timeout</pre>
 </td>

<td class="cellrowborder" valign="top"><p>This field is for use with start_method <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a> only. </p>
 <p>Indicate if a timer should be started when attempting
to start the process by filling in this timeout value in milliseconds.
The value is 0 by default indicating that no timer will be started. </p>
 <p>Note that if the timer expires before a rendezvous with the component
is made, the component will be killed. If the component is a critical
process this will result in a Kern:4 Panic (which on licensee phones
usually initiates in a system restart). </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-CFDA47D2-551B-5215-8854-6FC63433A22B"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-CFDA47D2-551B-5215-8854-6FC63433A22B"><!-- --></a>retry_failure_recovery_method</pre>
 </td>

<td class="cellrowborder" valign="top"><p>This specifies the action to take if an error is returned
from an attempt to start the process. </p>
 <p>It is set to <a href="GUID-644CC7B0-3B94-307A-A5A1-D7EC78F10105.html"><span class="apiname">ERestartOS</span></a> by default. This means if the process fails
to start the system will restart in the default start-up mode. </p>
 <p>If it is set to <a href="GUID-1E757E7A-98C8-3455-8D82-28A24FBEA729.html"><span class="apiname">EIgnoreOnFailure</span></a> then the
starter will continue with the next Command. This option is intended
for non-critical components on which nothing critical is dependent. </p>
 <p>If it is set to <a href="GUID-D7BCDD4C-97A0-3068-AC4C-F10DA31DD636.html"><span class="apiname">ERestartOSWithMode</span></a> the system
will be restarted in a specific start-up mode. </p>
 <p>Note: this
field has a slightly different use depending on the start mode: in
modes <a href="GUID-119A71D6-F979-345B-8AC7-7768F68A36BE.html"><span class="apiname">EFireAndForget</span></a> and <a href="GUID-3C5930DE-E84C-3170-AC5A-BCFC16D6AE77.html"><span class="apiname">EDeferredWaitForStart</span></a> a failure will be indicated only if there is an immediate error
for example the initial process creation/invocation fails. In <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a> a failure will also be indicated if there
is no successful rendezvous. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-33D3ABEE-9A48-51B7-BFB7-6CEF2AED8DAE"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-33D3ABEE-9A48-51B7-BFB7-6CEF2AED8DAE"><!-- --></a>no_of_retries_on_failure</pre>
 </td>

<td class="cellrowborder" valign="top"><p>For use with start_method <a href="GUID-8415D00B-79D9-36BE-9F0B-2DAA3A553CD2.html"><span class="apiname">EWaitForStart</span></a> only. Set to 0 by default. </p>
 <p>This specifies the maximum number
of times the starter should try to start a failed process. After the
process has been retried the specified number of times, the starter
will act according to the value in the <samp class="codeph">retry_failure_recovery_method</samp> field. This is used in conjunction with the timeout value. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-782C1BA6-D764-5C6C-A232-9CCD5C22AEA3"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-782C1BA6-D764-5C6C-A232-9CCD5C22AEA3"><!-- --></a>monitor</pre>
 </td>

<td class="cellrowborder" valign="top"><p>Indicates whether the started process should be monitored
for failure by the System Monitor component. The value is 0 by default
indicating that no monitoring will be done. </p>
 <p>A value of 1 indicates
monitoring should be performed. The recovery policy set by <samp class="codeph">retry_failure_recovery_method</samp> (and if applicable retry_failure_recovery_startup_mode)
will be used by the System Monitor if a failure occurs to this process
during the lifetime of the system. </p>
 <p>Note: if the component
being started is a System Critical process, monitoring must not be
enabled. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><pre class="codeblock" id="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-8305C64D-3198-5C5B-9AD4-C774D38B9369"><a name="GUID-B386CA7A-F527-5584-9455-371E623DCF76__GUID-8305C64D-3198-5C5B-9AD4-C774D38B9369"><!-- --></a>retry_failure_recovery_startup_mode</pre>
 </td>

<td class="cellrowborder" valign="top"><p>For use with retry_failure_recovery_method <a href="GUID-D7BCDD4C-97A0-3068-AC4C-F10DA31DD636.html"><span class="apiname">ERestartOSWithMode</span></a> only. </p>
 <p>Used to specify the start-up mode the system should
restart with. This is set to <a href="GUID-6866563D-8AF5-3F3F-A777-50B264194B83.html"><span class="apiname">EStartupModeUndefined</span></a> by default. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-AF30D941-BFD8-5260-9588-C5DA6983F558.html">System Startup</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>