<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Call Status and Call Control Tutorial"/>
<meta name="abstract" content="This tutorial describes how to manipulate the call status and control call information."/>
<meta name="description" content="This tutorial describes how to manipulate the call status and control call information."/>
<meta name="DC.Relation" scheme="URI" content="GUID-77072EB0-9FFD-55A0-B31B-9214CFE24481.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D49696D1-4B84-56B5-909D-A15F599F4B6D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BBF6E33F-2E9C-5BB1-8404-87289EC73BFF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-77072EB0-9FFD-55A0-B31B-9214CFE24481.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Call Status and Call Control Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563496 id2563017 id2562829 id2562568 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html" title="Cellular Baseband Services provide a common interface to telephony services for applications and higher level platform components. The framework is independent of the underlying network services.">Cellular Baseband Services Guide</a> &gt; <a href="GUID-D49696D1-4B84-56B5-909D-A15F599F4B6D.html">Telephony Server</a> &gt; <a href="GUID-BBF6E33F-2E9C-5BB1-8404-87289EC73BFF.html" title="The ETel multimode API enables access to common mobile telephony services for a number of air-interface cellular standards or modes. It also enables access to specialised services within the GSM and CDMA IS-95 standards and provides an API that allows switching between supported modes. Currently, GSM, CDMA (IS-95 and cdma2000) and WCDMA (3GPP rel '99) modes are the fully supported modes.">Multimode Telephony</a> &gt; <a href="GUID-77072EB0-9FFD-55A0-B31B-9214CFE24481.html">Multimode Call Sub-session Tutorials</a> &gt; </div>
<h1 class="topictitle1">Call
Status and Call Control Tutorial</h1>
<div><p>This tutorial describes how to manipulate the call status and control
call information. </p>



<div class="section"><p>The two diagrams below show the call state transitions for: </p>
 <ul>
<li id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-0E180A6C-517F-57F3-AC24-ECA8E2483B6A"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-0E180A6C-517F-57F3-AC24-ECA8E2483B6A"><!-- --></a><p>outbound calls or Mobile
Originated (MO) calls </p>
 </li>

<li id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-C34D2BE3-8A92-59B2-8A71-7919D0525328"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-C34D2BE3-8A92-59B2-8A71-7919D0525328"><!-- --></a><p>inbound calls or Mobile
Terminated (MT) calls </p>
 </li>

</ul>
 <div class="fignone" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-4BE26EDE-C073-5F33-AD39-D1659B3D936A"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-4BE26EDE-C073-5F33-AD39-D1659B3D936A"><!-- --></a><span class="figcap">Figure 1.               MO call state diagram            </span>

<img src="GUID-F041E4F2-AAA3-5C8C-B8C6-646974DEF76E_d0e51506_href.png"/>
</div>
 <div class="fignone" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-D9D38F90-FB12-5B14-8AAB-C1A305D11948"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-D9D38F90-FB12-5B14-8AAB-C1A305D11948"><!-- --></a><span class="figcap">Figure 2.               MT call state diagram            </span>

<img src="GUID-04B1D977-EE3F-5EC6-B1C7-68F6E4C801E2_d0e51514_href.png"/>
</div>
<p><a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall</span></a> provides the functions to manipulate
and control call actions. 
</p>
<p> The high level steps to use the call control information are: 
</p>
 </div>

<a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-2AFAD0AA-C0DB-5E8F-9754-43A26EAF026A"><!-- --></a><ol id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-2AFAD0AA-C0DB-5E8F-9754-43A26EAF026A"><li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-4A98A960-296F-589F-9FB8-8C8BE3436FF0"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-4A98A960-296F-589F-9FB8-8C8BE3436FF0"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::GetMobileCallCaps()</span></a> to get the
dynamic call control and call event capabilities. </span>

 The call control capabilities are dynamic and can change with the status
of the active call and calls. The capabilities also depend on the network
and the subscription of the user. 
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9D344B64-982A-5DD4-9B26-859A8B37E903"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9D344B64-982A-5DD4-9B26-859A8B37E903"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::NotifyMobileCallCapsChange()</span></a> to
get the notification of the capability changes. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-B2F48CCB-297E-5150-BED8-F38F8600B3D9"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-B2F48CCB-297E-5150-BED8-F38F8600B3D9"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::GetMobileCallStatus()</span></a> to
get the call status. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9A58C0FC-20FE-5836-8DAE-4B26911BB653"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9A58C0FC-20FE-5836-8DAE-4B26911BB653"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::NotifyMobileCallStatusChange()</span></a> to
get the notification of call status changes. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-5830289C-4978-59D1-BFC8-D835CCB5D142"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-5830289C-4978-59D1-BFC8-D835CCB5D142"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::NotifyCallEvent()</span></a> to
get the notification of call events. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9566472C-A341-5D94-B197-859DBC7A3BAD"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9566472C-A341-5D94-B197-859DBC7A3BAD"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::Hold()</span></a> to
put a call on hold. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-611A978B-43B6-50AD-98CE-F8A536837F7E"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-611A978B-43B6-50AD-98CE-F8A536837F7E"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::Resume()</span></a> to
resume a call from hold. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9CDC62D0-5284-5AA9-A45A-7458872B04A6"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-9CDC62D0-5284-5AA9-A45A-7458872B04A6"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::Swap()</span></a> to
swap between a call on hold and an active call. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-C9CA5D70-4009-5220-89B8-87D9CFD3431C"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-C9CA5D70-4009-5220-89B8-87D9CFD3431C"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::Deflect()</span></a> to
divert an incoming call to another destination. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-6EE40A86-E04C-587B-BC94-90ED69BB8E44"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-6EE40A86-E04C-587B-BC94-90ED69BB8E44"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::Transfer()</span></a> to
transfer a call to another user. </span>
</li>
<li class="stepexpand" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-A031E802-B369-5A7F-80DF-19D39A0CAB14"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-A031E802-B369-5A7F-80DF-19D39A0CAB14"><!-- --></a><span>Use <a href="GUID-7B623041-5DB3-3EF6-AAF4-5AA89B519855.html"><span class="apiname">RMobileCall::GoOneToOne()</span></a> to
transfer the call to one user of a conference call. </span>
</li>
</ol>

<div class="example"><h2 class="sectiontitle">Call control example</h2> <p>The following code declares
an enumeration that lists the various call control commands, and provides
a switch function that carries out the specified command. </p>
 <pre class="codeblock" id="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-88C9CE8E-1F05-5B22-B800-ACF3646CE69A"><a name="GUID-30C8FE14-00CA-5B7F-9970-30E9632F00A6__GUID-88C9CE8E-1F05-5B22-B800-ACF3646CE69A"><!-- --></a>/// Call control commands
enum TCallControlCommand
    {
    EPutOnHold,            // Put call on hold
    EResumeHeld,        // Resume on hold call
    ESwapHoldAndOngoing,// Swap an on-hold and an ongoing call
    EDeflectIncoming,    // Redirect an incoming call
    ETransferToRemote,    // Transfer one call to remote party of another call
    EConferenceOneToOne // Go "one-to-one" within a conference call
    };

// Execute a call control command
void CClientApp::CallControlL(RMobileCall&amp; aCall, TCallControlCommand aCommand, TRequestStatus&amp; aStatus)
    {

    // Get call capabilities to check can execute command
    RMobileCall::TMobileCallCapsV1 callCaps;
    RMobileCall::TMobileCallCapsV1Pckg callCapsPckg(callCaps);
    
    User::LeaveIfError(aCall.GetMobileCallCaps(callCapsPckg));

    switch (aCommand)
        {
        case EPutOnHold:
            if (callCaps.iCallControlCaps &amp; RMobileCall::KCapsHold)
             {
                aCall.Hold(aStatus);
             } 
        break;
     
        case EResumeHeld:
             if (callCaps.iCallControlCaps &amp; RMobileCall::KCapsResume)
            {
                aCall.Resume(aStatus);
            }
        break;
     
        case ESwapHoldAndOngoing:
            if (callCaps.iCallControlCaps &amp; RMobileCall::KCapsSwap)
            {
                aCall.Swap(aStatus);
            }    
        break;
     
        case EDeflectIncoming:
            if (callCaps.iCallControlCaps &amp; RMobileCall::KCapsDeflect)
            {
                aCall.Deflect(aStatus, RMobileCall::EDeflectRegisteredNumber, RMobilePhone::TMobileAddress());
            }    
        break;
     
        case ETransferToRemote:
            if (callCaps.iCallControlCaps &amp; RMobileCall::KCapsTransfer)
            {
                aCall.Transfer(aStatus);
            }
        break;
     
        case EConferenceOneToOne:
            if (callCaps.iCallControlCaps &amp; RMobileCall::KCapsOneToOne)
            {
                aCall.GoOneToOne(aStatus);
            }
        break;
     
        default:
        break;
        };
    };</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-77072EB0-9FFD-55A0-B31B-9214CFE24481.html">Multimode Call Sub-session Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>