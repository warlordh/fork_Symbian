<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Personality Layer for Real Time Applications"/>
<meta name="abstract" content="A base port can add a software layer called a personality layer to the Kernel to provide an emulation of a real time operating system (RTOS)"/>
<meta name="description" content="A base port can add a software layer called a personality layer to the Kernel to provide an emulation of a real time operating system (RTOS)"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Personality Layer for Real Time Applications</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2399872 id2399880 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-A91C6359-E547-51AD-AA8C-45BCAFBA98AC.html" title="EKA2 is the principal Hardware and Kernel Services module. It manages the CPU and memory resources of a phone, and provides an architecture for device drivers to manage other hardware resources.">Kernel Architecture (EKA2)</a> &gt; <a href="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html" title="Describes the architecture and technology features of the Kernel that are important for a base port.">Concepts</a> &gt; </div>
<h1 class="topictitle1">Personality
Layer for Real Time Applications</h1>
<div><p>A base port can add a software layer called a personality layer
to the Kernel to provide an emulation of a real time operating system (RTOS)</p>

<p>. You can provide a personality layer so that a phone can run existing
protocol stacks, for example, mobile telephony signalling stacks, or Bluetooth
stacks, on the same CPU that runs the Symbian platform applications. </p>

<p>Such protocol stacks, often referred to as Real Time Applications (RTA),
almost always run on an RTOS, and the aim of the personality layer is to provide
the same API as the RTOS, or at least as much of it as is required by the
RTA. The RTA can then run, using the Kernel Architecture 2 <a href="GUID-5B1D8D9C-90EF-5FCC-8D7D-01B13D6C2E68.html" title="The nanokernel is the core of the Kernel, and is a small real-time operating system (RTOS) designed to run Symbian platform.">Nanokernel</a> layer
as the underlying real time kernel. </p>

<p>The following diagram illustrates the point simply. </p>

<div class="fignone" id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-AA5502A3-37BE-5A73-A8D9-1B18DDCC8C96"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-AA5502A3-37BE-5A73-A8D9-1B18DDCC8C96"><!-- --></a>
<img src="GUID-058FAE44-DF72-53E2-BE62-EDC840A7C87F_d0e379935_href.png"/>
</div>

<p>There is sample code at <span class="filepath">...\e32\personality\...</span> that
you should refer to while reading this. </p>

<div class="section" id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-D1217729-E0E4-5A02-A02F-524EA9F1D679"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-D1217729-E0E4-5A02-A02F-524EA9F1D679"><!-- --></a><h2 class="sectiontitle">RTOS environment
features</h2> <p>As a basis for emulating an RTOS, the RTOS is assumed
to provide the following features: </p>
 <ul>
<li id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-107CEB20-80DA-5AF8-A116-C5FA5E437993"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-107CEB20-80DA-5AF8-A116-C5FA5E437993"><!-- --></a><p>Threads </p>
 </li>

<li id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-496701DC-E711-5509-B593-5B5A51A7DFC2"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-496701DC-E711-5509-B593-5B5A51A7DFC2"><!-- --></a><p>Thread synchronisation/communication </p>
 </li>

<li id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-5ADDB09E-7528-50E0-8661-C64C91AF32CA"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-5ADDB09E-7528-50E0-8661-C64C91AF32CA"><!-- --></a><p>Thread scheduling following
a hardware interrupt </p>
 </li>

<li id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-4856FE5E-95E6-5455-B226-9314071F948E"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-4856FE5E-95E6-5455-B226-9314071F948E"><!-- --></a><p>Timer management functionality </p>
 </li>

<li id="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-C721F13B-14F9-5E01-9721-19E9475A421B"><a name="GUID-2700AAC8-A034-5E7D-B0E0-26B49E68BB18__GUID-C721F13B-14F9-5E01-9721-19E9475A421B"><!-- --></a><p>Memory management. </p>
 </li>

</ul>
 <p><strong>Threads</strong> </p>
 <p>Threads
are independent units of execution, usually scheduled on a strict highest-priority-first
basis. There are generally a fixed number of priorities. Round robin scheduling
of equal priority threads may be available but is usually not used in real
time applications. Dynamic creation and destruction of threads may or may
not be possible. </p>
 <p><strong>Thread
synchronisation/communication</strong> </p>
 <p>Typical examples of such thread
synchronisation and communication mechanisms are semaphores, message queues
and event flags. </p>
 <p>There is wide variation between systems as to which
primitives are provided and what features they support. Again, dynamic creation
and destruction of such synchronisation and communication objects may or may
not be supported. Mutual exclusion protection is often achieved by simply
disabling interrupts, or occasionally by disabling rescheduling. </p>
 <p><strong>Thread scheduling following a hardware interrupt</strong> </p>
 <p>This is usually
achieved by allowing interrupt service routines (ISRs) to make system calls
which perform operations such as signalling a semaphore, posting a message
to a queue or setting event flags, which would cause a thread waiting on the
semaphore, message queue or event flag to run. </p>
 <p>Some systems don't
allow ISRs to perform these operations directly but require them to queue
some kind of deferred function call. This is a function which runs at a lower
priority than hardware interrupts (i.e. with interrupts enabled) but at a
higher priority than any thread - for example a Nucleus Plus HISR. The deferred
function call then performs the operation which causes thread rescheduling. </p>
 <p><strong>Timer management functionality</strong> </p>
 <p>A timer management function
is usually also provided, allowing several software timers to be driven from
a single hardware timer. On expiry, a software timer may call a supplied timer
handler, post a message to a queue or set an event flag. </p>
 <p><strong>Memory management</strong> </p>
 <p>An RTOS often provides memory management,
usually in the form of fixed size block management as that allows real time
allocation and deallocation. Some RTOSs may also support full variable size
block management. However most RTOSs do not support use of a hardware MMU
and, even if the RTOS supports it (for example OSE does), the real time applications
under consideration do not make use of such support since they are generally
written to run on hardware without an MMU. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-A16F9F31-182E-5301-B228-A457BD3530FE.html" title="Describes the architecture and technology features of the Kernel that are important for a base port.">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>