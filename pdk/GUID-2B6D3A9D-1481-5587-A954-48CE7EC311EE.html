<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Render Stage Display Control and Mapping"/>
<meta name="abstract" content="ScreenPlay has a new approach to display resolution control to support externally connected displays, such as TV-out. It involves the render stages plus a number of other components in the Graphics package, including the Window Server and the composition engine. The render stages are able to monitor and modify display control attributes, and to scale and position the application extent within the full UI area. In addition, they can optionally implement a display policy, which determines the UI to composition mapping policy."/>
<meta name="description" content="ScreenPlay has a new approach to display resolution control to support externally connected displays, such as TV-out. It involves the render stages plus a number of other components in the Graphics package, including the Window Server and the composition engine. The render stages are able to monitor and modify display control attributes, and to scale and position the application extent within the full UI area. In addition, they can optionally implement a display policy, which determines the UI to composition mapping policy."/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0EBE5733-A267-5F4A-85AD-87C3ECF80731.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-23E414B0-581B-5B6C-A449-8DA7AD8E1FA4.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Render Stage Display Control and Mapping</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384967 id2384982 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html" title="This section describes the generic Window Server plug-in framework and is mainly aimed at system integrators, UI platform providers and device and hardware manufacturers.">Window Server Plug-in Framework</a> &gt; <a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">Render Stages</a> &gt; </div>
<h1 class="topictitle1">Render Stage Display Control and Mapping</h1>
<div><p>ScreenPlay has a new approach to display resolution control to support externally connected displays, such as TV-out. It involves the render stages plus a number of other components in the Graphics package, including the Window Server and the composition engine. The render stages are able to monitor and modify display control attributes, and to scale and position the application extent within the full UI area. In addition, they can optionally implement a display policy, which determines the UI to composition mapping policy. </p>
<p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a>. <strong>Target audience</strong>: Device creators. </p>
 <p>This topic builds on the material covered in the following topics: </p>
 <ul><li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-2DC0F65B-E3B0-501C-98ED-0DE32A2C112C"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-2DC0F65B-E3B0-501C-98ED-0DE32A2C112C"><!-- --></a><p><a href="GUID-0EBE5733-A267-5F4A-85AD-87C3ECF80731.html" title="ScreenPlay provides support for externally connected displays, such as TV-out. Previous versions of Symbian and the non-ScreenPlay variant consider the size of all displays to be fixed, assuming them to be built into the phone. However, for High-Definition Multimedia Interface (HDMI) and composite video connectors, there is a range of resolutions that can change dynamically. ScreenPlay provides an optional feature that supports switching between resolutions at runtime.">Dynamic Resolution Switching</a>  </p>
 </li>
 <li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-8DA1CE87-22C3-5F38-B21A-B53EF6125869"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-8DA1CE87-22C3-5F38-B21A-B53EF6125869"><!-- --></a><p><a href="GUID-2E8929E6-9555-51D2-B41D-6F1D05A4DB87.html" title="Render stages are ROM-based plug-ins to the Window Server render stage framework. They can be chained to form a rendering pipeline, which takes the draw operations that are produced by the Window Server and ultimately passes them to the UI surface. Render stages can selectively filter, modify, or redirect the draw operation stream, as required—for example, to perform transition effects (TFX).">Render Stages Overview</a>  </p>
 </li>
 <li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-B281AE5F-48B8-5FEE-A847-F22192CEC841"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-B281AE5F-48B8-5FEE-A847-F22192CEC841"><!-- --></a><p><a href="GUID-11BC2AAA-FDB8-5600-8488-F27A9552E336.html" title="This topic builds on the Render Stages Overview and provides an introduction to the main render stage interfaces.">Render Stage Interfaces</a>  </p>
 </li>
 </ul>
 <div class="section"><h2 class="sectiontitle">Render stage display control and mapping interfaces</h2> <p>The following diagram provides an overview of the render stage display control interfaces. There is further information about the interfaces under separate headings below the diagram. </p>
 <div class="fignone" id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-0AC1C9CD-462F-5D6C-B641-F896DC1CF945"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-0AC1C9CD-462F-5D6C-B641-F896DC1CF945"><!-- --></a><span class="figcap">Figure 1. 
             The render stage display control interfaces 
          </span> <img src="GUID-B34485AB-FA14-5453-A2B2-EB85055E62A4_d0e248448_href.png"/></div>
 <p>Symbian provides a reference render stage implementation that device creators can use as an example when implementing their own. It demonstrates how to implement these interfaces. See <a href="GUID-23E414B0-581B-5B6C-A449-8DA7AD8E1FA4.html" title="The Window Server Plugins component provides render stage plug-ins for use in ScreenPlay. These reproduce the rendering behavior in Symbian OS v9.4. Device creators can use the supplied render stage plug-ins or use them as a reference when developing their own.">Window Server Plugins Component Overview</a> for more information. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">MWsDisplayControl</h2> <p> <a href="GUID-415B5416-A6DD-3471-8800-C76C48DA59DA.html"><span class="apiname">MWsDisplayControl</span></a> is derived from the <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html"><span class="apiname">MWsObjectProvider</span></a> and <a href="GUID-8391795F-3766-3F31-BDFA-832AE8B4DFD4.html"><span class="apiname">MDisplayControlBase</span></a> interfaces as shown in the following diagram. </p>
 <div class="fignone" id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-AD527796-B8AF-58D8-BA4C-CA48946EA504"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-AD527796-B8AF-58D8-BA4C-CA48946EA504"><!-- --></a><span class="figcap">Figure 2. 
             MWsDisplayControl class diagram 
          </span> <img src="GUID-768D58BA-28A8-5325-A3C3-6A95E1F98578_d0e248480_href.png"/></div>
 <p>For a diagram of the <a href="GUID-7ED11E23-6E13-36D4-BB10-8AE9E745C560.html"><span class="apiname">TDisplayConfiguration</span></a> class hierarchy, see the <a href="GUID-19C3DA8C-0128-5172-B859-4FD6F6197451.html" title="The Common Graphics Headers component contains classes that are used by a number of ScreenPlay components and their clients. The classes are divided between those that relate to surfaces and those that relate to display configuration.">Common Graphics Headers Component Overview</a>. </p>
 <p>A render stage uses the <a href="GUID-415B5416-A6DD-3471-8800-C76C48DA59DA.html"><span class="apiname">MWsDisplayControl</span></a> interface to intercept <a href="GUID-8391795F-3766-3F31-BDFA-832AE8B4DFD4.html#GUID-8391795F-3766-3F31-BDFA-832AE8B4DFD4__GUID-E4DE786F-547E-3A3B-90D2-31892A708E25"><span class="apiname">MDisplayControlBase::GetResolutions()</span></a> calls at runtime. A render stage can add <strong>virtual resolutions</strong> into the list of display resolutions in order to scale the full UI area to the full composition area. Using virtual resolutions in this way reduces the memory required for the UI buffers and allows the Window Server to work purely in the application UI coordinate space. Virtual resolutions are marked with a flag in the <a href="GUID-15E9E782-1D64-3E7C-8D43-51DF267FE6A9.html"><span class="apiname">TResolution</span></a> structure provided by <samp class="codeph">GetResolutions()</samp>. The structure also includes the size of the resolution in both pixels and twips. A render stage may also remove physical resolutions from the list in order to disable the client's ability to change the resolution. </p>
 <p>A render stage that provides virtual resolutions can include one (or more) virtual resolutions that give the UI pixel aspect ratio to fit a screen mode defined in the <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a>. However, this may require anisotropic scaling of the UI surface in the composition engine. For example, PAL has 720 x 576 non-square pixels. To get approximately square pixels, virtual resolutions of either 788 x 576 or 720 x 540 would work on a 4:3 display, and 1050 x 576 or 720 x 395 would work on a 16:9 display. The choice of stretching or shrinking virtual resolutions may depend on the quality of scaling available and other factors, and should only be used for backwards compatibility purposes. This is because 1:1 or integer scaling generally gives a better appearance for user interfaces. Providing shrinking virtual resolutions may also raise expectations in applications of a higher horizontal resolution than actually exists. </p>
 <p>The term <strong>real resolution</strong> is used for the display resolutions that are returned by the composition engine adaptation. These correspond to the supported composition spaces that the Window Server can select for output. These may be scaled and filtered beyond the composition engine adaptation (for example, in the physical display device, such as an HDMI TV). </p>
 <p>In addition to defining static screen modes in the <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a>, device creators can define one or two <strong>dynamic screen modes</strong> in the <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a>. These are used to represent the current display configuration—one for 0° and 180° rotations and the other for 90° and 270° rotations. The latter has the dimensions in both pixels and in twips swapped, to appear similar to the static modes. You define a dynamic screen mode by setting the <samp class="codeph">SCR_WIDTH</samp> and <samp class="codeph">SCR_HEIGHT</samp> parameters to -1. If there is only one dynamic mode, it is not possible to use the <a href="GUID-30479BE3-296E-3B4D-914D-B080ABD733E4.html"><span class="apiname">CWsScreenDevice</span></a> API to change the current rotation by 90 degrees. </p>
 <p>If <a href="GUID-0C384D35-77DD-318E-AF3E-C9ED5ADD9D11.html#GUID-0C384D35-77DD-318E-AF3E-C9ED5ADD9D11__GUID-EC440412-68AA-36F1-9DD4-DD85EF09E2B2"><span class="apiname">MDisplayControl::SetConfiguration()</span></a> is used to change the configuration, the dynamic mode(s) are updated as necessary. With two dynamic modes, if one is the current mode, the other generally becomes the new mode (even if only the resolution changed, for example) so that applications see a mode number change. The only time this does not happen is in the case of a 180° rotation, because the static mode behavior is to retain the current mode. </p>
 <p>Whenever the dynamic mode data changes, or a new mode is selected, an <a href="GUID-CC1E6B2E-F68F-3A00-B4EA-4917007F7320.html"><span class="apiname">EEventScreenDeviceChanged</span></a> event is sent to all clients that have enabled it. Window Server client functions are provided to query whether the current or a given mode index is dynamic. </p>
 <p>Without dynamic size modes, an application can still use the full display, by positioning windows outside the reported display area. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">MWsDisplayMapping</h2> <p> <a href="GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104.html"><span class="apiname">MWsDisplayMapping</span></a> is an "information" interface, answering questions rather than anything else. In ScreenPlay, there are several coordinate spaces and there is a common requirement to map a rectangle from one space to another. The render stage implements this interface and ultimately the Window Server exposes the mapping feature to its clients. The <a href="GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104.html"><span class="apiname">MWsDisplayMapping</span></a> interface derives from the <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html"><span class="apiname">MWsObjectProvider</span></a> and <a href="GUID-DE613CC2-E977-34E9-9476-21D349B1C1CF.html"><span class="apiname">MDisplayMappingBase</span></a> interfaces as shown in the following diagram. </p>
 <div class="fignone" id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-4C9F606A-D11E-5555-BC1A-32B20FA59362"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-4C9F606A-D11E-5555-BC1A-32B20FA59362"><!-- --></a><span class="figcap">Figure 3. 
             MWsDisplayMapping class diagram 
          </span> <img src="GUID-A6DE13A9-BD2F-5F14-864E-BAEC9C52B9DD_d0e248592_href.png"/></div>
 <p>The <a href="GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104.html"><span class="apiname">MWsDisplayMapping</span></a> interface is very flexible. UIDs are used to signify the application UI coordinate space, the full UI space, the composition/display coordinate space (which may be a different scale to the UI coordinate space) and the Direct Screen Access (DSA) space (which may match the full UI space, or be offset relative to the application UI space). </p>
 <p>The <a href="GUID-DE613CC2-E977-34E9-9476-21D349B1C1CF.html#GUID-DE613CC2-E977-34E9-9476-21D349B1C1CF__GUID-4BA10CBB-E4BA-3E56-816F-8F75AC4B6A2F"><span class="apiname">MDisplayMappingBase::MapCoordinates()</span></a> function simply takes a rectangle, a source space and a target space and returns the correspondingly mapped rectangle in the target space. The render stage must guarantee that if two rectangles abut in the source coordinate space, their mapped equivalents also abut. For information about the use of the <samp class="codeph">MapCoordinates()</samp> function by Window Server clients, see <a href="GUID-B1CB6374-2C2B-5D6C-9A7C-6E49D8F235B8.html" title="ScreenPlay provides support for externally connected displays, such as TV-out. Previous versions of Symbian and the non-ScreenPlay variant consider the size of each display to be fixed, assuming it to be built into the phone. However, for High-Definition Multimedia Interface (HDMI) and composite video connectors, there is a range of resolutions that can change dynamically. ScreenPlay provides an optional feature that supports switching between resolutions at runtime and notifies Window Server clients when there are changes to the resolution and connectedness.">Display Control and Mapping in the Window Server Client</a>. </p>
 <p>The <a href="GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104.html#GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104__GUID-F77D8AB1-CF35-36CB-B317-9857317A6E66"><span class="apiname">MWsDisplayMapping::SetSizeModeExtent()</span></a> function sets the screen mode extent for use in one or more contexts. If this is successful, the offset is set on the render stage pipeline in two ways: </p>
 <ul><li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-E74FCA00-4A72-5317-A359-1641CB37FD46"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-E74FCA00-4A72-5317-A359-1641CB37FD46"><!-- --></a><p>Firstly, the offset applies to rendering and must only affect the coordinates in the first render stage that actually performs rendering, and not to later stages. For example, in the reference configuration of the <em>flicker buffer</em> and <em>display</em> render stages, only the <em>flicker buffer</em> render stage applies the rendering offset. A render stage using a <a href="GUID-DAD09DCF-3123-38B4-99E9-91FB24B92138.html"><span class="apiname">CGraphicsContext</span></a> can use <a href="GUID-BA0355E9-F878-3B2D-A0B3-DAABE6054990.html"><span class="apiname">SetOrigin()</span></a> to apply the offset. Other graphics contexts may have a similar feature. </p>
 </li>
 <li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-D9F36E47-60BB-5AF3-8861-BA4773BE9E10"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-D9F36E47-60BB-5AF3-8861-BA4773BE9E10"><!-- --></a><p>Secondly, the offset is applied to translate the coordinates of the scene element's destination rectangle (layer extent). This means it is applied only by the first stage that implements the scene element translation. In the reference configuration, this is the <em>display</em> stage. </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle">MWsDisplayPolicy</h2> <p> <a href="GUID-0A31CF3E-25A9-36BA-80D6-8FBD18419506.html"><span class="apiname">MWsDisplayPolicy</span></a> is an optional interface, which derives from <a href="GUID-A47A4139-70FD-3F76-B51E-0452A0F6A76F.html"><span class="apiname">MWsObjectProvider</span></a> as shown in the following diagram. The main purpose of <a href="GUID-0A31CF3E-25A9-36BA-80D6-8FBD18419506.html"><span class="apiname">MWsDisplayPolicy</span></a> is to enable the render stage chain to position the application extent as intelligently as possible to suit the resolution. However, there is no requirement for the render stage chain to implement the interface. If it is not implemented, the offset defined in the <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a> is used. If that is not available a zero offset is used. </p>
 <div class="fignone" id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-BF62EC7F-AA84-5D55-BD20-80413A609C77"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-BF62EC7F-AA84-5D55-BD20-80413A609C77"><!-- --></a><span class="figcap">Figure 4. 
             MWsDisplayPolicy class diagram 
          </span> <img src="GUID-20C633DE-CD37-5807-9F2E-6E4CFC35DB28_d0e248680_href.png"/></div>
 <p>The <samp class="codeph">GetSizeModeConfiguration()</samp> function determines the display configuration and application rendering extent to use for a given screen mode defined in the <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a>. The Window Server calls this when an eligible client does one of the following: </p>
 <ul><li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-9B507277-6B4F-5301-92E0-1394BCAA60C8"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-9B507277-6B4F-5301-92E0-1394BCAA60C8"><!-- --></a><p>Sets the system screen mode using <a href="GUID-30479BE3-296E-3B4D-914D-B080ABD733E4.html#GUID-30479BE3-296E-3B4D-914D-B080ABD733E4__GUID-9F04C517-7891-3A44-B280-4FD18FABBA0E"><span class="apiname">CWsScreenDevice::SetScreenMode()</span></a>. In this case the configuration structure passed to the policy function is empty because it is the current configuration. </p>
 </li>
 <li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-F904BE5B-B3D3-5C6A-B6B7-D5DEC52B8A1A"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-F904BE5B-B3D3-5C6A-B6B7-D5DEC52B8A1A"><!-- --></a><p>Sets a new display configuration. In this case the requested configuration is passed to the policy function. </p>
 </li>
 </ul>
 <p>On success, the render stage fills in the <a href="GUID-7ED11E23-6E13-36D4-BB10-8AE9E745C560.html"><span class="apiname">TDisplayConfiguration</span></a> structure. Then the Window Server calls the following as appropriate: </p>
 <ul><li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-22BC6E2C-7DE5-523B-A342-1AC9921D7B1E"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-22BC6E2C-7DE5-523B-A342-1AC9921D7B1E"><!-- --></a><p> <a href="GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104.html#GUID-ED4CAB66-F8F8-3AF2-A388-F28406A3B104__GUID-F77D8AB1-CF35-36CB-B317-9857317A6E66"><span class="apiname">MWsDisplayMapping::SetSizeModeExtent()</span></a> and passes the configuration structure to indicate the position and size of the application area. </p>
 </li>
 <li id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-266C1CDD-21B1-5FD9-B91A-1C6092AF1D63"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-266C1CDD-21B1-5FD9-B91A-1C6092AF1D63"><!-- --></a><p> <a href="GUID-41595893-B693-34C3-A5FF-05EC433153E6.html#GUID-41595893-B693-34C3-A5FF-05EC433153E6__GUID-275B3E0B-26DF-3292-9DE5-2E9D020FC4CC"><span class="apiname">MWsDisplayContol::SetConfiguration()</span></a> and passes the configuration structure to indicate the appropriate real or virtual display resolution. </p>
 </li>
 </ul>
 <p>On failure, the current screen mode and display resolution are retained, but a screen device changed event should still be sent, because there is no way to return failure to the caller. </p>
 <p>Applications are given the static offset associated with the screen mode, not the offset described above. Note that because of the way that DSA works, if the render stage uses a <a href="GUID-B229156F-2344-3F46-8542-AC65882D80DE.html"><span class="apiname">CFbsScreenDevice</span></a> object for rendering, the DSA buffer and the UI buffer are the same (that is, the Screen Driver surface). This means that the offset returned by this policy function must be the same as the one passed in. The policy function has the option to reject the mode change, however. </p>
 <p>The Symbian <em>display</em> render stage applies a "best fit" approach, taking into account virtual resolutions if configured, whereby the offset and resolution are chosen to make the screen mode fill as much of the display as possible, while retaining the same (or very similar) pixel aspect ratio. The offset may be limited if the Screen Driver surface is being used for rendering, as described above. The quality of the scaling of screen modes to virtual resolutions and real resolutions is determined by the <samp class="codeph">DP_SCALING</samp>  <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a> parameter. However, more typically a render stage would implement just one scaling mode, and not require configuration. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">MWsScreenConfigList</h2> <p>The Window Server exposes the <a href="GUID-4A0B562B-8AF2-3381-864A-2B55166F0322.html"><span class="apiname">MWsScreenConfigList</span></a> interface for use by render stages. Render stages can use this to get the screen mode parameters for a given index without parsing the <a href="GUID-1D529BDC-6665-58E2-AB3F-7023D8A84F69.html" title="This topic provides a reference to the wsini.ini file parameters. Some of the parameters are general, some are screen-specific and some are specific to individual plug-ins.">wsini.ini file</a>. This interface is similar to <a href="GUID-02C89F7D-6464-33A7-ABE6-C02B2941382A.html"><span class="apiname">MWsScreenConfig</span></a>, which applies only to the current mode. The <a href="GUID-4A0B562B-8AF2-3381-864A-2B55166F0322.html"><span class="apiname">MWsScreenConfigList</span></a> methods leave only if the mode index is out of range. </p>
 <div class="fignone" id="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-6E9333CE-FB17-5E4A-BEBA-77633CAE74F3"><a name="GUID-2B6D3A9D-1481-5587-A954-48CE7EC311EE__GUID-6E9333CE-FB17-5E4A-BEBA-77633CAE74F3"><!-- --></a><span class="figcap">Figure 5. 
             MWsScreenConfigList class diagram 
          </span> <img src="GUID-6DE7E0C8-A75E-5F09-BEC1-180602BF2051_d0e248783_href.png"/></div>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">Render Stages</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-0EBE5733-A267-5F4A-85AD-87C3ECF80731.html" title="ScreenPlay provides support for externally connected displays, such as TV-out. Previous versions of Symbian and the non-ScreenPlay variant consider the size of all displays to be fixed, assuming them to be built into the phone. However, for High-Definition Multimedia Interface (HDMI) and composite video connectors, there is a range of resolutions that can change dynamically. ScreenPlay provides an optional feature that supports switching between resolutions at runtime.">Dynamic Resolution
                Switching</a></div>
<div><a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">Render Stages</a></div>
<div><a href="GUID-23E414B0-581B-5B6C-A449-8DA7AD8E1FA4.html" title="The Window Server Plugins component provides render stage plug-ins for use in ScreenPlay. These reproduce the rendering behavior in Symbian OS v9.4. Device creators can use the supplied render stage plug-ins or use them as a reference when developing their own.">Window Server Plugins Component
                Overview</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>