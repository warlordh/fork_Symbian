<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Image Decoding"/>
<meta name="DC.Relation" scheme="URI" content="GUID-786A8188-AB4D-5C65-8BEF-50E45FDBE9A5.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3E341F9F-2635-589B-A59A-B999FE7DF9BE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7DB86BF1-0485-5CBA-9554-4C474B0EC1FB.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A68D1F27-FE7E-503E-B5B6-7BD555B88558.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-786A8188-AB4D-5C65-8BEF-50E45FDBE9A5.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-88091838-03FC-550F-9A3D-DA70907EF955.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3D9C4B45-EEA0-581C-A9E5-8B2535014930.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6DC34798-86CE-537D-B3B8-9A94FF77B283.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A825B62E-B5F6-5FDD-B267-E47103D57FD8.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Image Decoding</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2405098 id2405245 id2405618 id2405735 id2405749 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html">Multimedia Guide</a> &gt; <a href="GUID-3E341F9F-2635-589B-A59A-B999FE7DF9BE.html">Multimedia APIs and Frameworks Collection</a> &gt; <a href="GUID-7DB86BF1-0485-5CBA-9554-4C474B0EC1FB.html">Imaging Frameworks Component</a> &gt; <a href="GUID-A68D1F27-FE7E-503E-B5B6-7BD555B88558.html">Image Conversion Library</a> &gt; <a href="GUID-786A8188-AB4D-5C65-8BEF-50E45FDBE9A5.html">Tutorials</a> &gt; </div>
<h1 class="topictitle1">Image
Decoding</h1>
<div>
<p>This document gives you more information about the Image Decoding functionality. </p>

<div class="section" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-41872C2C-A6EB-446B-AA79-62BAA6B69437"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-41872C2C-A6EB-446B-AA79-62BAA6B69437"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>The image decoding class <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> provides
functions to decode images held in descriptors or files from standard formats
for use with devices such as screens, browsers and viewer applications. </p>
 <p><strong>Required Background</strong> </p>
 <p>Image decoding features are provided through
Imaging Frameworks and Imaging plugins. The standard formats supported by
the decode plugins are shown in the table in <a href="GUID-88091838-03FC-550F-9A3D-DA70907EF955.html">Imaging
Frameworks Overview</a>. </p>
 <p><strong>Introduction</strong> </p>
 <p>The decoding process comprises the following sections: </p>
 <ul>
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-BE3B993F-3793-55B4-9ADB-9456FE73CA19"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-BE3B993F-3793-55B4-9ADB-9456FE73CA19"><!-- --></a><p> <strong>Creation</strong> - The
creation of the <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> object and any requirements
necessary. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D5FE22F6-687F-560D-A336-4F01B5945273"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D5FE22F6-687F-560D-A336-4F01B5945273"><!-- --></a><p> <strong>Conversion</strong> -
Covers the basic form of image decoding. More advanced features such as progressive
and buffered decoding are described separately. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9A4AD0DE-AFCF-5F33-AAC7-007FD9F8A291"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9A4AD0DE-AFCF-5F33-AAC7-007FD9F8A291"><!-- --></a><p> <strong>Enquiry features</strong> -
Additional features that enable you to retrieve information stored in certain
types of images, for example frame information and comments. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-643CE012-6C73-5068-A7AD-FDA810FBBFD8"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-643CE012-6C73-5068-A7AD-FDA810FBBFD8"><!-- --></a><p> <strong>Streamed and progressive
decoding</strong> - Reading partial image files and displaying image data before
the entire image is read. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E3D6BB50-DBE9-5967-9FAC-B56BCBCCADAC"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E3D6BB50-DBE9-5967-9FAC-B56BCBCCADAC"><!-- --></a><p> <strong>Buffered decoding</strong> -
The decoding of an image using a buffered input rather than a file or descriptor. </p>
 </li>

</ul>
 <p><strong>Setup
and Configuration Requirements</strong> </p>
 <p>The <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> classes
use synchronous methods to open an image and asynchronous methods to perform
conversions or transformations. The asynchronous operations use the standard
system of taking a pointer to a <a href="GUID-E0B34F3E-D4C4-3232-B8B1-7DB35B454646.html"><span class="apiname">TRequestStatus</span></a> object that
is signalled on completion of the requested action. The assumption is that
the client application or the calling DLL holds the <samp class="codeph">TRequestStatus</samp> values
within active objects. The structure of the active objects is dependent on
the code that uses the Imaging Frameworks and its own requirements, particularly
its internal architecture and how many images are opened simultaneously. </p>
 <p>In
addition to the use of active objects in the interfacing, many of the Imaging
Frameworks internal functions make extensive use of them to provide asynchronous
behaviour. As with any use of an active object it is necessary to have an
active scheduler in the same thread as the application making use of the object.
The Decoders can also be created so the plugin and framework runs in a separate
thread. This is achieved by setting the <samp class="codeph">EOptionAlwaysThread</samp> option
when constructing the decoder objects. By running the object in its own thread,
the application is shielded from any latency that can occur during image conversion,
or possibly due to a badly written plugin. </p>
 </div>

<div class="section" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-6741516A-A0A7-4021-9A5A-6855E4AE9E8B"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-6741516A-A0A7-4021-9A5A-6855E4AE9E8B"><!-- --></a><h2 class="sectiontitle">Using Image Decoding </h2> <p>The Following tasks are covered
in this tutorial: </p>
 <ul>
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-085EEC3C-C78B-5FDC-B630-C3A28DF0CA1F"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-085EEC3C-C78B-5FDC-B630-C3A28DF0CA1F"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1F8A0DCC-CB95-5245-9ED0-FE4A775152D0">How to create the object during decoding</a> </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A5E71C36-E811-509B-A547-04F174B7000B"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A5E71C36-E811-509B-A547-04F174B7000B"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-7A3F98C2-C86B-5DC4-9F0E-EAE030341325">How to convert encoded data to decoded data</a>  </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D6EDE32F-F011-5191-AD15-AD8FAEFC5C75"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D6EDE32F-F011-5191-AD15-AD8FAEFC5C75"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-FF418A2D-436B-515F-B9D1-E0A0C87E7394"> How to retrieve the information stored in certain types of images</a>  </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-05966714-BB75-5DB1-86E5-4FE075507C2D"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-05966714-BB75-5DB1-86E5-4FE075507C2D"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-AA950124-42DE-5A65-B371-7D85F43D71A6">How to perform the streaming and the progressive during decoding</a>  </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-3BBA8FBB-FB2E-5774-921E-8BBAC95DF55C"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-3BBA8FBB-FB2E-5774-921E-8BBAC95DF55C"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C7FEA8F9-B367-52B1-9D26-84F9E225D17C">How to perform the buffered decoding</a>  </p>
 </li>

</ul>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1F8A0DCC-CB95-5245-9ED0-FE4A775152D0"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1F8A0DCC-CB95-5245-9ED0-FE4A775152D0"><!-- --></a><strong>Basic Procedure For Creation</strong> </p>
 <p>The
high level steps to create the object during decoding are as follows: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A8F73379-5277-5ACC-82A4-9199BE24142A"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A8F73379-5277-5ACC-82A4-9199BE24142A">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-166216C0-5CAA-5FF4-8B40-BB562EEF3C61"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-166216C0-5CAA-5FF4-8B40-BB562EEF3C61"><!-- --></a><p> <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> decodes
images stored in files or in descriptors. The decoder object is owned by the
client and must be deleted once decoding is finished. <samp class="codeph">CImageDecoder</samp> objects
cannot be reused to decode other images, each image requires its own instance
of the decoder. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-BB617D39-8A46-5C7F-A28B-7C334F24594C"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-BB617D39-8A46-5C7F-A28B-7C334F24594C"><!-- --></a><p> <samp class="codeph">CImageDecoder</samp> objects
are created using the <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-00FB83E8-3759-32BE-B6E8-6F04EC60A909"><span class="apiname">CImageDecoder::DataNewL()</span></a> and <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-6DA07559-7DDC-32A9-9E09-D557348D46DE"><span class="apiname">CImageDecoder::FileNewL()</span></a> factory
functions for images held in descriptors or files respectively. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-F1D28859-A28F-56EA-8755-25C8FF70BB50"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-F1D28859-A28F-56EA-8755-25C8FF70BB50"><!-- --></a><p>When you create a <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> object,
a suitable plugin must be associated with the image to be decoded. The Imaging
plugin depends on the factory function you use to create the object and what
parameters you specify. There are four alternatives: </p>
 <ul>
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A40501AD-3679-5612-AA43-06DB6345C79D"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A40501AD-3679-5612-AA43-06DB6345C79D"><!-- --></a><p> <strong>MIME type</strong> The
plugin is determined by looking up a specified MIME type against a list of
known MIME type/plugin implementations. Use the following "File" factory function
(or its "Data" equivalent). </p>
 <pre class="codeblock" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-FF20429E-3D1D-5D99-9548-9AA701AC1B32"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-FF20429E-3D1D-5D99-9548-9AA701AC1B32"><!-- --></a>static CImageDecoder* FileNewL(RFs&amp; aFs, const TDesC&amp; aSourceFilename, const TDesC8&amp; aMIMEType, const TOptions aOptions = EOptionNone);
</pre>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9D96F47A-F784-5252-AAC9-3DDEF2E96764"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9D96F47A-F784-5252-AAC9-3DDEF2E96764"><!-- --></a><p> <strong>Image type and sub-type</strong> The
plugin is determined by looking up the specified image type and sub-types
against a list of known type/sub-type plugin implementations. Use the following
"File" factory function (or its "Data" equivalent). </p>
 <pre class="codeblock" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-2D5A7779-CBE9-5B3E-B9E7-C5CD7631DB33"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-2D5A7779-CBE9-5B3E-B9E7-C5CD7631DB33"><!-- --></a>static CImageDecoder* FileNewL(RFs&amp; aFs, const TDesC&amp; aSourceFilename, const TOptions aOptions = EOptionNone, const TUid aImageType = KNullUid, const TUid aImageSubType = KNullUid, const TUid aDecoderUid = KNullUid);
</pre>
 <p> <strong>Note:</strong> For images types that do not have sub-types
use <samp class="codeph">KNullUid</samp>. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D80A799E-E49E-547C-9286-1AB38F8EB819"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D80A799E-E49E-547C-9286-1AB38F8EB819"><!-- --></a><p> <strong>Implementation UID</strong> The
plugin is determined by looking up its specific UID and the image type and
sub-type. Use the same <samp class="codeph">FileNewL()</samp> factory function shown
in "Image type and sub-type", but in addition to the type and sub-type parameters,
also specify the plugin UID using <samp class="codeph">aDecoderUid</samp>. </p>
 <p> <strong>Note:</strong> Implementation
UID is supported because it is possible to have more than one plugin for a
particular image type. This method is recommended if the application or calling
DLL needs to exploit features of a particular plugin. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A08944FA-6BE6-574A-AE00-5F12F5A07F0B"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A08944FA-6BE6-574A-AE00-5F12F5A07F0B"><!-- --></a><p> <strong>Automatic detection</strong> -
no MIME type, format type/sub-type or UIDs are specified. The plugin analyses
the header information of the specified image. Use the same <samp class="codeph">FileNewL()</samp> factory
function shown in "Image type and sub-type", but do not specify any values
for <samp class="codeph">aImageType</samp>  <samp class="codeph">aImageSubType</samp> or <samp class="codeph">aDecoderUid</samp>. </p>
 <p>If
a suitable plugin cannot be found, the factory function leaves with <samp class="codeph">KErrNotFound</samp>.
If a suitable plugin is found, but that plugin cannot interpret the image
data the factory function leaves with <samp class="codeph">KErrCorrupt</samp>. </p>
 <p>Note:
Some image formats cannot be automatically detected because they do not contain
sufficient header information, for example, WBMP and OTA images. Under such
circumstances, use one of the other three alternative for opening the image. </p>
 </li>

</ul>
 </li>

</ol>
 <p>It is possible for more than one valid plugin decoder to be available
for a specific image format. If a plugin determined by MIME type or type/sub-type
fails to open an image due to <samp class="codeph">KErrCorrupt</samp>, it will continue
to try with subsequent valid plugins if available. This mechanism is carried
out in the system and is not visible to the application. If you require a
specific function available within a specific plugin, specify that plugin
using <samp class="codeph">aDecoderUid</samp>. </p>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-7A3F98C2-C86B-5DC4-9F0E-EAE030341325"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-7A3F98C2-C86B-5DC4-9F0E-EAE030341325"><!-- --></a><strong>Basic Procedure For Conversion </strong> </p>
 <p>The
high level steps to convert encoded data to decoded data are as follow: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-495365EB-B53D-5229-AD45-F9700A22F2AB"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-495365EB-B53D-5229-AD45-F9700A22F2AB">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-4B6AEB44-3426-5B83-A12E-755230627D23"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-4B6AEB44-3426-5B83-A12E-755230627D23"><!-- --></a><p>As part of the <samp class="codeph">CImageDecoder</samp> creation
basic information about the image is pre-read from the image headers. This
information is used to support certain enquiry methods such as <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-6506DA99-55E9-3524-BD64-528E145915F4"><span class="apiname">CImageDecoder::FrameCount()</span></a> and <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-7CE85F05-6D58-30F1-87D3-324BFB6131FB"><span class="apiname">CImageDecoder::FrameInfo()</span></a> (For more information about the retrieve information stored in certain types
of images is supplied in <a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-FF418A2D-436B-515F-B9D1-E0A0C87E7394">Retrieve
Information features</a>). </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-18D5494C-BECC-52A5-9C51-60A9E560C816"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-18D5494C-BECC-52A5-9C51-60A9E560C816"><!-- --></a><p>You can decode any subset
of individual frames, in any order, and to repeat the decoding if necessary.
To decode an image frame use the asynchronous conversion method <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-8118AC37-471E-3CB6-9F71-4E93507DDE57"><span class="apiname">CImageDecoder::Convert()</span></a>,
as follows. </p>
 </li>

</ol>
 <pre class="codeblock" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-557B2DE9-6AA7-593B-A1A7-0D1E4352E184"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-557B2DE9-6AA7-593B-A1A7-0D1E4352E184"><!-- --></a>
void Convert(TRequestStatus* aRequestStatus, CFbsBitmap&amp; aDestination, TInt aFrameNumber = 0);

void ContinueConvert(TRequestStatus* aRequestStatus);</pre>
 <p> <strong> Note:</strong> The
use of <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-F4F5A5F6-03E5-3801-93CC-A023363F35F8"><span class="apiname">CImageDecoder::ContinueConvert()</span></a> is described in <a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-AA950124-42DE-5A65-B371-7D85F43D71A6">Streamed
and progressive decoding</a>. </p>
 <p>There are different type of sub-procedures
which have to be followed before decode conversion, they are: </p>
 <ul>
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1F27341A-4A6A-5269-AA61-CBB0FB620258"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1F27341A-4A6A-5269-AA61-CBB0FB620258"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-52CAB4D2-BFA9-528C-ADB6-88515893F2B1">Bitmap Masks conversion</a>  </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-3537322C-B7E7-502D-A773-294DEC45A6DC"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-3537322C-B7E7-502D-A773-294DEC45A6DC"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-03A3E6BD-8702-5C0D-8265-F956EC03CD73">Scaling and display modes</a>  </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D11765E3-CD93-5CF2-A530-B7725F742861"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-D11765E3-CD93-5CF2-A530-B7725F742861"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9C2E0BFC-61FE-5F83-A78A-C9248C5D6FA3">Animations</a>  </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-EA7899D9-F950-514D-9696-072C14116B44"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-EA7899D9-F950-514D-9696-072C14116B44"><!-- --></a><p><a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9BD9C48A-B582-5730-B03F-CF6CB00DF6D1">Background colours </a>  </p>
 </li>

</ul>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-52CAB4D2-BFA9-528C-ADB6-88515893F2B1"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-52CAB4D2-BFA9-528C-ADB6-88515893F2B1"><!-- --></a><strong>Basic Procedure For Bitmap
Masks conversion</strong> </p>
 <p>The high level steps to Bitmap Masks conversion
are as follows: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A330923C-DA1E-55CF-A01C-151CD203D37B"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A330923C-DA1E-55CF-A01C-151CD203D37B">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E493B5B2-D8A2-5428-846B-0BA902EAF641"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E493B5B2-D8A2-5428-846B-0BA902EAF641"><!-- --></a><p>There is a second variant
of the <samp class="codeph">Convert()</samp> function intended for use when decoding
images with bitmap masks. </p>
 <pre class="codeblock" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-F6213C82-A604-57F0-B4C2-5667007CAD53"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-F6213C82-A604-57F0-B4C2-5667007CAD53"><!-- --></a>
void Convert(TRequestStatus* aRequestStatus, CFbsBitmap&amp; aDestination, CFbsBitmap&amp; aDestinationMask, TInt aFrameNumber = 0);
</pre>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1E7DC04E-A101-5C33-B6B5-BE5F83E95801"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1E7DC04E-A101-5C33-B6B5-BE5F83E95801"><!-- --></a><p>Within the Symbian platform
it is normal to store the bitmap mask separately from the main image data.
Calls such as <a href="GUID-2395FA67-5DCD-3CD7-BBB6-66625A3E2B6E.html"><span class="apiname">BitBltMasked()</span></a> expect this data to be provided
separately. This separation is true for both <a href="GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><span class="apiname">CFbsBitmap</span></a> objects
and MBM files. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B9CE26DF-AE1C-592F-8C0E-DD0AAD69BF60"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B9CE26DF-AE1C-592F-8C0E-DD0AAD69BF60"><!-- --></a><p>To determine whether
an image contains a bitmap mask use <samp class="codeph">FrameInfo()</samp>, the presence
or absence of a mask will be indicated the <samp class="codeph">ETransparencyPossible</samp> flag. </p>
 <p>The
following two types of mask are available: </p>
 <ul>
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1A03053A-C797-57EF-978E-C25A1D32163A"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1A03053A-C797-57EF-978E-C25A1D32163A"><!-- --></a><p> <strong>8-bit alpha blend</strong> -
indicated by the <samp class="codeph">EAlphaChannel</samp> flag of <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-7CE85F05-6D58-30F1-87D3-324BFB6131FB"><span class="apiname">CImageDecoder::FrameInfo()</span></a>  <samp class="codeph">iFlags</samp>.
The destination mask bitmap must be of type <samp class="codeph">EGray256</samp>. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9B51A424-66ED-584F-A3CD-55D575B38FEA"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9B51A424-66ED-584F-A3CD-55D575B38FEA"><!-- --></a><p> <strong>Simple on/off mask</strong> -
if no <samp class="codeph">EAlphaChannel</samp> flag is set. The destination bitmap mask
can be either <samp class="codeph">EGray2</samp> or <samp class="codeph">EGray256</samp>. </p>
 </li>

</ul>
 </li>

</ol>
 <p> <strong>Note:</strong> Images that contain bitmap masks do not have to have
those masks decoded if they are not required. </p>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-03A3E6BD-8702-5C0D-8265-F956EC03CD73"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-03A3E6BD-8702-5C0D-8265-F956EC03CD73"><!-- --></a><strong>Basic Procedure For Scaling
and display modes</strong> </p>
 <p>The high level steps to Scale and display are
shown here: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-DE0D4041-CBBF-5841-BE53-A8F6EA2CDE38"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-DE0D4041-CBBF-5841-BE53-A8F6EA2CDE38">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-921CCDF6-7346-577E-AEC2-217C82329D44"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-921CCDF6-7346-577E-AEC2-217C82329D44"><!-- --></a><p>Before <samp class="codeph">Convert()</samp> is
used, the destination <a href="GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><span class="apiname">CFbsBitmap</span></a> objects for image data
and bitmap masks are created. The simplest way to do this is to use a 1 to
1 approach, that is, create the <samp class="codeph">CFbsBitmap</samp> object with the
same properties as the source image. This is achieved by using something similar
to: </p>
 <pre class="codeblock" id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-198859CC-C33A-5BE8-B75C-C32746D65DF7"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-198859CC-C33A-5BE8-B75C-C32746D65DF7"><!-- --></a>iFrameInfo = &amp;imageDecoder-&gt;FrameInfo(FrameNum);

iBitmap-&gt;Create(iFrameInfo-&gt;iOverallSizeInPixels, iFrameInfo-&gt;iFrameDisplayMode );
</pre>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B3559310-560A-5671-9560-509F14B729ED"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B3559310-560A-5671-9560-509F14B729ED"><!-- --></a><p>If the <samp class="codeph">ECanDither</samp> flag
of <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-7CE85F05-6D58-30F1-87D3-324BFB6131FB"><span class="apiname">CImageDecoder::FrameInfo()</span></a>  <samp class="codeph">iFlags</samp> is
set then the destination display mode can be adjusted. It is recommended that
the window display mode is used as it is more efficient. </p>
 <p> <strong>Note:</strong> The
mask bitmap must have the same size in pixels as the main image, even though
the display mode is generally different. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B517656C-3294-5D3A-92E3-442CAE099FE1"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B517656C-3294-5D3A-92E3-442CAE099FE1"><!-- --></a><p>The size of the image
bitmap is available via <samp class="codeph">FrameInfo()</samp> (<samp class="codeph">iOverallSizeInPixels</samp>).
However, in addition to a direct mapping of the size of an image, <a href="GUID-062B8E74-EDEF-3A98-9728-79C3E5A8C829.html"><span class="apiname">ReducedSize()</span></a> function
can be used to calculate the reduced size of the decoded bitmap based on the
input parameters. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-52299AC9-377C-5DEB-B16A-BDA0538D91A7"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-52299AC9-377C-5DEB-B16A-BDA0538D91A7"><!-- --></a><p>If the <samp class="codeph">EFullyScaleable</samp> flag
of <samp class="codeph">FrameInfo()</samp>  <samp class="codeph">iFlags</samp> is set, you can specify
any size for the <a href="GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><span class="apiname">CFbsBitmap</span></a> and the image will be resized
accordingly. </p>
 </li>

</ol>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9C2E0BFC-61FE-5F83-A78A-C9248C5D6FA3"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9C2E0BFC-61FE-5F83-A78A-C9248C5D6FA3"><!-- --></a><strong>Basic Procedure For Animations</strong> </p>
 <p>The
high level steps to decode a GIF multi-frame image are as follow: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C7E99D55-48C9-5329-B07B-28A65AB102D6"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C7E99D55-48C9-5329-B07B-28A65AB102D6">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-53364690-F9D3-5A80-9FAA-2046F8DB80AB"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-53364690-F9D3-5A80-9FAA-2046F8DB80AB"><!-- --></a><p>Included in the <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-7CE85F05-6D58-30F1-87D3-324BFB6131FB"><span class="apiname">CImageDecoder::FrameInfo()</span></a> result
are flags that enable the support of GIF animation. These flags are <samp class="codeph">iDelay</samp>, <samp class="codeph">ELeaveInPlace</samp>, <samp class="codeph">ERestoreToBackground</samp> and <samp class="codeph">ERestoreToPrevious</samp>. ICL provides these flags to enable
the application to implement the animation; ICL does not provide functions
to display the animation directly. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-3BAC1045-E210-5B1A-93E9-BB15C9FC1871"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-3BAC1045-E210-5B1A-93E9-BB15C9FC1871"><!-- --></a><p>Processing the information
from these flags will inevitably require a state machine, and additional timers,
within the application. Requirements will vary depending on the architecture
of the client application itself. </p>
 </li>

</ol>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9BD9C48A-B582-5730-B03F-CF6CB00DF6D1"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-9BD9C48A-B582-5730-B03F-CF6CB00DF6D1"><!-- --></a><strong>Basic Procedure For Background
colours</strong> </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-2D46054E-1344-5B17-B353-8A68A0C97DB0"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-2D46054E-1344-5B17-B353-8A68A0C97DB0">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-41959955-766E-5AAD-AA6D-65C4F99E5581"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-41959955-766E-5AAD-AA6D-65C4F99E5581"><!-- --></a><p>Some image formats contain
background colour information. This is information is presented through <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-7CE85F05-6D58-30F1-87D3-324BFB6131FB"><span class="apiname">CImageDecoder::FrameInfo()</span></a>  <samp class="codeph">iBackgroundColor</samp>. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B3419EC0-109F-5A37-9A4F-CD0F7A96FCDC"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B3419EC0-109F-5A37-9A4F-CD0F7A96FCDC"><!-- --></a><p>If a non-masked image
with background colour is decoded, the colour is included in the image data.
If the decoded image also contains a bitmap mask, then the background colour
will be a component of the mask <a href="GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><span class="apiname">CFbsBitmap</span></a> object. Depending
on your application, you may want to choose your own background colour rather
than use the one provided by the source image. </p>
 </li>

</ol>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-FF418A2D-436B-515F-B9D1-E0A0C87E7394"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-FF418A2D-436B-515F-B9D1-E0A0C87E7394"><!-- --></a><strong>Basic Procedure To Retrieve
Information From An Image</strong> </p>
 <p>The high level steps to retrieve the
information stored in certain types of images are shown here: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-2D40722B-5BEA-52ED-B143-A4E85CE8EB22"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-2D40722B-5BEA-52ED-B143-A4E85CE8EB22">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B40D32A1-CC43-50B8-A873-A6E14C27D165"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-B40D32A1-CC43-50B8-A873-A6E14C27D165"><!-- --></a><p> <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-01F212DD-0A35-3702-948B-1CBFB6675456"><span class="apiname">CImageDecoder::FrameData()</span></a> Provides
access to additional chunks of data within the images, for example, palette
and similar lookup tables, copyright information and other strings. This information
should be used with care, the returned data is merely a reference to the original
data within the <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> object, and is only valid
for the lifetime of the object. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-875B1CFA-CE86-50D7-BD8A-4E7453EEF35F"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-875B1CFA-CE86-50D7-BD8A-4E7453EEF35F"><!-- --></a><p> <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-B237AB64-0A03-3356-AA51-FCFD59E1A513"><span class="apiname">CImageDecoder::NumberOfImageComments()</span></a> and <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-F7CADA2E-4B76-3B23-B5CA-92CD652E9A97"><span class="apiname">CImageDecoder::ImageCommentL()</span></a> Images can have comments embedded in them. These comments are usually either
embedded as a single repository which can be retrieved on an image level,
or multiple repositories attached to individual frames within the image. The
two functions above return the number of comments attached to the entire image
and provide a mechanism for retrieving any of those comments. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-6854DEC9-4348-56DD-B5E2-47DEE3DC43AE"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-6854DEC9-4348-56DD-B5E2-47DEE3DC43AE"><!-- --></a><p> <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-3057B1A5-9F03-363B-9E84-9CFE2A2892EB"><span class="apiname">CImageDecoder::NumberOfFrameComments()</span></a> and <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-28A8EF22-C0C8-32BB-B9F3-96588F63A321"><span class="apiname">CImageDecoder::FrameCommentL()</span></a> Similar functionality to above, but these functions return the number of
comments attached to individually specified frames and provide a mechanism
for retrieving any of those comments. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-F51D81A1-61A7-5C1C-B0FB-99B18C1203DC"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-F51D81A1-61A7-5C1C-B0FB-99B18C1203DC"><!-- --></a><p> <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-78BF07BC-5338-3A60-B8BF-47DAFE2CA82C"><span class="apiname">CImageDecoder::FrameInfoStringsLC</span></a> and <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-7B3BDF3B-43BA-3206-AF62-174B7C3AF516"><span class="apiname">CImageDecoder::FrameInfoStringsL()</span></a> Provide a list of data for a specified frame, including data items such
as format, plugin description, size and so on, in a readable format. Although
the property strings can be accessed by name, it is recommended that they
be generally treated as a list of strings. </p>
 </li>

</ol>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-AA950124-42DE-5A65-B371-7D85F43D71A6"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-AA950124-42DE-5A65-B371-7D85F43D71A6"><!-- --></a><strong>Basic Procedure Streamed
and Progressive Decoding</strong> </p>
 <p> <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> includes
facilities to support the simultaneous decoding and display of images as they
are being loaded. The decoder does not wait for the entire image to be loaded
before processing it, rather it begins as soon as possible, stops when it
runs out of data and then carries on when more data is available. </p>
 <p>The
high level steps to perform the streaming and the progressive during decoding
are shown here: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-0E29E833-4435-5E55-908F-938A13473B79"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-0E29E833-4435-5E55-908F-938A13473B79">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-CE64D3C8-8923-5BAF-AF29-9BA6470008F8"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-CE64D3C8-8923-5BAF-AF29-9BA6470008F8"><!-- --></a><p>If there is insufficient
data to work out the image format (plugin decoder to use) <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-6DA07559-7DDC-32A9-9E09-D557348D46DE"><span class="apiname">CImageDecoder::FileNewL()</span></a> (or
its "Data" equivalent) leaves with <samp class="codeph">KErrUnderflow</samp>. This is
only applicable to instances where automatic detection of the plugin decoder
is used. For more information see, "Automatic detection" in <a href="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A.html#GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-1F8A0DCC-CB95-5245-9ED0-FE4A775152D0">Creation</a>. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-23175979-940A-507D-B478-0C4ACB5F9071"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-23175979-940A-507D-B478-0C4ACB5F9071"><!-- --></a><p>As soon as the correct
plugin decoder has been determined it is opened and whatever addition image
data available is scanned. The plugin decoder continues to decode image data
as it arrives, updating <samp class="codeph">FrameCount()</samp> whenever it becomes
aware of a new frame within the data. The internal flag <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-26084926-42C1-38FC-9F30-E1801AE5167D"><span class="apiname">CImageDecoder::IsHeaderProcessingComplete()</span></a> is
maintained at <samp class="codeph">EFalse</samp> until the entire image has been loaded. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-75959B88-7CE2-598E-9F83-EC0189BD2F6C"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-75959B88-7CE2-598E-9F83-EC0189BD2F6C"><!-- --></a><p>Frames can be decoded
before the entire image is loaded, but the frame to be decoded must be at
least partially loaded. If <samp class="codeph">IsHeaderProcessingComplete()</samp> is
set to <samp class="codeph">EFalse</samp> and <samp class="codeph">FrameCount()</samp> is equal
to or less than the frame to decode, the application must wait for the relevant
frame to load. In such circumstances a call to <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-A74CEA6D-ED47-3EA4-8917-FEE4B51B7639"><span class="apiname">CImageDecoder::ContinueProcessingHeadersL()</span></a> should
be made that scans for any further headers. <samp class="codeph">FrameCount()</samp> and <samp class="codeph">IsHeaderProcessingComplete()</samp> should
then be recalled to determine if the frame has arrived. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C390495B-840E-541B-A0C5-061D3706AD8A"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C390495B-840E-541B-A0C5-061D3706AD8A"><!-- --></a><p>Once <samp class="codeph">FrameCount()</samp> is
greater than the frame the application wants to decode, it is possible to
start to decoding the frame using <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-8118AC37-471E-3CB6-9F71-4E93507DDE57"><span class="apiname">CImageDecoder::Convert()</span></a>.
Frame headers and their associated data do not always follow each other in
some image formats. This has the implication that although <samp class="codeph">FrameCount()</samp> has
indicated that the frame is available, it may not yet be fully loaded. Under
such circumstances as much decoding as possible is undertaken, and <samp class="codeph">Convert()</samp> then
completes with the error code <samp class="codeph">KErrUnderflow</samp>. If the <samp class="codeph">EPartialDecodeInvalid</samp> flag
(from <samp class="codeph">FrameInfo()</samp>) is not set, the partially decoded image
can be displayed - for some image formats, a partially decoded image is not
generally usable, but this facility is supported by most known formats. Obviously,
if all of the image is present, <samp class="codeph">Convert()</samp> completes with <samp class="codeph">KErrNone</samp> as
normal. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-44864401-5DB5-56A5-BE6D-5B8B4570CCBF"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-44864401-5DB5-56A5-BE6D-5B8B4570CCBF"><!-- --></a><p>Where only a partial
conversion has been completed, <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-F4F5A5F6-03E5-3801-93CC-A023363F35F8"><span class="apiname">CImageDecoder::ContinueConvert()</span></a> should
be used to continue converting when new data arrives. <samp class="codeph">ContinueConvert()</samp> continues
to convert the frame data where the previous call left off. This function
should continue to be called until it returns the error code <samp class="codeph">KErrNone</samp> rather
than <samp class="codeph">KErrUnderflow</samp>. </p>
 <p>Note: The <a href="GUID-683A1D42-2764-3EB7-BD19-9E12559199AB.html"><span class="apiname">CFbsBitmap</span></a> must
never be resized during a conversion session using <samp class="codeph">ContinueConvert()</samp>,
if resizing does occur, a panic will be raised by the function. If resizing
or any other parameter changes need to be made to the <samp class="codeph">CFbsBitmap</samp>,
frame decoding should be restarted by using <samp class="codeph">Convert()</samp> rather
than trying to continue an existing conversion session. </p>
 </li>

</ol>
 <p>There is no explicit decoder call to say "all of the data is now
present". This could be done via inference, continuously checking <samp class="codeph">IsHeaderProcessingComplete()</samp> until
it returns <samp class="codeph">ETrue</samp>. However, this is not advisable as it is
possible that <samp class="codeph">IsHeaderProcessingComplete()</samp> could continue
to return <samp class="codeph">EFalse</samp> even after the application has finished
sending image data. Your state machine should be written so that it takes
this possibility into account. </p>
 <p id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C7FEA8F9-B367-52B1-9D26-84F9E225D17C"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-C7FEA8F9-B367-52B1-9D26-84F9E225D17C"><!-- --></a><strong>Basic Procedure For Buffered
Decoding</strong> </p>
 <p> <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html"><span class="apiname">CBufferedImageDecoder</span></a> is a wrapper
that encapsulates not only a <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> but also the
descriptor used to store the image, and in some circumstances can replace
the use of <samp class="codeph">CImageDecoder</samp> itself. <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html"><span class="apiname">CBufferedImageDecoder</span></a> can
always be created, even if there is no data available at the time of creation.
Another key feature of <samp class="codeph">CBufferedImageDecoder</samp> is that it can
be reused to decode multiple images. </p>
 <p>The high level steps to perform
the buffered decoding are shown here: </p>
 <a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-0EEA3303-59C3-5326-8E10-3C54BE69B336"><!-- --></a><ol id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-0EEA3303-59C3-5326-8E10-3C54BE69B336">
<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-8749D5E2-2E9D-578B-A02C-C4C1309E2AC5"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-8749D5E2-2E9D-578B-A02C-C4C1309E2AC5"><!-- --></a><p>The decoder is created
using the <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html#GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378__GUID-D255B2EF-1DA0-336E-A173-0FD03210B349"><span class="apiname">CBufferedImageDecoder::NewL()</span></a> factory function,
and the decoding process is started with one of the two <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html#GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378__GUID-A8D36C2B-C057-3F6A-A1AF-F7421D204B11"><span class="apiname">CBufferedImageDecoder::OpenL()</span></a> calls,
specifying either MIME-type or image type/sub-type and UID, which are similar
to <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html#GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4__GUID-00FB83E8-3759-32BE-B6E8-6F04EC60A909"><span class="apiname">CImageDecoder::DataNewL()</span></a>. If not enough data is available
to create an internal decoder a call to <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html#GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378__GUID-0C7E0E24-8352-353E-9E55-D216300D1CFA"><span class="apiname">CBufferedImageDecoder::ValidDecoder()</span></a> returns <samp class="codeph">EFalse</samp>.
The decoder keeps an internal copy of the data provided so the client can
discard its own copy. </p>
 <p> <strong>Warning:</strong> The decoding and enquiry functions
must not be used until an internal decoder has been created, otherwise calls
will panic with <samp class="codeph">EDecoderNotCreated</samp>. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A1DD251D-D1B2-57EE-9A2D-94AE75DBA35B"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-A1DD251D-D1B2-57EE-9A2D-94AE75DBA35B"><!-- --></a><p>Additional data can
be supplied to the decoder, when it becomes available, by using <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html#GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378__GUID-5CF4094C-A829-347A-835C-17ABF439445A"><span class="apiname">CBufferedImageDecoder::AppendDataL()</span></a> and <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html#GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378__GUID-B85FD15C-337A-393F-A9DA-65EC1EB546C5"><span class="apiname">CBufferedImageDecoder::ContinueOpenL()</span></a>, which will copy the data and try to find an appropriate plugin. This step
should be repeated until enough data is available to create the internal decoder,
indicated by <samp class="codeph">ValidDecoder()</samp> returning <samp class="codeph">ETrue</samp>. <samp class="codeph">OpenL()</samp> and <samp class="codeph">ContinueOpenL()</samp> will
leave with <samp class="codeph">KErrCorrupt</samp> if a suitable decoder is found, but
that decoder was unable to interpret the supplied image data. </p>
 <p>Note:
As with <samp class="codeph">OpenL()</samp>, data provided by <samp class="codeph">AppendDataL()</samp> is
kept in an internal buffer by the decoder so the client can discard its own
copy. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E4E67E99-0D9A-5CA9-8FE3-6A32A36C3F42"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E4E67E99-0D9A-5CA9-8FE3-6A32A36C3F42"><!-- --></a><p>The process for decoding
the image header and frames are the same as for <a href="GUID-8F2953B2-E64E-3D8B-B30B-B35B373368D4.html"><span class="apiname">CImageDecoder</span></a> with <samp class="codeph">IsHeaderProcessingComplete()</samp>, <samp class="codeph">FrameCount()</samp>, <samp class="codeph">Convert()</samp> and <samp class="codeph">ContinueConvert()</samp> calls
except that the data is not appended to a descriptor, but supplied to the
decoder with <samp class="codeph">AppendDataL()</samp>. </p>
 </li>

<li id="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E40CF367-2601-5B9F-9E20-34CD8F2754EB"><a name="GUID-B10B048F-37FF-53E7-92B9-83F8C197566A__GUID-E40CF367-2601-5B9F-9E20-34CD8F2754EB"><!-- --></a><p>The decoder can be reused
by calling a <a href="GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378.html#GUID-DD2EDAB6-784C-3FC9-A53D-84D133049378__GUID-44030283-5CB8-3317-8498-0B70C0C358A9"><span class="apiname">CBufferedImageDecoder::Reset()</span></a>, which destroys
the internal data buffer and decoder. A new decoder plugin can then be started
using <samp class="codeph">OpenL()</samp>. </p>
 </li>

</ol>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-786A8188-AB4D-5C65-8BEF-50E45FDBE9A5.html">Tutorials</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-88091838-03FC-550F-9A3D-DA70907EF955.html">Imaging Frameworks
overview</a></div>
<div><a href="GUID-3D9C4B45-EEA0-581C-A9E5-8B2535014930.html">Image Conversion
Overview</a></div>
<div><a href="GUID-6DC34798-86CE-537D-B3B8-9A94FF77B283.html">Image Encoding
Tutorial</a></div>
<div><a href="GUID-A825B62E-B5F6-5FDD-B267-E47103D57FD8.html">Guide to
Symbian supplied Codecs </a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>