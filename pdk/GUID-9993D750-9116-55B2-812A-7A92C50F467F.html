<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Apparc Recognizer for CAF"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6C91CF2-A616-5E52-8BB2-630C42C8D540.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7EE46FD9-DC9E-5C1F-9AC5-48F5212AF0CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9993D750-9116-55B2-812A-7A92C50F467F"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Apparc Recognizer for CAF</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9993D750-9116-55B2-812A-7A92C50F467F"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2858692 id2858712 id2858727 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-E6C91CF2-A616-5E52-8BB2-630C42C8D540.html">Content Management</a> &gt; <a href="GUID-7EE46FD9-DC9E-5C1F-9AC5-48F5212AF0CA.html">Content Access Framework</a> &gt; <a href="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html">Content Access Framework Concepts</a> &gt; </div>
<h1 class="topictitle1">Apparc
Recognizer for CAF</h1>
<div>
<p>The Apparc framework uses data type recognizers derived from <a href="GUID-EBE480D9-E377-32F4-9AE5-9C58684BEFF0.html"><span class="apiname">CApaDataRecognizerType</span></a> to
determine the MIME type of files on the Symbian platform. </p>

<div class="section" id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-2D000C2B-A393-4039-9B7E-33E7F929EE09"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-2D000C2B-A393-4039-9B7E-33E7F929EE09"><!-- --></a><h2 class="sectiontitle">Overview</h2> <p>Apparc supplies the filename and a buffer
containing bytes read from the start of the file. If a file is recognized,
the recognizer must return the MIME type and the degree of confidence in recognizing
the file â€” a <samp class="codeph">TInt</samp> ranging from <samp class="codeph">KMinInt</samp> (Not
Recognized) to <samp class="codeph">KMaxInt</samp> (Certain). </p>
 <p>The implementation
of DRM has a problem when determining the MIME type. A DRM file stores one
or more content objects. For example, an OMA file with MIME type <samp class="codeph">application/vnd.oma.drm.content</samp> may
store an image file with MIME type <samp class="codeph">image/jpeg</samp>. Apparc expects
only one MIME type to be returned, not two. </p>
 <p>The CAF recognizer <span class="filepath">RECCAF.DLL</span> determines
whether a file is recognized by CAF and if so, retrieves these two MIME types. </p>
 <p>The
mapping of these two MIME types returned by CAF to a single MIME type is based
on the following rules: </p>
 
<div class="tablenoborder"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-3C062759-788F-5A15-A557-F85F77D8AB92"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-3C062759-788F-5A15-A557-F85F77D8AB92" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <strong> File MIME type</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong> Content MIME type</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong> Apparc MIME type</strong>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Present </p>
 </td>

<td class="cellrowborder" valign="top"><p>Present </p>
 </td>

<td class="cellrowborder" valign="top"><p> <em>x-caf-</em>  <samp class="codeph">ContentMimeType</samp> </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Present </p>
 </td>

<td class="cellrowborder" valign="top"><p>Not Present </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">FileMimeType</samp>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p>Present </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">application/x-caf</samp>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">application/x-caf</samp>  </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p>The following is the rationale for the above mapping: </p>
 <ul>
<li id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-46BB7500-F4AF-53AC-B1C9-2D538C8C2F21"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-46BB7500-F4AF-53AC-B1C9-2D538C8C2F21"><!-- --></a><p>The <samp class="codeph">x-caf-</samp> prefix
to the content type shows that the file that can be opened by CAF to read
that content type. </p>
 </li>

<li id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-57AF8B00-B36C-5DD9-BB3E-0F818B71F191"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-57AF8B00-B36C-5DD9-BB3E-0F818B71F191"><!-- --></a><p>A file that needs to
be passed through the supplier interface before it can be used is recognized
as the file MIME type; the content type is irrelevant before the supply operation. </p>
 </li>

<li id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-771D11E6-1275-5C12-8E5B-2A9362E857D2"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-771D11E6-1275-5C12-8E5B-2A9362E857D2"><!-- --></a><p>A file containing many
content objects must just be recognized as <samp class="codeph">application/x-caf</samp> as
the packaging of the archive is irrelevant (CAF abstracts the packaging). </p>
 </li>

</ul>
 <p>The following diagram illustrates the recognition of an OMA file
with JPEG content. </p>
 <div class="fignone" id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-E0654D43-CA6D-54BA-98DF-45BFA67B4180"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-E0654D43-CA6D-54BA-98DF-45BFA67B4180"><!-- --></a><span class="figcap">Figure 1.               Apparc Recognizer for CAF            </span>

<img src="GUID-212C33A7-19DE-5936-B78E-CB7357FAEB5B_d0e583739_href.png"/>
</div>
 </div>

<div class="section" id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-5FCA124D-197D-46DA-B702-092E80B7F5DE"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-5FCA124D-197D-46DA-B702-092E80B7F5DE"><!-- --></a><h2 class="sectiontitle">Application registration files</h2> <p>To use CAF content,
applications must update their registration resource files (for example <span class="filepath">AppName_reg.rss</span>)
to include the new CAF MIME types. For example, an image viewer may have only
included <samp class="codeph">image/jpeg</samp> in the list of MIME types it could open.
If the application is updated to use CAF, it must support <samp class="codeph">image/jpeg</samp> and <samp class="codeph">x-caf-image/jpeg</samp> in
order to support unprotected and protected content respectively. See the following
example registration file. </p>
 <p>All file operations must be conducted through
the CAF framework. </p>
 <p><strong>Registration file that does not use CAF </strong> </p>
 <pre class="codeblock" id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-DD2CF2E7-D74B-5759-9934-7BCC52A90DB8"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-DD2CF2E7-D74B-5759-9934-7BCC52A90DB8"><!-- --></a>...

datatype_list = 
    {
    DATATYPE { priority= EDataTypePriorityHigh ; type="image/jpeg";}, 
    }

...</pre>
 <p><strong>Registration file that use CAF </strong> </p>
 <pre class="codeblock" id="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-23F6E57A-8DAB-5AA4-B051-BD511630C481"><a name="GUID-9993D750-9116-55B2-812A-7A92C50F467F__GUID-23F6E57A-8DAB-5AA4-B051-BD511630C481"><!-- --></a>...

datatype_list = 
    {       
    DATATYPE { priority= EDataTypePriorityHigh ; type="image/jpeg"; }, 
    
    DATATYPE { priority= EDataTypePriorityHigh ; type="x-caf-image/jpeg"; }, 
    }

...</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html">Content Access Framework Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>