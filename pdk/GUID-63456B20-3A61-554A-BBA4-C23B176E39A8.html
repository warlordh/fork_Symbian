<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Pre-Conditions and Post-Conditions for Kernel APIs"/>
<meta name="abstract" content="Reference documentation for kernel side function APIs, specifies a wide variety of pre-conditions and post-conditions."/>
<meta name="description" content="Reference documentation for kernel side function APIs, specifies a wide variety of pre-conditions and post-conditions."/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Pre-Conditions and Post-Conditions for Kernel APIs</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2387995 id2388473 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-F78B7BF9-5FDD-4EF8-A921-71CCBB830A99.html" title="The device driver framework and how to implement a device driver.">Device Driver Guide</a> &gt; <a href="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html" title="This section describes how device drivers can use the services that the Kernel provides.">Kernel-Side Services</a> &gt; </div>
<h1 class="topictitle1">Pre-Conditions
and Post-Conditions for Kernel APIs</h1>
<div><p>Reference documentation for kernel side function APIs, specifies
a wide variety of pre-conditions and post-conditions. </p>

<ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C8EAD446-F9B7-50A3-8A7C-FA45487287BA"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C8EAD446-F9B7-50A3-8A7C-FA45487287BA"><!-- --></a><p>A <em>pre-condition</em> is
something that must be true before using the function. </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0360AD60-7A36-5949-AFF8-6649619F9F6A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0360AD60-7A36-5949-AFF8-6649619F9F6A"><!-- --></a><p>A <em>post-condition</em> is
something that is true on return from the function. </p>
 </li>

</ul>

<p>Such conditions are expressed using a standard phrase, wherever possible,
and this section explains what those conditions mean. </p>

<p>Where more than one pre-condition is stated for a given function, then
you can assume that all pre-conditions apply. In this sense, there is an implied
AND relation between conditions. For example, in the description of the function <a href="GUID-E48F1435-14B6-37F1-BE47-2EA803AFE497.html#GUID-E48F1435-14B6-37F1-BE47-2EA803AFE497__GUID-9DF684E6-F367-3A3B-BA02-301297607160"><span class="apiname">DObject::AppendFullName()</span></a>,
the following pre-conditions apply: </p>

<pre class="codeblock" id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A81563CA-D72C-5B9F-820E-1AA1623E75F7"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A81563CA-D72C-5B9F-820E-1AA1623E75F7"><!-- --></a>No fast mutex can be held.
Call in a thread context.</pre>

<p>Both conditions must be true before calling the functions. </p>

<p>There are exceptions to this rule, where a precondition applies only if
some other factor is true. For example, in the description of the function <a href="GUID-E48F1435-14B6-37F1-BE47-2EA803AFE497.html#GUID-E48F1435-14B6-37F1-BE47-2EA803AFE497__GUID-3120933C-095D-3D20-A024-148BA0D473EB"><span class="apiname">DObject::TraceAppendName()</span></a>,
you will find the following pre-conditions: </p>

<pre class="codeblock" id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3BC88AB3-DBCD-5F4A-9E5E-14B5C711F604"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3BC88AB3-DBCD-5F4A-9E5E-14B5C711F604"><!-- --></a>Call either in a thread or an IDFC context, if aLock=TRUE
Call in any context, if aLock=FALSE.</pre>

<p>Clearly, only one pre-condition will apply, depending on the supplied value
of the <samp class="codeph">aLock</samp> argument. </p>

<p>A few conditions are self-explanatory, and these are not included in these
lists. </p>

<p>NOTE that some familiarity with kernel side programming is assumed. </p>

<ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-331B0761-C3D7-517F-872E-97E5E11A1E3C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-331B0761-C3D7-517F-872E-97E5E11A1E3C"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-5F986149-D75B-5B3F-92F3-7B4FB89F4718">Pre-conditions</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-080AD617-2744-556C-AF4E-7FF8AB0B7091"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-080AD617-2744-556C-AF4E-7FF8AB0B7091"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F2DE76D5-0970-584F-9526-52E85932ACE8">Post-conditions</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-5F986149-D75B-5B3F-92F3-7B4FB89F4718"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-5F986149-D75B-5B3F-92F3-7B4FB89F4718"><!-- --></a><h2 class="sectiontitle">Pre-conditions</h2> <p>This
describes the meaning of each precondition, and tries to provide insight as
to why it needs to be satisfied, and explains what you need to do to ensure
that the preconditions are met. </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AB16CE53-001A-51C9-B6EE-CDCC74B034A6"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AB16CE53-001A-51C9-B6EE-CDCC74B034A6"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B0F8E686-A86D-5A99-8560-7D591CE84BD0">Calling thread must be in a critical section</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2EC96768-6346-50E1-BA85-81F0D27444BE"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2EC96768-6346-50E1-BA85-81F0D27444BE"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3EE55520-0F0D-508B-A384-55082ED10D72">Calling thread must not be in a critical section</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AACA75DB-5494-536B-ABF5-CA3ACF5351D6"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AACA75DB-5494-536B-ABF5-CA3ACF5351D6"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-09CB97CE-8DAF-58FA-B240-5B396ABC9614">Calling thread can either be in a critical section or not</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-88BB1943-77A6-5AA1-805A-FADF0C56880F"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-88BB1943-77A6-5AA1-805A-FADF0C56880F"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EDA4EF5D-B6CB-5446-AEBD-A9888C86FBA1">No fast mutex can be held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C683D62F-7918-54C6-A184-32A2B64F9D58"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C683D62F-7918-54C6-A184-32A2B64F9D58"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B6943D58-99B9-5A4B-A1DD-577B6197F274">Kernel must be locked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-668F8DB9-5FB1-5DC3-B1F2-4BD9C3F5B4F9"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-668F8DB9-5FB1-5DC3-B1F2-4BD9C3F5B4F9"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8027AB9A-858F-5945-A75B-E817AD76DEC3">Kernel must be unlocked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0B48309C-E7C9-5857-BA1F-731D69E73118"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0B48309C-E7C9-5857-BA1F-731D69E73118"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F80292D9-E3C8-5466-ABD3-0416CDE2BD00">Kernel can be locked or unlocked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7F1C7BE6-1B5E-5800-8B9F-30279A24727E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7F1C7BE6-1B5E-5800-8B9F-30279A24727E"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EC063E55-66F7-52E9-AF47-F981B63E446E">Kernel must be locked, with lock count 1</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8AEFABE4-320E-5AF8-89F8-6402EE9BBCE6"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8AEFABE4-320E-5AF8-89F8-6402EE9BBCE6"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A55086AA-382B-5F93-9CE0-42C6FB428A19">Interrupts must be enabled</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B56F2B78-49D8-5B51-BA27-F8BC07DA948C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B56F2B78-49D8-5B51-BA27-F8BC07DA948C"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9384C08B-D56F-5284-BA4B-4CF6C85E06E4">Interrupts must be disabled</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8113FADD-4E41-5589-9CBD-3B63B9231A19"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8113FADD-4E41-5589-9CBD-3B63B9231A19"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E1A36F24-AC68-58AF-B344-A59111F621FA">Interrupts can either be enabled or disabled</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C8FF141B-C104-5B4A-9F3C-7857B20ABEC1"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C8FF141B-C104-5B4A-9F3C-7857B20ABEC1"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1E584D23-5233-5A38-A629-FBFE834F8248">System lock must be held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-43383A78-182B-5F42-8458-FAD5DB768ACB"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-43383A78-182B-5F42-8458-FAD5DB768ACB"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-74F93316-0DAC-5F4F-A307-C0C15B14E794">System lock must not be held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AB5BDF10-F90A-5ECB-AF56-FE4A06038271"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AB5BDF10-F90A-5ECB-AF56-FE4A06038271"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BA42435C-85B9-5A86-B875-50FE69B99B48">Call in a thread context</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BBE5C5FC-9497-5FEB-8FCF-B43F0800FBBF"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BBE5C5FC-9497-5FEB-8FCF-B43F0800FBBF"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3FE5AA98-FD6C-528D-9DF2-7C50BE7FEF8E">Call in an IDFC contex</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-102DFFA4-D584-54D0-BF4A-FB5CC3F622BB"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-102DFFA4-D584-54D0-BF4A-FB5CC3F622BB"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6957D624-5176-591C-A667-4DF78B29F271">Call either in a thread or an IDFC context</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2530C61A-5997-5BB8-B7BC-E249F2C32A6C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2530C61A-5997-5BB8-B7BC-E249F2C32A6C"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A45A1D39-8C76-5E14-8DCF-FCE0A26758CE">Call in any context</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0FFD6392-52C4-5403-81A5-35ADC75B5A0A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0FFD6392-52C4-5403-81A5-35ADC75B5A0A"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0DCAE842-45E1-5F5F-BC68-121775D0B702">Do not call from an ISR</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F018CCD9-7FEC-5CD7-A424-B4F1B874938D"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F018CCD9-7FEC-5CD7-A424-B4F1B874938D"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F17D0FE5-BA42-575B-8971-C5B034CF404E">The calling thread must own the semaphore</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A9B993F9-A833-56CE-A3AE-D7CBF749A002"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A9B993F9-A833-56CE-A3AE-D7CBF749A002"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8D9D08F5-0CBD-52BB-B416-636516982D47">The calling thread must not be explicitly suspended</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-561FCAEF-10F5-52A0-B84D-0B10C6E6F051"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-561FCAEF-10F5-52A0-B84D-0B10C6E6F051"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-910660F9-F30F-5725-981D-52F65F7FDB81">The calling thread must hold the mutex</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F20B2CE8-975E-55FE-9994-7920E106209B"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F20B2CE8-975E-55FE-9994-7920E106209B"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DDEB4D47-04F5-5736-A8BE-3F1AC543F9D7">Call only from ISR, IDFC or thread with the kernel locked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AB365D33-E6D5-544C-8A85-13635F7D8A46"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-AB365D33-E6D5-544C-8A85-13635F7D8A46"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3D8578BC-86EE-5E64-9C1E-CCD512A344D1">Call only from IDFC or thread with the kernel locked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DDDF61AA-0B7B-5862-B854-A776F5375D3E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DDDF61AA-0B7B-5862-B854-A776F5375D3E"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2147A0B6-365A-5AC3-8EBE-AC0D89ED0C70">Do not call from thread with the kernel unlocked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-416323F1-316F-5F91-9210-5B7B02D5214A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-416323F1-316F-5F91-9210-5B7B02D5214A"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7E26E475-5D7E-5C68-B3A4-BC9EC6D29D98">Do not call from ISR or thread with the kernel unlocked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-107003E0-BBAF-5408-AEE8-6B285A2D44D6"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-107003E0-BBAF-5408-AEE8-6B285A2D44D6"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6C17250C-4FD0-5A2E-B448-BC08504F4FE4">Thread must not already be exiting</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7598A74D-A7C3-544A-A856-A95639CC874B"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7598A74D-A7C3-544A-A856-A95639CC874B"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-021E54DB-7F22-5ADB-A80D-CAFBB08596A2">Property has not been opened</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F8900E2C-BB1C-547F-8945-269D8FCE6D99"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F8900E2C-BB1C-547F-8945-269D8FCE6D99"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D924E37C-300A-58FF-890B-F1FA5349FA05">Property has been opened</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DFDC1EB0-72CE-5C6D-BDBB-69160E8D6CFD"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DFDC1EB0-72CE-5C6D-BDBB-69160E8D6CFD"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F1485BCB-8384-518B-AE5B-F8387DF0C8F4">Must be called under an XTRAP harness or calling thread must not be in a
critical section</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0E1D40B1-C88B-5EE8-BDB7-A5897900444F"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0E1D40B1-C88B-5EE8-BDB7-A5897900444F"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4D6B9502-0F88-5E0E-8E92-5783FE76555A">DObject::Lock fast mutex held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E766DB63-A091-5577-8FA3-6AC8D3E36A4E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E766DB63-A091-5577-8FA3-6AC8D3E36A4E"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D6BB3BE3-E0DD-50B9-B9D1-275E51CE7FC6">DCodeSeg::CodeSegLock mutex held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8DCD023D-BC60-5FCE-B3E2-FB9BD98360C2"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8DCD023D-BC60-5FCE-B3E2-FB9BD98360C2"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9A82D0DD-7599-5511-AD9E-2930ADC99AC0">Any kind of lock can be held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-66EB3E8B-19F1-5189-A029-1AF10FCCE787"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-66EB3E8B-19F1-5189-A029-1AF10FCCE787"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F9800056-B5E5-576D-B440-544AE067D4DC">Call only from Init1() in base port</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-83F3A08D-0A58-58C3-99C0-AC976FC376C6"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-83F3A08D-0A58-58C3-99C0-AC976FC376C6"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6122C9C6-05EB-508C-8C9A-45B6A8DAB42C">The various parameters must be valid. The PIL or PSL will fault the kernel
if not</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E6325367-1F64-53AF-B992-D94DC7FD88A5"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E6325367-1F64-53AF-B992-D94DC7FD88A5"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-041025B4-95B9-5493-ACC3-649B6683DE0D">The request is not being transferred or pending</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CB33058C-50D1-520B-BB5B-FA723301367F"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CB33058C-50D1-520B-BB5B-FA723301367F"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-582E833B-C0E9-5986-86C5-24BF15648D61">Wait on TimerMutex before calling this</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A42C4B9A-6B96-51A7-952C-DD3905307B7C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A42C4B9A-6B96-51A7-952C-DD3905307B7C"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-98CBADF3-8CD3-54BC-8CB7-C2BD8D48289A">Message must be in ACCEPTED state</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-736AEF0F-17DB-5DF4-9236-51D32F51291D"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-736AEF0F-17DB-5DF4-9236-51D32F51291D"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B9E940EF-0EC8-5EEB-B29B-B402BFF09350">Queue must not be in asynchronous receive mode</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-253F522F-B0BF-5EBC-8EE9-F312807BC432"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-253F522F-B0BF-5EBC-8EE9-F312807BC432"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-52D720FB-7F57-5340-8C34-F39FE1E50C36">Container mutex must be held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CBE2383B-2861-50F3-BEE5-0AEDCFEF2AFA"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CBE2383B-2861-50F3-BEE5-0AEDCFEF2AFA"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-52D720FB-7F57-5340-8C34-F39FE1E50C36">Thread container mutex must be held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3E90CD26-6578-5FE2-904C-8C2E648267F0"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3E90CD26-6578-5FE2-904C-8C2E648267F0"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-52D720FB-7F57-5340-8C34-F39FE1E50C36">Process container mutex must be held</a>  </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B0F8E686-A86D-5A99-8560-7D591CE84BD0"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B0F8E686-A86D-5A99-8560-7D591CE84BD0"><!-- --></a><strong>Calling thread must be in
a critical section</strong> </p>
 <p>Critical sections are sections of code that
leave the kernel in a compromised state if they cannot complete. A thread
enters a critical section by calling <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-841D587C-E9E6-34EE-8ED0-E9A206F64379"><span class="apiname">NKern::ThreadEnterCS()</span></a> and
leaves it by calling <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-2C897BA5-2BD7-3ABA-9F2B-F0B1AC14D1AE"><span class="apiname">NKern::ThreadLeaveCS()</span></a>. </p>
 <p>While
in a critical section, the thread cannot be suspended or killed. These actions
are deferred until the end of the critical section. If a thread takes an exception
while inside a critical section, this is treated as fatal to the system, and
cause a <a href="GUID-C6946ECB-775F-3EC2-A56F-78F25B9FBE3D.html#GUID-C6946ECB-775F-3EC2-A56F-78F25B9FBE3D__GUID-45337A03-5893-3D0D-948C-23BDCF8AECBD"><span class="apiname">Kern::Fault()</span></a>. </p>
 <p>The described function must
be in a critical section when called. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3EE55520-0F0D-508B-A384-55082ED10D72"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3EE55520-0F0D-508B-A384-55082ED10D72"><!-- --></a><strong>Calling thread must not
be in a critical section</strong> </p>
 <p>Critical sections are sections of code
that leave the kernel in a compromised state if they cannot complete. A thread
enters a critical section by calling <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-841D587C-E9E6-34EE-8ED0-E9A206F64379"><span class="apiname">NKern::ThreadEnterCS()</span></a> and
leaves it by calling <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-2C897BA5-2BD7-3ABA-9F2B-F0B1AC14D1AE"><span class="apiname">NKern::ThreadLeaveCS()</span></a>. </p>
 <p>While
in a critical section, the thread cannot be suspended or killed. These actions
are deferred until the end of the critical section. If a thread takes an exception
while inside a critical section, this is treated as fatal to the system, and
cause a <samp class="codeph">Kern::Fault()</samp>. </p>
 <p>There are some functions winthin
the system that must <em>NOT</em> be in a critical section when called. This
applies to the described functions. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-09CB97CE-8DAF-58FA-B240-5B396ABC9614"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-09CB97CE-8DAF-58FA-B240-5B396ABC9614"><!-- --></a><strong>Calling thread can either
be in a critical section or not</strong> </p>
 <p>Critical sections are sections
of code that leave the kernel in a compromised state if they cannot complete.
A thread enters a critical section by calling <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-841D587C-E9E6-34EE-8ED0-E9A206F64379"><span class="apiname">NKern::ThreadEnterCS()</span></a> and
leaves it by calling <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-2C897BA5-2BD7-3ABA-9F2B-F0B1AC14D1AE"><span class="apiname">NKern::ThreadLeaveCS()</span></a>. </p>
 <p>While
in a critical section, the thread cannot be suspended or killed. These actions
are deferred until the end of the critical section. If a thread takes an exception
while inside a critical section, this is treated as fatal to the system, and
cause a <samp class="codeph">Kern::Fault()</samp>. </p>
 <p>When this pre-condition applies
to the described function, it means that it does not matter whether the code
is in a critical section or not. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EDA4EF5D-B6CB-5446-AEBD-A9888C86FBA1"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EDA4EF5D-B6CB-5446-AEBD-A9888C86FBA1"><!-- --></a><strong>No fast mutex can be held</strong> </p>
 <p>A
thread can hold no more than one fast mutex at any given time. The described
function uses a fast mutex, which means that on entry to the function, the
calling thread must <em>not</em> hold another one. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B6943D58-99B9-5A4B-A1DD-577B6197F274"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B6943D58-99B9-5A4B-A1DD-577B6197F274"><!-- --></a><strong>Kernel must be locked</strong> </p>
 <p>Many
kernel side functions run with interrupts enabled, including code that manipulates
global structures, such as the thread ready list. To prevent such code from
being reentered and potentially corrupting the structure concerned, a lock
known as the kernel lock (sometimes referred to as the preemption lock) is
used. </p>
 <p>Sections of code that need to be protected against rescheduling
call <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-7CBBF72B-4519-38DD-92CA-38AF636AFD8A"><span class="apiname">NKern::Lock()</span></a>. Interrupt Service Routines (ISRs) can
still run but no other thread (or IDFC) can run until the kernel is unlocked
by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-A1A42137-906C-30F1-AF61-4F786FC372DE"><span class="apiname">NKern::Unlock()</span></a>. </p>
 <p>The pre-condition
means that the kernel lock must be set before calling the described function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8027AB9A-858F-5945-A75B-E817AD76DEC3"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8027AB9A-858F-5945-A75B-E817AD76DEC3"><!-- --></a><strong>Kernel must be unlocked</strong> </p>
 <p>Many
kernel side functions run with interrupts enabled, including code that manipulates
global structures, such as the thread ready list. To prevent such code from
being reentered and potentially corrupting the structure concerned, a lock
known as the kernel lock (sometimes referred to as the preemption lock) is
used. </p>
 <p>Sections of code that need to be protected against rescheduling
call <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-7CBBF72B-4519-38DD-92CA-38AF636AFD8A"><span class="apiname">NKern::Lock()</span></a>. Interrupt Service Routines (ISRs) can
still run but no other thread (or IDFC) can run until the kernel is unlocked
by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-A1A42137-906C-30F1-AF61-4F786FC372DE"><span class="apiname">NKern::Unlock()</span></a>. </p>
 <p>The pre-condition
means that the kernel lock must <em>NOT</em> be set when the described function
is called. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F80292D9-E3C8-5466-ABD3-0416CDE2BD00"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F80292D9-E3C8-5466-ABD3-0416CDE2BD00"><!-- --></a><strong>Kernel can be locked or
unlocked</strong> </p>
 <p>Many kernel side functions run with interrupts enabled,
including code that manipulates global structures, such as the thread ready
list. To prevent such code from being reentered and potentially corrupting
the structure concerned, a lock known as the kernel lock (sometimes referred
to as the preemption lock) is used. </p>
 <p>Sections of code that need to
be protected against rescheduling call <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-7CBBF72B-4519-38DD-92CA-38AF636AFD8A"><span class="apiname">NKern::Lock()</span></a>. Interrupt
Service Routines (ISRs) can still run but no other thread (or IDFC) can run
until the kernel is unlocked by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-A1A42137-906C-30F1-AF61-4F786FC372DE"><span class="apiname">NKern::Unlock()</span></a>. </p>
 <p>The
pre-condition means that it does not matter whether the kernel lock is set
or unset when the described function is called. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EC063E55-66F7-52E9-AF47-F981B63E446E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EC063E55-66F7-52E9-AF47-F981B63E446E"><!-- --></a><strong>Kernel must be locked, with
lock count 1</strong> </p>
 <p>Many kernel side functions run with interrupts enabled,
including code that manipulates global structures, such as the thread ready
list. To prevent such code from being reentered and potentially corrupting
the structure concerned, a lock known as the kernel lock (sometimes referred
to as the preemption lock) is used. </p>
 <p>Sections of code that need to
be protected against rescheduling call <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-7CBBF72B-4519-38DD-92CA-38AF636AFD8A"><span class="apiname">NKern::Lock()</span></a>. Interrupt
Service Routines (ISRs) can still run but no other thread (or IDFC) can run
until the kernel is unlocked by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-A1A42137-906C-30F1-AF61-4F786FC372DE"><span class="apiname">NKern::Unlock()</span></a>. </p>
 <p>In
addition, calls to <samp class="codeph">NKern::Lock()</samp> and <samp class="codeph">NKern::Unlock()</samp> are
counted. The count value is zero when the kernel is unlocked; a call to <samp class="codeph">NKern::Lock()</samp> adds
one to the count value, and a call to <samp class="codeph">NKern::Unlock()</samp> subtracts
one from the count value. </p>
 <p>The pre-condition means that there must
be exactly one call to <samp class="codeph">Kern::Lock()</samp> that has not yet had
a matching call to <samp class="codeph">Kern::Unlock()</samp>. </p>
 <p>See also <a href="GUID-D5B555DA-3D17-3ED2-A931-CB35BD93A953.html#GUID-D5B555DA-3D17-3ED2-A931-CB35BD93A953__GUID-76E5AE32-9A70-344A-9E6B-5B439622715A"><span class="apiname">NFastMutex::Wait()</span></a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A55086AA-382B-5F93-9CE0-42C6FB428A19"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A55086AA-382B-5F93-9CE0-42C6FB428A19"><!-- --></a><strong>Interrupts must be enabled</strong> </p>
 <p>This
pre-condition states that interrupts must be enabled before calling the described
function. </p>
 <p>Possible reasons why interrupts may need to be enabled include: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B3D25D93-BDBA-5CFB-98ED-78A4BEF95DF0"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B3D25D93-BDBA-5CFB-98ED-78A4BEF95DF0"><!-- --></a><p>the function needs interrupts
to occur; for example, it may wait for timer ticks. </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1B806059-76C7-5C0F-ADAA-84134217C5A2"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1B806059-76C7-5C0F-ADAA-84134217C5A2"><!-- --></a><p>the function may take
a long or potentially unbounded time to run, so interrupts need to be enabled
to guarantee bounded interrupt latency. </p>
 </li>

</ul>
 <p>See also the function <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-2D328082-3A9F-3467-81CF-B1C68866E163"><span class="apiname">NKern::RestoreInterrupts()</span></a> and
the associated function <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-CA1C36B7-02EE-31D5-B700-27DE4769ECCF"><span class="apiname">NKern::DisableInterrupts()</span></a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9384C08B-D56F-5284-BA4B-4CF6C85E06E4"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9384C08B-D56F-5284-BA4B-4CF6C85E06E4"><!-- --></a><strong>Interrupts must be disabled</strong> </p>
 <p>This
pre-condition states that interrupts must be disabled before calling the described
function. </p>
 <p>See also the function <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-CA1C36B7-02EE-31D5-B700-27DE4769ECCF"><span class="apiname">NKern::DisableInterrupts()</span></a> and
the associated function <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-2D328082-3A9F-3467-81CF-B1C68866E163"><span class="apiname">NKern::RestoreInterrupts()</span></a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E1A36F24-AC68-58AF-B344-A59111F621FA"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E1A36F24-AC68-58AF-B344-A59111F621FA"><!-- --></a><strong>Interrupts can either be
enabled or disabled</strong> </p>
 <p>This pre-condition states that it does not
matter whether interrupts are enabled or disabled before calling the described
function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1E584D23-5233-5A38-A629-FBFE834F8248"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1E584D23-5233-5A38-A629-FBFE834F8248"><!-- --></a><strong>System lock must be held</strong> </p>
 <p>The
system lock is a specific fast mutex that only provides exclusion against
other threads acquiring the same fast mutex. Setting, and acquiring the system
lock means that a thread enters an implied critical section. </p>
 <p>The major
items protected by the system lock are: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B5FDF231-881B-5F4C-9FC1-256647FA502A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B5FDF231-881B-5F4C-9FC1-256647FA502A"><!-- --></a><p> <samp class="codeph">DThread</samp> member
data related to thread priority and status. </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E583EC5A-3572-5E83-9B73-724B63853D52"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-E583EC5A-3572-5E83-9B73-724B63853D52"><!-- --></a><p>the consistency of the
memory map; on the kernel side, the state of user side memory or the mapping
of a process is not guaranteed unless (a) you are a thread belonging to the
process that owns the memory or (b) you hold the system lock. </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B65EFDDA-6327-5F6C-91D5-F9C703E1B109"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B65EFDDA-6327-5F6C-91D5-F9C703E1B109"><!-- --></a><p>the lifetime of <samp class="codeph">DObject</samp> type
objects and references to them, including handle translation in Exec dispatch. </p>
 </li>

</ul>
 <p>Note that the system lock is different from the kernel lock; the
kernel lock protects against any rescheduling. When the system lock is set,
the calling thread can still be pre-empted, even in the locked section. </p>
 <p>The
system lock is set by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-B3837744-B8CC-3DC0-BA1D-417016E88EE9"><span class="apiname">NKern::LockSystem()</span></a>. </p>
 <p>The
pre-condition means that the system lock must be set before calling the described
function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-74F93316-0DAC-5F4F-A307-C0C15B14E794"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-74F93316-0DAC-5F4F-A307-C0C15B14E794"><!-- --></a><strong>System lock must not be
held</strong> </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1E584D23-5233-5A38-A629-FBFE834F8248">System
lock must be held</a> for a brief description of the system lock. </p>
 <p>The
system lock is unset by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-63B882C8-C5D0-3595-BBF1-74E942A5060A"><span class="apiname">NKern::UnlockSystem()</span></a>. </p>
 <p>The
pre-condition means that the system lock must not be set before calling the
described function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BA42435C-85B9-5A86-B875-50FE69B99B48"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BA42435C-85B9-5A86-B875-50FE69B99B48"><!-- --></a><strong>Call in a thread context</strong> </p>
 <p>This
pre-condition means that the described function must be called directly, or
indirectly, from a DFC or a thread. The thread can be a user thread or a kernel
thread. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3FE5AA98-FD6C-528D-9DF2-7C50BE7FEF8E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3FE5AA98-FD6C-528D-9DF2-7C50BE7FEF8E"><!-- --></a><strong>Call in an IDFC contex</strong> </p>
 <p>This
pre-condition means that the described function must be called directly, or
indirectly, from an IDFC. </p>
 <p>Note that when calling a function from an
IDFC: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2935ED8F-A340-5718-944C-56B2A8404D95"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2935ED8F-A340-5718-944C-56B2A8404D95"><!-- --></a><p>the kernel is locked,
so pre-emption is disabled </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-ECCD22D2-9504-57EA-9245-5BD071B84694"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-ECCD22D2-9504-57EA-9245-5BD071B84694"><!-- --></a><p>user memory cannot be
accessed </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-35C14F6F-EAFF-549A-BA2B-7EF5F2B6D093"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-35C14F6F-EAFF-549A-BA2B-7EF5F2B6D093"><!-- --></a><p>the function cannot
block or wait. </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6957D624-5176-591C-A667-4DF78B29F271"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6957D624-5176-591C-A667-4DF78B29F271"><!-- --></a><strong>Call either in a thread
or an IDFC context</strong> </p>
 <p>This pre-condition means that the described
function can be called directly, or indirectly, from an IDFC, a DFC or a thread.
The thread can be a user thread or a kernel thread. </p>
 <p>Note that when
calling a function from an IDFC: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7B6B2A5B-D282-529E-9D6B-7B1E2EC0BE0F"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7B6B2A5B-D282-529E-9D6B-7B1E2EC0BE0F"><!-- --></a><p>the kernel is locked,
so pre-emption is disabled </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BDEA9088-1340-59C9-B94F-848AF530F55A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BDEA9088-1340-59C9-B94F-848AF530F55A"><!-- --></a><p>user memory cannot be
accessed </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2073105B-FFE9-57C0-AB9D-3D3459BCED16"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2073105B-FFE9-57C0-AB9D-3D3459BCED16"><!-- --></a><p>the function cannot
block or wait. </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A45A1D39-8C76-5E14-8DCF-FCE0A26758CE"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A45A1D39-8C76-5E14-8DCF-FCE0A26758CE"><!-- --></a><strong>Call in any context</strong> </p>
 <p>This
pre-condition means that the described function can be called directly, or
indirectly, from an IDFC, a DFC or a thread, or it can be called from an Interrupt
Service Routine (ISR). </p>
 <p>A thread can be a user thread or a kernel thread. </p>
 <p>Note
that when calling a function from an IDFC: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4E80B3B7-BBBC-51F5-AC6D-996240416B29"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4E80B3B7-BBBC-51F5-AC6D-996240416B29"><!-- --></a><p>the kernel is locked,
so pre-emption is disabled </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BCF8F1AA-2F70-54BC-9FB6-C5EDD9057C79"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BCF8F1AA-2F70-54BC-9FB6-C5EDD9057C79"><!-- --></a><p>user memory cannot be
accessed </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A7B6B42D-0FDB-589E-860B-F2D1D8892BC7"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A7B6B42D-0FDB-589E-860B-F2D1D8892BC7"><!-- --></a><p>the function cannot
block or wait. </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0DCAE842-45E1-5F5F-BC68-121775D0B702"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-0DCAE842-45E1-5F5F-BC68-121775D0B702"><!-- --></a><strong>Do not call from an ISR</strong> </p>
 <p>This
pre-condition means that the described function must not be called from an
Interrupt Service Routine (ISR). </p>
 <p>Note that ISRs have the following
characteristics: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D773586B-422C-5B03-8588-1A24058A5DD1"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D773586B-422C-5B03-8588-1A24058A5DD1"><!-- --></a><p>they have an unknown
context </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3BACC342-0768-5D2F-BE53-58C33B74C392"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3BACC342-0768-5D2F-BE53-58C33B74C392"><!-- --></a><p>they must not allocate
or free memory </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DE919B78-9516-5F3D-98B2-3A99D8C3EE15"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DE919B78-9516-5F3D-98B2-3A99D8C3EE15"><!-- --></a><p>they cannot access user
memory </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-04AFFA6E-C742-5068-81B7-AFEA47422763"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-04AFFA6E-C742-5068-81B7-AFEA47422763"><!-- --></a><p>they must not call functions
that interfere with critical sections of code. </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F17D0FE5-BA42-575B-8971-C5B034CF404E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F17D0FE5-BA42-575B-8971-C5B034CF404E"><!-- --></a><strong>The calling thread must
own the semaphore</strong> </p>
 <p>A semaphore can be waited on only by the thread
that owns it. This precondition is needed when the described function calls
a semaphore wait function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8D9D08F5-0CBD-52BB-B416-636516982D47"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8D9D08F5-0CBD-52BB-B416-636516982D47"><!-- --></a><strong>The calling thread must
not be explicitly suspended</strong> </p>
 <p>This refers to nanokernel threads,
not Symbian platform threads. The described function must not be used if the
thread is in the suspended state. One of the possible reasons for this is
that the described function does not check the thread's suspend count. </p>
 <p>A
thread may be created suspended, or the thread may be put into a suspended
state using <a href="GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC.html#GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC__GUID-FF94D458-C2D0-3D20-ADD6-AAE68A3296C3"><span class="apiname">NThreadBase::Suspend()</span></a>. If you don't know whether
or not the thread is suspended, use <a href="GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC.html#GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC__GUID-82E43D79-721D-31A9-B9ED-1277F2300914"><span class="apiname">NThreadBase::CheckSuspendThenReady()</span></a>. </p>
 <p>See
also <a href="GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC.html#GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC__GUID-C0A6E734-7DE6-37B9-AAB2-A2A0E2664731"><span class="apiname">NThreadBase::Resume()</span></a> and <a href="GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC.html#GUID-379D9320-AC3C-3206-8A5D-EE6E5983EBDC__GUID-BE92FBC3-A7D9-3576-A1A9-7BBA6EE64226"><span class="apiname">NThreadBase::ForceResume()</span></a>. </p>
 <p> <em>Note
that these functions are for use only in an RTOS personality layer.</em>  </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-910660F9-F30F-5725-981D-52F65F7FDB81"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-910660F9-F30F-5725-981D-52F65F7FDB81"><!-- --></a><strong>The calling thread must
hold the mutex</strong> </p>
 <p>The calling thread has waited for a mutex and acquired
it. This precondition is needed when the thread is about to release the mutex,
ie call one of the <samp class="codeph">Signal()</samp> functions. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DDEB4D47-04F5-5736-A8BE-3F1AC543F9D7"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DDEB4D47-04F5-5736-A8BE-3F1AC543F9D7"><!-- --></a><strong>Call only from ISR, IDFC
or thread with the kernel locked</strong> </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B6943D58-99B9-5A4B-A1DD-577B6197F274">Kernel must be locked</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3D8578BC-86EE-5E64-9C1E-CCD512A344D1"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3D8578BC-86EE-5E64-9C1E-CCD512A344D1"><!-- --></a><strong>Call only from IDFC or thread
with the kernel locked</strong> </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B6943D58-99B9-5A4B-A1DD-577B6197F274">Kernel must be locked</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2147A0B6-365A-5AC3-8EBE-AC0D89ED0C70"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2147A0B6-365A-5AC3-8EBE-AC0D89ED0C70"><!-- --></a><strong>Do not call from thread
with the kernel unlocked</strong> </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8027AB9A-858F-5945-A75B-E817AD76DEC3">Kernel must be unlocked</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7E26E475-5D7E-5C68-B3A4-BC9EC6D29D98"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7E26E475-5D7E-5C68-B3A4-BC9EC6D29D98"><!-- --></a><strong>Do not call from ISR or
thread with the kernel unlocked</strong> </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8027AB9A-858F-5945-A75B-E817AD76DEC3">Kernel must be unlocked</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6C17250C-4FD0-5A2E-B448-BC08504F4FE4"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6C17250C-4FD0-5A2E-B448-BC08504F4FE4"><!-- --></a><strong>Thread must not already
be exiting</strong> </p>
 <p>The pre-condition means that the described function
should not be called after the thread has been killed. </p>
 <p>In EKA2, threads
do not die immediately, they are placed on a queue to be deleted later. </p>
 <p>Functions
with this pre-condition are not likely to used in a device driver. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-021E54DB-7F22-5ADB-A80D-CAFBB08596A2"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-021E54DB-7F22-5ADB-A80D-CAFBB08596A2"><!-- --></a><strong>Property has not been opened</strong> </p>
 <p>A
property is a single value used by “Publish and Subscribe”. Each property
must be opened before it can be used. To open a property, use either <a href="GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2.html#GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2__GUID-DBEDDC3A-AE6F-3CAF-B251-4AA556EAF21C"><span class="apiname">RPropertyRef::Attach()</span></a> or <a href="GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2.html#GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2__GUID-6F8EB0AB-C01A-3BFD-B334-D9C9FB923865"><span class="apiname">RPropertyRef::Open()</span></a>. Once opened, the property cannot be opened again. </p>
 <p>The pre-condition
means that the property must <em>NOT</em> already be open when the described
function is called. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D924E37C-300A-58FF-890B-F1FA5349FA05"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D924E37C-300A-58FF-890B-F1FA5349FA05"><!-- --></a><strong>Property has been opened</strong> </p>
 <p>A
property is a single value used by “Publish and Subscribe”. Each property
must be opened before it can be used. To open a property, use either <a href="GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2.html#GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2__GUID-DBEDDC3A-AE6F-3CAF-B251-4AA556EAF21C"><span class="apiname">RPropertyRef::Attach()</span></a> or <a href="GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2.html#GUID-39D6B924-3FA3-39E6-A6EA-88E2D1927AC2__GUID-6F8EB0AB-C01A-3BFD-B334-D9C9FB923865"><span class="apiname">RPropertyRef::Open()</span></a>. Once opened, the property cannot be opened again. </p>
 <p>The pre-condition
means that the property must already be open before calling the described
function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F1485BCB-8384-518B-AE5B-F8387DF0C8F4"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F1485BCB-8384-518B-AE5B-F8387DF0C8F4"><!-- --></a><strong>Must be called under an
XTRAP harness or calling thread must not be in a critical section</strong> </p>
 <p>Each
Symbian platform thread can be associated with a kernel-side
exception handler, set using XTRAP(); for example, to detect bad memory accesses. </p>
 <p>The
described function can legitimately cause an exception, and the pre-condition
means that </p>
 <p> <em>either</em>: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-485A8370-E3D5-5E67-9136-3150EC050DF0"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-485A8370-E3D5-5E67-9136-3150EC050DF0"><!-- --></a><p>the described function
should be called inside an XTRAP() harness to catch the exception </p>
 </li>

</ul>
 <p> <em>or</em>  </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BDF6FFE8-E447-5E3D-A809-364A0A515C33"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BDF6FFE8-E447-5E3D-A809-364A0A515C33"><!-- --></a><p>the thread must not
be in a critical section, because exceptions are not allowed inside them.
If a thread takes an exception while inside a critical section, this is treated
as fatal to the system, and causes a <a href="GUID-C6946ECB-775F-3EC2-A56F-78F25B9FBE3D.html#GUID-C6946ECB-775F-3EC2-A56F-78F25B9FBE3D__GUID-45337A03-5893-3D0D-948C-23BDCF8AECBD"><span class="apiname">Kern::Fault()</span></a>. </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4D6B9502-0F88-5E0E-8E92-5783FE76555A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4D6B9502-0F88-5E0E-8E92-5783FE76555A"><!-- --></a><strong>DObject::Lock fast mutex
held</strong> </p>
 <p>The described function accesses an object whose internal
data needs to be protected by the specified fast mutex. </p>
 <p>The operations
of: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B358DA23-F140-5F08-878F-69455A83A729"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B358DA23-F140-5F08-878F-69455A83A729"><!-- --></a><p>obtaining an object’s
name </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3838D839-5210-5FB7-AF0C-3F3C299AA7B8"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3838D839-5210-5FB7-AF0C-3F3C299AA7B8"><!-- --></a><p>setting an object's
name </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2AD3BEC1-E934-513B-BAED-3FF164161F2D"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-2AD3BEC1-E934-513B-BAED-3FF164161F2D"><!-- --></a><p>setting an object's
owner </p>
 </li>

</ul>
 <p>are all protected by the global fast mutex, <samp class="codeph">DObject::Lock</samp>.
This is done to avoid inconsistent results caused by, for example, one thread
renaming an object while another is reading its name or full name. </p>
 <p>Setting
the owner is protected as the owner's name is part of the object's full name. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D6BB3BE3-E0DD-50B9-B9D1-275E51CE7FC6"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D6BB3BE3-E0DD-50B9-B9D1-275E51CE7FC6"><!-- --></a><strong>DCodeSeg::CodeSegLock mutex
held</strong> </p>
 <p>The <samp class="codeph">DCodeSeg::CodeSegLock</samp> mutex protects
the global code graph from simultaneous accesses. Wait on this mutex before
calling the described function, e.g. by calling <samp class="codeph">DCodeSeg::Wait()</samp>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9A82D0DD-7599-5511-AD9E-2930ADC99AC0"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9A82D0DD-7599-5511-AD9E-2930ADC99AC0"><!-- --></a><strong>Any kind of lock can be
held</strong> </p>
 <p>The described function can be called with any kind of lock. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F9800056-B5E5-576D-B440-544AE067D4DC"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F9800056-B5E5-576D-B440-544AE067D4DC"><!-- --></a><strong>Call only from Init1() in
base port</strong> </p>
 <p>The pre-condition means that the described function
can only be called during the first phase of kernel initialisation, i.e. during
execution of the Base Port implementation of <samp class="codeph">Asic::Init1()</samp>.
See the <a href="GUID-DEB51862-A72B-5FB7-B1BA-F34685E71BFF.html">Board Support
Packages Quick Start</a>. </p>
 <p>This condition may apply because the
described function: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-62621625-D712-5F4C-B31D-067E5887D8FD"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-62621625-D712-5F4C-B31D-067E5887D8FD"><!-- --></a><p>must be called before
any context switch </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-FB33B022-A388-5508-9C98-33518154BBBA"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-FB33B022-A388-5508-9C98-33518154BBBA"><!-- --></a><p>must be called before
the MMU is turned on. </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6122C9C6-05EB-508C-8C9A-45B6A8DAB42C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-6122C9C6-05EB-508C-8C9A-45B6A8DAB42C"><!-- --></a><strong>The various parameters must
be valid. The PIL or PSL will fault the kernel if not</strong> </p>
 <p>This pre-condition
refers to a DMA request. </p>
 <p>The parameters used when calling the described
function must be as specified. If they are not, the platform independent layer
or the platform specific layer cannot recover and will cause the kernel to
fault, i.e. the device will reset. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-041025B4-95B9-5493-ACC3-649B6683DE0D"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-041025B4-95B9-5493-ACC3-649B6683DE0D"><!-- --></a><strong>The request is not being
transferred or pending</strong> </p>
 <p>This pre-condition refers to a DMA request. </p>
 <p>The
described function must not be called if a DMA request has already been set
up, or is in progress. A possible reason for this is that the described function
resets parameters that have been already setup. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-582E833B-C0E9-5986-86C5-24BF15648D61"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-582E833B-C0E9-5986-86C5-24BF15648D61"><!-- --></a><strong>Wait on TimerMutex before
calling this</strong> </p>
 <p>The <samp class="codeph">TimerMutex</samp> mutex protects the
timer queues. Wait and signal operations on the timer mutex are accomplished
with the static functions <a href="GUID-68509286-C337-3ED1-9162-31507CC564E1.html#GUID-68509286-C337-3ED1-9162-31507CC564E1__GUID-7E855355-3AC7-3449-B501-C387C4CBA3B9"><span class="apiname">TTickQ::Wait()</span></a> and <a href="GUID-68509286-C337-3ED1-9162-31507CC564E1.html#GUID-68509286-C337-3ED1-9162-31507CC564E1__GUID-36F604B8-EBE6-3ED1-B969-F2C4F0975036"><span class="apiname">TTickQ::Signal()</span></a>.
This precondition is necessary when the described function manipulates the
timer queue. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-98CBADF3-8CD3-54BC-8CB7-C2BD8D48289A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-98CBADF3-8CD3-54BC-8CB7-C2BD8D48289A"><!-- --></a><strong>Message must be in ACCEPTED
state</strong> </p>
 <p>This pre-condition indicates that the message has been read
by the receiving thread. It is not attached to a message queue but is currently
in use by the receiving thread. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B9E940EF-0EC8-5EEB-B29B-B402BFF09350"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B9E940EF-0EC8-5EEB-B29B-B402BFF09350"><!-- --></a><strong>Queue must not be in asynchronous
receive mode</strong> </p>
 <p>This pre-condition refers to kernel side message
queues. A kernel thread can receive messages: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4C36A2DD-3E27-507E-BB18-143AF8B210A2"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-4C36A2DD-3E27-507E-BB18-143AF8B210A2"><!-- --></a><p>asynchronously by calling <a href="GUID-382DD935-E9D7-3E00-88B2-B28A89CAD4FB.html#GUID-382DD935-E9D7-3E00-88B2-B28A89CAD4FB__GUID-EF06556E-9EC6-3D1C-AEE9-0CDDF6B42A24"><span class="apiname">TMessageQue::Receive()</span></a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BF8FB0AB-CA7F-5A02-BE61-43AECE226113"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BF8FB0AB-CA7F-5A02-BE61-43AECE226113"><!-- --></a><p>by polling, by calling <a href="GUID-D14B3E02-A9A4-37F8-9638-26C12BF5AFA8.html#GUID-D14B3E02-A9A4-37F8-9638-26C12BF5AFA8__GUID-D2B157FB-FA55-3F27-A463-691B3B6C5570"><span class="apiname">MessageQue::Poll()</span></a>  </p>
 </li>

</ul>
 <p>A possible reason for this precondition is that the queue is about
to be polled. </p>
 <p>The queue may be polled either: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-FD59C03B-1B65-52F6-A1C6-177D48D4CFC2"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-FD59C03B-1B65-52F6-A1C6-177D48D4CFC2"><!-- --></a><p>before the first <samp class="codeph">Receive()</samp> is
issued </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7551CDCD-67B1-5A1A-B1AA-5F95CF63EBD4"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7551CDCD-67B1-5A1A-B1AA-5F95CF63EBD4"><!-- --></a><p>while processing a message
but before <samp class="codeph">Receive()</samp> is called again </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-52D720FB-7F57-5340-8C34-F39FE1E50C36"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-52D720FB-7F57-5340-8C34-F39FE1E50C36"><!-- --></a><strong>Container mutex must be
held / Thread container mutex must be held / Process container mutex must
be held</strong> </p>
 <p>Each of the containers is protected by a mutex. </p>
 <p>The
pre-condition means that the calling thread must acquire the relevant mutex
before calling the described function. Object containers are <a href="GUID-7FB9067F-D200-382C-84F7-49F0548D0A7F.html"><span class="apiname">DObjectCon</span></a> types,
and the relevant mutexes are acquired and freed by calling <samp class="codeph">Wait()</samp> and <samp class="codeph">Signal()</samp> on
the container object. </p>
 </div>

<div class="section" id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F2DE76D5-0970-584F-9526-52E85932ACE8"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-F2DE76D5-0970-584F-9526-52E85932ACE8"><!-- --></a><h2 class="sectiontitle">Post-conditions</h2> <p>A
post condition describes what is true on return from a kernel API function. </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-018783B2-3BA2-5046-B9EA-7F2CF1485839"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-018783B2-3BA2-5046-B9EA-7F2CF1485839"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BCA4F419-3306-5AB4-AA78-451FDA60BB22">Calling thread is in a critical section</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DCB3FFD2-054D-5F14-B846-FE5A00E13756"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DCB3FFD2-054D-5F14-B846-FE5A00E13756"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-24DFFB87-639C-5D68-BCA0-D78AE870C485">Calling thread is not in a critical section</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8E6C6BCD-C1A5-5433-A0D9-A86962A47A1F"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8E6C6BCD-C1A5-5433-A0D9-A86962A47A1F"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-47393215-B2A5-5426-A0B6-CDB617218B7D">No fast mutex is held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3A44F461-F5D6-5E50-9951-4DD97396602B"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3A44F461-F5D6-5E50-9951-4DD97396602B"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-ECEA91E4-EB90-57AE-997E-4C8A95C3C337">Kernel is locked</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DE72541B-3AE6-5F23-A431-8CBDFB92BB81"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-DE72541B-3AE6-5F23-A431-8CBDFB92BB81"><!-- --></a><p><a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7A7AC948-D84D-5581-80CE-328F1C6DA89E">Kernel is unlocked</a></p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CFA7FF52-E930-5074-BABF-5F1148FA9513"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CFA7FF52-E930-5074-BABF-5F1148FA9513"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B7FAE304-FF14-5A43-9ECB-DAD6F33DFDEE">Kernel is locked, with lock count 1</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-208AEF9F-3BF5-59B9-A090-9B53BD4A72F1"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-208AEF9F-3BF5-59B9-A090-9B53BD4A72F1"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B811C561-CAB3-5B91-9C31-38A228734F46">Interrupts are enabled</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CD794794-94D9-53B8-A96B-C78D6EE274D5"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-CD794794-94D9-53B8-A96B-C78D6EE274D5"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-298793D0-D6E0-5FE3-84DF-FE0057E83B31">Interrupts are disabled</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1588AEB8-3B08-5659-8B93-DB0F60F038B2"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1588AEB8-3B08-5659-8B93-DB0F60F038B2"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-236D2CCB-1A32-5B30-A28D-96A9416A62A1">System lock is held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-36D4EC99-5BA4-5510-B15C-DB37BC19D26C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-36D4EC99-5BA4-5510-B15C-DB37BC19D26C"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-53E54EE1-92BF-5E68-8FE4-43EB0AC84F8B">The calling thread holds the mutex</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-FF5097D1-680A-578F-A67A-031151D1BE7A"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-FF5097D1-680A-578F-A67A-031151D1BE7A"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C293EDE0-B326-54A2-AB4F-17E9158B67AC">Container mutex is held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BA3DFAFE-8CAF-567D-B9D3-144DA8AABBAE"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BA3DFAFE-8CAF-567D-B9D3-144DA8AABBAE"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C293EDE0-B326-54A2-AB4F-17E9158B67AC">Thread container mutex is held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-343FA4B5-9217-5152-BD23-E3BCDACD7E56"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-343FA4B5-9217-5152-BD23-E3BCDACD7E56"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C293EDE0-B326-54A2-AB4F-17E9158B67AC">Process container mutex is held</a>  </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1514A5FA-1B49-5C4A-BC47-36D008282C8D"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-1514A5FA-1B49-5C4A-BC47-36D008282C8D"><!-- --></a><p> <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A5EED271-3A9C-5373-BC84-66546DE4DDD9">DCodeSeg::CodeSegLock mutex held</a>  </p>
 </li>

</ul>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BCA4F419-3306-5AB4-AA78-451FDA60BB22"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-BCA4F419-3306-5AB4-AA78-451FDA60BB22"><!-- --></a><strong>Calling thread is in a critical
section</strong> </p>
 <p>The code is in a critical section on return from the function. </p>
 <p>See
also the pre-condition: <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B0F8E686-A86D-5A99-8560-7D591CE84BD0">Calling
thread must be in a critical section</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-24DFFB87-639C-5D68-BCA0-D78AE870C485"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-24DFFB87-639C-5D68-BCA0-D78AE870C485"><!-- --></a><strong>Calling thread is not in
a critical section</strong> </p>
 <p>The code is <em>NOT</em> in a critical section
on return from the function. </p>
 <p>See also the pre-condition: <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3EE55520-0F0D-508B-A384-55082ED10D72">Calling thread must not be in a critical section</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-47393215-B2A5-5426-A0B6-CDB617218B7D"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-47393215-B2A5-5426-A0B6-CDB617218B7D"><!-- --></a><strong>No fast mutex is held</strong> </p>
 <p>A
thread can hold no more than one fast mutex at any given time. A fast mutex
is <em>NOT</em> held on exit from the function. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-ECEA91E4-EB90-57AE-997E-4C8A95C3C337"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-ECEA91E4-EB90-57AE-997E-4C8A95C3C337"><!-- --></a><strong>Kernel is locked</strong> </p>
 <p>The
post-condition means that, on exit from the described function, the kernel
lock is on. The described function might have explicitly set the kernel lock
or, more commonly, the lock was set before entry to the described function,
and has not been unset by that function. </p>
 <p>See also the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B6943D58-99B9-5A4B-A1DD-577B6197F274">Kernel
must be locked</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7A7AC948-D84D-5581-80CE-328F1C6DA89E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-7A7AC948-D84D-5581-80CE-328F1C6DA89E"><!-- --></a><strong>Kernel is unlocked</strong> </p>
 <p>The
kernel is <em>NOT</em> locked on exit from the described function. The described
function might have explicitly unset the kernel lock or, more commonly, the
lock was not set before entry to the described function, and has not been
set by that function. </p>
 <p>See also the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-8027AB9A-858F-5945-A75B-E817AD76DEC3">Kernel must be unlocked</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B7FAE304-FF14-5A43-9ECB-DAD6F33DFDEE"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B7FAE304-FF14-5A43-9ECB-DAD6F33DFDEE"><!-- --></a><strong>Kernel is locked, with lock
count 1</strong> </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-EC063E55-66F7-52E9-AF47-F981B63E446E">Kernel
must be locked, with lock count 1</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B811C561-CAB3-5B91-9C31-38A228734F46"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-B811C561-CAB3-5B91-9C31-38A228734F46"><!-- --></a><strong>Interrupts are enabled</strong> </p>
 <p>This
post-condition states that interrupts are enabled on return from the described
function. </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A55086AA-382B-5F93-9CE0-42C6FB428A19">Interrupts
must be enabled</a>  </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-298793D0-D6E0-5FE3-84DF-FE0057E83B31"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-298793D0-D6E0-5FE3-84DF-FE0057E83B31"><!-- --></a><strong>Interrupts are disabled</strong> </p>
 <p>This
post-condition states that interrupts are disabled on return from the described
function. </p>
 <p>See the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-9384C08B-D56F-5284-BA4B-4CF6C85E06E4">Interrupts
must be disabled</a>  </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-236D2CCB-1A32-5B30-A28D-96A9416A62A1"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-236D2CCB-1A32-5B30-A28D-96A9416A62A1"><!-- --></a><strong>System lock is held</strong> </p>
 <p>This
post-condition states that the system lock is held on return from the described
function. </p>
 <p>The system lock is a specific fast mutex that only provides
exclusion against other threads acquiring the same fast mutex. Setting, and
acquiring the system lock means that a thread enters an implied critical section. </p>
 <p>The
major items protected by the system lock are: </p>
 <ul>
<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-63E77673-0405-5E59-8102-67454FF96D1C"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-63E77673-0405-5E59-8102-67454FF96D1C"><!-- --></a><p> <samp class="codeph">DThread</samp> member
data related to thread priority and status. </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3A37E1EF-89CF-50DA-B4B4-174A3B307873"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-3A37E1EF-89CF-50DA-B4B4-174A3B307873"><!-- --></a><p>the consistency of the
memory map; on the kernel side, the state of user side memory or the mapping
of a process is not guaranteed unless (a) you are a thread belonging to the
process that owns the memory or (b) you hold the system lock. </p>
 </li>

<li id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D25EE56D-2FF5-515A-B826-08331B16C72E"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-D25EE56D-2FF5-515A-B826-08331B16C72E"><!-- --></a><p>the lifetime of <samp class="codeph">DObject</samp> type
objects and references to them, including handle translation in Exec dispatch. </p>
 </li>

</ul>
 <div class="p"><div class="note"><span class="notetitle">Note:</span>  System lock is different from the kernel lock; the kernel
lock protects against any rescheduling. When the system lock is set, the calling
thread can still be pre-empted, even in the locked section.</div>
 </div>
 <p>The
system lock is set by a call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-B3837744-B8CC-3DC0-BA1D-417016E88EE9"><span class="apiname">NKern::LockSystem()</span></a>, and
unset by call to <a href="GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02.html#GUID-3A3C08F3-3D33-3D9E-80E7-7855C7B21E02__GUID-63B882C8-C5D0-3595-BBF1-74E942A5060A"><span class="apiname">NKern::UnlockSystem()</span></a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-53E54EE1-92BF-5E68-8FE4-43EB0AC84F8B"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-53E54EE1-92BF-5E68-8FE4-43EB0AC84F8B"><!-- --></a><strong>The calling thread holds
the mutex</strong> </p>
 <p>The calling thread has waited for a mutex and acquired
it. On return from the described function, the thread still holds the mutex. </p>
 <p>See
also the pre-condition <a href="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8.html#GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-910660F9-F30F-5725-981D-52F65F7FDB81">The
calling thread must hold the mutex</a>. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C293EDE0-B326-54A2-AB4F-17E9158B67AC"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-C293EDE0-B326-54A2-AB4F-17E9158B67AC"><!-- --></a><strong>Container mutex is held
/ Thread container mutex is held / Process container mutex is held</strong> </p>
 <p>Each
of the containers is protected by a mutex. </p>
 <p>The post-condition means
that the calling thread has the relevant mutex on return from the described
function. This is most likely because the mutex was acquired before entering
the described function. </p>
 <p>Object containers are <a href="GUID-7FB9067F-D200-382C-84F7-49F0548D0A7F.html"><span class="apiname">DObjectCon</span></a> types,
and the relevant mutexes are acquired and freed by calling <samp class="codeph">Wait()</samp> and <samp class="codeph">Signal()</samp> on
the container object. </p>
 <p id="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A5EED271-3A9C-5373-BC84-66546DE4DDD9"><a name="GUID-63456B20-3A61-554A-BBA4-C23B176E39A8__GUID-A5EED271-3A9C-5373-BC84-66546DE4DDD9"><!-- --></a><strong>DCodeSeg::CodeSegLock mutex
held</strong> </p>
 <p>The <samp class="codeph">DCodeSeg::CodeSegLock</samp> mutex protects
the global code graph from simultaneous accesses. </p>
 <p>This post condition
means that the mutex is held on exit. The most common situation is that the
mutex was acquired before entry to the described function. Relinquish the
mutex by calling <samp class="codeph">DCodeSeg::Signal()</samp>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-DC8D3736-EDCF-54CB-A614-2AAC4664F1CA.html" title="This section describes how device drivers can use the services that the Kernel provides.">Kernel-Side Services</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>