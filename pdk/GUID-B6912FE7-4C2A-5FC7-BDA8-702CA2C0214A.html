<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Content object attributes"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6C91CF2-A616-5E52-8BB2-630C42C8D540.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7EE46FD9-DC9E-5C1F-9AC5-48F5212AF0CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Content object attributes</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A"><a name="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2858692 id2858712 id2858727 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-E6C91CF2-A616-5E52-8BB2-630C42C8D540.html">Content Management</a> &gt; <a href="GUID-7EE46FD9-DC9E-5C1F-9AC5-48F5212AF0CA.html">Content Access Framework</a> &gt; <a href="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html">Content Access Framework Concepts</a> &gt; </div>
<h1 class="topictitle1">Content
object attributes</h1>
<div>
<p>A file may consist of many content and container objects. Each of these
objects may have properties or attributes associated with it. Applications
can retrieve these using the CAF APIs. </p>

<div class="section"><h2 class="sectiontitle">Generic attributes</h2> <p>Different agents may use different
terms to describe the same concept. Generic attributes provide a way for applications
to query standardised information about a content object. </p>
 <p>These standardised
attributes are given by the enumeration <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-BC47B375-3FC2-3F1E-93A8-9CD4314439A0"><span class="apiname">ContentAccess::TAttribute</span></a>.
It is possible for agents to extend this set of attributes, starting from <a href="GUID-D72F3CCA-05E7-323B-9F35-18D1338F71D0.html"><span class="apiname">EAgentSpecificAttributeBase</span></a>. </p>
 <p>The
attribute functions are implemented in <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-FC40011B-32D3-328B-BB59-35BEF46A215A"><span class="apiname">ContentAccess::CContent</span></a>, <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-B54C8391-FE69-324C-AC0A-1E88C2555F00"><span class="apiname">ContentAccess::CData</span></a> and <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-671191B1-B249-3DD3-A5E8-6F1A41A371C8"><span class="apiname">ContentAccess::CManager</span></a>. </p>
 <p><strong>Retrieving a single attribute </strong> </p>
 <p>The attributes of
one content object in a file may not necessarily be the same as the attributes
of other content objects within the same file. Attributes relate to a single
content object within a file. </p>
 <p>It is possible that the attribute may
not make sense for a particular content object. In that case, the agent will
return a <samp class="codeph">KErrCANotSupported</samp> error. If an attempt is made
to retrieve the attributes of a content object that does not exist, the agent
will return <samp class="codeph">KErrNotFound</samp>. </p>
 <p>The following code fragment
illustrates how to retrieve an attribute for a particular object within a
content file. </p>
 <pre class="codeblock" id="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A__GUID-E773CC84-3C78-5B81-A39F-8C2780554BA4"><a name="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A__GUID-E773CC84-3C78-5B81-A39F-8C2780554BA4"><!-- --></a>// check if DRM rights are pending for the object specified by uniqueId
          
TInt attributeValue;    
TInt err = content-&gt;GetAttribute(ERightsPending, attributeValue, uniqueId);

if(err == KErrNone) 
    {
    // Check the value of the attribute 
    if(attributeValue == ETrue)
        {
        // Rights are pending, display waiting for rights countdown 
        }

    else if(attributeValue == EFalse) 
        {
        // Rights are not pending
        }
    }

else if(err == KErrCANotSupported) 
    {  
    // This attribute does not apply to this content object 
    }  

else if(err == KErrNotFound) 
    { 
    // Cannot find the object specified by the given uniqueId 
    }</pre>
 <p><strong>Retrieving several attributes </strong> </p>
 <p>For some
agent implementations it may be more efficient to retrieve all the attributes
for a content object in one function call. The <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-19C830CE-9E8C-381B-9D76-74B110C3A7D9"><span class="apiname">ContentAccess::RAttributeSet</span></a> object
is used here to provide a way to request and store several attributes. </p>
 <p>Querying
two attributes using the <a href="GUID-7F3D9E35-A8FC-35A6-8036-23396BAADFDC.html"><span class="apiname">CManager</span></a> API would look like the
following: </p>
 <pre class="codeblock" id="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A__GUID-6FE754AF-471E-5A79-847F-D994D1C7981D"><a name="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A__GUID-6FE754AF-471E-5A79-847F-D994D1C7981D"><!-- --></a>// Prepare the attributes to query using the CAttributeSet object

RAttributeSet attributeSet; 
CleanupClosePushL(attributeSet); 

attributeSet.AddL(EProtected);                
attributeSet.AddL(ECanView); 
                
CManager *manager = new CManager(); 
                
// Retrieve the attribute values from the agent 
User::LeaveIfError(manager-&gt;GetAttributeSet(attributeSet,virtualPath);

// Check if the content object is protected 
TInt attributeValue;
TInt err = attributeSet.GetValue(EProtected, attributeValue); 
if(err == KErrNone &amp;&amp; attributeValue) 
    {
    // content object is DRM protected 
    }                                                                            

// Check if the content object can be display on screen
TInt err = attributeSet.GetValue(ECanView,    attributeValue); 
if(err == KErrNone &amp;&amp; attributeValue) 
    {
    // content object has rights that allow it to be displayed on screen 
    }</pre>
 </div>

<div class="section"><h2 class="sectiontitle">Generic string attributes</h2> <p>String attributes are
similar to the attributes described above except the value associated with
the attribute is a string. A good example of where a string attribute is required
is the MIME type of a content object within a file. </p>
 <p>The string attributes
are standardised by the <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-BC242813-E0F0-3DFE-AF97-6BE808D570DE"><span class="apiname">ContentAccess::TStringAttribute</span></a> enumeration.
This allows applications to request information such as the MIME type in a
generic way for all agents. </p>
 <p>Agents can extend this mechanism to provide
agent specific attributes starting at <a href="GUID-7BF5E37F-2F46-33EB-B0A8-266532570BA2.html"><span class="apiname">EAgentSpecificStringAttributeBase</span></a>.
If the Agent does not support this attribute, it returns <samp class="codeph">KErrCANotSupported</samp>. </p>
 <p><strong>Retrieving
several string attributes </strong> </p>
 <p>For some agent implementations, it
may be more efficient to retrieve several string attributes for a content
object in one function call. The <a href="GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601.html#GUID-0F5CE9B5-E674-3962-8376-CFB1ECB2F601__GUID-E441CC4B-5BB0-36C4-A4B3-40A71FE2B156"><span class="apiname">ContentAccess::RStringAttributeSet</span></a> object
is used here to provide a way to request and store several attributes. </p>
 <p>The
following example query three attributes using the <a href="GUID-7F3D9E35-A8FC-35A6-8036-23396BAADFDC.html"><span class="apiname">CManager</span></a> API: </p>
 <pre class="codeblock" id="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A__GUID-05C8EDBD-4CCA-5214-8466-F060B4F6425E"><a name="GUID-B6912FE7-4C2A-5FC7-BDA8-702CA2C0214A__GUID-05C8EDBD-4CCA-5214-8466-F060B4F6425E"><!-- --></a>// Prepare the attributes to query using the CAttributeSet object 
RStringAttributeSet stringAttributeSet; 
CleanupClosePushL(stringAttributeSet); 

stringAttributeSet.AddL(ETitle); 
stringAttributeSet.AddL(EAuthor); 
stringAttributeSet.AddL(EDescription);

CManager *manager = new CManager(); 

// Retrieve the attribute values from the agent 
User::LeaveIfError(manager-&gt;GetStringAttributeSet(stringAttributeSet,virtualPath));

// Display the values 
TBuf &lt;256&gt; value; 
TInt err = stringAttributeSet.GetValue(ETitle, value); 
if(err == KErrNone) 
    {    
    Printf("Title : %s", value); 
    }
err = stringAttributeSet.GetValue(EAuthor, value);
if(err == KErrNone) 
    {
    Printf("Author : %s", value); 
    }
err = stringAttributeSet.GetValue(EDescription, value);
if(err == KErrNone) 
    {
    Printf("Description : %s", value); 
    }</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E6762A98-36A4-5860-B3F9-2AEBBCEAAB2A.html">Content Access Framework Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>