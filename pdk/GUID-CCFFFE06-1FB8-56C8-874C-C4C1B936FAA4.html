<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="How to Set and Get the AMR Stream Property"/>
<meta name="DC.Relation" scheme="URI" content="GUID-690AB89F-D66E-5B3A-B16D-B81152094E57.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-690AB89F-D66E-5B3A-B16D-B81152094E57.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>How to Set and Get the AMR Stream Property</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4"><a name="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2397554 id2397562 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-6425B722-4095-56E3-9198-70BA3E06C617.html">Multimedia Protocols Guide</a> &gt; <a href="GUID-690AB89F-D66E-5B3A-B16D-B81152094E57.html">AMR Payload Formatter</a> &gt; </div>
<h1 class="topictitle1">How to Set and Get the AMR Stream Property</h1>
<div><p>A user has to first create an instance of the AMR payload formatter. Then, the user can set and get the AMR stream property. </p>
 <p>The following table contains the configurable AMR stream properties and their default values. </p>
 
<div class="tablenoborder"><a name="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-43036700-3A6E-5288-9D5C-19EC12B59944"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-43036700-3A6E-5288-9D5C-19EC12B59944" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1851150e22">AMR stream properties</th>
 <th class="cellrowborder" valign="top" id="d1851150e25">Default values</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>Bit rate </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>0</p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>Frame Quality </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>AMR quality is good (1) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>Header Type </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>IF2 (2) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>No of Frames </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>1</p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>Mode </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>Octet Aligned Mode (1) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>Band </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>Wide Band (1) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d1851150e22 "><p>Change Mode Request </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1851150e25 "><p>0</p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>The following code shows the valid set of all AMR stream properties so that a user can accordingly get or set the values. </p>
 <pre class="codeblock" id="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-31480714-CB05-52C1-8D67-3F4B556EB8CD"><a name="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-31480714-CB05-52C1-8D67-3F4B556EB8CD"><!-- --></a>// AMRPROPERTY.H

enum TAmrNBBitRate
    {
    EAmr_4_75_Kbps = 0,
    EAmr_5_15_Kbps = 1,
    EAmr_5_90_Kbps = 2,
    EAmr_6_70_Kbps = 3,
    EAmr_7_40_Kbps = 4,
    EAmr_7_95_Kbps = 5,
    EAmr_10_2_Kbps = 6,
    EAmr_12_2_Kbps = 7,
    EAmr_SID_Nb_Kbps = 8,
    // Future rates will be added here 
    EAmr_No_Data_Nb   = 15
    };
    
enum TAmrWBBitRate
    {
    EAmr_6_60_Kbps  = 0,
    EAmr_8_85_Kbps  = 1,
    EAmr_12_65_Kbps = 2,
    EAmr_14_25_Kbps = 3,
    EAmr_15_85_Kbps = 4,
    EAmr_18_25_Kbps = 5,
    EAmr_19_85_Kbps = 6,
    EAmr_23_05_Kbps = 7,
    EAmr_23_85_Kbps = 8,
    EAmr_SID_Wb_Kbps= 9,
    // future rates will be added here
    EAmr_No_Data_Wb =15    
    };
    
enum TAmrFrameQuality
    {
    EBadQuality = 0,
    EGoodQuality = 1
    };
    
enum TAmrHeaderType
    {
    ERawMode = 0,
    EIF1Mode = 1,
    EIF2Mode = 2
    };
    
enum TAmrMode
    {
    EOctetAlignedMode = 1,
    EBandWidthOptimizedMode = 2
    };
    
enum TAmrBand
    {
    EWideBand = 1,
    ENarrowBand = 2
    };
    
//The Change Mode Request value depends on whether the AMR is narrow or wide band.
enum TAmrChangeModeRequest
    {
    EAmrChangeModeRequest_0 = 0,
    EAmrChangeModeRequest_1 = 1,
    EAmrChangeModeRequest_2 = 2,
    EAmrChangeModeRequest_3 = 3,
    EAmrChangeModeRequest_4 = 4,
    EAmrChangeModeRequest_5 = 5,
    EAmrChangeModeRequest_6 = 6,
    EAmrChangeModeRequest_7 = 7,
    EAmrChangeModeRequest_8 = 8,
    EAmrChangeModeRequest_9 = 9,
    // future modes will be added here
    EAmrChangeModeRequest_15 = 15
    };</pre>
 <div class="section"><h2 class="sectiontitle">How to set the AMR stream property</h2> <p>If a user wants to set the AMR stream properties then the user has to individually set the specific AMR stream properties and then call the <a href="GUID-2283C5F3-9237-38BE-933C-353ADF676B42.html#GUID-2283C5F3-9237-38BE-933C-353ADF676B42__GUID-801B3E2A-2B63-35A9-A871-7519D4869326"><span class="apiname">CStreamFormatter::SetStreamProperty()</span></a> API. This is done by using the respective functions for each property. </p>
 <p>The following code shows how to set the AMR stream properties. </p>
 <pre class="codeblock" id="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-35AC4B25-BA5E-5B17-B1C9-8C1E31127853"><a name="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-35AC4B25-BA5E-5B17-B1C9-8C1E31127853"><!-- --></a>// Create an instance of AMR Payload Formatter by passing KAmrFormatterUid
CStreamFormatter * aStreamFormatter =  CStreamFormatter::NewL(TUid::Uid(KAmrFormatterUid));

// First set the individual AMR stream properties if the user wants to, otherwise default values are used
CStreamProperty* aStreamProperty = aStreamFormatter-&gt;ConfigFactory(); //

//Get the CAmrStreamProperty property reference from CStreamProperty base class
CAmrStreamProperty* aAmrStreamProperty = (CAmrStreamProperty*)aStreamProperty;

// Set the bit rate to BitMode
TInt8 ret1 = aAmrStreamProperty-&gt;SetAmrBitRate(BitMode);  // Default bit rate is 0

// Set the AMR frame quality to the value passed as input
aAmrStreamProperty-&gt;SetAmrFrameQuality(TAmrFrameQuality); // Default AMR quality is good (1)

// Set the no of frames to be packed in a single RTP packet
TInt8 ret2 = aAmrStreamProperty-&gt;SetAmrNoofFrames(NoofFrames); // Default value is 1

// Set the header type to the value passed as input
aAmrStreamProperty-&gt;SetAmrHeaderType(TAmrHeaderType); // Default header type is IF2 (2)

// Set the AMR mode to the value passed
aAmrStreamProperty-&gt;SetAmrMode(TAmrMode);  // Default mode is Octet Aligned Mode (1)

// Set the AMR band to the value passed as input
aAmrStreamProperty-&gt;SetAmrBand(TAmrBand); // Default Band is Wide Band (1)

// Set the Change Mode Request to the value passed as input
aAmrStreamProperty-&gt;SetAmrChangeModeRequest(TAmrChangeModeRequest); //Default mode request is set to 0
</pre>
 <p>After the user sets the AMR properties the <a href="GUID-2283C5F3-9237-38BE-933C-353ADF676B42.html#GUID-2283C5F3-9237-38BE-933C-353ADF676B42__GUID-EA184327-994A-35E9-90F2-5E49A5914D46"><span class="apiname">CStreamFormatter::SetStreamProperty</span></a> API is called. </p>
 <pre class="codeblock" id="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-1320DD2F-8CE8-5068-93C8-50BB186FD3D3"><a name="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-1320DD2F-8CE8-5068-93C8-50BB186FD3D3"><!-- --></a>// Call the SetStreamProperty() function of the interface        
aStreamFormatter-&gt;SetStreamProperty(aStreamProperty);
</pre>
 </div>
 <div class="section"><h2 class="sectiontitle">How to get the AMR stream property</h2> <p>If a user wants to get the AMR stream properties then the application has to call <a href="GUID-2283C5F3-9237-38BE-933C-353ADF676B42.html#GUID-2283C5F3-9237-38BE-933C-353ADF676B42__GUID-447345B5-1F60-3273-A320-B313D388748B"><span class="apiname">CStreamFormatter::GetStreamProperty()</span></a> API and then individually get the specific AMR stream properties. This is done by using the respective functions for each property. </p>
 <p>The following code shows how to get the AMR stream properties. </p>
 <pre class="codeblock" id="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-A23DDC33-E399-59DA-BA5B-8099CFC49BCB"><a name="GUID-CCFFFE06-1FB8-56C8-874C-C4C1B936FAA4__GUID-A23DDC33-E399-59DA-BA5B-8099CFC49BCB"><!-- --></a>// Create an instance of AMR Payload Formatter by passing KAmrFormatterUid
CStreamFormatter * aStreamFormatter =  CStreamFormatter::NewL(TUid::Uid(KAmrFormatterUid));

// Get the AMR stream properties
CStreamProperty* aGetStreamProperty = aStreamFormatter-&gt;GetStreamProperty();

//Get the CAmrStreamProperty property reference from CStreamProperty base class
CAmrStreamProperty* aAmrGetStreamProperty = (CAmrStreamProperty*)aGetStreamProperty;

// Get the AMR bit rate
TInt BitMode = aAmrGetStreamProperty-&gt;AmrBitRate();

// Get the AMR header type
TAmrHeaderType amrHeaderType = aAmrGetStreamProperty-&gt;AmrHeaderType();
        
// Get the no of frames packed in the current AMR session
TInt NoofFrames = aAmrGetStreamProperty-&gt;AmrNoofFrames();

// Get the current AMR mode
TAmrMode amrMode = aAmrGetStreamProperty-&gt;AmrMode();

// Get the current AMR band
TAmrBand amrBand = aAmrGetStreamProperty-&gt;AmrBand();

// Get the quality of AMR frame
TAmrFrameQuality amrFrameQuality = aAmrGetStreamProperty-&gt;AmrFrameQuality();

// Get the Change Mode Request
TAmrChangeModeRequest amrChangeModeRequest = aAmrGetStreamProperty-&gt;AmrChangeModeRequest();
</pre>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-690AB89F-D66E-5B3A-B16D-B81152094E57.html">AMR Payload Formatter</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>