<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Guide to Large Files"/>
<meta name="abstract" content="The enhanced file server supports large files, greater than 2GB, by introducing 64-bit variants of existing functions. This maintains binary and source compatibility."/>
<meta name="description" content="The enhanced file server supports large files, greater than 2GB, by introducing 64-bit variants of existing functions. This maintains binary and source compatibility."/>
<meta name="DC.Relation" scheme="URI" content="GUID-C473F6B1-35E7-5A1E-B451-4EBD7064CCDC.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F3BD37EC-0CCB-5859-908F-215E22C9FC20.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C473F6B1-35E7-5A1E-B451-4EBD7064CCDC.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B69FE02E-3A78-5438-BA7C-F7BB4CD3EB76.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F0D5C8DB-3AD0-53F1-8301-C0F69A4F13C1.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Guide to Large Files</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2387835 id2392072 id2399453 id2399496 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-C14B2552-43A7-4499-ABFE-1725128DA6EF.html" title="Kernel and Hardware Services performs the fundamental operating system tasks of managing access to device resources.">Kernel and Hardware Services Guide</a> &gt; <a href="GUID-0DF9E318-BE97-531E-AB39-A7B5E8787C87.html" title="Provides a framework for accessing file systems.">User Library and File Server</a> &gt; <a href="GUID-F3BD37EC-0CCB-5859-908F-215E22C9FC20.html" title="The File Server component manages all files on a Symbian platform phone. This section describes how to extend the File Server for your phone hardware.">File Server Extensions</a> &gt; <a href="GUID-C473F6B1-35E7-5A1E-B451-4EBD7064CCDC.html" title="This section discusses how to access large files using the 64-bit file server client API; how to intercept large file access from file server plugins and how to interface 3rd-party file systems with the file server to support large files.">Large File Access</a> &gt; </div>
<h1 class="topictitle1">Guide
to Large Files</h1>
<div><p>The enhanced file server supports large files, greater than 2GB,
by introducing 64-bit variants of existing functions. This maintains binary
and source compatibility. </p>

<div class="section" id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-B4ADB469-2CED-4589-96F2-E1D3A473F3F0"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-B4ADB469-2CED-4589-96F2-E1D3A473F3F0"><!-- --></a><h2 class="sectiontitle">Introduction</h2><p>The file server client, file server
and file systems have been modified to use 64-bit arguments and arithmetic.
The overhead of these changes are small in relation to the number of calls
per second for streaming read, write and recursive file access operations.
These changes have no impact on performance. </p>
<p>The following components
have been enhanced to support large file access: </p>
<ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-C669A1A3-D7FA-50F7-9668-E10D03A74C7B"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-C669A1A3-D7FA-50F7-9668-E10D03A74C7B"><!-- --></a><p>file server client API </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-ABCBF8A2-B9DB-58CE-9A44-6C2640968223"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-ABCBF8A2-B9DB-58CE-9A44-6C2640968223"><!-- --></a><p>file server </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-1D109EB4-5BF3-5E26-BA55-7E6574E648E3"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-1D109EB4-5BF3-5E26-BA55-7E6574E648E3"><!-- --></a><p>FAT32 file system. </p>
 </li>

</ul>
</div>

<div class="section" id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-E8719A5F-ACD4-4FD3-B8F0-BD9A6DCFEC3D"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-E8719A5F-ACD4-4FD3-B8F0-BD9A6DCFEC3D"><!-- --></a><h2 class="sectiontitle">File server client API</h2><p>The change to 64-bit file
use is not automatic. Code must be modified to use 64-bit file support. Any
code that is not modified will continue to operate in legacy 32-bit mode. </p>
<p>Applications
that are not designed to handle large files may experience behavioural breaks.
For example, unexpected return codes or values when an attempt is made to
seek to the end of a large file using the 32-bit APIs, and code that sits
in a loop counting bytes written may overflow if <samp class="codeph">TInt32</samp> values
are used. </p>
<p>These values have been changed to support 64-bit operations: </p>
<ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-61D742A0-A565-58EC-9094-3B63F1038EBD"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-61D742A0-A565-58EC-9094-3B63F1038EBD"><!-- --></a><p>the <em>size</em> of a
file </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-873E3345-BADA-5933-B548-FFA31498221C"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-873E3345-BADA-5933-B548-FFA31498221C"><!-- --></a><p>the current <em>position</em> in
a file </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-9C6FA09C-33B4-5317-9B89-7783E8A1D52F"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-9C6FA09C-33B4-5317-9B89-7783E8A1D52F"><!-- --></a><p>the <em>length</em> for
lock and unlock operations on a file. </p>
 </li>

</ul>
 <p><strong>RFile64</strong> </p>
<p>The
existing <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html"><span class="apiname">RFile</span></a> APIs have not been changed but extended
so that legacy code can be easily altered. The class <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html"><span class="apiname">RFile64</span></a> has
been added that enables the 64-bit APIs for use by new applications. </p>
 <p>The <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html"><span class="apiname">RFile64</span></a> class
provides the following main functions: </p>
 <ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-153482C6-9BFD-59C2-88B0-9A1406ACC2DA"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-153482C6-9BFD-59C2-88B0-9A1406ACC2DA"><!-- --></a><p>Methods to create a
new file handle: </p>
 <ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-D9063861-FC2F-53A6-9A92-1F90AF6C7D0A"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-D9063861-FC2F-53A6-9A92-1F90AF6C7D0A"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-C21D963A-3A25-3337-9C2C-2F38FC8B3978"><span class="apiname">RFile64::Open()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-A3ACE92F-0597-5D1D-9460-619810DA81FE"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-A3ACE92F-0597-5D1D-9460-619810DA81FE"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-4CFB5583-14DC-3624-949E-4DC3371C87C3"><span class="apiname">RFile64::Create()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-CC766AF7-C92F-50FE-B8E4-2C38642833BB"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-CC766AF7-C92F-50FE-B8E4-2C38642833BB"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-8C0839D4-3A34-3A5D-987F-D1835A9E5D48"><span class="apiname">RFile64::Replace()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-D0782E41-A028-5A27-BCA1-C2A47818F865"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-D0782E41-A028-5A27-BCA1-C2A47818F865"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-FBF7B5A8-F674-3864-90D8-F611957E3594"><span class="apiname">RFile64::Temp()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-8446EA24-F3FA-57C3-8270-2316E43384B3"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-8446EA24-F3FA-57C3-8270-2316E43384B3"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-FB9777D6-047E-3063-B107-AB3C9C85DA29"><span class="apiname">RFile64::AdoptFromServer()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-1C9B8CFC-164C-5F00-8DEA-78F943C2902C"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-1C9B8CFC-164C-5F00-8DEA-78F943C2902C"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-F1F12145-DB88-3101-9A08-7F77B130FE03"><span class="apiname">RFile64::AdoptFromClient()</span></a> </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-A7DF9C14-C178-53C2-924F-972BB9386920"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-A7DF9C14-C178-53C2-924F-972BB9386920"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-0AD3ACA4-8453-3A8D-A77F-3102B7B93936"><span class="apiname">RFile64::AdoptFromCreator()</span></a> </p>
 </li>

</ul>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-9C7CA734-7D80-5889-9660-F0447C38CD8A"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-9C7CA734-7D80-5889-9660-F0447C38CD8A"><!-- --></a><p>Set of 64-Bit <samp class="codeph">Read()</samp> and <samp class="codeph">Write()</samp> APIs: </p>
 <ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-39306BF8-834D-52C2-8976-AE765D9CF1B8"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-39306BF8-834D-52C2-8976-AE765D9CF1B8"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-69D2F421-3391-3D39-88E8-49D106047065"><span class="apiname">RFile64::Read()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-87EFAF4A-AE3B-5114-B5EC-88655E16C5E7"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-87EFAF4A-AE3B-5114-B5EC-88655E16C5E7"><!-- --></a><p> <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html#GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7__GUID-D8D2D145-5703-3415-9738-34924C80B6A1"><span class="apiname">RFile64::Write()</span></a>  </p>
 </li>

</ul>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-C5BFC289-B33A-5216-973A-BEB95F5E0E86"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-C5BFC289-B33A-5216-973A-BEB95F5E0E86"><!-- --></a><p>64-Bit versions of versions
of: </p>
 <ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-AC1E1BEE-36A5-5FDA-B4E9-DE55255E3BCD"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-AC1E1BEE-36A5-5FDA-B4E9-DE55255E3BCD"><!-- --></a><p> <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-01ACE541-916F-3811-A596-E25F1EF1C409"><span class="apiname">RFile::Size()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-C4601CA8-CA7B-5BE8-944F-7806F30124E1"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-C4601CA8-CA7B-5BE8-944F-7806F30124E1"><!-- --></a><p> <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-8592B60E-70E7-37D6-AFD2-4D2A1A87C886"><span class="apiname">RFile::SetSize()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-898FBD04-B302-53AF-9A36-F02CB3D19215"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-898FBD04-B302-53AF-9A36-F02CB3D19215"><!-- --></a><p> <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-07136402-8D95-3256-9591-EE4141748E15"><span class="apiname">RFile::Seek()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-EE9376DE-DF4C-5935-B9BD-5B684A7C283E"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-EE9376DE-DF4C-5935-B9BD-5B684A7C283E"><!-- --></a><p> <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-4B12909C-0BC6-3FFE-8825-FA98312F74C2"><span class="apiname">RFile::Lock()</span></a>  </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-30B8A5E7-792D-52A2-8CB6-932C4031C23A"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-30B8A5E7-792D-52A2-8CB6-932C4031C23A"><!-- --></a><p> <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-125FDD99-A448-33CA-A9BB-8BF8593EB445"><span class="apiname">RFile::Unlock()</span></a>. </p>
 </li>

</ul>
 </li>

</ul>
<div class="p">A mechanism has been provided that assists the porting of code from
32-bit to 64-bit APIs. To assist migration, use the <a href="GUID-F06E7AFA-F635-3DE5-9FA6-5593A25A8DBE.html"><span class="apiname">_F32_STRICT_64_BIT_MIGRATION</span></a> macro
to force compiler errors if <samp class="codeph">TInt</samp> or<samp class="codeph">TUint</samp> variables
are used. <div class="note"><span class="notetitle">Note:</span> This does not guarantee that all areas of code will be highlighted.
For example, a function can operate on a large file using 32-bit APIs, which
can only be guaranteed to be detected by close code inspection. </div>
</div>
<p>The
legacy 32-bit versions of <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-07136402-8D95-3256-9591-EE4141748E15"><span class="apiname">RFile::Seek()</span></a> and <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-01ACE541-916F-3811-A596-E25F1EF1C409"><span class="apiname">RFile::Size()</span></a> are
privately overloaded so that any software that migrates from <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html"><span class="apiname">RFile</span></a> to <a href="GUID-83A415A0-F417-3CA5-BA10-5AEF119AB1F7.html"><span class="apiname">RFile64</span></a> without
updating their code to use the <samp class="codeph">TInt64</samp> versions of these APIs
will encounter build errors. This guarantees that 64-bit aware clients will
use the correct APIs. </p>
 <p><strong>Compatibility</strong></p>
<p>A file opened by a 32-bit client can also be opened by a client with
64-bit awareness, and as a result the size of this file can grow beyond the
2GB-1 boundary if the 64-bit client increases the size of the file. This can
result in the client experiencing situations where an error (<samp class="codeph">KErrTooBig</samp>,
or a negative file size) is returned by calls to <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-01ACE541-916F-3811-A596-E25F1EF1C409"><span class="apiname">RFile::Size()</span></a> or
to <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-07136402-8D95-3256-9591-EE4141748E15"><span class="apiname">RFile::Seek()</span></a>. </p>
 <p>The 32-bit function <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-94CCC141-8E26-3FA3-A222-D9A658AEA8A9"><span class="apiname">RFile::Read()</span></a> returns <samp class="codeph">KErrTooBig</samp> when
attempting to read from a position greater than 2GB–1. This did not occur
before the File Server was enhanced as a large file could not be opened. </p>
 </div>

<div class="section" id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-DB207810-B599-4DBC-8760-02FED87DB4DC"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-DB207810-B599-4DBC-8760-02FED87DB4DC"><!-- --></a><h2 class="sectiontitle">File server</h2><p>The file server has been modified to
handle 64-bit parameters from the user to the file system. Currently, the
arguments representing file size, position and length for <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-4B12909C-0BC6-3FFE-8825-FA98312F74C2"><span class="apiname">RFile::Lock()</span></a> and <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html#GUID-BE0804F6-4375-3C8A-8C83-968F510466E0__GUID-9083CCAD-F9ED-36FB-9C80-79D2F1B46B77"><span class="apiname">RFile::UnLock()</span></a> are
stored in a <a href="GUID-4AD02F14-1142-372F-9D11-224595932034.html"><span class="apiname">TIpcArgs</span></a> object and are sent to the server
using <a href="GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6.html#GUID-6D8A458C-9A39-3000-A3BC-060A2A3663E6__GUID-479FE087-DD9F-31D7-98F7-9F96535F0584"><span class="apiname">RSessionBase::SendReceive()</span></a> as a file server request. </p>
<p>As
these parameters do not require more than 32-bits, they are packaged as <samp class="codeph">TInt</samp> values
in a <samp class="codeph">TIpcArgs</samp> slot. When <samp class="codeph">Lock()</samp> and <samp class="codeph">UnLock()</samp> require
64-bit values for position, size and length, these values are packaged using
a package descriptor that is stored in the <samp class="codeph">TIpcArgs</samp> instead
of the value itself. </p>
<div class="p">On the file server side the following changes
have been implemented:<ul>
<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-DFE1E1A6-E46F-5246-8C04-02E14A411B36"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-DFE1E1A6-E46F-5246-8C04-02E14A411B36"><!-- --></a><p>The server now handles
64-bit wide <span class="keyword">IPC</span> parameters from the client library, only
when the value is greater than 32 bits. </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-5AF36E4B-D085-5842-949E-AB2FA132A0BB"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-5AF36E4B-D085-5842-949E-AB2FA132A0BB"><!-- --></a><p>File server side classes
have been modified to use 64-bit file sizes. This includes changes to operations
that enable file sharing, cache, file lock &amp; asynchronous requests, position
and lock/unlock section lengths. </p>
 </li>

<li id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-F95C5CA0-876E-5B6C-8E47-B1A35B4C3A6E"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-F95C5CA0-876E-5B6C-8E47-B1A35B4C3A6E"><!-- --></a><p>Calls to the file system's
32-bit functions from within the file server have been replaced with calls
to 64-bit variants. </p>
 </li>

</ul>
</div>
<p>See <a href="GUID-2E4C50DE-AF0A-5393-A1FB-F739653EB727.html" title="Describes the changes to existing file system interface APIs.">Interfacing
File Systems to the 64-bit File Server</a>. </p>
 <p><strong>IPC</strong></p>
<p>64-Bit APIs require an additional IPC data transfer between
file server &amp; client when accessing file data beyond 4GB-1. This IPC overhead
is expected to impose some degradation in performance when using cached I/O,
particularly when issuing requests for small quantities of data (compared
to the equivalent operations below the 4GB boundary and legacy APIs where
no additional IPC is required). </p>
</div>

<div class="section" id="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-BAFC691E-56EB-46A5-89FA-D10CB7E971A4"><a name="GUID-67D02FE2-3FF6-5FAD-8F74-A677FC397F25__GUID-BAFC691E-56EB-46A5-89FA-D10CB7E971A4"><!-- --></a><h2 class="sectiontitle">FAT32 file system</h2><p>The standard FAT32 file system
only supports file sizes up to 4GB-1. The current <a href="GUID-D3C0AFFC-EE30-32ED-89A2-71023EB28A4D.html#GUID-D3C0AFFC-EE30-32ED-89A2-71023EB28A4D__GUID-1585DE93-228D-3BAF-8016-7364B4F983BE"><span class="apiname">CFatFileCB::MExtendedFileInterface</span></a> restricts
operations to sizes less than 2GB-1. The FAT32 file system has been modified
to support files of sizes up to 4GB–1. </p>
<p>The <a href="GUID-D3C0AFFC-EE30-32ED-89A2-71023EB28A4D.html#GUID-D3C0AFFC-EE30-32ED-89A2-71023EB28A4D__GUID-1585DE93-228D-3BAF-8016-7364B4F983BE"><span class="apiname">CFatFileCB::MExtendedFileInterface</span></a> implementation
has been altered to allow operations up to 4GB–1. All <samp class="codeph">signed int</samp> and <samp class="codeph">TInt</samp> types
are now treated as <samp class="codeph">unsigned int</samp> and <samp class="codeph">TUint</samp> to
support large file access. </p>
<p>The <a href="GUID-FADDE053-CC1C-39BC-A52D-27093041BE20.html#GUID-FADDE053-CC1C-39BC-A52D-27093041BE20__GUID-18B9D722-1EAB-38E4-9027-4CED524E8A9B"><span class="apiname">CMountCB::MFileExtendedInterface</span></a> class
has been introduced along with the <a href="GUID-63DF657C-434D-353D-A536-8AF9D97C8260.html#GUID-63DF657C-434D-353D-A536-8AF9D97C8260__GUID-E57D0ED6-C351-37F4-8E80-5A64144B6655"><span class="apiname">CFileCB::MExtendedFileInterface</span></a> class
to support reading large files from RFs, as described in the tutorials <a href="GUID-2E4C50DE-AF0A-5393-A1FB-F739653EB727.html#GUID-2E4C50DE-AF0A-5393-A1FB-F739653EB727__GUID-43DF580B-45D3-501B-A014-5CDF0B0B3FE2">Using
the CMountCB function ReadSectionL()</a> and <a href="GUID-2E4C50DE-AF0A-5393-A1FB-F739653EB727.html#GUID-2E4C50DE-AF0A-5393-A1FB-F739653EB727__GUID-BF5DB004-7BBC-5960-8726-1CAF98CE2790">Using
the CFileCB functions ReadL(), WriteL() and SetSizeL()</a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-C473F6B1-35E7-5A1E-B451-4EBD7064CCDC.html" title="This section discusses how to access large files using the 64-bit file server client API; how to intercept large file access from file server plugins and how to interface 3rd-party file systems with the file server to support large files.">Large File Access</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-B69FE02E-3A78-5438-BA7C-F7BB4CD3EB76.html" title="This topic describes the File Server Client Side overview.">File Server
Client Side Overview</a></div>
<div><a href="GUID-F0D5C8DB-3AD0-53F1-8301-C0F69A4F13C1.html">More about
the File Server</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>