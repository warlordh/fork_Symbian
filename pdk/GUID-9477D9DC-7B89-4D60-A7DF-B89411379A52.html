<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Use Agent-Specific Commands"/>
<meta name="abstract" content="This is an extension mechanism to allow a client to perform an agent-specific function. The application needs to know the extended commands that the agent supports and the format of the input and output buffers used in the command. All of this is specified by the CAF agent, not the Content Access Framework."/>
<meta name="description" content="This is an extension mechanism to allow a client to perform an agent-specific function. The application needs to know the extended commands that the agent supports and the format of the input and output buffers used in the command. All of this is specified by the CAF agent, not the Content Access Framework."/>
<meta name="DC.Relation" scheme="URI" content="GUID-E99E0092-5F1D-5715-945E-E83C307357C3.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E6C91CF2-A616-5E52-8BB2-630C42C8D540.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7EE46FD9-DC9E-5C1F-9AC5-48F5212AF0CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8F457DE7-DAC2-56DF-8D6D-76D86584CC79.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-920CF819-645B-5705-8017-C1FAD7C6ABAF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E99E0092-5F1D-5715-945E-E83C307357C3.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E99E0092-5F1D-5715-945E-E83C307357C3.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-9477D9DC-7B89-4D60-A7DF-B89411379A52"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Use Agent-Specific Commands</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-9477D9DC-7B89-4D60-A7DF-B89411379A52"><a name="GUID-9477D9DC-7B89-4D60-A7DF-B89411379A52"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2858692 id2858712 id2858786 id2858817 id2858831 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-E6C91CF2-A616-5E52-8BB2-630C42C8D540.html">Content Management</a> &gt; <a href="GUID-7EE46FD9-DC9E-5C1F-9AC5-48F5212AF0CA.html">Content Access Framework</a> &gt; <a href="GUID-8F457DE7-DAC2-56DF-8D6D-76D86584CC79.html">Content Access Framework Tutorials</a> &gt; <a href="GUID-920CF819-645B-5705-8017-C1FAD7C6ABAF.html">Manager API Tutorials</a> &gt; <a href="GUID-E99E0092-5F1D-5715-945E-E83C307357C3.html" title="Applications can use the ContentAccess::CManager class to manage CAF agents.">Managing CAF Agents</a> &gt; </div>
<h1 class="topictitle1">Use
Agent-Specific Commands</h1>
<div><p>This is an extension mechanism to allow a client to perform an
agent-specific function. The application needs to know the extended commands
that the agent supports and the format of the input and output buffers used
in the command. All of this is specified by the CAF agent, not the Content
Access Framework.</p>

<div class="p">       <p>The manager object must be created using the <a href="GUID-7F3D9E35-A8FC-35A6-8036-23396BAADFDC.html#GUID-7F3D9E35-A8FC-35A6-8036-23396BAADFDC__GUID-2F4CB027-777F-3F16-AE9A-8902F4AE87E7"><span class="apiname">CManager::NewL()</span></a> function. </p>
 
   </div>

<div class="p" id="GUID-9477D9DC-7B89-4D60-A7DF-B89411379A52__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-12-1-26-1-1-6-1-5-1-5-1-6-1-4-1-6-1-3-2-1"><a name="GUID-9477D9DC-7B89-4D60-A7DF-B89411379A52__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-12-1-26-1-1-6-1-5-1-5-1-6-1-4-1-6-1-3-2-1"><!-- --></a><span>The buffers allow
agent specific objects to be externalized by an application, passed through
CAF and internalized by the agent. The same principle applies for data returned
from the agent to the application.</span>
 <pre class="codeblock">TInt FancyApplicationFunction(CManager&amp; aManager, CAgent&amp; aAgent, CFancyAgentInputObject&amp; aInputObject, CFancyAgentOutputObject&amp; aOutputObject)
    {
    // Buffer large enough to hold the expected output object 
    TBuf &lt;1000&gt; outputBuffer; 

    // Dynamic buffer to serialize aInputObject 
    CBufFlat* inputBuffer = CBufFlat::NewL(50); 
    CleanupStack::PushL(inputBuffer); 
    RBufWriteStream streamIn(*inputBuffer); 
    CleanupClosePushL(streamIn); 

    // write aInputObject to the dynamic buffer 
    aInputObject.ExternalizeL(streamIn); 
    CleanupStack::PopAndDestroy(&amp;streamIn); 

    // Call the agent specific function #42 
    aManager.AgentSpecificCommand(aAgent, 42 ,inputBuffer-&gt;Ptr(0), outputBuffer); 

    // Don't need the input buffer any longer 
    delete *inputBuffer; 
    inputBuffer = NULL; 

    // Create a stream object to read the output buffer             
    RDesReadStream streamOut(outputBuffer); 

    // Build the output object from the output stream 
    aOutputBuffer.InternalizeL(streamOut); 
    }</pre>

</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-E99E0092-5F1D-5715-945E-E83C307357C3.html" title="Applications can use the ContentAccess::CManager class to manage CAF agents.">Managing CAF Agents</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-E99E0092-5F1D-5715-945E-E83C307357C3.html" title="Applications can use the ContentAccess::CManager class to manage CAF agents.">Managing
CAF Agents</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>