<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Reading Remote SDP Service Attributes"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8D5E17DA-8EF1-52B4-9706-9836B8D6CE43.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DD13AA8E-BDAD-57EC-81EC-49C8D6D30A86.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-071A1E59-FE77-5D4D-B4D1-E6ECDF68BB03.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EC7A9299-4272-5C1E-8A10-8267E154D56A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8D5E17DA-8EF1-52B4-9706-9836B8D6CE43.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Reading Remote SDP Service Attributes</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2535271 id2535280 id2535294 id2535355 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-DD13AA8E-BDAD-57EC-81EC-49C8D6D30A86.html" title="The Short Link Services module enables licensees to implement Bluetooth, USB, Infrared and OBEX on Symbian platform devices.">Short Link Services Guide</a> &gt; <a href="GUID-071A1E59-FE77-5D4D-B4D1-E6ECDF68BB03.html" title="The Bluetooth collection contains the SDP, GAVDP and Notifiers Support components.">Bluetooth Collection</a> &gt; <a href="GUID-EC7A9299-4272-5C1E-8A10-8267E154D56A.html" title="The Bluetooth Service Discovery Protocol (SDP) component enables you to register services to the SDP database and query the database for available services.">Bluetooth SDP</a> &gt; <a href="GUID-8D5E17DA-8EF1-52B4-9706-9836B8D6CE43.html">Using Bluetooth Service Discovery Agent</a> &gt; </div>
<h1 class="topictitle1">Reading Remote SDP Service Attributes</h1>
<div><p>The data for a service record is contained in attributes. Each attribute has a well-known ID, a type, and a value. </p>
 <p>Attribute requests take service record handles found as a result of service searches and return attributes. You can limit the attributes returned to a specific attribute, or to a range of IDs. </p>
 <div class="section"><h2 class="sectiontitle">How to read service attributes</h2> <p>As with a service search, service attribute search results are returned through asynchronous callbacks to an <a href="GUID-AD76DB7F-CD45-3903-A07A-E94BE583CDB0.html"><span class="apiname">MSdpAgentNotifier</span></a> interface, which the querier must implement. </p>
 <p><strong>Basic Procedure</strong> </p>
 <p>The steps to read attributes are as follows: </p>
 <a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-57B7E72F-16E6-5304-B860-900325A5F403"><!-- --></a><ol id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-57B7E72F-16E6-5304-B860-900325A5F403"><li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-46729165-B8B4-58E6-AD3F-59A33C2083F9"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-46729165-B8B4-58E6-AD3F-59A33C2083F9"><!-- --></a><p>Create a <a href="GUID-7DA0506B-F2C1-374B-847F-8DF070BD2FE9.html"><span class="apiname">CSdpAttrIdMatchList</span></a> object in which to specify the attributes to be retrieved (called the match list). </p>
 </li>
 <li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-AEFC4866-2957-573D-A65A-F705FD5F6EB8"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-AEFC4866-2957-573D-A65A-F705FD5F6EB8"><!-- --></a><p>Add the attribute IDs to the match list using <a href="GUID-7DA0506B-F2C1-374B-847F-8DF070BD2FE9.html#GUID-7DA0506B-F2C1-374B-847F-8DF070BD2FE9__GUID-69FF9400-A3F9-3DCA-8231-8EAF019014F2"><span class="apiname">CSdpAttrIdMatchList::AddL()</span></a>. IDs are wrapped in a <a href="GUID-E2E5E504-FB8E-38B3-80C8-C6C4946AD8C5.html"><span class="apiname">TAttrRange</span></a> type, which can specify a single attribute or a range of IDs. </p>
 </li>
 <li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-81920A53-C0D4-57DF-BBDA-77FC6CDFA77B"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-81920A53-C0D4-57DF-BBDA-77FC6CDFA77B"><!-- --></a><p>Start the query by calling <a href="GUID-6A33D6A1-63C8-3A15-A2BC-5D08F07C5AB6.html#GUID-6A33D6A1-63C8-3A15-A2BC-5D08F07C5AB6__GUID-5D0C3302-1D4B-3B55-94F8-29F97D74643A"><span class="apiname">CSdpAgent::AttributeRequestL()</span></a>. As well as the match list, specify the record handle of interest. </p>
 </li>
 </ol>
 <p><strong>Reading Remote Attributes</strong> </p>
 <p>The following code fragements may be used, in an appropriate context, to query a remote device's SDP database for the attribute indicated by the attribute UUID. The steps are given here: </p>
 <a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-E445C4DC-DA70-5F68-A726-954D5B46C31B"><!-- --></a><ol id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-E445C4DC-DA70-5F68-A726-954D5B46C31B"><li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-2E12E6AA-E32B-55B4-98CA-2B8DBE654461"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-2E12E6AA-E32B-55B4-98CA-2B8DBE654461"><!-- --></a><p>Create a match list. </p>
 <p>The following code fragements assume <samp class="codeph">agent</samp> is a <a href="GUID-6A33D6A1-63C8-3A15-A2BC-5D08F07C5AB6.html"><span class="apiname">CSdpAgent</span></a>, and <samp class="codeph">serviceHandle</samp> a service record handle </p>
 <pre class="codeblock" id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-8BAF374C-EE7C-5255-A247-3087F041C584"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-8BAF374C-EE7C-5255-A247-3087F041C584"><!-- --></a>CSdpAttrIdMatchList* matchList = CSdpAttrIdMatchList::NewL();
CleanupStack::PushL(matchList);</pre>
 </li>
 <li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-9A72886D-4E70-53FE-B806-6B8F4338979A"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-9A72886D-4E70-53FE-B806-6B8F4338979A"><!-- --></a><p>Add an attribute ID to match list. </p>
 <pre class="codeblock" id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-E2842F48-2567-582A-A3EB-ED431C965E12"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-E2842F48-2567-582A-A3EB-ED431C965E12"><!-- --></a>matchList-&gt;AddL(TAttrRange(0x1000));</pre>
 </li>
 <li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-11A32341-09A3-5A25-9CAC-2F1A682772D3"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-11A32341-09A3-5A25-9CAC-2F1A682772D3"><!-- --></a><p>Set the match list on the agent. </p>
 <pre class="codeblock" id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-90E25C49-23B6-542A-B590-65DFCD3F30CA"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-90E25C49-23B6-542A-B590-65DFCD3F30CA"><!-- --></a>agent-&gt;AttributeRequestL(serviceHandle, *matchList);

CleanupStack::PopAndDestroy(); //matchList</pre>
 </li>
 </ol>
 <p><strong>Note </strong> </p>
 <p> <samp class="codeph">CSdpAgent::AttributeRequestL()</samp> is an overloaded function. Some of the overloads allow you to supply an <a href="GUID-3DC9CB25-E55D-38E6-8940-B3320EF7E9DD.html"><span class="apiname">MSdpElementBuilder</span></a> object: if it is supplied, then the object will be called with each type found in the response. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Where next?</h2> <p>The complete set of Service Discovery Agent tutorials are shown below: </p>
 <ul><li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-96E64157-9833-538C-AA29-AE0AA0A2CD7F"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-96E64157-9833-538C-AA29-AE0AA0A2CD7F"><!-- --></a><p> <a href="GUID-275D7892-EEBD-5DBD-A9D7-F6A715B79659.html">Querying the SDP database</a>  </p>
 </li>
 <li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-0FAD2FB2-A6BF-571B-9D4C-0AB05B4C8574"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-0FAD2FB2-A6BF-571B-9D4C-0AB05B4C8574"><!-- --></a><p> <strong>Reading remote SDP service attributes</strong> - This document </p>
 </li>
 <li id="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-DE096F8B-F1F8-5AD5-BC9F-A698129CC59F"><a name="GUID-1EA7B3A5-7A94-5E8F-A0A8-9CA417E14032__GUID-DE096F8B-F1F8-5AD5-BC9F-A698129CC59F"><!-- --></a><p> <a href="GUID-65F8675F-FF08-5707-BA5B-BF3B4B779393.html">Handling SDP query results</a>  </p>
 </li>
 </ul>
 <p>Also refer to the <a href="GUID-2F1C6B4C-2C23-5A35-A0D2-223EC6238F7D.html">Bluetooth Service Discovery Agent Overview</a> and the <a href="GUID-8451102A-8E68-5C86-9E40-D53183E32261.html" title="The Bluetooth Service Discovery Protocol (SDP) component enables you to register services to the SDP database and query the database for available services.">Bluetooth SDP Overview</a> for additional background information. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-8D5E17DA-8EF1-52B4-9706-9836B8D6CE43.html">Using Bluetooth Service Discovery Agent</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>