<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MMsvStoreManager"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8"/>

<title>MMsvStoreManager</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8"><a name="GUID-A47FAC98-FAC8-3919-B6F5-535A7D6AC9D8"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2366708 id2382304 id2382309 id2382314 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MMsvStoreManager Class Reference</h1>
	<table class="signature"><tr><td>class MMsvStoreManager</td></tr></table><div class="section"><div>
			<p>Provides the File Access mechanism to the files that are stored in the message server's data cage in a secure manner. Presents a common interface to message store file access regardless of the process that its running in. For instance, when the File Access APIs are used on the client-side process, the implementation uses secure IPC calls to the message server that includes capability policing, however, when the same API is used on the server-side, the implementation has direct access to the file in the message store.</p>

		</div></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-FFB63FFF-AE6E-3F51-A033-77DFDE20EFBA">AttachmentFilePathL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-D6EF614E-0B2F-34C2-BB5B-78D94FFB8534">BodyTextFilePathL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-F47C96C3-4BB7-3BA0-A76B-13FA2C0A3D55">CreateAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-021E8186-246B-3E45-B102-75A5E29D3E91">CreatePlainTextFileL</a>(<a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;, <a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-425FB3EA-C0DE-3CEA-ADDA-9E44955BC839">CreateShareProtectedAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-3A01957E-A306-3678-AAAB-C022A675699F">DeleteAttachment</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-84B161B3-DB1F-3C7C-8E11-D4C91F0DDC88">DeleteFileStoreL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-63BB77CB-4A16-310D-9DAA-1AF6084AB55B">DeletePlainTextFileL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-DF67E8D4-ADC4-303A-BB59-64CFB2E18C04">FileExistsL</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td><a href="#GUID-1E55A36D-A137-378B-BD3C-B8D498529AFA">FileStoreExistsL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-5C4F9A3D-5EF1-38B7-B000-435CCADEFFCB">OpenAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-6BDC3706-C4B8-338E-903A-E9F5772542CF">OpenAttachmentL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-7BC67DD5-F09A-382E-97D5-C56F78C6E830">OpenBodyTextFileForReadL</a>(<a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;, <a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-773B7FF5-2A1D-3EDE-89B1-BB51742C1CA9">OpenFileStoreForRead</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-E0C36FC8-3068-3100-81DB-E054F9B48529">OpenTempStoreFileL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-BC03E344-2C32-333A-BA54-4C3E1E760B55">RenameAttachment</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-08C356A4-9086-3D45-9445-ED42EA65FAE8">ReplaceAttachmentForWriteL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>, <a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-A9F532F3-C7B5-376A-99A8-5B9921B8FCCB">ReplaceFileStoreL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr><tr><td align="right" class="code">void</td><td><a href="#GUID-C765A4E9-F560-307E-8BF8-27AB35B8B323">ReplacePlainTextFileL</a>(<a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a>)</td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-FFB63FFF-AE6E-3F51-A033-77DFDE20EFBA"><a name="GUID-FFB63FFF-AE6E-3F51-A033-77DFDE20EFBA"><!-- --></a>
		<h2 class="topictitle2">AttachmentFilePathL(TMsvId, TDes &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>AttachmentFilePathL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Queries the message server for the file path where attachments are stored for the a particular message entry.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The message entry for which the attachment path is required.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilePath</td><td>On return, this will be set to the file path where the attachment should be stored.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-D6EF614E-0B2F-34C2-BB5B-78D94FFB8534"><a name="GUID-D6EF614E-0B2F-34C2-BB5B-78D94FFB8534"><!-- --></a>
		<h2 class="topictitle2">BodyTextFilePathL(TMsvId, TDes &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>BodyTextFilePathL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aMessageId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilepath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<div class="p">Gets the path of the bodytext file related to a message in the message store for the message id passed to it. <dl class="user"><dt class="dlterm"><strong>leave</strong></dt>
<dd>KErrAlreadyexists, if the file with the same name already existed the directory. </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aMessageId</td><td> </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilepath</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-F47C96C3-4BB7-3BA0-A76B-13FA2C0A3D55"><a name="GUID-F47C96C3-4BB7-3BA0-A76B-13FA2C0A3D55"><!-- --></a>
		<h2 class="topictitle2">CreateAttachmentForWriteL(TMsvId, TDes &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CreateAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to create a new empty file and allows clients to stream data to it.</p>

				<p>Creates a new attachment file in the message store for the message entry specified by the aEntryId parameter. The attachment filename is set to the filename indicated by the aFilename parameter. The empty attachment file is passed back to the client using an opened file handle to the file in the message store.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyexists, if the file with the same name already existed the directory. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for which an attachment needs to be created in the message store  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td>The name of the attachment file to be created  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The created file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-021E8186-246B-3E45-B102-75A5E29D3E91"><a name="GUID-021E8186-246B-3E45-B102-75A5E29D3E91"><!-- --></a>
		<h2 class="topictitle2">CreatePlainTextFileL(RFile &amp;, TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>CreatePlainTextFileL</td><td>(</td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows the message store classes to create the store file for a particular message entry.</p>

				<p>Creates a message store file associated with the message entry specified by the aFilepath parameter. This method returns an open read-write file handle to the message store file.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>one of the other system-wide error codes. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file hanlde to the store . The ownership is transferred . The caller must close the file handle.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-425FB3EA-C0DE-3CEA-ADDA-9E44955BC839"><a name="GUID-425FB3EA-C0DE-3CEA-ADDA-9E44955BC839"><!-- --></a>
		<h2 class="topictitle2">CreateShareProtectedAttachmentForWriteL(TMsvId, TDes &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>CreateShareProtectedAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Creates an Attachment using a ShareProtected RFs.Used in the case when a message contains a DRM attachment</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrAlreadyexists, if the file with the same name already existed the directory. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for which an attachment needs to be created in the message store  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td>The name of the attachment file to be created  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The created file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-3A01957E-A306-3678-AAAB-C022A675699F"><a name="GUID-3A01957E-A306-3678-AAAB-C022A675699F"><!-- --></a>
		<h2 class="topictitle2">DeleteAttachment(TMsvId, const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>DeleteAttachment</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allow clients to delete existing attachment files.</p>

				<p>Deletes an existing attachment file in the message store associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aFilePath parameter.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be deleted from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The name and path of the attachment file to be deleted  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-84B161B3-DB1F-3C7C-8E11-D4C91F0DDC88"><a name="GUID-84B161B3-DB1F-3C7C-8E11-D4C91F0DDC88"><!-- --></a>
		<h2 class="topictitle2">DeleteFileStoreL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>DeleteFileStoreL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Deletes the store file associated with the message entry as specified by the aEntryId. Also attempts to delete the temporary store file if one exists.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be deleted  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-63BB77CB-4A16-310D-9DAA-1AF6084AB55B"><a name="GUID-63BB77CB-4A16-310D-9DAA-1AF6084AB55B"><!-- --></a>
		<h2 class="topictitle2">DeletePlainTextFileL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>DeletePlainTextFileL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Deletes the store file associated with the message entry as specified by aFilepath.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound if file is not found else any of the system wide errors </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-DF67E8D4-ADC4-303A-BB59-64CFB2E18C04"><a name="GUID-DF67E8D4-ADC4-303A-BB59-64CFB2E18C04"><!-- --></a>
		<h2 class="topictitle2">FileExistsL(const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>FileExistsL</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Check if an attachment file with the given path and name already exists.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The full path specification of the file.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-1E55A36D-A137-378B-BD3C-B8D498529AFA"><a name="GUID-1E55A36D-A137-378B-BD3C-B8D498529AFA"><!-- --></a>
		<h2 class="topictitle2">FileStoreExistsL(TMsvId)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a>
				</td><td>FileStoreExistsL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId</td><td>)</td><td>const [pure virtual]</td></tr></table><div class="section"><div>
				<p>Queries the message server to check if a store file exists for the message entry specified by the aEntryId parameter.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for whom the check for existance of store is being done  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-5C4F9A3D-5EF1-38B7-B000-435CCADEFFCB"><a name="GUID-5C4F9A3D-5EF1-38B7-B000-435CCADEFFCB"><!-- --></a>
		<h2 class="topictitle2">OpenAttachmentForWriteL(TMsvId, const TDesC &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to open an attachment file for writing.</p>

				<p>Opens an existing attachment file in the message associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aFilePath parameter. The attachment file is returned as a read/write file handle to the file in the message store.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be opened/read from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The name and path of the attachment file to be opened  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-6BDC3706-C4B8-338E-903A-E9F5772542CF"><a name="GUID-6BDC3706-C4B8-338E-903A-E9F5772542CF"><!-- --></a>
		<h2 class="topictitle2">OpenAttachmentL(TMsvId, const TDesC &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenAttachmentL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to view attachment files.</p>

				<p>Opens an existing attachment file in the message associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aFilePath parameter. The attachment file is returned as a read-only file handle to the file in the message store.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be opened/read from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td>The name and path of the attachment file to be opened  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-7BC67DD5-F09A-382E-97D5-C56F78C6E830"><a name="GUID-7BC67DD5-F09A-382E-97D5-C56F78C6E830"><!-- --></a>
		<h2 class="topictitle2">OpenBodyTextFileForReadL(RFile &amp;, TMsvId, const TDesC &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenBodyTextFileForReadL</td><td>(</td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aFilePath</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows the message store classes to read the store file for a particular message entry.</p>

				<p>Opens a message store file associated with the message entry specified by the aFilepath parameter. This method returns an open read-only file handle to the message store file.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound if file is not found else any of the system wide errors </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file hanlde to the store . The ownership is transferred . The caller must close the file handle.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aFilePath</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-773B7FF5-2A1D-3EDE-89B1-BB51742C1CA9"><a name="GUID-773B7FF5-2A1D-3EDE-89B1-BB51742C1CA9"><!-- --></a>
		<h2 class="topictitle2">OpenFileStoreForRead(TMsvId, RFile &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>OpenFileStoreForRead</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows the message store classes to read the store file for a particular message entry.</p>

				<p>Opens a message store file associated with the message entry specified by the aEntryId parameter. This method returns an open read-only file handle to the message store file.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNotFound if file is not found else any of the system wide errors </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be opened/read  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file hanlde to the store . The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-E0C36FC8-3068-3100-81DB-E054F9B48529"><a name="GUID-E0C36FC8-3068-3100-81DB-E054F9B48529"><!-- --></a>
		<h2 class="topictitle2">OpenTempStoreFileL(TMsvId, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>OpenTempStoreFileL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Opens a temporary store file associated with the message entry specified by the aEntryId parameter. This method returns an open read-write file handle with an exclusive share to the temporary store file. The temporary store file is defined as &lt;store_filename&gt;.new. Data can be streamed to the temporary store file. It is expected that once the temporary store file has been written to and then closed, a call to ReplaceFileStoreL is required to replace the old store file with this temporary one.</p>

				<p>Along with ReplaceFileStoreL, this method allows the message store classes to write data to the store file for a particular message entry.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be opened/read  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The opened file hanlde to the store . The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-BC03E344-2C32-333A-BA54-4C3E1E760B55"><a name="GUID-BC03E344-2C32-333A-BA54-4C3E1E760B55"><!-- --></a>
		<h2 class="topictitle2">RenameAttachment(TMsvId, const TDesC &amp;, const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>RenameAttachment</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aOldFilePath,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aNewName</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Renames an existing attachment file.</p>

				<p>Renames an existing attachment file in the message store associated with the message entry specified by the aEntryId parameter. The attachment is identified by the file path specified by the aOldFilePath parameter and renamed to the name supplied in the aNewName paramter.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose attachment needs to be renamed from the message store  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aOldFilePath</td><td>The name and path of the attachment file to be renamed.  </td></tr><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aNewName</td><td>The new name of the attachment file.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-08C356A4-9086-3D45-9445-ED42EA65FAE8"><a name="GUID-08C356A4-9086-3D45-9445-ED42EA65FAE8"><!-- --></a>
		<h2 class="topictitle2">ReplaceAttachmentForWriteL(TMsvId, TDes &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>ReplaceAttachmentForWriteL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFilename,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Allows clients to replace an existing attachment file and allows clients to stream data to it.</p>

				<p>Replaces an existing attachment file in the message store for the message entry specified by the aEntryId parameter. The attachment filename is set to the filename indicated by the aFilename parameter. If an attachment with the supplied name does not exist, a new file is created. The empty attachment file is passed back to the client using an opened file handle to the file in the message store.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry for which an attachment needs to be created in the message store  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFilename</td><td>The name of the attachment file to be created  </td></tr><tr><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aFile</td><td>On return, The created file handle for the attachment file.The ownership is transferred . The caller must close the file handle.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-A9F532F3-C7B5-376A-99A8-5B9921B8FCCB"><a name="GUID-A9F532F3-C7B5-376A-99A8-5B9921B8FCCB"><!-- --></a>
		<h2 class="topictitle2">ReplaceFileStoreL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>ReplaceFileStoreL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aEntryId</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Replaces the current store file with the temporary store file, created from OpenTempStoreFileL, for the message entry as specified by the aEntryId parameter. The method replaces the store file with the temporary file (&lt;store_filename.new&gt;) and if successful, will then delete the temporary store file. This method assumes that the temporary file exists, otherwise a KErrNotFound error occurs.</p>

				<p>Along with OpenTempStoreFileL, this method allows the message store classes to write data to the store file for a particular message entry.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aEntryId</td><td>The entry whose store needs to be replaced/overwritten  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-C765A4E9-F560-307E-8BF8-27AB35B8B323"><a name="GUID-C765A4E9-F560-307E-8BF8-27AB35B8B323"><!-- --></a>
		<h2 class="topictitle2">ReplacePlainTextFileL(TMsvId)</h2>
		<table class="signature"><tr><td>void</td><td>ReplacePlainTextFileL</td><td>(</td><td><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a></td><td>aBodyTextId</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<div class="p">Replaces the bodytext file associated with the message specified by aEntryId. <dl class="user"><dt class="dlterm"><strong>leave</strong></dt>
<dd>KErrNotFound if file is not found else any of the system wide errors </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-EE46F451-70DA-31DE-B49A-79EF77B492FC.html">TMsvId</a> aBodyTextId</td><td>The Id of the bodytext.  </td></tr></table></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>