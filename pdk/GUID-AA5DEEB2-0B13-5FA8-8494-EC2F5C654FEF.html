<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="CentRepExample: Using Central Repository for Persistent Storage"/>
<meta name="abstract" content="This example application demonstrates the usage of Central Repository API for persistent storage."/>
<meta name="description" content="This example application demonstrates the usage of Central Repository API for persistent storage."/>
<meta name="DC.Relation" scheme="URI" content="GUID-6D28A0C6-7D1A-5C71-B61C-EE3F9E29DC5D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6D28A0C6-7D1A-5C71-B61C-EE3F9E29DC5D.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>CentRepExample: Using Central Repository for Persistent Storage</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF"><a name="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2860178 id2534747 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html" title="The persistent storage collection.">Persistent Storage</a> &gt; <a href="GUID-6D28A0C6-7D1A-5C71-B61C-EE3F9E29DC5D.html" title="This describes example code for the Persistent Storage collection.">Persistent Storage Example Code</a> &gt; </div>
<h1 class="topictitle1">CentRepExample: Using Central Repository for Persistent Storage</h1>
<div><p>This example application demonstrates the usage of Central
Repository API for persistent storage.</p>

<div class="section" id="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF__GUID-E2129D18-6FBB-55B9-8D79-420EB2CF2401"><a name="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF__GUID-E2129D18-6FBB-55B9-8D79-420EB2CF2401"><!-- --></a><h2 class="sectiontitle">Description</h2> <p>Several Symbian platform components have state and settings information
that need to be persistent. There is also a global state that needs
to persist, for example, default filenames, locale settings, user
preferences. </p>
 <p>The CentRep example application first registers
a group of settings with the central repository server. It uses <span class="filepath">E80000AD.txt</span>, a UTF-16 format text file to initialise
the repository. This text file contains access control structure and
the initial content of the repository. It is recommended to convert
the initialisation text file into a binary file using the central
repository converter tool to speed up the execution. </p>
 <p>The application
creates a <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html"><span class="apiname">CRepository</span></a> object using the <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-B8DD1F6F-5A03-30C7-A5B5-51053D9FBDD3"><span class="apiname">CRepository::NewLC()</span></a> method to access a repository using
its UID. It resets the whole repository using <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-BA806B9D-C347-3722-886E-1290A4A0618A"><span class="apiname">CRepository::Reset()</span></a> method with the contents in the initialisation file. </p>
 <p>Each
setting stored in the repository will have a unique key to identify
the setting. This unique key is used to read and change the setting
by calling the <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-AB3918A5-BA69-3EE8-89B4-51DD8A899AF5"><span class="apiname">CRepository::Get()</span></a> and <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-114079A1-A8CA-3FE7-8FAD-F5E61453FF6B"><span class="apiname">CRepository::Set()</span></a> methods respectively. The application
moves these keys to a different location using <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-4F005B5F-2664-3F7C-848D-B6F93462F2F4"><span class="apiname">CRepository::Move()</span></a> method and deletes them from their original location. </p>
 <p>The
application also creates another <samp class="codeph">CRepository</samp> object
to demonstrate that, at any given point a repository cannot be opened
with <em>READ/WRITE</em> access by more than one client. In such situations,
it is recommended to start a transaction before a write operation
using <a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-1F14EB0C-89CF-3A76-A678-5F6F86F50B32"><span class="apiname">CRepository::StartTransaction()</span></a> method. A
transaction guarantees the consistency and persistence of all values
read and written during the transaction. </p>
 <p>Finally, the application
requests the central repository server to notify any changes to the
original settings. </p>
<p><strong>Related APIs</strong></p>
<ul>
<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html"><span class="apiname">CRepository</span></a> - Provides access to a repository.</p>
</li>

<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-AB3918A5-BA69-3EE8-89B4-51DD8A899AF5"><span class="apiname">CRepository::Get()</span></a></p>
</li>

<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-4F005B5F-2664-3F7C-848D-B6F93462F2F4"><span class="apiname">CRepository::Move()</span></a></p>
</li>

<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-B8DD1F6F-5A03-30C7-A5B5-51053D9FBDD3"><span class="apiname">CRepository::NewLC()</span></a></p>
</li>

<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-BA806B9D-C347-3722-886E-1290A4A0618A"><span class="apiname">CRepository::Reset()</span></a></p>
</li>

<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-114079A1-A8CA-3FE7-8FAD-F5E61453FF6B"><span class="apiname">CRepository::Set()</span></a></p>
</li>

<li><p><a href="GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78.html#GUID-DEA618DF-D462-3B3E-A1E1-F21295AAFE78__GUID-1F14EB0C-89CF-3A76-A678-5F6F86F50B32"><span class="apiname">CRepository::StartTransaction()</span></a></p>
</li>

</ul>
 </div>

<div class="section" id="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF__GUID-3B353EAA-5FE4-426B-A0A5-6800CE0BC9E3"><a name="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF__GUID-3B353EAA-5FE4-426B-A0A5-6800CE0BC9E3"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-e78b3d2c-7205-45ca-abe0-163e33a0fcc3.zip" target="_blank">CentRepExample.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-e78b3d2c-7205-45ca-abe0-163e33a0fcc3.html">browse</a> to view the example code.</p>
 </div>

<div class="section" id="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF__GUID-DCCBE8DE-0BBD-5528-A460-E1645116DD4F"><a name="GUID-AA5DEEB2-0B13-5FA8-8494-EC2F5C654FEF__GUID-DCCBE8DE-0BBD-5528-A460-E1645116DD4F"><!-- --></a><h2 class="sectiontitle">Build</h2> <p>The Symbian build process describes how to build an application. </p>
 <p>The <samp class="codeph">CentRepExample</samp> builds an
executable called <span class="filepath">CentRepExample.exe</span> in the standard
location (\epoc32\release\winscw\&lt;<em>build_variant</em> &gt; for CodeWarrior).
After launching the executable, depending on the emulator you are
using, you may need to task away from the app launcher/shell screen
to view the console. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-6D28A0C6-7D1A-5C71-B61C-EE3F9E29DC5D.html" title="This describes example code for the Persistent Storage collection.">Persistent Storage Example Code</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>