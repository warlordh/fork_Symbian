<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Reading Video and Audio Content"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6CED5904-EEE4-5F93-AA8A-37083EC5AFE8.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-97F83011-BE3C-512C-9599-028CBB92BD51.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8DD3B2E3-636A-5FE6-B081-FDB57260E6D8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-418A5D77-E30D-5C4B-B81D-308F5EE7D320.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6CED5904-EEE4-5F93-AA8A-37083EC5AFE8.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Reading Video and Audio Content</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2405098 id2396821 id2396894 id2396908 id2396923 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-1DE5CDAD-8D71-5384-9E98-5665D5A4C792.html">Multimedia Guide</a> &gt; <a href="GUID-97F83011-BE3C-512C-9599-028CBB92BD51.html" title="The Multimedia Plug-ins collection facilitates a plug-in framework to handle the Multimedia audio, video and image data.">Multimedia Plug-ins Collection</a> &gt; <a href="GUID-8DD3B2E3-636A-5FE6-B081-FDB57260E6D8.html">3GP Library Component</a> &gt; <a href="GUID-418A5D77-E30D-5C4B-B81D-308F5EE7D320.html">3GP Library</a> &gt; <a href="GUID-6CED5904-EEE4-5F93-AA8A-37083EC5AFE8.html">Tutorials</a> &gt; </div>
<h1 class="topictitle1">Reading Video and Audio Content</h1>
<div><p>This tutorial describes how to read video and audio content. </p>
 <div class="section"><h2 class="sectiontitle">Purpose</h2> <p>The purpose of this tutorial is to show you how to read video and audio content synchronously and asynchronously. </p>
 <p><strong>Required background</strong> </p>
 <p>The <a href="GUID-EF71F4BF-2206-5489-BDB9-2F85ED74D6E2.html">3GP Library Overview</a> introduces the 3GP Parser. </p>
 <p><strong>Introduction</strong> </p>
 <p>Video and audio content is read frame by frame. Video and audio frames do not necessarily have to be read in the same order that they are stored in a file. There are separate index counters for video and audio streams, which makes it possible to get all video stream data first, then get the data in the audio stream. Random access to video and audio frames is also possible with other functions provided by the <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse</span></a> class. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Using frames </h2> <p>The following tasks are covered in this tutorial: </p>
 <ul><li id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F9080598-D27A-5B02-B61E-6992BF7BA50D"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F9080598-D27A-5B02-B61E-6992BF7BA50D"><!-- --></a><p><a href="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF.html#GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F7226C7F-F8CB-5441-A3C1-DE0AE2EC1401"> Reading a video frame</a>  </p>
 </li>
 <li id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-2F2AD986-C87C-5919-B584-022A1A8C47FB"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-2F2AD986-C87C-5919-B584-022A1A8C47FB"><!-- --></a><p><a href="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF.html#GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F898BF2E-78C6-5012-BB02-A2FF740FA68F"> Reading audio frames</a>  </p>
 </li>
 </ul>
 <p id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F7226C7F-F8CB-5441-A3C1-DE0AE2EC1401"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F7226C7F-F8CB-5441-A3C1-DE0AE2EC1401"><!-- --></a><strong>Reading a video frame</strong> </p>
 <p>To read a video frame, call one of the overloads of <samp class="codeph">C3GPParse::ReadVideoFrame()</samp>: </p>
 <ul><li id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-187ADC8F-3FEA-5881-8E5D-A56C01AE0826"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-187ADC8F-3FEA-5881-8E5D-A56C01AE0826"><!-- --></a><p>To read the next video frame from a 3GP file or stream and return it synchronously, call <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse::ReadVideoFrame(TDes8, TBool &amp;,
                  TUint &amp;s, TUint &amp;)</span></a>: </p>
 <pre class="codeblock" id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-AF885775-FF45-518E-9A38-F8CB98CBBE02"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-AF885775-FF45-518E-9A38-F8CB98CBBE02"><!-- --></a>IMPORT_C TInt ReadVideoFrame(TDes8 &amp;aBuffer, TBool &amp;aKeyFrame, TUint &amp;aTimeStampInMs, TUint &amp;aTimeStampInTimescale) const;</pre>
 <p>The video frame that is read depends on the current position in the input 3GP file. You can use the <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse::Seek()</span></a> function to change the current position in the 3GP file. </p>
 </li>
 <li id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-87555A14-848C-526E-B694-BF0A46648C14"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-87555A14-848C-526E-B694-BF0A46648C14"><!-- --></a><p>To read the current video frame from an input file and return it asynchronously, call <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse::ReadVideoFrame(M3GPParseCallback
                  &amp;, TDes8 &amp;)</span></a>: </p>
 <pre class="codeblock" id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-10D857F1-3B4E-5446-A426-5F3B32726C8F"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-10D857F1-3B4E-5446-A426-5F3B32726C8F"><!-- --></a>IMPORT_C void ReadVideoFrame(M3GPParseCallback &amp;aCallback, TDes8 &amp;aBuffer);</pre>
 <p>Upon completion, successful or otherwise, the callback function <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">M3GPParseCallback::VideoFrameAvailable(TInt, TUints, TUint,
                  TUint)</span></a> is called. </p>
 <p> <strong>Note</strong>: The asynchronous <samp class="codeph">C3GPParse::ReadVideoFrame()</samp> function is not supported when the 3GP Parser is in buffer mode. </p>
 </li>
 </ul>
 <p> <strong> Note:</strong> There are separate cursors for storing current positions of video and audio streams. Calling <samp class="codeph">C3GPParse::ReadVideoFrame()</samp> does not affect the position of the next audio stream. </p>
 <p id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F898BF2E-78C6-5012-BB02-A2FF740FA68F"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-F898BF2E-78C6-5012-BB02-A2FF740FA68F"><!-- --></a><strong> Reading audio frames</strong> </p>
 <p>To read audio frames, call one of the overloads of <samp class="codeph">C3GPParse::ReadAudioFrames()</samp>: </p>
 <ul><li id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-2CFE3DC1-8DF3-5A9D-BA2D-EC3CB787D418"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-2CFE3DC1-8DF3-5A9D-BA2D-EC3CB787D418"><!-- --></a><p>To read the audio frames that are stored in the current audio sample from the 3GP file or stream and return them synchronously, call <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse::ReadAudioFrames(TDes8 &amp;, TInt &amp;, TUint &amp;,
                  TUint &amp;)</span></a>: </p>
 <pre class="codeblock" id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-002077C9-8163-5E18-89F8-57DFAD76CA35"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-002077C9-8163-5E18-89F8-57DFAD76CA35"><!-- --></a>IMPORT_C TInt ReadAudioFrames(TDes8 &amp;aBuffer, TInt &amp;aReturnedFrames, TUint &amp;aTimeStampInMs, TUint &amp;aTimeStampInTimescale) const;</pre>
 <p>The next frame read depends on the current position in the input 3GP file. You can use the <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse::Seek()</span></a> function to change the current position in the 3GP file. </p>
 </li>
 <li id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-D15613F3-3F0F-59CC-979C-C94CE0873228"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-D15613F3-3F0F-59CC-979C-C94CE0873228"><!-- --></a><p>To read the audio frames that are stored in the current audio sample from the 3GP file or stream and return them asynchronously, call <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">C3GPParse::ReadAudioFrames(M3GPParseCallback &amp;, TDes8
                  &amp;)</span></a>: </p>
 <pre class="codeblock" id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-5549A394-9FB3-5393-963F-F5A48DCE2E89"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-5549A394-9FB3-5393-963F-F5A48DCE2E89"><!-- --></a>IMPORT_C void ReadAudioFrames(M3GPParseCallback &amp;aCallback, TDes8 &amp;aBuffer);</pre>
 <p>Upon completion, successful or otherwise, the callback function <a href="GUID-BF3A60C9-0F4C-3712-90E3-ACBD73BE4EB6.html"><span class="apiname">M3GPParseCallback::AudioFramesAvailable(TInt, TUint, TUint,
                  TUint)</span></a> is called. </p>
 <p> <strong>Note</strong>: The asynchronous <samp class="codeph">C3GPParse::ReadAudioFrames()</samp> function is not supported when the 3GP Parser is in buffer mode. </p>
 </li>
 </ul>
 <p> <strong>Note</strong>: There are separate cursors for storing current positions for video and audio streams. Calling <samp class="codeph">C3GPParse::ReadAudioFrames()</samp> does not change the current position of the video stream. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Example</h2> <p>The following example shows you how to read video and audio frames: </p>
 <pre class="codeblock" id="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-167C4870-3062-54C2-A260-8F5BB9E755AB"><a name="GUID-EFD05CAF-A8CF-5C2E-B7C9-51023D2438DF__GUID-167C4870-3062-54C2-A260-8F5BB9E755AB"><!-- --></a>CMyApp::ReadFileL(const RFile&amp; aFile)
    {
    ...
    // See example code in Setting up a 3GP Parser and Getting Audio and Video Stream Metadata. 
    ...
    TInt err = KErrNone;
    while (err != KErrNotFound)
        {
        TInt err = parser-&gt;ReadVideoFrame(...);
        if (err == KErrNone)
            {
            // do something with the video data                        
            ...
            }                
        }
        
    err = KErrNone        
    while (err != KErrNotFound)
        {
        // retrieve audio frames
        TInt err = parser-&gt;ReadAudioFrames(...);
        if (err == KErrNone)
            {
            // do something with the audio data                        
            ...
            }                

        ...</pre>
 </div>
 <div class="section"><h2 class="sectiontitle">See Also</h2> <p><a href="GUID-4D4A2853-B573-5B16-B9E3-0E4853C90BCD.html">Setting up a 3GP Parser</a>  </p>
 <p><a href="GUID-12C74671-1988-55E7-8320-FE77024A523C.html"> Supplying Data to a 3GP Parser</a>  </p>
 <p><a href="GUID-CC4BA8E7-BCAB-58F7-AC5D-BA75A82D04AE.html">Getting Audio and Video Stream Metadata</a>  </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-6CED5904-EEE4-5F93-AA8A-37083EC5AFE8.html">Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>