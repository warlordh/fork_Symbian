<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="WAP Push Framework Overview"/>
<meta name="abstract" content="WAP Push Framework is a plug-in framework that supports receiving, processing and storing of WAP (Wireless Application Protocol) push messages."/>
<meta name="description" content="WAP Push Framework is a plug-in framework that supports receiving, processing and storing of WAP (Wireless Application Protocol) push messages."/>
<meta name="DC.Relation" scheme="URI" content="GUID-5900DB92-8D4D-5487-8EFE-AB9CEB8BA93B.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5900DB92-8D4D-5487-8EFE-AB9CEB8BA93B.html"/>
<meta name="DC.Relation" scheme="URI" content="http://www.openmobilealliance.org/"/>
<meta name="DC.Relation" scheme="URI" content="GUID-4603D4ED-966F-5F70-B991-D10495BC2D7E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-EE07DF44-6B3B-5D9A-A794-C49863597721.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>WAP Push Framework Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2404348 id2404397 id2405076 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">Messaging Middleware Guide</a> &gt; <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">Messaging Framework</a> &gt; <a href="GUID-5900DB92-8D4D-5487-8EFE-AB9CEB8BA93B.html" title="This section describes the WAP Push Framework component. Device creators can use this information to implement their own WAP Push plug-ins.">WAP Push Framework</a> &gt; </div>
<h1 class="topictitle1">WAP Push Framework Overview</h1>
<div><p>WAP Push Framework is a plug-in framework that supports
receiving, processing and storing of WAP (Wireless Application Protocol)
push messages. </p>

<div class="section" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-7E222D54-98DE-460F-98B3-B5CA6709163A"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-7E222D54-98DE-460F-98B3-B5CA6709163A"><!-- --></a><h2 class="sectiontitle">Required background</h2> <p>Before using this component,
you must understand <a href="GUID-9E92EE30-F2E2-5F28-BB2A-391C09EC69D2.html">ECom Framework</a> and <a href="http://www.openmobilealliance.org/" target="_blank">Open Mobile Alliance (OMA)</a> standards. </p>
 </div>

<div class="section" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-52B5BBB3-74D0-47EA-8FB7-77AA480C73A6"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-52B5BBB3-74D0-47EA-8FB7-77AA480C73A6"><!-- --></a><h2 class="sectiontitle">Key concepts and terms</h2> <dl>

<dt class="dlterm">Push message</dt>

<dd><p>WAP push messages are specially formatted SMS messages that
display an alert message to the user, and give the user the option
of connecting directly to a particular URL through the mobile phone’s
WAP Browser; for example, notification about a new email. </p>
 <p>A push message has a header section and a body section. Header section
has <samp class="codeph">X-Wap-Application-Id</samp> and <samp class="codeph">Content-Type</samp> fields. The message body can be any MIME content-type and optionally
encoded. When a push message is received, the framework parses the
message header and loads an appropriate plug-in to process and store
the message in a Message Store. </p>
 </dd>



<dt class="dlterm">Push plug-in</dt>

<dd><p>The handler (plug-in) supported by the framework are known
as Push plug-in, such as Application Handler or Content Handler. </p>
 </dd>


</dl>
 </div>

<div class="section" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-9EEB2332-6DD1-403A-AF97-4C66AD9B6CE6"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-9EEB2332-6DD1-403A-AF97-4C66AD9B6CE6"><!-- --></a><h2 class="sectiontitle">Architecture</h2> <p>WAP Push Framework provides
support for connectionless (CL) OTA-WSP push. </p>
 <p>The main components
of the framework are Push Watcher, Application Handler and Content
Handler. A Push Watcher is a plug-in that plug-in to the <a href="GUID-4603D4ED-966F-5F70-B991-D10495BC2D7E.html">Messaging Watcher
Framework</a> and is responsible for listening on the WAP Stack
for incoming push messages. Push Watcher after receiving the message,
loads an appropriate Application Handler through Application Dispatcher.
An Application Handler is responsible for loading the appropriate
Content Handler using the <samp class="codeph">X-Wap-Application-Id</samp> value
contained in the received push message. The content handler is responsible
to handle the push message and take any action on the message that
may be necessary. However, if a plug-in for a given content-type is
not available, the WAP Push Framework uses the unknown application
handler plug-in (default) and discards the push message. </p>
 <p>The
following figure shows the architecture of WAP Push Framework. </p>
 <div class="fignone" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-359E967A-EA0E-5AE2-A03C-220EB0C74B38"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-359E967A-EA0E-5AE2-A03C-220EB0C74B38"><!-- --></a><span class="figcap">Figure 1.               WAP Push Framework Architecture            </span>

<img src="GUID-258FA5F7-5069-5DFE-8F6E-57063064CE65_d0e494733_href.jpg"/>
</div>
 <dl>

<dt class="dlterm">Push Watcher</dt>

<dd><p>There are two Push Watchers in the framework for CL OTA-WSP—one
is for secure push and the other is for non-secure push. The insecure
CL watcher is always active and waits asynchronously to receive message
from WAP Stack at port 2948. On receiving a push message, the watcher
wraps the message up in a <a href="GUID-C52CFBC5-40D0-3B55-B17F-F3709B8D960B.html"><span class="apiname">CPushMessage</span></a>, parses
the message and calls the Application Dispatcher, passing in the <samp class="codeph">X-Wap-Application-Id</samp> value obtained from the push message. </p>
 </dd>



<dt class="dlterm">Dispatchers and Handlers</dt>

<dd><p>The framework contains an Application Dispatcher and a Content
Dispatcher that are used to find the appropriate Application Handler
and Content Handler respectively. </p>
 <p>Application Dispatcher uses
ECom to load an Application Handler using the application-ID passed
to it by the Push Watcher. Two different Application Handlers are
present in the framework—Unknown Application Handler for applications
of unknown type and User Agent (UA) Application Handler that receives
messages of type ‘<strong>x-wap-application:*</strong> ’ or ‘<strong>x-wap-application:wml.ua</strong> ’. The UA Application Handler looks at the content-type of the message
and passes it to the Content Dispatcher. The content dispatcher then
loads an appropriate Content Handler. The Unknown Application Handler
deletes the push message. </p>
 <p>The Content Dispatcher uses ECom
to load a particular Content Handler (plug-in) based on the content-type
passed in by the Application Handler. The following are the Content
Handlers provided within the framework. </p>
 <ul>
<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-9A90410A-354F-5492-AF7C-562729E12960"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-9A90410A-354F-5492-AF7C-562729E12960"><!-- --></a><p> <strong>SI Content
Handler:</strong> These plug-ins process Service Indication (SI) messages.
An SI message is a UA message with content-type <span class="filepath">text/vnd.wap.si</span> or <span class="filepath">application/vnd.wap.sic</span>. The basic form
of an SI message is a short message with a URI indicating a service;
for example, notification about new emails. </p>
 </li>

<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-63867E1C-1B2A-50E8-9FBE-3C127DA96EEB"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-63867E1C-1B2A-50E8-9FBE-3C127DA96EEB"><!-- --></a><p> <strong>SL Content
Handler:</strong> These plug-ins process Service Load (SL) messages. An
SL message is an UA message with content-type <span class="filepath">text/vnd.wap.sl</span> or <span class="filepath">application/vnd.wap.slc</span>. The SL message
contains a URI indicating a service which gets loaded without user
input. </p>
 </li>

<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-56EACABF-8948-5490-A225-174920E5B4C1"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-56EACABF-8948-5490-A225-174920E5B4C1"><!-- --></a><p> <strong>Multipart-mixed
Content Handler:</strong> These plug-ins process multipart-mixed messages.
These are messages with content-type <span class="filepath">application/vnd.wap.multipart.mixed</span> or <span class="filepath">multipart/mixed</span>. They create new sub-messages
from each message part, and load appropriate content handler plug-ins
to process each sub-message. </p>
 </li>

<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-8FFDB2E9-399D-5EA7-82E3-A50952697B29"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-8FFDB2E9-399D-5EA7-82E3-A50952697B29"><!-- --></a><p> <strong>Multipart-related,
Multipart-alternative Content Handlers:</strong> These plug-ins process
messages for the <span class="filepath">application/vnd.wap.multipart.alternative</span>, <span class="filepath">multipart/alternative</span>, <span class="filepath">application/vnd.wap</span> and <span class="filepath">multipart.related</span> content-types. They save
the entire message in the Message Store, where each part is saved
as a child entry to the main part. </p>
 </li>

<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-9AA16C02-F759-541D-B850-719716065F52"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-9AA16C02-F759-541D-B850-719716065F52"><!-- --></a><p> <strong>Unknown
Content Handler:</strong> These plug-ins process content-types for which
there are no handler plug-ins. They store the received push messages
in Inbox of the Message Store. </p>
 </li>

</ul>
 </dd>


</dl>
 </div>

<div class="section" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-48F54813-3327-45FB-B923-BA6E9C245993"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-48F54813-3327-45FB-B923-BA6E9C245993"><!-- --></a><h2 class="sectiontitle">APIs</h2> 
<div class="tablenoborder"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-F6247FC0-87AC-5F7F-8965-8F10E9B8ACAC"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-F6247FC0-87AC-5F7F-8965-8F10E9B8ACAC" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1001668e229">API</th>

<th class="cellrowborder" valign="top" id="d1001668e232">Description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1001668e229 "><p> <a href="GUID-23D181F0-AF1E-3221-BF9A-AC3534E961E9.html"><span class="apiname">CPushHandlerBase</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1001668e232 "><p>Abstract base class for WAP Push Application plug-ins. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1001668e229 "><p> <a href="GUID-56BCBAED-03E5-35D6-A828-9B48ACEBF085.html"><span class="apiname">CContentHandlerBase</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1001668e232 "><p>Abstract base class for WAP Push Content Handler plug-ins. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="section" id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-D677C8B2-BFEB-496C-B481-10497537B31C"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-D677C8B2-BFEB-496C-B481-10497537B31C"><!-- --></a><h2 class="sectiontitle">Typical uses</h2> <p>WAP Push Framework is extensible,
that is, new plug-ins can be installed to the framework and installed
plug-ins can be removed from the framework without re-building the
framework. It uses dynamically loaded plug-ins at run-time to support
different content-types; for example, content of push message for
Service Indicator (SI) application. ECom Framework is used to provide
support for run-time loading. </p>
 <ul>
<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-7B03A6BF-D191-568F-8442-5842AC48C2E0"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-7B03A6BF-D191-568F-8442-5842AC48C2E0"><!-- --></a><p>Creating content
handler plug-ins. </p>
 <p> <strong>Note:</strong> Push plug-ins must inherit
from the base push plug-in class and override a set of pure virtual
functions. </p>
 </li>

<li id="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-CE7A22B1-D1B2-5CDD-ACF7-9D9FB0A0DC63"><a name="GUID-68F27C54-A339-507B-9DD3-B3701132FE0A__GUID-CE7A22B1-D1B2-5CDD-ACF7-9D9FB0A0DC63"><!-- --></a><p>Removing any
installed plug-ins. </p>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-5900DB92-8D4D-5487-8EFE-AB9CEB8BA93B.html" title="This section describes the WAP Push Framework component. Device creators can use this information to implement their own WAP Push plug-ins.">WAP Push Framework</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-4603D4ED-966F-5F70-B991-D10495BC2D7E.html">Watcher
Framework</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-EE07DF44-6B3B-5D9A-A794-C49863597721.html" title="This topic describes how the Symbian SUPL WAP Push plug-in uses the SUPL Push API (deprecated). Device creators can use this information if they want to implement their own SUPL INIT push plug-in.">SUPL
                Push API Tutorial</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="http://www.openmobilealliance.org/" target="_blank">Open Mobile                 Alliance (OMA)</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>