<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="RMBufRecvInfo"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B"/>

<title>RMBufRecvInfo</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B"><a name="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2472810 id2408823 id2408865 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">RMBufRecvInfo Class Reference</h1>
	<table class="signature"><tr><td>class RMBufRecvInfo : public RMBufPktInfo</td></tr></table><div class="section"><div>
			<p>Information for incoming packets.</p>

			<p>This extends the packet information class to record progress of processing the received IPv4 or IPv6 packet.</p>

			<p>The <a href="GUID-F024208C-ED19-3301-85C1-53F397C9910F.html#GUID-F024208C-ED19-3301-85C1-53F397C9910F">RMBufChain</a> contains a full IPv6 (or IPv4) packet starting from the beginning. The position of the current (upper layer or extension header) is indicated by the <a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA">iOffset</a> field.</p>

			<div class="p">
				<ul>
					<li>
						<p>
							<a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html#GUID-8E0FC328-A4EC-3EA6-8031-7C883F3037A8">iProtocol</a> is always the internet protocol number corresponding to the header incidated by iOffset.</p>

					</li>

				</ul>

				<ul>
					<li>
						<p>
							<a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html#GUID-4F037443-BCCA-3E99-9E88-A27B239BFB70">iLength</a> is the length of the FULL packet, starting from the IP header. The upper layer length (that includes the uppler layer header) is always: (iLength - iOffset) &gt;= 0. Note that this can be ZERO!</p>

					</li>

				</ul>

				<ul>
					<li>
						<p>
							<a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-B91E57C9-2EFE-3153-9560-224C7DB2310B">iIcmp</a> == 0, for normal packet</p>

					</li>

				</ul>

				<ul>
					<li>
						<p>
							<a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-B91E57C9-2EFE-3153-9560-224C7DB2310B">iIcmp</a> =! 0, for ICMP error report</p>

					</li>

				</ul>
The source and destination address are loaded from the ip header associated with the indicated upper layer header. In case of ICMP error report, the addresses are loaded from the packet *inside* the ICMP report.</div>

			<p>The addresses are always in IPv6 format. If the packet was IPv4 packet, the addresses are presented in IPv4 mapped format.</p>

			<div class="p">
				<div class="cautiontitle">CAUTION:</div><div class="caution">
					<p>The fact that address is IPv4 mapped DOES NOT mean that the packet is IPv4. It could as well be an IPv6 packet with mapped addresses!</p>

					<p>
						<a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B">RMBufRecvInfo</a> is assuming that it fits into the single <a href="GUID-E0ADB108-D3B2-3670-907D-2AE595BECE3F.html#GUID-E0ADB108-D3B2-3670-907D-2AE595BECE3F">RMBuf</a> block.</p>

				</div>

				<dl class="since">
					
						<dt class="dlterm">Since</dt>

						<dd>v7.0 </dd>

					
				</dl>

			</div>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">RMBufRecvInfo<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html">RMBufPktInfo</a><ul class="derivation"><li class="derivation-depth-2 "><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell</a></li></ul></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-3C1C7A8E-5B68-33AA-8D1C-746C38F5C46F">CheckL</a>(<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::CopyL()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::MBuf()</a></td></tr><tr><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::RMBufCell()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator delete(TAny *)</a></td></tr><tr><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator delete(TAny *,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator delete(TAny *,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator new(TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-3EF89A73-641B-3B47-AABD-37DF97B12CBE.html">RMBufCell::operator new(TUint,TUint)</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Public Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td><a href="#GUID-8DEFE2BF-9AE2-3F28-8EE1-CD535003261C">iCode</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td><a href="#GUID-B91E57C9-2EFE-3153-9560-224C7DB2310B">iIcmp</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td><a href="#GUID-EACB8351-7AA7-3F57-8160-1FCBE7ED5CCA">iInterfaceIndex</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA">iOffset</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint16</a>
				</td><td><a href="#GUID-D36A4E0F-EA13-30E8-A93E-778CCD321506">iOffsetIp</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td><a href="#GUID-2425F883-4BEF-3007-BB5F-3BBCC3FFE093">iOriginalIndex</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td><a href="#GUID-0F0CEB7A-C738-3723-94AE-43300BA833DB">iParameter</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint16</a>
				</td><td><a href="#GUID-D077E37F-67DC-3F7F-8A8C-6553ABEF160E">iPrevNextHdr</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td><a href="#GUID-EC5127F9-9F21-3B73-BE2D-05C5BED851A8">iType</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td><a href="#GUID-86DDE3DF-4BCF-3B09-BBEE-981D1A778870">iVersion</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Attributes</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html">RMBufPktInfo::iDstAddr</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html">RMBufPktInfo::iFlags</a></td></tr><tr><td> </td><td><a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html">RMBufPktInfo::iLength</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html">RMBufPktInfo::iProtocol</a></td></tr><tr><td> </td><td><a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html">RMBufPktInfo::iSrcAddr</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-3C1C7A8E-5B68-33AA-8D1C-746C38F5C46F"><a name="GUID-3C1C7A8E-5B68-33AA-8D1C-746C38F5C46F"><!-- --></a>
		<h2 class="topictitle2">CheckL(TInt)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>CheckL</td><td>(</td><td><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>aLength</td><td>)</td><td>const [inline]</td></tr></table><div class="section"><div>
				<p>Tests that the specified length field does not exceed the remaining space in the buffer.</p>

				<p>Verify that there is enough data after in the packet after the <a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA">iOffset</a> octets. This simply tests whether (aLength &gt; <a href="GUID-7F08CE77-19F5-3368-8290-45EC6D34B27F.html#GUID-4F037443-BCCA-3E99-9E88-A27B239BFB70">iLength</a> - <a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA">iOffset</a>), and leaves with <a href="GUID-7F851A44-DA19-3E31-BE58-2535B6A54DDE.html#GUID-36E6FAEB-DD69-361B-94F9-70CCB26B644C">KErrInet6ShortPacket</a>, if true.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrInet6ShortPacket Insufficient space. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a> aLength</td><td>Length to test.  </td></tr></table></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-8DEFE2BF-9AE2-3F28-8EE1-CD535003261C"><a name="GUID-8DEFE2BF-9AE2-3F28-8EE1-CD535003261C"><!-- --></a>
		<h2 class="topictitle2">
					TUint8
				 iCode</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td>iCode</td></tr></table><div class="section"><div>
				<p>ICMP Code (0..255).</p>

				<p>This applies to both ICMPv4 and ICMPv6.</p>

				<p>(only defined if the field iIcmp != 0) </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-B91E57C9-2EFE-3153-9560-224C7DB2310B"><a name="GUID-B91E57C9-2EFE-3153-9560-224C7DB2310B"><!-- --></a>
		<h2 class="topictitle2">
					TUint8
				 iIcmp</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td>iIcmp</td></tr></table><div class="section"><div>
				<p>ICMP packet flag.</p>

				<p>This determines the interpretation of the information fields: iType, iCode, and iParameter.</p>

				<div class="p">
					<ul>
						<li>
							<p>iIcmp == 0, The buffer contains normal upper layer packet, the header starting from the indicated iOffset. The values of the iType, iCode and iParameter are undefined..</p>

						</li>

					</ul>

					<ul>
						<li>
							<p>iIcmp != 0, The buffer contains an ICMP error report for the upper layer protocol, the returned upper layer header starting from the indicated iOffset. The <a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-D36A4E0F-EA13-30E8-A93E-778CCD321506">iOffsetIp</a> indicates the start of the problem packet.</p>

						</li>

					</ul>
Valid values are: 0, <a href="GUID-2CB64551-4879-3565-9835-6EDF8116B9A7.html#GUID-3CDA3EB6-02CC-397B-8536-A37223942B31">KProtocolInetIcmp</a>, or <a href="GUID-2CB64551-4879-3565-9835-6EDF8116B9A7.html#GUID-ED512984-1F13-3F7A-BBF2-E72CF96777EB">KProtocolInet6Icmp</a>. </div>

			</div></div>

	</div>
<div class="nested1" id="GUID-EACB8351-7AA7-3F57-8160-1FCBE7ED5CCA"><a name="GUID-EACB8351-7AA7-3F57-8160-1FCBE7ED5CCA"><!-- --></a>
		<h2 class="topictitle2">
					TUint32
				 iInterfaceIndex</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td>iInterfaceIndex</td></tr></table><div class="section"><div>
				<p>Index of the logical source network interface. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA"><a name="GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA"><!-- --></a>
		<h2 class="topictitle2">
					TInt
				 iOffset</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>iOffset</td></tr></table><div class="section"><div>
				<p>An offset that indicates the beginning of the current header being processed.</p>

				<p>Inbound hooks must update this if they consume a header within the packet.</p>

				<p>It initially points to the first header after the IP header. Offset to the header being processed. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-D36A4E0F-EA13-30E8-A93E-778CCD321506"><a name="GUID-D36A4E0F-EA13-30E8-A93E-778CCD321506"><!-- --></a>
		<h2 class="topictitle2">
					TUint16
				 iOffsetIp</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint16</a>
				</td><td>iOffsetIp</td></tr></table><div class="section"><div>
				<p>Offset to the related IP header.</p>

				<p>This is usually zero, but is non-zero for ICMP error reports, and could be non-zero for tunneled packets. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-2425F883-4BEF-3007-BB5F-3BBCC3FFE093"><a name="GUID-2425F883-4BEF-3007-BB5F-3BBCC3FFE093"><!-- --></a>
		<h2 class="topictitle2">
					TUint32
				 iOriginalIndex</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td>iOriginalIndex</td></tr></table><div class="section"><div>
				<p>Index of the physical original network interface. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-0F0CEB7A-C738-3723-94AE-43300BA833DB"><a name="GUID-0F0CEB7A-C738-3723-94AE-43300BA833DB"><!-- --></a>
		<h2 class="topictitle2">
					TUint32
				 iParameter</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint32</a>
				</td><td>iParameter</td></tr></table><div class="section"><div>
				<p>The last 32 bits from the ICMP header.</p>

				<p>(only defined if the field iIcmp != 0) </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-D077E37F-67DC-3F7F-8A8C-6553ABEF160E"><a name="GUID-D077E37F-67DC-3F7F-8A8C-6553ABEF160E"><!-- --></a>
		<h2 class="topictitle2">
					TUint16
				 iPrevNextHdr</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint16</a>
				</td><td>iPrevNextHdr</td></tr></table><div class="section"><div>
				<p>Offset of the previous Next Header field.</p>

				<p>If a hook consumes an extension header and advances <a href="GUID-4D89D183-0A0C-3FA8-90A9-90FDEC381F8B.html#GUID-5FF6D572-3927-38E9-92A7-C2ACB47424EA">iOffset</a> to the next header, it must also set this to point to the Next Header field of the former header.</p>

				<p>This is initialized to refer the next header field of the IP header.</p>

				<p>This can be used by header handlers which remove the header from the packet. For example, IPSEC does this for AH and ESP headers. IPSEC must be able to correct the protocol/next header field of the previous header. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-EC5127F9-9F21-3B73-BE2D-05C5BED851A8"><a name="GUID-EC5127F9-9F21-3B73-BE2D-05C5BED851A8"><!-- --></a>
		<h2 class="topictitle2">
					TUint8
				 iType</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td>iType</td></tr></table><div class="section"><div>
				<p>ICMP Type (0..255).</p>

				<p>This applies to both ICMPv4 and ICMPv6.</p>

				<p>(only defined if the field iIcmp != 0) </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-86DDE3DF-4BCF-3B09-BBEE-981D1A778870"><a name="GUID-86DDE3DF-4BCF-3B09-BBEE-981D1A778870"><!-- --></a>
		<h2 class="topictitle2">
					TUint8
				 iVersion</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TUint8</a>
				</td><td>iVersion</td></tr></table><div class="section"><div>
				<p>IP Version (4 or 6) of the related IP header. </p>

			</div></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>