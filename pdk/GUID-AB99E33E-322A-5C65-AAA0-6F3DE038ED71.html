<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Uninstalling Features with Feature Manager"/>
<meta name="abstract" content="Provides instructions for removing features when uninstalling a software component."/>
<meta name="description" content="Provides instructions for removing features when uninstalling a software component."/>
<meta name="DC.Relation" scheme="URI" content="GUID-6F716E31-490E-5CA1-871A-D8D1661E3078.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0CA63AEB-9A80-51C6-AE7F-E747D6B3B789.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-6F716E31-490E-5CA1-871A-D8D1661E3078.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5885167D-4755-54CC-B366-6DA89A608F8E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B71AC5E3-8AA8-55AD-916F-9E873926011B.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Uninstalling Features with Feature Manager</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2859830 id2859850 id2859906 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html">Feature Management</a> &gt; <a href="GUID-0CA63AEB-9A80-51C6-AE7F-E747D6B3B789.html" title="The Feature Manager is used to customise software by manipulating feature flags.">Feature Manager</a> &gt; <a href="GUID-6F716E31-490E-5CA1-871A-D8D1661E3078.html" title="This document introduces tutorials on the use of Feature Manager to enable and disable features on a phone using the feature installer.">Feature Manager Installation Tutorials</a> &gt; </div>
<h1 class="topictitle1">Uninstalling Features with Feature Manager</h1>
<div><p>Provides instructions for removing features when uninstalling a software component. </p>
<div class="section" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-ACEA36C7-3E96-5384-A9F2-3FE58E409DB7"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-ACEA36C7-3E96-5384-A9F2-3FE58E409DB7"><!-- --></a><p>When you install a software component you may want to disable any features which no other component requires. You may also want to modify the user-defined data relating to the feature. You do this by installing an executable which uninstalls the features. That executable is called <span class="filepath">featureuninstaller.exe</span> and you create it by customising and installing its source code. </p>
 </div>
 <a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-5ED35D95-A321-5130-B3EA-944084BA3E0E"><!-- --></a><ol id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-5ED35D95-A321-5130-B3EA-944084BA3E0E"><li class="stepexpand" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-1BC6BD63-A83D-5CBE-83F8-41CB0E30BD47"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-1BC6BD63-A83D-5CBE-83F8-41CB0E30BD47"><!-- --></a><span>Customise the source code in <span class="filepath">featureuninstaller.cpp</span>, </span> <a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-5B7459CB-4DDF-5902-A3DB-A884809E1F9F"><!-- --></a><ol type="a" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-5B7459CB-4DDF-5902-A3DB-A884809E1F9F"><li class="substepexpand" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-38F1A44F-CB06-59DE-822B-B7605A5755FC"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-38F1A44F-CB06-59DE-822B-B7605A5755FC"><!-- --></a><span>Set the TUid <samp class="codeph">featureUid</samp> to the UId of the feature to be disabled, as defined in <span class="filepath">featureUIDs.h</span>, which you use to initialise <samp class="codeph">featureUid</samp> </span>  <pre class="codeblock" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-D3A68BE5-312F-5B25-B808-1741931B6C1E"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-D3A68BE5-312F-5B25-B808-1741931B6C1E"><!-- --></a>    // TODO: Replace UID 0x00000000 with real value
    TUid featureUid( TUid::Uid( 0x00000000 ) ); 
</pre>
   and  </li>
 <li class="substepexpand" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-457FF316-1125-59DE-A52E-F905B60D0BD2"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-457FF316-1125-59DE-A52E-F905B60D0BD2"><!-- --></a><span>set the TUint32 <samp class="codeph">featureData</samp> to the user-defined data if any. </span>  <pre class="codeblock" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-B560B222-6591-50E9-A48E-888CD680C89A"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-B560B222-6591-50E9-A48E-888CD680C89A"><!-- --></a>    // TODO: Set feature data. Replace &lt;featureData&gt; with real value!
    // TODO: Uncomment when needed!
    // TUint32 featureData( 0x00000000 );
</pre>
  </li>
 </ol>
  This is the source code to be modified.   <pre class="codeblock" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-A2545500-5C84-5783-BCBC-C175AEC5F9FA"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-A2545500-5C84-5783-BCBC-C175AEC5F9FA"><!-- --></a>

// INCLUDE FILES
#include &lt;featurecontrol.h&gt;

// LOCAL CONSTANTS AND MACROS
_LIT(KTxt,"featureuninstaller: mainL failed");


// ============================= LOCAL FUNCTIONS ===============================

// -----------------------------------------------------------------------------
// mainL
// -----------------------------------------------------------------------------
//  
LOCAL_C void mainL()
    {
    // Connect Feature Control
    RFeatureControl featureControl;
    User::LeaveIfError( featureControl.Open() );
    
    // Example code disables an existing feature.
    // TODO: Comment or uncomment code when needed. 
    
    // TODO: Specify in your .pkg file:
    // @"featureuninstaller.sisx", (0x10283304)
    
    // TODO: Replace UID 0x00000000 with real value
    TUid featureUid( TUid::Uid( 0x00000000 ) ); 
    
    // Feature data is 32-bit quantity for client read and write. Feature data is
    // defined by owner of the feature and can contain for example flags, 
    // enumeratons and/or integers.
    // TODO: Set feature data. Replace &lt;featureData&gt; with real value!
    // TODO: Uncomment when needed!
    // TUint32 featureData( 0x00000000 );
    
    // Disable an existing feature.
    User::LeaveIfError( featureControl.DisableFeature( featureUid ) );
    
    // OR disable an exsiting feature and set feature data.
    // User::LeaveIfError( featureControl.SetFeature( featureUid, EFalse, featureData ) );
    
    featureControl.Close();
    }



</pre>
  </li>
<li class="stepexpand" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-80C46E27-B2CE-5464-A4D5-D6E3C0A76117"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-80C46E27-B2CE-5464-A4D5-D6E3C0A76117"><!-- --></a><span/><br/> compile the code to <span class="filepath">featureuninstaller.exe</span>,  </li>
<li class="stepexpand" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-E46397B7-8DD9-54FA-A0CB-201A310C06AC"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-E46397B7-8DD9-54FA-A0CB-201A310C06AC"><!-- --></a><span/><br/> customise the package file <span class="filepath">featureuninstaller.pkg</span> with the filepath of <span class="filepath">featureuninstaller.exe</span>, and   <pre class="codeblock" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-58ABFF7F-1EB7-55C7-8B07-087CB7254290"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-58ABFF7F-1EB7-55C7-8B07-087CB7254290"><!-- --></a>; This file installs an exe that is run asynchronously on uninstallation, uninstalls a feature.

;Languages
&amp;EN

;Header
#{"featureuninstaller"}, (0x10283304), 1, 2, 3,TYPE=SA

%{"Vendor"}
:"Unique Vendor Name"

"\epoc32\release\winscw\udeb\featureuninstaller.exe"-"!:\sys\bin\featureuninstaller.exe", FR, RR</pre>
  </li>
<li class="stepexpand" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-819026D8-FEFD-5B21-833D-C4A30409DDCE"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-819026D8-FEFD-5B21-833D-C4A30409DDCE"><!-- --></a><span/><br/> convert <span class="filepath">featureuninstaller.pkg</span> into a .sis file to be placed on the phone in accordance with the normal installation process.  </li>
</ol>
 <div class="section" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-C9948138-DA6D-5A62-9298-05665E4BF57E"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-C9948138-DA6D-5A62-9298-05665E4BF57E"><!-- --></a><p>The features you have uninstalled will now be disabled on the device. </p>
 </div>
 <div class="section" id="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-5EDEA2CA-24F9-589E-BC8E-682A5CF4D2F4"><a name="GUID-AB99E33E-322A-5C65-AAA0-6F3DE038ED71__GUID-5EDEA2CA-24F9-589E-BC8E-682A5CF4D2F4"><!-- --></a><p>There are no next steps to be taken. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-6F716E31-490E-5CA1-871A-D8D1661E3078.html" title="This document introduces tutorials on the use of Feature Manager to enable and disable features on a phone using the feature installer.">Feature Manager Installation Tutorials</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-B71AC5E3-8AA8-55AD-916F-9E873926011B.html">Feature Manager Overview</a></div>
</div>
<div class="relinfo reltasks"><strong>Related tasks</strong><br/>
<div><a href="GUID-5885167D-4755-54CC-B366-6DA89A608F8E.html" title="Provides instructions for adding features when installing a new software component.">Installing Features with Feature
                Manager Tutorial </a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>