<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="timezoneconversion: Time Zone Conversion Example"/>
<meta name="DC.Relation" scheme="URI" content="GUID-726E3025-173C-4A91-8959-49F11DACA92B.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-4FCF605D-52D9-5B2D-80CF-80C940F680CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-726E3025-173C-4A91-8959-49F11DACA92B.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>timezoneconversion: Time Zone Conversion Example</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13"><a name="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2520040 id2380831 id2380932 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-58035B49-2EAE-5144-B226-28AF2EDD62E7.html">Generic Application Support Guide</a> &gt; <a href="GUID-4FCF605D-52D9-5B2D-80CF-80C940F680CA.html">Time Zone Services</a> &gt; <a href="GUID-726E3025-173C-4A91-8959-49F11DACA92B.html">Time zone services examples</a> &gt; </div>
<h1 class="topictitle1">timezoneconversion: Time Zone Conversion Example</h1>
<div>
<div class="section" id="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-340A1745-6C2C-41E5-A637-346F32F11A21"><a name="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-340A1745-6C2C-41E5-A637-346F32F11A21"><!-- --></a><h2 class="sectiontitle">Download</h2> <p>Click on the following link to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-c9019536-b967-4421-8221-150afb121307.zip" target="_blank">TZExample.zip</a></p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-c9019536-b967-4421-8221-150afb121307.html">browse</a> to view the example code. </p>
 </div>

<div class="section" id="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-A36EB85A-A039-4396-BF31-2780D57E85F7"><a name="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-A36EB85A-A039-4396-BF31-2780D57E85F7"><!-- --></a><h2 class="sectiontitle">Description</h2> <p>This example code first connects to the time zone server (class <a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html"><span class="apiname">RTz</span></a>). Then it uses <a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-052221AD-916E-3E47-9510-AC0495A19A70__GUID-A7D33D36-8AA5-3775-B4B8-36C30EF88DB0"><span class="apiname">RTz::ConvertToLocalTime()</span></a> to convert a UTC time to local time. The time to convert and the
time zone to convert it to are randomly chosen. This demonstrates
that the time zone server can convert any time, past, present or future,
for any time zone, as long as a rule exists for the conversion. Conversion
rules are stored in a native Symbian database that is a compressed
form of the Olson time zone database (<a href="http://www.twinsun.com/tz/tz-link.htm" target="_blank">http://www.twinsun.com/tz/tz-link.htm</a>). The database can be configured by phone manufacturers to save
space. </p>
 <p>The example then converts the current local time for
the system time zone to the current local time for a different time
zone. This is a two stage process. First, the local time is converted
to UTC using <a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html#GUID-052221AD-916E-3E47-9510-AC0495A19A70__GUID-645162AA-631E-3125-A002-82EB8D91DB08"><span class="apiname">RTz::ConvertToUniversalTime()</span></a>. When
converting between local and UTC times for the current system time
zone, there is no need to specify the time zone ID. Then UTC is converted
to local time for the other time zone. Before the example terminates,
the connection to the server is closed. </p>
 <p>No special capabilities
are needed to do time zone conversion. </p>
 <p>Class <a href="GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html"><span class="apiname">CTzId</span></a> identifies a time zone. It stores the identifier either as text,
(for instance Australia/Sydney), or as a number. Numeric time zone
IDs are assigned by the phone manufacturer, so can vary from phone
to phone. </p>
 <p>For efficiency, the time zone server caches a copy
of a range of conversion rules for the current time zone. These cached
rules are <em>actualised</em>, meaning they have been expanded from
the encoded compact format as stored in the database, so are quicker
to access. </p>
 <p>Class <a href="GUID-37A4A4ED-FFF8-3C98-B028-EA1947EA7BEF.html"><span class="apiname">CTzConverter</span></a>, which is
not used in this example, provides an alternative conversion API to <a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html"><span class="apiname">RTz</span></a>. It caches 5 years' worth of conversion rules for a
specific time zone (either the time zone specified in the conversion
function, or the system time zone), on the client side, so avoiding
the need for an an IPC call for each conversion. <samp class="codeph">CTzConverter</samp> is more efficient than <samp class="codeph">RTz</samp> when doing multiple
conversions for a single time zone. </p>
 </div>

<div class="section" id="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-A56CA8E4-4794-41A4-9C12-F5867525DD8C"><a name="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-A56CA8E4-4794-41A4-9C12-F5867525DD8C"><!-- --></a><h2 class="sectiontitle">Usage</h2><p> This is a console application, so does not have a GUI. It builds
an executable called<span class="filepath"> TZExample.exe</span> in the standard
location (<span class="filepath">\epoc32\release\winscw\&lt;build_variant&gt;</span> for CodeWarrior). After launching the executable, depending on the
emulator you are using, you may need to task away from the app launcher/shell
screen to view the console.</p>
</div>

<div class="section" id="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-2E27B7FB-A188-450C-8BA3-485FFB63F66C"><a name="GUID-71DCEB48-8E8C-59A0-A99F-23245FF2DF13__GUID-2E27B7FB-A188-450C-8BA3-485FFB63F66C"><!-- --></a><h2 class="sectiontitle">Class
Summary</h2><ul>
<li><p><a href="GUID-052221AD-916E-3E47-9510-AC0495A19A70.html"><span class="apiname">RTz</span></a></p>
</li>

<li><p><a href="GUID-0B5453C5-76A2-31B2-A32C-2CDC1F3367CE.html"><span class="apiname">CTzId</span></a></p>
</li>

<li><p><a href="GUID-BE7D196E-357B-36BE-80BB-CCBBE00DFA90.html#GUID-BE7D196E-357B-36BE-80BB-CCBBE00DFA90__GUID-C58E6A33-D690-3071-A93D-A2509D989AE4"><span class="apiname">ESock::TTime</span></a></p>
</li>

</ul>
</div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-726E3025-173C-4A91-8959-49F11DACA92B.html">Time zone services examples</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>