<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="What is the mechanism for reading, writing and searching for data"/>
<meta name="abstract" content="This topic describes the mechanism for reading data from the Comms Database and writing data to the Comms Database."/>
<meta name="description" content="This topic describes the mechanism for reading data from the Comms Database and writing data to the Comms Database."/>
<meta name="DC.Relation" scheme="URI" content="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>What is the mechanism for reading, writing and searching for data</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC"><a name="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2682451 id2682668 id2682686 id2682689 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-8F2D6AC8-8357-55C7-970B-CD2684BA9B04.html" title="The Communications Framework is the base for all communications, network and telephony services that Symbian platform provides. The Communications Framework manages the communications threads and the flow of information between those threads. The Framework also manages and stores the communications related settings.">Communications Framework Guide</a> &gt; <a href="GUID-C3018CEE-865B-595A-A735-40E11665E50A.html">Communications Configuration Utilities</a> &gt; <a href="GUID-BD971173-E009-58DA-AF9C-F4AAFF77B138.html">Comms Database</a> &gt; <a href="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html">Concepts</a> &gt; </div>
<h1 class="topictitle1">What is the mechanism for reading, writing and searching for data</h1>
<div><p>This topic describes the mechanism for reading data from the Comms Database and writing data to the Comms Database. </p>
<p>All elements that you can read and write have the class <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> as a base class. This base class contains the functions that get and store that element. </p>
 <p>Tables, records, links and fields are all elements. The classes that represent tables, records, links and fields have <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> in their class hierarchy. You use the functions in <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> to load and store tables, records, links and fields. </p>
 <div class="fignone" id="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC__GUID-3EED9581-A88B-5E79-B672-42486CFB6BE3"><a name="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC__GUID-3EED9581-A88B-5E79-B672-42486CFB6BE3"><!-- --></a><img src="GUID-69831D75-D16D-54CF-A083-0EDB358F3390_d0e110706_href.png"/></div>
 <p>The <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> class gives you: </p>
 <ul><li id="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC__GUID-3D33E6EE-F6FA-5B75-A165-4A8731BD2FCB"><a name="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC__GUID-3D33E6EE-F6FA-5B75-A165-4A8731BD2FCB"><!-- --></a><p>the functions to get data from the Comms Database: <samp class="codeph">LoadL()</samp>, <samp class="codeph">FindL()</samp>, <samp class="codeph">RefreshL()</samp>  </p>
 </li>
 <li id="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC__GUID-413D285C-2447-5157-B573-51056F79C50D"><a name="GUID-E71DEB5F-A13A-5675-B2DE-9BCFDB38A3EC__GUID-413D285C-2447-5157-B573-51056F79C50D"><!-- --></a><p>the functions to put data into the Comms Database: <samp class="codeph">StoreL()</samp>, <samp class="codeph">ModifyL()</samp>, <samp class="codeph">DeleteL()</samp>  </p>
 </li>
 </ul>
 <div class="section"><h2 class="sectiontitle">Getting data directly from the Comms Database</h2> <p>If you know the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of a table, record, field or link, you can load the table, record, field or link from the Comms Database. Call <samp class="codeph">SetRecordId()</samp> on the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">CMDBElement</span></a> base class to set the record Id. Call <samp class="codeph">LoadL()</samp> on the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> base class to load the table, record, field or link. </p>
 <p>The CommsDat API gets the data that the tool or application is allowed to see from the Comms database. The data that the tool or application can see depends on platform security capabilities and the access attributes for the session. </p>
 <p>A request to load a single element fails if the tool or application does not have the platform security capabilities. </p>
 <p>A request to load a table does not fail if some records in the table are not available. The tool or application can see only those records that are available. </p>
 <p>A request to load a record does not fail if some fields in the record are not available. The tool or application can see only those fields that are available. </p>
 <p> <samp class="codeph">LoadL()</samp> writes over the content of the table, record, field or link object in memory. </p>
 <p> <samp class="codeph">LoadL()</samp> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Finding data in the Comms Database</h2> <p>You can search for records in the Comms Database. There are two patterns: </p>
 <p><strong>Finding a single record that has specified field values </strong> </p>
 <p>You create a <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">CMDBRecordBase</span></a> object in memory. You select the fields for the search and set the field values. Call <samp class="codeph">FindL()</samp> on the <samp class="codeph">CMDBRecordBase</samp> object. <samp class="codeph">FindL()</samp> is member of the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> base class. If the search is successful, the CommsDat API fills the <samp class="codeph">CMDBRecordBase</samp> object with the values from the first record in the Comms Database that matches. The values include the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a>. If the search is not successful, the <samp class="codeph">CMDBRecordBase</samp> object is not changed. </p>
 <p> <samp class="codeph">FindL()</samp> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 <p>Note that you do not need to set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table, the record, the field or the link object. </p>
 <p><strong>Finding all records in a table that match a specified record </strong> </p>
 <p>You create a <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">CMDBRecordSet</span></a> object and append a single record to the array of records. You select the fields for the search and set the field values. This record is the 'search record'. Call <samp class="codeph">FindL()</samp> on the <samp class="codeph">CMDBRecordSet</samp> object. If the search is successful, the function returns a number of complete records. The first record found writes over the 'search record'. If the search is not successful, the <samp class="codeph">CMDBRecordSet</samp> object is not changed </p>
 <p> <samp class="codeph">FindL()</samp> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 <p>Note that you do not need to set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table, the record, the field or the link object. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Refreshing data in memory</h2> <p>You can update your copy of the data in memory. You call <samp class="codeph">RefreshL()</samp> to update the data. The method is similar to <samp class="codeph">LoadL()</samp> but the method does not write over fields that the tool or application has changed. All other fields are refreshed from the Comms Database. </p>
 <p> <samp class="codeph">RefreshL()</samp> is a member of the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">MMetaDatabase</span></a> base class. </p>
 <p> <samp class="codeph">RefreshL()</samp> is useful if a tool or application maintains a cache of Comms information. </p>
 <p> <samp class="codeph">RefreshL()</samp> opens a read-only transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Adding new data to the Comms Database</h2> <p>If need to add or change the data in the Comms Database you must add or change the data in the table, the record, the link or the field object in memory. </p>
 <p>Call <samp class="codeph">StoreL()</samp> to create new records, tables and fields. The CommsDat API only stores the fields that the tool or application has changed. </p>
 <p>A table, record, field or link object that exists must have a valid <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> before the call to <samp class="codeph">StoreL()</samp>. </p>
 <p>To add a new user defined table to the Comms Database set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table to <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">KCDNewTableRequest</span></a> before the call to <samp class="codeph">StoreL()</samp>. Call <samp class="codeph">SetRecordId()</samp> on the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">CMDBElement</span></a> base class to set the record Id. </p>
 <p>To add a new record to a table set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table to <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">KCDNewRecordRequest</span></a> before the call to <samp class="codeph">StoreL()</samp>. Call <samp class="codeph">SetRecordId()</samp> on the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">CMDBElement</span></a> base class to set the record Id. The table must exist before you add the new record. </p>
 <p>To add a new column to a user defined table set the record Id part of the <a href="GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84.html#GUID-6DAF85AD-E412-5823-81C2-FC1755A90A84__GUID-4DDD4947-D379-5B68-8DC0-B67B074FA852">element Id</a> of the table to <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">KCDNewColumnRequest</span></a> before the call to <samp class="codeph">StoreL()</samp>. Call <samp class="codeph">SetRecordId()</samp> on the <a href="GUID-1CDD0B97-8B00-3373-9908-512C9BC1CF51.html"><span class="apiname">CMDBElement</span></a> base class to set the record Id. The effect of a new column is to add a new field in the user defined records. </p>
 <p>The tool or application must have the platform security capabilities to write to the Comms Database. </p>
 <p> <samp class="codeph">StoreL()</samp> opens a read/write transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Changing data in the Comms Database</h2> <p>If you need to change data in the Comms Database you must change the data in the table, the record, the link or the field object in memory. The table, the record, the link and the field must already exist in the database. </p>
 <p>Call <samp class="codeph">ModifyL()</samp> to change existing data. The function cannot create new records or tables, but can store new fields in a record. </p>
 <p>The tool or application must have the platform security capabilities to write to the Comms Database. </p>
 <p> <samp class="codeph">ModifyL()</samp> opens a read/write transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Deleting data from the Comms Database</h2> <p>Call <samp class="codeph">DeleteL()</samp> to delete a table, a record, a field or a link from the Comms Database. </p>
 <p>The tool or application must have the platform security capabilities to write to the Comms Database. </p>
 <p> <samp class="codeph">DeleteL()</samp> opens a read/write transaction with the Comms Database if the tool or application has not already started a transaction. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-1AFDDD6F-CB99-587D-A0B5-D3F5B27F7135.html">Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>