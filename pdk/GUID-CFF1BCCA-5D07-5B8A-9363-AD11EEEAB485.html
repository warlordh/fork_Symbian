<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Symmetric ciphers -- HowTo"/>
<meta name="DC.Relation" scheme="URI" content="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Symmetric ciphers -- HowTo</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2859177 id2859238 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html">Cryptography overview</a> &gt; <a href="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html" title="This section provides detailed information on encrypting and decrypting data using Symmetric and Asymmetric algorithms supported by Symbian platform.">Encrypting and Decrypting Data</a> &gt; </div>
<h1 class="topictitle1">Symmetric
ciphers -- HowTo</h1>
<div>
<ul>
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-0B38AF7B-D5D7-5A06-865D-76F056634C2A"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-0B38AF7B-D5D7-5A06-865D-76F056634C2A"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-119D039F-4624-5464-AA17-BBAB18A8D3CD">How do I use the symmetric cipher framework?</a>  </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-6B472E69-7101-5AC2-B91C-E6FB3FEA067E"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-6B472E69-7101-5AC2-B91C-E6FB3FEA067E"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-71CD8B41-219D-5D07-8C99-47D68668A880">Symmetric Modes</a>  </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3D8DF8E4-8839-51DB-9223-99931F01A7EB"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3D8DF8E4-8839-51DB-9223-99931F01A7EB"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-86CD649D-3611-531A-8D9E-1FCC9728500B">Which symmetric cipher should I use?</a>  </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-24318339-1B08-5CAF-8EE6-C512DA548670"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-24318339-1B08-5CAF-8EE6-C512DA548670"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3393A9D6-CB78-5740-B250-F9C1C26C59BD">How does buffering work within the symmetric cipher framework?</a>  </p>
 </li>

</ul>

<div class="section" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-119D039F-4624-5464-AA17-BBAB18A8D3CD"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-119D039F-4624-5464-AA17-BBAB18A8D3CD"><!-- --></a><h2 class="sectiontitle">How do I use
the symmetric cipher framework? </h2> <ul>
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-78AC1C88-612F-5D55-B357-497D637F20E1"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-78AC1C88-612F-5D55-B357-497D637F20E1"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-21BCC641-FEE9-55FA-84E9-FF1EE425309F">An introduction to the symmetric cipher framework</a>  </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-769B5855-9DA2-5E32-9270-B8F63D39366A"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-769B5855-9DA2-5E32-9270-B8F63D39366A"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-DFE76D85-7AD6-5B96-906B-98B3F63B88B7"><span class="apiname">CSymmetricCipher</span> interface basics</a>  </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-6EC9722D-DC7E-5DF8-A55F-D308C92DEC73"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-6EC9722D-DC7E-5DF8-A55F-D308C92DEC73"><!-- --></a><p> <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-2018AFFC-09D9-5F99-BACC-8C77504E5CC3">Example code for a symmetric factory class</a>  </p>
 </li>

</ul>
 <p id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-21BCC641-FEE9-55FA-84E9-FF1EE425309F"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-21BCC641-FEE9-55FA-84E9-FF1EE425309F"><!-- --></a><strong> An introduction
to the symmetric cipher framework </strong> </p>
 <p>The symmetric cipher framework
collates the behaviour of all symmetric ciphers under one interface: <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html"><span class="apiname">CSymmetricCipher</span></a>.
This interface is intended to represent one direction of one instance of any
symmetric cipher. One direction means either encryption or decryption, but
not both. </p>
 <p id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-DFE76D85-7AD6-5B96-906B-98B3F63B88B7"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-DFE76D85-7AD6-5B96-906B-98B3F63B88B7"><!-- --></a><strong> CSymmetricCipher
interface basics </strong> </p>
 <ul>
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-200B0A58-EA9D-5BC7-8EDF-625B2C43BE72"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-200B0A58-EA9D-5BC7-8EDF-625B2C43BE72"><!-- --></a><p> <strong> Block ciphers</strong> --
Here one must create an underlying transformation (<a href="GUID-CFDA5321-EE13-3203-8DED-71E69D4469BD.html"><span class="apiname">CBlockTransformation</span></a>)
and create a <a href="GUID-65F145BB-CE4B-3BCC-A9FC-5F9107F32488.html"><span class="apiname">CBufferedTransformation</span></a> (which is an <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html"><span class="apiname">CSymmetricCipher</span></a>)
from that. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-4D3532BB-58B1-5BF1-9253-B1FEE5917053"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-4D3532BB-58B1-5BF1-9253-B1FEE5917053"><!-- --></a><p> <strong> Stream ciphers</strong> --
These have no concept of buffering and are treated as specializations of <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html"><span class="apiname">CSymmetricCipher</span></a>.
They require no intermediate container class. </p>
 </li>

</ul>
 <p>The following code illustrates the creation of a buffered AES ECB
encryptor and an ARC4 stream cipher. </p>
 <pre class="codeblock" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-278C21E0-E3E1-5575-9C37-9530F08BB227"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-278C21E0-E3E1-5575-9C37-9530F08BB227"><!-- --></a>
CBlockTransformation* block = 0;
block = CAESEncryptor::NewLC(aKey);
CPadding* padding = CPaddingSSLv3::NewLC(KAESBlockSize); //The blocksize of AES (16 bytes)
CSymmetricCipher* cipher = CBufferedEncryptor::NewL(block, padding);
CleanupStack::Pop(2, block); //padding, block -&gt; both owned by cipher
</pre>
 <pre class="codeblock" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-AC44907E-CD42-514A-AE39-D1981F3267FA"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-AC44907E-CD42-514A-AE39-D1981F3267FA"><!-- --></a>
CSymmetricCipher* cipher = new(ELeave)CARC4(aKey);
CleanupStack::PushL(cipher):
</pre>
 <p>After creation, both examples are usable through the <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html"><span class="apiname">CSymmetricCipher</span></a> interface.
So, to encrypt with either of the above ciphers one could do: </p>
 <pre class="codeblock" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-BF286466-ABBD-5810-801C-7C455CBE52FD"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-BF286466-ABBD-5810-801C-7C455CBE52FD"><!-- --></a>
HBufC8* output = HBufC8::NewLC(cipher-&gt;MaxOutputLength(input.Size()));
cipher-&gt;Process(input, output);
HBufC8* output2 = HBufC8::NewLC(cipher-&gt;MaxFinalOutputLength(input2.Size()));
cipher-&gt;ProcessFinalL(input2, output2);
</pre>
 <p>In this example, <samp class="codeph">input</samp> and <samp class="codeph">input2</samp> are
two arbitrary, finite length descriptors. The derived implementations of <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html"><span class="apiname">CSymmetricCipher</span></a> (<a href="GUID-8251F03D-D816-386E-A23A-947EEC6C8BC6.html"><span class="apiname">CBufferedEncryptor</span></a> / <a href="GUID-01CAF2BA-9120-304C-A488-5882CBD23EBC.html"><span class="apiname">CBufferedDecryptor</span></a> and <a href="GUID-40EFC716-0990-3C90-893E-43B3E6821C75.html"><span class="apiname">CStreamCipher</span></a>)
are responsible for handling what to do in each specific case. For example,
in the case of an encrypting block cipher, <samp class="codeph">ProcessFinalL()</samp> will
call the underlying padding system, which will in turn ensure that the overall
length of input plaintext is of a suitable length for encryption. For more
information on how the values returned from <samp class="codeph">MaxOutputLength()</samp> and <samp class="codeph">MaxFinalOutputLength()</samp> are
calculated see <a href="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485.html#GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3393A9D6-CB78-5740-B250-F9C1C26C59BD">How
does buffering work within the symmetric cipher framework?</a>. </p>
 <p id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-2018AFFC-09D9-5F99-BACC-8C77504E5CC3"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-2018AFFC-09D9-5F99-BACC-8C77504E5CC3"><!-- --></a><strong>Example code for a symmetric
factory class </strong> </p>
 <p>To simplify the process of creating symmetric encryptors
and decryptors, it is strongly recommended that applications create a factory
that automates the process for them. The following code gives a sample factory
that applications might like to use as a reference. It is not supplied as
part of the framework as every application has different ways of identifying
symmetric cipher suites. </p>
 <pre class="codeblock" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-EF0D121A-1961-5EF7-BA04-5BCE5DC029D4"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-EF0D121A-1961-5EF7-BA04-5BCE5DC029D4"><!-- --></a>
CSymmetricCipher* CCipherFactory::BuildEncryptorL(
    TSymmetricCipherType aType,const TDesC8&amp; aKey,const TDesC8&amp; aIV)
    {
    CSymmetricCipher* cipher = NULL;

    if (aType==ERc4)
        {
        cipher = new(ELeave) CARC4(aKey);
        }
    else
        {
        CBlockTransformation* bT = NULL;
        switch (aType)
            {
            case EDes_cbc:
                bT = CDESEncryptor::NewL(aKey);
                break;
            case EDes_ede3_cbc:
                bT = C3DESEncryptor::NewL(aKey);
                break;
            case ERc2_cbc:
                bT = CRC2Encryptor::NewL(aKey);
                break;
            default:
                User::Leave(KErrNotSupported);
            };
        CleanupStack::PushL(bT);
        CBlockTransformation* mode = CModeCBCEncryptor::NewL(bT, aIV);
        CleanupStack::Pop(bT);    //    owned by mode
        CleanupStack::PushL(mode);
     
        CPadding* padding = CPaddingSSLv3::NewLC(KBlockSize); //All of these ciphers use 8 byte blocks
        cipher = CBufferedEncryptor::NewL(mode, padding);
        CleanupStack::Pop(2, mode);    //padding, mode    now owned by cipher
        }
    return cipher;
    }
</pre>
 <p>Applications creating these factories need to supply an equivalent
to the <samp class="codeph">TSymmetricCipherType</samp> enum, which contains the list
of identifiers representing the cipher, padding, and mode requirements of
the application. </p>
 <p>Note that a similar <samp class="codeph">BuildDecryptorL()</samp> will
also have to be created. </p>
 <p>Good naming conventions dictate that applications
should not pollute the global namespace and either use their own namespace
or prefix their factory classes with identifiers that associated it with that
specific application. </p>
 </div>

<div class="section" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-71CD8B41-219D-5D07-8C99-47D68668A880"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-71CD8B41-219D-5D07-8C99-47D68668A880"><!-- --></a><h2 class="sectiontitle">Symmetric Modes </h2> <p>When
the amount of plaintext to be encrypted is larger than a single block, some
method must be employed to specify how subsequent blocks are dependent on
previous blocks. The simplest method, known as ECB (Electronic CodeBook),
specifies that subsequent blocks are completely independent. Therefore, two
identical blocks of plaintext will encrypt to two identical blocks of ciphertext.
ECB has significant security drawbacks, thus most applications use more advanced
modes in which subsequent blocks are dependent on the ciphertext of previous
blocks. The symmetric framework handles these modes through the <a href="GUID-436C3EBE-FC60-3760-A3BA-D8DF8FA5B8AF.html"><span class="apiname">CBlockChainingMode</span></a> class,
which is a specialization of <a href="GUID-CFDA5321-EE13-3203-8DED-71E69D4469BD.html"><span class="apiname">CBlockTransformation</span></a>. The
idea is that one gives an implementation of a <a href="GUID-436C3EBE-FC60-3760-A3BA-D8DF8FA5B8AF.html"><span class="apiname">CBlockChainingMode</span></a> another <a href="GUID-CFDA5321-EE13-3203-8DED-71E69D4469BD.html"><span class="apiname">CBlockTransformation</span></a> (<a href="GUID-AE1A9AC0-DB79-3C62-AA23-896812F25F14.html"><span class="apiname">CAESEncryptor</span></a>, for instance) and then performs all operations on the <a href="GUID-436C3EBE-FC60-3760-A3BA-D8DF8FA5B8AF.html"><span class="apiname">CBlockChainingMode</span></a> instance.
When <a href="GUID-CFDA5321-EE13-3203-8DED-71E69D4469BD.html#GUID-CFDA5321-EE13-3203-8DED-71E69D4469BD__GUID-A4F36BDB-5FB3-3082-B362-30A59D13B104"><span class="apiname">CBlockTransformation::Transform()</span></a> is called on the
mode, it is responsible for calling <samp class="codeph">Transform()</samp> on the underlying
transformation that it owns and then applying its own chaining mode transformation. </p>
 <p>The
following example shows how to create a buffered AES CBC encryptor. </p>
 <pre class="codeblock" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-A3DFB7C2-D727-553C-9BF9-0E865417DBA3"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-A3DFB7C2-D727-553C-9BF9-0E865417DBA3"><!-- --></a>
CBlockTransformation* basicAesBlock = 0;
CBlockTransformation* cbcBlock = 0;
basicAesBlock = CAESEncryptor::NewLC(aKey);
cbcBlock = CModeCBCEncryptor::NewL(basicAesBlock, iv);
CleanupStack::Pop(basicAesBlock); //owned by cbcBlock
CleanupStack::PushL(cbcBlock);
CPadding* padding = CPaddingSSLv3::NewLC(KAESBlockSize); //The blocksize of AES (16 bytes)
CSymmetricCipher* cipher = CBufferedEncryptor::NewL(cbcBlock, padding);
CleanupStack::Pop(2, cbcBlock); //padding, cbcBlock -&gt; both owned by cipher
</pre>
 </div>

<div class="section" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-86CD649D-3611-531A-8D9E-1FCC9728500B"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-86CD649D-3611-531A-8D9E-1FCC9728500B"><!-- --></a><h2 class="sectiontitle">Which symmetric
cipher should I use? </h2> <p>Generally, when implementing secure comms
protocols, the cipher you use will be dictated by the protocol specification.
However, if you are writing your own application, you should consider the
use of AES (<a href="GUID-AE1A9AC0-DB79-3C62-AA23-896812F25F14.html"><span class="apiname">CAESEncryptor</span></a>); this is the cipher recommended
by <a href="http://csrc.nist.gov/cryptval/" target="_blank">NIST</a>. </p>
 </div>

<div class="section" id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3393A9D6-CB78-5740-B250-F9C1C26C59BD"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3393A9D6-CB78-5740-B250-F9C1C26C59BD"><!-- --></a><h2 class="sectiontitle">How does buffering
work within the symmetric cipher framework? </h2> <ul>
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-2A87BE74-9F27-5F0A-BA32-706FF5B1861B"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-2A87BE74-9F27-5F0A-BA32-706FF5B1861B"><!-- --></a><p> <strong>Stream ciphers</strong> consume
all content they are given. That is, the value returned from <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html#GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B__GUID-31976831-1620-3396-8E91-BBF934D4167D"><span class="apiname">CSymmetricCipher::MaxOutputLength()</span></a> is
always the same as the <samp class="codeph">aInputLength</samp> parameter passed in. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-E63F6682-E96F-5AB7-9786-E7F210B321ED"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-E63F6682-E96F-5AB7-9786-E7F210B321ED"><!-- --></a><p> <strong>Block ciphers</strong> controlled
through a <a href="GUID-65F145BB-CE4B-3BCC-A9FC-5F9107F32488.html"><span class="apiname">CBufferedTransformation</span></a> operate under the following
rules: </p>
 <ul>
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3D963E44-1D4E-5505-9124-47DF2F145118"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3D963E44-1D4E-5505-9124-47DF2F145118"><!-- --></a><p> <samp class="codeph">Process() </samp>  </p>
 <a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-943B86EF-01BD-53CB-B68F-507753850EC4"><!-- --></a><ul id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-943B86EF-01BD-53CB-B68F-507753850EC4">
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-271426C1-8E3E-5C95-8D55-1C3F2F2FC771"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-271426C1-8E3E-5C95-8D55-1C3F2F2FC771"><!-- --></a><p>Any previously buffered
data is (logically) prepended to <samp class="codeph">aInput</samp>. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-84C9BDF7-6BE5-5D02-9F00-1386F175757F"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-84C9BDF7-6BE5-5D02-9F00-1386F175757F"><!-- --></a><p>All whole blocks are
transformed and appended to <samp class="codeph">aOutput</samp>. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-80FB971C-FAE8-576D-95A8-2762343B2B74"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-80FB971C-FAE8-576D-95A8-2762343B2B74"><!-- --></a><p>Any remaining partial
blocks, orphaned by the above rule, are buffered. </p>
 </li>

</ul>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-93D49834-2716-5992-9B56-195813C3F4E0"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-93D49834-2716-5992-9B56-195813C3F4E0"><!-- --></a><p> <samp class="codeph">ProcessFinalL()</samp>  </p>
 <ul>
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-B5B476B7-EAC3-594C-B613-88900BB99654"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-B5B476B7-EAC3-594C-B613-88900BB99654"><!-- --></a><p>Encryption </p>
 <a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-FD8C1EAA-3C8F-5034-ABAA-F4DFB6B2493A"><!-- --></a><ol id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-FD8C1EAA-3C8F-5034-ABAA-F4DFB6B2493A">
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-21579114-8456-573A-A79E-F8C84A7AFFCA"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-21579114-8456-573A-A79E-F8C84A7AFFCA"><!-- --></a><p>Any previously buffered
data is (logically) prepended to <samp class="codeph">aInput</samp>. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-1C3199C1-41C1-5524-AD65-52D0F60816C1"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-1C3199C1-41C1-5524-AD65-52D0F60816C1"><!-- --></a><p>All whole block are
transformed and appended to <samp class="codeph">aOutput</samp>. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-7DF3B7AB-4C91-5C83-A963-5C18057AC8D3"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-7DF3B7AB-4C91-5C83-A963-5C18057AC8D3"><!-- --></a><p>Any remaining partial
blocks are padded with underlying padding system to be block aligned <em>to
the padding block size</em>. (In the vast majority of cases, the padding block
size is equal to the block cipher block size). </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-6709F044-F7D7-5BBD-8816-9829ECBD8F17"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-6709F044-F7D7-5BBD-8816-9829ECBD8F17"><!-- --></a><p>The resulting block(s)
are transformed and appended to <samp class="codeph">aOutput</samp>. </p>
 </li>

</ol>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-1BD95B71-34F8-57D9-A882-9EE616A82512"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-1BD95B71-34F8-57D9-A882-9EE616A82512"><!-- --></a><p>Decryption </p>
 <a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-46984F1C-D4CA-5719-8235-CF22A3325B37"><!-- --></a><ol id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-46984F1C-D4CA-5719-8235-CF22A3325B37">
<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3F4DABA6-9CFB-5F05-8B98-6F14CB64EFC4"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-3F4DABA6-9CFB-5F05-8B98-6F14CB64EFC4"><!-- --></a><p>The input <strong>must</strong> be
a multiple of the block size. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-A555D9FE-3211-521A-903E-5E22FF017FCE"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-A555D9FE-3211-521A-903E-5E22FF017FCE"><!-- --></a><p>Data is decrypted and
unpadded using underlying padding system. </p>
 </li>

<li id="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-57C20E84-CF6C-5699-ABF0-D5080D8517A4"><a name="GUID-CFF1BCCA-5D07-5B8A-9363-AD11EEEAB485__GUID-57C20E84-CF6C-5699-ABF0-D5080D8517A4"><!-- --></a><p>Decrypted, unpadded
data is appended to <samp class="codeph">aOutput</samp>. </p>
 </li>

</ol>
 </li>

</ul>
 </li>

</ul>
 </li>

</ul>
 <p>In all cases <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html#GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B__GUID-31976831-1620-3396-8E91-BBF934D4167D"><span class="apiname">CSymmetricCipher::MaxOutputLength()</span></a> returns
as tight an upper bound as possible on the number of bytes that will be returned
by a call to <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html#GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B__GUID-97E4F631-9CD5-3295-A22C-AAA5A4708FE9"><span class="apiname">CSymmetricCipher::Process()</span></a> with a specified
number of input bytes. Correspondingly, <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html#GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B__GUID-3675861D-0520-3F85-BA2B-AA3CF1964483"><span class="apiname">CSymmetricCipher::MaxFinalOutputLength()</span></a> returns
a similar bound but for a pending call to <a href="GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B.html#GUID-F4E08165-A654-3D32-8FED-7ED54BDAD88B__GUID-BE38C96D-F071-3385-8C7D-09BA4FC44432"><span class="apiname">CSymmetricCipher::ProcessFinalL()</span></a>. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html" title="This section provides detailed information on encrypting and decrypting data using Symmetric and Asymmetric algorithms supported by Symbian platform.">Encrypting and Decrypting Data</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>