<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Platform Security Considerations"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2016EF4B-F001-5EB2-8095-6048582511D6.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E2DE2C6F-E071-5E88-96F1-D71DDED84609.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D79380CF-22B5-5865-9366-44118E8ECA2E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-2016EF4B-F001-5EB2-8095-6048582511D6.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Platform Security Considerations</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF"><a name="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2381193 id2381201 id2381285 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-E2DE2C6F-E071-5E88-96F1-D71DDED84609.html">Generic Open Libraries</a> &gt; <a href="GUID-D79380CF-22B5-5865-9366-44118E8ECA2E.html">Open Environment Core (P.I.P.S.)</a> &gt; <a href="GUID-2016EF4B-F001-5EB2-8095-6048582511D6.html">P.I.P.S. Concepts</a> &gt; </div>
<h1 class="topictitle1">Platform
Security Considerations</h1>
<div>
<p>Symbian platform v9.1 introduced <a href="GUID-4BFEDD79-9502-526A-BA7B-97550A6F0601.html">Platform
Security</a> (the concept of Capabilities, Signing and Data Caging) to
protect a phone against malicious code. Granting a program certain capabilities
enables it to use protected operating system functionality, and signing an
installation file enables it to be installed onto different phones. </p>

<p>A program using the P.I.P.S. libraries may need certain capabilities in
order to use protected functionality to be available. The capabilities required
are listed in the program's makefile (or an MMP file on the Symbian
platform). For example, the following line added to a Symbian MMP file will
grant network access to a program. </p>

<pre class="codeblock" id="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-4D511177-F8F2-56A1-AB6C-91B3B1F04FE5"><a name="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-4D511177-F8F2-56A1-AB6C-91B3B1F04FE5"><!-- --></a>CAPABILITY     NetworkServices</pre>

<p>Each Symbian program has access to a private area of storage in a <span class="filepath">/private/&lt;secureid&gt;/</span> directory
where <samp class="codeph">secureid</samp> is an identifier specified in the MMP file.
If a <samp class="codeph">secureid</samp> is not specified in the MMP file, the <samp class="codeph">secureid</samp> is
set from the program's third UID (Unique Identifier). Some extra capabilities
are required if the program wishes to have access to another program's private
area. Also it is worth noting that P.I.P.S. does not allow file descriptors
in private directories to be inherited. </p>

<div class="section" id="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-A4D36A90-314A-5EEA-A025-7135A9A60177"><a name="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-A4D36A90-314A-5EEA-A025-7135A9A60177"><!-- --></a><h2 class="sectiontitle">Capabilities
supported for P.I.P.S. APIs</h2> <p>The following table provides details
of the P.I.P.S. APIs and the capabilities that may need to be added. </p>
 
<div class="tablenoborder"><a name="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-4DF992C4-AE1E-56BC-B97F-BC411D02E3FF"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-4DF992C4-AE1E-56BC-B97F-BC411D02E3FF" frame="border" border="1" rules="all">
<tbody>
<tr>
<td class="cellrowborder" valign="top"><p> <strong>P.I.P.S. API</strong>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <strong>Capabilities required</strong>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <a href="GUID-D926453F-9D3F-3604-B6E1-9782C3779DDF.html"><span class="apiname">lstat()</span></a>, <a href="GUID-A89FA772-80F2-39E8-AEFB-B9B4E833A1FA.html"><span class="apiname">stat()</span></a>, <a href="GUID-BEE67FC6-54F4-3711-B367-87EF751472A7.html"><span class="apiname">tmpnam()</span></a>, <a href="GUID-C8EA1CF0-D221-3A9D-84B1-5ED8A6DA933F.html"><span class="apiname">tempnam()</span></a>, <a href="GUID-875BC63B-B23B-374C-A932-24701D8C8220.html"><span class="apiname">wstat()</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">None</samp> if the path is not in the protected /sys/
or /private/ directory. </p>
 <p> <samp class="codeph">AllFiles</samp> if the path contains
the protected /sys/ directory. </p>
 <p> <samp class="codeph">AllFiles</samp> if the path
contains the protected /private/ directory using another program's Secure
Identifier. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <a href="GUID-A9330ABF-23DD-3DAE-BCB5-1B2448EF34E3.html"><span class="apiname">open()</span></a>, <a href="GUID-FA8FEC6E-622F-3F06-B15F-7B9769616149.html"><span class="apiname">wfopen()</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">None</samp> if the path is not in the protected /sys/
or /private/ directory. </p>
 <p> <samp class="codeph">AllFiles</samp> if the path contains
the protected /sys/ directory and read mode is specified. </p>
 <p> <samp class="codeph">TCB</samp> if
the path contains the protected /sys/ directory and write mode is specified.
P.I.P.S. libraries do not have the TCB capability, and so it is not possible
to write to this directory. </p>
 <p> <samp class="codeph">AllFiles</samp> if the path
contains the protected /private/ directory using another program's Secure
Identifier. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <a href="GUID-9AE17F91-D9F7-3DD5-8D6C-AC6BDD0BBF7D.html"><span class="apiname">access()</span></a>, <a href="GUID-96A8BB01-07F4-3701-8390-858E47B11068.html"><span class="apiname">chdir()</span></a>, <a href="GUID-F5DE6335-1C8B-31F6-A70F-DCA12C050836.html"><span class="apiname">chmod()</span></a>, <a href="GUID-7AE53522-A016-3CF2-9394-38A65A628FDF.html"><span class="apiname">creat()</span></a>, <a href="GUID-D441A5DF-C7B8-38A7-B386-62DB47D95DE2.html"><span class="apiname">fchmod()</span></a>, <a href="GUID-A745D453-FD35-36AC-B2A6-1B118FC0ECE7.html"><span class="apiname">ftok()</span></a>, <a href="GUID-5EA72F64-E826-3B15-9468-902BD57F6AA7.html"><span class="apiname">mkdir()</span></a>, <a href="GUID-F4749DAA-1B29-3D1D-A3AA-0D52B851E501.html"><span class="apiname">mkfifo()</span></a>, <a href="GUID-28E8C6E1-93F6-326B-8B10-6EFCC19A71B8.html"><span class="apiname">rename()</span></a>, <a href="GUID-0A4E12DC-191F-3093-8FCC-1F09BC057EF8.html"><span class="apiname">rmdir()</span></a>, <a href="GUID-D8A63E18-878B-3AD4-863D-269E974ED8B2.html"><span class="apiname">utimes()</span></a>, <a href="GUID-7F392C01-C20D-3625-A964-F41BB925A5CC.html"><span class="apiname">waccess()</span></a>, <a href="GUID-13413FF7-5CAB-38DB-97FC-A4E45E076696.html"><span class="apiname">wchdir()</span></a>, <a href="GUID-48438139-E717-3E86-ACD4-E81D6482B659.html"><span class="apiname">wcreat()</span></a>, <a href="GUID-F173F204-ECCE-3FC8-B3BF-4F58513A7D0C.html"><span class="apiname">wmkdir()</span></a>, <a href="GUID-16518B7B-C146-32E6-9360-A4EEF268CA98.html"><span class="apiname">wrmdir()</span></a>, <a href="GUID-F33C1971-5E72-331A-B699-CC32D36B7584.html"><span class="apiname">wunlink()</span></a>, <a href="GUID-5F612E71-362E-37D8-A457-8AF1AB545496.html"><span class="apiname">unlink()</span></a>, <a href="GUID-234DE8F8-1D41-3BE0-980B-37ACF281DDA6.html"><span class="apiname">utime()</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">None</samp> if the path is not in the protected /sys/,
/resource/ or /private/ directory. </p>
 <p> <samp class="codeph">TCB</samp> if the path
contains the protected /sys/ or /resource/ directory. P.I.P.S. libraries do
not have the TCB capability, and so it is not possible to write to this directory. </p>
 <p> <samp class="codeph">AllFiles</samp> if
the path contains the protected /private/ directory using another program's
Secure Identifier. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top"><p> <a href="GUID-8B08EBCD-937C-3704-8E6A-08A45881F70D.html"><span class="apiname">accept()</span></a>, <a href="GUID-DD961B2B-AAEE-3A83-81E2-0B9F7BE58BE6.html"><span class="apiname">bind()</span></a>, <a href="GUID-B1E46044-267D-3F35-9712-F1A0D7E8F03F.html"><span class="apiname">connect()</span></a>, <a href="GUID-F923CE02-3850-3494-95FE-094506318F10.html"><span class="apiname">ioctl()</span></a>, <a href="GUID-4BE12A23-0E4D-37CC-891C-6B9931CA2E7A.html"><span class="apiname">recv()</span></a>, <a href="GUID-45F73DAA-7E14-307A-BE55-FFCAEA898A86.html"><span class="apiname">recvfrom()</span></a>, <a href="GUID-0D328B4A-15D0-36EB-B92E-E285A11F1ABC.html"><span class="apiname">send()</span></a>, <a href="GUID-2E55A695-EE36-37F3-A088-2BA282B8EA9F.html"><span class="apiname">sendto()</span></a>, <a href="GUID-CCE203C4-7985-3FF7-829B-CF3873D62098.html"><span class="apiname">recvmsg()</span></a>, <a href="GUID-F580A280-7797-3D55-B1C3-1CACC0429830.html"><span class="apiname">sendmsg()</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top"><p> <samp class="codeph">None</samp> if the descriptor does not refer to a socket. </p>
 <p> <samp class="codeph">NetworkServices</samp> if
the descriptor is a socket. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 </div>

<div class="example"><h2 class="sectiontitle">A P.I.P.S. platform security example</h2> <p>The following
code illustrates how P.I.P.S. conforms to Data Caging rules while creating
a file with and without capabilities. </p>
 <pre class="codeblock" id="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-680669E9-0261-5A1C-9A20-67A5148C440B"><a name="GUID-5777D16D-71FA-5929-9557-4C532C59ECBF__GUID-680669E9-0261-5A1C-9A20-67A5148C440B"><!-- --></a>#include &lt;stdio.h&gt;

int main(int argc, char *argv[])
{
   FILE* file;
   
   //Create the file in another program's private directory
   file = fopen("/private/10004902/out.file", "w");
   if (file == NULL)
   {
      int I = errno;
   
      //Error occurred
      printf("\nError creating file, error=%d", errno);    
      return EXIT_FAILURE;
   }
   else
   {
      //File created
      fprintf(file, "Sample File Output");
      fclose(file);
      
      printf("\nFile created");    
   }

   return EXIT_SUCCESS;
}</pre>
 <p>If no capabilities are provided, the code will print out
an error message due to the attempted use of <a href="GUID-64886CC6-072F-3542-855A-5D733FC761E8.html"><span class="apiname">fopen()</span></a> on
another program's <span class="filepath">/private/</span> directory. The error code
displayed will be <a href="GUID-3148D2B9-FF17-35E1-A74B-50EBF1B79679.html"><span class="apiname">EACCESS</span></a>, showing a security error. </p>
 <p>If,
however, the <samp class="codeph">AllFiles</samp> capability is listed in the program's
MMP file, the file will be generated successfully. </p>
 <p> <strong>Note:</strong> Here, <samp class="codeph">AllFiles</samp> represents
a system capability and is not something your application should require or
use, in most of the cases. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-2016EF4B-F001-5EB2-8095-6048582511D6.html">P.I.P.S. Concepts</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>