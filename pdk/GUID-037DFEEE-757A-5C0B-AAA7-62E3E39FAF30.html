<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Migrating from Feature Registry to Feature Manager"/>
<meta name="abstract" content="Provides detailed instructions for migrating Feature registry to Feature Manager runtime and buildtime."/>
<meta name="description" content="Provides detailed instructions for migrating Feature registry to Feature Manager runtime and buildtime."/>
<meta name="DC.Relation" scheme="URI" content="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F55EAA3A-5D30-5983-9053-7C3935D99802.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B71AC5E3-8AA8-55AD-916F-9E873926011B.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Migrating from Feature Registry to Feature Manager</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2859830 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html">Feature Management</a> &gt; </div>
<h1 class="topictitle1">Migrating from Feature Registry to Feature Manager</h1>
<div><p>Provides detailed instructions for migrating Feature registry to Feature Manager runtime and buildtime. </p>
<ul><li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-E0D11AEA-EFA1-5D4D-9BF2-6B067DBCC5D3"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-E0D11AEA-EFA1-5D4D-9BF2-6B067DBCC5D3"><!-- --></a><p><a href="GUID-D5FE0A98-4529-522A-825C-2444E78B9325.html#GUID-D5FE0A98-4529-522A-825C-2444E78B9325__GUID-3F4DFEAF-1EFA-5E73-A582-7C5308361F9E">Migrating to Feature Manager runtime APIs</a>  </p>
 </li>
 <li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-68E62080-C93B-5653-81C1-B7D73B136954"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-68E62080-C93B-5653-81C1-B7D73B136954"><!-- --></a><p><a href="GUID-4B2E38E1-323C-5523-BA20-B01053D4302B.html">Migrating to Feature Manager buildtime tooling</a>  </p>
 </li>
 </ul>
 <p id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-D5FE0A98-4529-522A-825C-2444E78B9325"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-D5FE0A98-4529-522A-825C-2444E78B9325"><!-- --></a>   </p>
 <div class="section" id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-3F4DFEAF-1EFA-5E73-A582-7C5308361F9E-GENID-1-12-1-27-1-1-4-1-1-4-1-3-3"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-3F4DFEAF-1EFA-5E73-A582-7C5308361F9E-GENID-1-12-1-27-1-1-4-1-1-4-1-3-3"><!-- --></a><h2 class="sectiontitle">Migrating to Feature Manager runtime APIs</h2> <p>FeatureRegistry queries the presence of a feature with the functions QuerySupport() and QuerySupportS() which are now deprecated. The publishPartner version of Feature Manager implements the corresponding functionality with a choice of function calls, either static or dynamic. The SDK version only provides the static function calls. </p>
 
<div class="tablenoborder"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-93462398-D94F-5D22-8315-9FC7DB736274"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-93462398-D94F-5D22-8315-9FC7DB736274" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d53438e46">Old</th>
 <th class="cellrowborder" valign="top" id="d53438e49">New</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d53438e46 "><p>TInt RFeatureRegistry:: QuerySupport(TUid aFeatureUid) </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e49 "><p>TInt RFeatureControl:: FeatureSupported( TUid aFeature ) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e46 "><p>TInt RFeatureRegistry:: QuerySupport(TUid aFeatureUid, TUint32&amp; aInfo); </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e49 "><p>TInt RFeatureControl::FeatureSupported( TFeatureEntry&amp; aFeature ) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e46 "><p>TInt static RFeatureRegistry:: QuerySupportS(TUid aFeatureUid); </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e49 "><p>TBool static CFeatureDiscovery ::IsFeatureSupportedL( TUid aFeature ) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e46 "><p>TInt static RFeatureRegistry:: QuerySupportS(TUid aFeatureUid); </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e49 "><p>Dynamic calls to the Open(), FeatureSupported() and Close() functions of an RFeatureControl object. </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e46 "><p>TInt static RFeatureRegistry:: QuerySupportS(TUid aFeatureUid, TUint32&amp; aInfo); </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e49 "><p>TBool static CFeatureDiscovery ::IsFeatureSupportedL( TUid aFeature ) </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e46 "><p>TInt static RFeatureRegistry:: QuerySupportS(TUid aFeatureUid, TUint32&amp; aInfo); </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e49 "><p>Dynamic calls to the Open(), FeatureSupported() and Close() functions of an RFeatureControl object. </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section" id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-3F4DFEAF-1EFA-5E73-A582-7C5308361F9E-GENID-1-12-1-27-1-1-4-1-1-4-1-3-4"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-3F4DFEAF-1EFA-5E73-A582-7C5308361F9E-GENID-1-12-1-27-1-1-4-1-1-4-1-3-4"><!-- --></a><h2 class="sectiontitle">Migrating to Feature Manager buildtime tooling</h2> <p>The transition from Feature Registry to Feature Manager also involves changes to the process of building ROM. Features can be included in ROM as a partial build with the purpose of upgrading features, or as the corresponding section of a full build: the changes to the procedure are the same either way. </p>
 <p>Two tools are used to automate the process: a new version of the old tool <samp class="codeph">buildrom</samp> and a new tool <samp class="codeph">features</samp>. </p>
 <p>The procedure for building ROM uses a feature database in the form of an an .xml file to specify the features to be included and an .iby file to specify those to be excluded. The structure of these files has been modified slightly. </p>
 <p>The old feature database, called featureUIDs.xml is replaced by a new version called featuredatabase.xml with a new XML structure. The old XML tags correspond to the new ones like this. </p>
 
<div class="tablenoborder"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-6070A53F-F510-58C5-BA9C-75670812FE4D"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-6070A53F-F510-58C5-BA9C-75670812FE4D" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d53438e159">Feature Registry</th>
 <th class="cellrowborder" valign="top" id="d53438e162">Feature Manager</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;featureuids&gt; </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;featuredatabase&gt; </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;features&gt; </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;featureset&gt; </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;features&gt;:: uid </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;feature&gt;::uid </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;features&gt;::name </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;feature&gt;::name </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>None </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;feature&gt;:: statusflags </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;default&gt; </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;defaultfeaturerange&gt; </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;default&gt;:: min </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;defaultfeaturerange&gt;:: loweruid </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;default&gt;:: max </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;defaultfeaturerange&gt;:: higheruid </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d53438e159 "><p>&lt;default&gt;:: support </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d53438e162 "><p>&lt;defaultfeaturerange&gt;:: support </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 <p>The values of the attributes are the same in both versions of the schema. The new attribute statusflags of &lt;feature&gt; takes the mandatory value of 0x00000001. </p>
 <p>You can upgrade your XML feature database in three ways. </p>
 <ul><li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-EF0C9947-688D-5EC1-B04A-76F0C5DCB285"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-EF0C9947-688D-5EC1-B04A-76F0C5DCB285"><!-- --></a><p>by upgrading the file manually in accordance with the equivalences given, </p>
 </li>
 <li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-A237CB02-642C-5D85-8E79-51E469424A26"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-A237CB02-642C-5D85-8E79-51E469424A26"><!-- --></a><p>by calling the tool features to perform the conversion automatically, or </p>
 </li>
 <li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-FC07D4B8-BF7C-52A0-A029-99B62EAAED56"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-FC07D4B8-BF7C-52A0-A029-99B62EAAED56"><!-- --></a><p>by leaving the file as it is and calling the tool buildrom with the flag -fm. </p>
 </li>
 </ul>
 <p>You call the tool features like this: </p>
 <pre class="codeblock" id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-5472CE98-470D-5752-9FCF-DB18956E701C"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-5472CE98-470D-5752-9FCF-DB18956E701C"><!-- --></a>features -c &lt;destination&gt; featureUIDs.xml</pre>
 <p>where -c is a flag forcing the conversion. The output is a file <span class="filepath">featureUIDs_converted.xml</span> in the folder specified at &lt;destination&gt;. </p>
 <p>Whether or not you force the conversion, a call to features will generate the file <span class="filepath">feature.iby</span> and the header file <span class="filepath">featureUIDs.h</span>. </p>
 <p>The .iby file, called <span class="filepath">feature.iby</span>, has a new extended syntax. There are now two new flags which override the default values for the status flags and user-defined data: </p>
 <ul><li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-B386B0A1-3CBA-55EF-91FA-4FFC106F0535"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-B386B0A1-3CBA-55EF-91FA-4FFC106F0535"><!-- --></a><p>SF followed by a value for the status flags of the feature, and </p>
 </li>
 <li id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-836C9FD2-C92A-5192-A6EA-A2B19B724435"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-836C9FD2-C92A-5192-A6EA-A2B19B724435"><!-- --></a><p>UD followed by a value for the user-defined data for the feature. </p>
 </li>
 </ul>
 <p>For example: </p>
 <pre class="codeblock" id="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-D584D3C2-30BD-5948-9F8F-D11023CF59B5"><a name="GUID-037DFEEE-757A-5C0B-AAA7-62E3E39FAF30__GUID-D584D3C2-30BD-5948-9F8F-D11023CF59B5"><!-- --></a>EXCLUDE_FEATURE Fax SF 0x00000008 
FEATURE Print UD 0x00000010 
        </pre>
 <p>The possible values and significance of the status flags are listed in the enumeration <samp class="codeph">TFeatureFlags</samp>. The user-defined data consists of a 32 bit integer. </p>
 <p>If you call the tool <samp class="codeph">buildrom</samp> with the new flag -fm then it will convert <span class="filepath">featureUIDs.xml</span> into <span class="filepath">featuredatabase.xml</span>. This flag replaces the old -f and -fr. </p>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-7495B1C8-38B5-5A09-8231-25B3BBC09F51.html">Feature Management</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-F55EAA3A-5D30-5983-9053-7C3935D99802.html">Feature Registry
                Overview</a></div>
<div><a href="GUID-B71AC5E3-8AA8-55AD-916F-9E873926011B.html">Feature Manager
                Overview</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>