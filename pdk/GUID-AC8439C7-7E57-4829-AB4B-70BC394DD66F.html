<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Hiding item-specific commands in menus"/>
<meta name="abstract" content="The item-specific commands and item-action commands in options menu must be flagged with the EEikMenuItemSpecific and EEikMenuItemAction flags introduced in Symbian^3. This enables the UI framework to hide them in the options menu and display them only in the stylus pop-up menu. The touch down and hold action opens the stylus pop-up menu. Touch down and release performs an action."/>
<meta name="description" content="The item-specific commands and item-action commands in options menu must be flagged with the EEikMenuItemSpecific and EEikMenuItemAction flags introduced in Symbian^3. This enables the UI framework to hide them in the options menu and display them only in the stylus pop-up menu. The touch down and hold action opens the stylus pop-up menu. Touch down and release performs an action."/>
<meta name="DC.Relation" scheme="URI" content="GUID-165EE4DD-C9CA-430B-8377-068A4194716E.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-021E8B9C-4A1B-4C6D-B69E-4337A766C39A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-165EE4DD-C9CA-430B-8377-068A4194716E.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Hiding item-specific commands in menus</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F"><a name="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id1198293 id1198325 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-021E8B9C-4A1B-4C6D-B69E-4337A766C39A.html" title="This section describes the changes required for applications to work on Symbian^3.">Porting applications from S60 5th Edition to Symbian^3</a> &gt; <a href="GUID-165EE4DD-C9CA-430B-8377-068A4194716E.html" title="Symbian^3 enhances the touch interaction by providing support for single-tap.">Modifying applications to support single-tap</a> &gt; </div>
<h1 class="topictitle1">Hiding
item-specific commands in menus</h1>
<div><p>The item-specific commands and item-action commands in options
menu must be flagged with the <samp class="codeph">EEikMenuItemSpecific</samp> and <samp class="codeph">EEikMenuItemAction</samp> flags
introduced in Symbian^3. This enables the UI framework to hide them in the
options menu and display them only in the stylus pop-up menu. The touch down
and hold action opens the stylus pop-up menu. Touch down and release performs
an action.</p>

<div class="section" id="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-29AA14A9-B1E0-4C9A-A5BB-446351A11C87"><a name="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-29AA14A9-B1E0-4C9A-A5BB-446351A11C87"><!-- --></a><p>Actions like opening
a radio button list and virtual input are performed on the first tap. These
actions are normally handled by the UI framework. However, if your application
contains an implementation of its own for handling these actions (for example,
opening a custom component on the second tap) it must be changed to follow
the single-tap style.</p>
          </div>

<a name="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-7-1-1-4-1-4-1-3-2"><!-- --></a><ul id="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-4DD07DEC-6017-4237-BE46-1D69E5FBD744-GENID-1-7-1-1-4-1-4-1-3-2"><li class="stepexpand" id="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-7-1-1-4-1-4-1-3-2-1"><a name="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-9A69E5AD-E938-4092-A8C2-CB65C37C8962-GENID-1-7-1-1-4-1-4-1-3-2-1"><!-- --></a><span>Add the <samp class="codeph">EEikMenuItemAction</samp> flag
to all item-action commands in your options menu resource definitions. Menu
item-action commands are functions that are called during touch down and release
on an item (for example, <strong>Open</strong> action).</span>
 <p>For example, </p>
<pre class="codeblock">/**
 *AppList View menuitems (Counters)
 */
RESOURCE MENU_PANE r_logs_applist_menu
{
 items =
 {
  MENU_ITEM
  {
   command = ELogsCmdMenuOpen;
   txt = qtn_logs_cmd_open;
 //---------------------------------------------------------------
// Include the following line to the list-item action commands
<strong>   flags =EEikMenuItemAction;
</strong>
//----------------------------------------------------------------
  }
 };
}</pre>

</li>
<li class="stepexpand" id="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-192D8B8E-4521-40F0-81F1-7970D2487AF5"><a name="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-192D8B8E-4521-40F0-81F1-7970D2487AF5"><!-- --></a><span>Add the <samp class="codeph">EEikMenuItemSpecific</samp> flag
to all (other than item-action) item-specific commands in options menu resource
definitions.</span>
 <p>For example, </p>
<pre class="codeblock">RESOURCE MENU_PANE r_common_event_menu_send_events
{
 items =
 {
  MENU_ITEM /* Send */
  {
   command = ELogsCmdMenuSendUi;
   txt = qtn_stm_om_send;
//-------------------------------------------------------------------------
//Add the following line to the list item-specific commands
<strong>   flags = EEikMenuItemSpecific;
</strong>//-------------------------------------------------------------------------

  },
  MENU_ITEM /* Clear list */
  { command = ELogsCmdMenuDeleteAll;
   txt = qtn_stm_om_delete_all; }
 };
}</pre>

 <div class="note"><span class="notetitle">Note:</span>  An application view containing <a href="GUID-1AA32C40-CDE0-4627-A634-7C07BB1ED67B.html">forms</a> need
not flag item-specific commands, as forms are always highlighted.</div>

</li>
<li class="stepexpand" id="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-D8010D5A-5703-4AC6-AC05-819689785680"><a name="GUID-AC8439C7-7E57-4829-AB4B-70BC394DD66F__GUID-D8010D5A-5703-4AC6-AC05-819689785680"><!-- --></a><span>If your application
code dynamically adds or removes menu items,  you must change
the flag value of the menu pane using the <a href="GUID-F6168582-DFF1-31DF-87F9-FF2AEC5EE0FF.html#GUID-F6168582-DFF1-31DF-87F9-FF2AEC5EE0FF__GUID-DC63590B-B1CE-3B80-BDFE-6827A381F3AD"><span class="apiname">CEikMenuPane::SetItemSpecific()</span></a> function.</span>
 <p>For example, </p>
<pre class="codeblock">/* Add send message item to menu above position pos */
TInt pos = 0;

/* Returns pointer to menu item */
aMenuPane-&gt;ItemAndPos(ELogsCmdMenuSendUi, pos);

/* Delete marker item from menu */
aMenuPane-&gt;DeleteMenuItem(ELogsCmdMenuSendUi);

/* No need here yet to tailor subitems in SendUi menu */
TSendingCapabilities capabilities(0, 0, 0);
LogsAppUi()
-&gt;
SendUiL()
-&gt;AddSendMenuItemL
 (
  *aMenuPane, pos, /* Position in menupane */ ELogsCmdMenuSendUi, /* Command id to be used for "Send" menu item */
   capabilities
 );
aMenuPane-&gt;SetItemTextL(ELogsCmdMenuSendUi, iSendUiText-&gt;Des());
//-------------------------------------------------------------
// Include the following line to dynamically change the flag value
<strong>
aMenuPane-&gt;SetItemSpecific(ELogsCmdMenuSendUi, ETrue);
</strong>//-----------------------------------------------------------------</pre>

</li>
</ul>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-165EE4DD-C9CA-430B-8377-068A4194716E.html" title="Symbian^3 enhances the touch interaction by providing support for single-tap.">Modifying applications to support single-tap</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>