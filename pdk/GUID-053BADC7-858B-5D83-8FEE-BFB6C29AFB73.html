<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Render Stages Plug-Ins"/>
<meta name="abstract" content="This topic provides information about render stage plug-ins in the non-ScreenPlay variant."/>
<meta name="description" content="This topic provides information about render stage plug-ins in the non-ScreenPlay variant."/>
<meta name="DC.Relation" scheme="URI" content="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-139F9E66-830D-5B94-8674-2F90152EBC4A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-434F690E-738A-51DF-80CC-8A6CC067DA6C.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E7F6DD98-9080-50E9-B071-56247EBBF570.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Render Stages Plug-Ins</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73"><a name="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2384499 id2384574 id2384967 id2385029 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-57A777A3-5D67-5CBB-B224-B7AD422A451B.html" title="The Windowing collection contains two components—the Window Server, which manages the use of the screen by applications, and the Window Server Plugins component.">Windowing Collection</a> &gt; <a href="GUID-0C4B86B5-530A-5839-86C1-46E7ABE281E0.html" title="The Window Server component manages the use of the screen by applications and handles key and pointer events.">Window Server Component</a> &gt; <a href="GUID-5D81D4E2-BE8B-58CE-A745-4F044DE2FB5F.html" title="This section describes the generic Window Server plug-in framework and is mainly aimed at system integrators, UI platform providers and device and hardware manufacturers.">Window Server Plug-in Framework</a> &gt; <a href="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html" title="This section provides information about the generic Window Server plug-in framework in the non-ScreenPlay variant.">The Non-ScreenPlay Plug-in Framework</a> &gt; </div>
<h1 class="topictitle1">Render Stages Plug-Ins</h1>
<div><p>This topic provides information about render stage plug-ins in the non-ScreenPlay variant. </p>
<p> <strong>Variant</strong>: <a href="GUID-F64E6551-670E-5E12-8103-DE504D3EC94F.html" title="ScreenPlay provides improved support for graphics hardware acceleration and some other new features. However, it is possible to use the Symbian platform without enabling ScreenPlay. This is called the non-ScreenPlay variant (sometimes referred to as the non-NGA variant). This topic provides an introduction to the graphics architecture when ScreenPlay is not enabled.">Non-ScreenPlay</a>. <strong>Target audience</strong>: Device creators. </p>
 <div class="p"> <div class="note"><span class="notetitle">Note:</span> In the non-ScreenPlay variant, the render stage interfaces are
        at a prototype stage of development. </div>
  </div>
 <p>For information about render stages in ScreenPlay, see <a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">ScreenPlay Render Stages</a>. </p>
 <div class="section"><h2 class="sectiontitle">Introduction</h2> <p>The primary use case for render stages is transition effects. During transition effects, we want to capture draw operations for transition participants into an offscreen target. Then over a series of frames, we want to perform some transformation of the draw operations, and reintroduce them into the scene. For example, for a disappearing menu, we want to capture the draw operations for the menu, and then perhaps play them back but with different offsets, so that the menu appears to slide off the screen. </p>
 <p>Render stages make it possible to redirect the drawing, so that we can capture the draw operations. They also make it possible to introduce new draw operations into the stream, so that we can play back the transition effect. </p>
 <p>The default render stage does neither of these things, simply rendering the draw ops to the default screen target as expected. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Using render stages </h2> <p>The high level steps to creating and using render stages are shown here: </p>
 <a name="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-B7908ADF-6C53-55C1-977A-3EC221C73F75"><!-- --></a><ol id="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-B7908ADF-6C53-55C1-977A-3EC221C73F75"><li id="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-A3F4F82D-4ABF-537F-82A4-FBA0671D05C4"><a name="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-A3F4F82D-4ABF-537F-82A4-FBA0671D05C4"><!-- --></a><p>Screen creates render stage chain at construction time </p>
 </li>
 <li id="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-3BFDAA17-6392-530A-9FB1-8D0BDF6C1B3C"><a name="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-3BFDAA17-6392-530A-9FB1-8D0BDF6C1B3C"><!-- --></a><p>Render stage performs custom rendering </p>
 </li>
 </ol>
 </div>
 <div class="section"><h2 class="sectiontitle">1. Screen creates render stage chain at construction
          time</h2> <p><strong>Setup in WSINI.INI file </strong> </p>
 <p>The render stages to be used are specified on a per screen basis. </p>
 <p>For example: </p>
 <p> <samp class="codeph">[SCREEN 1] </samp>  </p>
 <p> <samp class="codeph">RENDERSTAGES FLICKERFREE STD</samp>  </p>
 <p>If no render stages are specified, the default render stages will be used. </p>
 <p><strong>Process </strong> </p>
 <p>The following code is required: </p>
 <p> <samp class="codeph">CScreenRedraw::ConstructL()</samp> - this constructs a <a href="GUID-D5E0D138-2206-3DE6-9681-2E7C06E9C0FA.html"><span class="apiname">CScreenRedraw</span></a> object </p>
 <p> <samp class="codeph">WsIniFile-&gt;FindVar(iScreenNumber, “RENDERSTAGES”) </samp> - this returns the list of render stages to be used on this screen </p>
 <p> <strong>For</strong> each specified render stage, call <samp class="codeph">CWsPluginManager::FindNamedImplementation&lt;MWsRenderStageFactory&gt;()</samp> </p>
 <p> <strong>For</strong> each plug-in in the list: </p>
 <ul><li id="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-F2466555-6BBA-53CC-B825-BBDED289E600"><a name="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-F2466555-6BBA-53CC-B825-BBDED289E600"><!-- --></a><p>Call <samp class="codeph">ResolveObjectInterface(“MWsRenderStageFactory”)</samp> on the <a href="GUID-28DEFD88-3AB5-3F94-9A26-27B240294950.html"><span class="apiname">CWsPlugin</span></a> instance. If the plug-in is a render stage factory, it is required to “<samp class="codeph">return this</samp> ”, otherwise “<samp class="codeph">return NULL</samp> ”. </p>
 </li>
 <li id="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-B802F1C8-D2B1-513D-802C-75F1F093E183"><a name="GUID-053BADC7-858B-5D83-8FEE-BFB6C29AFB73__GUID-B802F1C8-D2B1-513D-802C-75F1F093E183"><!-- --></a><p>If an <a href="GUID-DE3DA8CA-437D-33B8-A747-941810A48897.html"><span class="apiname">MWsRenderStageFactory</span></a> pointer is returned, and the plug-in has the correct name, return the <a href="GUID-DE3DA8CA-437D-33B8-A747-941810A48897.html"><span class="apiname">MWsRenderStageFactory</span></a>. </p>
 </li>
 </ul>
 <p> <strong>Endfor</strong> (plug-ins) </p>
 <p>Call <samp class="codeph">MWsRenderStageFactory::CreateStageL() </samp> - this calls into the plug-in’s render stage factory. The implementor of the SPI is required to return a <a href="GUID-B89CEF40-0139-3E6F-803D-F74E2BCB029A.html"><span class="apiname">CWsRenderStage</span></a> * which is pointing to an instance of a custom subclass. </p>
 <p>Connect the output of one stage to the input of the next </p>
 <p> <strong>Endfor</strong> (specified render stages) </p>
 </div>
 <div class="section"><h2 class="sectiontitle">2. Render stage performs custom rendering</h2> <p><strong>Process </strong> </p>
 <p>The following code is required: </p>
 <p> <samp class="codeph">CScreenRedraw::OnAnimation()</samp> - WSERV redraw scheduler causes rendering to occur </p>
 <p>Call <samp class="codeph">CWsRenderStage::Begin() </samp> on the first render stage. This returns the <samp class="codeph">CFbsBitGc*</samp> to be used for drawing </p>
 <p>Issue draw operations to the <samp class="codeph">CFbsBitGc*</samp>  </p>
 <p>The render stage processes the draw operations </p>
 <p>Call <samp class="codeph">CWsRenderStage::End()</samp> on the first render stage </p>
 <div class="p"> <div class="note"><span class="notetitle">Note:</span> Note that WSERV only talks to the first render stage. This may
          in turn talk to the second render stage and so on, but WSERV won’t know
          anything about this.</div>
  </div>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-02432DD8-0C18-59B9-AB1E-E88D000620CA.html" title="This section provides information about the generic Window Server plug-in framework in the non-ScreenPlay variant.">The Non-ScreenPlay Plug-in Framework</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-39CFE2E2-9776-54EE-8E3B-8B85AFF1697A.html" title="This topic provides an introduction to the Window Server plug-in framework in the non-ScreenPlay variant. This framework was introduced in a project to improve the Window Server.">Window Server Plug-in Framework in the
                Non-ScreenPlay Variant </a></div>
<div><a href="GUID-139F9E66-830D-5B94-8674-2F90152EBC4A.html" title="This topic provides information about fader plug-ins in the non-ScreenPlay variant."> Fader Plug-ins</a></div>
<div><a href="GUID-434F690E-738A-51DF-80CC-8A6CC067DA6C.html" title="This topic provides information about the use of miscellaneous plug-ins in the non-ScreenPlay variant.">Miscellaneous Plug-in
                Interfaces</a></div>
<div><a href="GUID-E7F6DD98-9080-50E9-B071-56247EBBF570.html" title="The Window Server Plugins component consists of the ScreenPlay render stage plug-ins.">Window Server Plugins Component</a></div>
<div><a href="GUID-3A2785D4-6185-50C3-8D7E-5D94CD2B7C98.html" title="This section provides information about the render stage framework in ScreenPlay. This framework enables device creators to change the lower layers of the rendering pipeline without changing the Window Server code.">Render Stages</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>