<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="OpenVG Porting Guide"/>
<meta name="abstract" content="This topic provides a guide for implementers of OpenVG on the Symbian platform. It is designed to be used in conjunction with the EGL Porting Guide. It does not specify how to implement OpenVG itself."/>
<meta name="description" content="This topic provides a guide for implementers of OpenVG on the Symbian platform. It is designed to be used in conjunction with the EGL Porting Guide. It does not specify how to implement OpenVG itself."/>
<meta name="DC.Relation" scheme="URI" content="GUID-D88B2B60-5154-5D47-8C8F-012B205B3841.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1B1C6D35-FFDF-55B3-BCE2-DD0295858E49.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C2E24953-3D83-59FB-8B7A-C850474406DB.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D88B2B60-5154-5D47-8C8F-012B205B3841.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E007CDD5-4263-5020-BB6F-B39F44647519.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1A8ED0EB-B3B7-553F-95E3-2120D877966B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7EFBEEAD-3E74-5165-B305-313F7DE4BEB4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-DC3A8785-3ED3-5696-A5ED-AB66588A5C14.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>OpenVG Porting Guide</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2384330 id2386942 id2386957 id2386971 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-975CBC70-81E6-5FA2-80CE-88DD2ABE9595.html">Graphics Guide</a> &gt; <a href="GUID-1B1C6D35-FFDF-55B3-BCE2-DD0295858E49.html" title="The components within the OpenVG collection provide access to OpenVG on the Symbian platform. OpenVG, an open standard developed by the Khronos Group, provides an API for hardware accelerated two-dimensional (2D) vector and raster graphics.">OpenVG Collection</a> &gt; <a href="GUID-C2E24953-3D83-59FB-8B7A-C850474406DB.html" title="The OpenVG Interface component provides a consistent interface to OpenVG on the Symbian platform, enabling cross-device compatibility. The component includes the Khronos-released header files, some Symbian-specific header files and some other files (such as LIB, DEF and MMP files) and UIDs. It does not provide any implementations of the APIs.">OpenVG Interface Component</a> &gt; <a href="GUID-D88B2B60-5154-5D47-8C8F-012B205B3841.html" title="This section provides information for OpenVG implementers working with the Symbian platform. This section should be used in conjunction with the EGL documentation, particularly the EGL Porting Guide.">OpenVG Implementer's Guide</a> &gt; </div>
<h1 class="topictitle1">OpenVG Porting Guide</h1>
<div><p>This topic provides a guide for implementers of OpenVG on the Symbian platform. It is designed to be used in conjunction with the EGL Porting Guide. It does not specify how to implement OpenVG itself. </p>
<p> <strong>Variant</strong>: <a href="GUID-D93978BE-11A3-5CE3-B110-1DEAA5AD566C.html" title="This topic provides an introduction to ScreenPlay and its architecture. ScreenPlay is a new graphics architecture, introduced in Symbian^3 (S^3). ScreenPlay enables device creators to take advantage of improved software performance, hardware acceleration and third party graphics engines. ScreenPlay is sometimes known as the New Graphics Architecture (NGA).">ScreenPlay</a> and <a href="GUID-F64E6551-670E-5E12-8103-DE504D3EC94F.html" title="ScreenPlay provides improved support for graphics hardware acceleration and some other new features. However, it is possible to use the Symbian platform without enabling ScreenPlay. This is called the non-ScreenPlay variant (sometimes referred to as the non-NGA variant). This topic provides an introduction to the graphics architecture when ScreenPlay is not enabled.">non-ScreenPlay</a>. <strong>Target audience</strong>: Device creators. </p>
 <div class="section"><h2 class="sectiontitle"> Required functionality </h2> <p>The implementation DLL must implement all of the standard functions declared in the <a href="GUID-7EFBEEAD-3E74-5165-B305-313F7DE4BEB4.html" title="The OpenVG Interface component defines the interface to OpenVG on the Symbian platform. The component standardizes the source and binary interfaces in order to encourage both source and binary compatibility between Symbian-based OpenVG implementations.">OpenVG Interface component</a> and optionally any implementation-specific functions. Alternatively, implementation-specific functions can be placed into a separate DLL. </p>
 <p>The reserved ordinal entry points are only for use by Symbian in order to avoid future binary compatibility issues. Therefore you must not use them for implementation-specific functions. </p>
 <p>The header files are provided for both OpenVG 1.0 and OpenVG 1.1. Stub <span class="filepath">openvg.h</span> and <span class="filepath">vgu.h</span> files redirect to the OpenVG 1.0 headers by default. However a variability point can be used to expose the OpenVG 1.1 headers. See <a href="GUID-E007CDD5-4263-5020-BB6F-B39F44647519.html" title="The OpenVG Interface component provides header files for both OpenVG 1.0 and OpenVG 1.1. The OpenVG 1.0 headers are used by default. However, there is a variability point that can be used to change the header version. This allows a staged migration from OpenVG 1.0 to OpenVG 1.1.">OpenVG Version Variability Point</a> for information. </p>
 </div>
 <div class="section"><h2 class="sectiontitle"> LIB files</h2> <ul><li id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-12537188-9338-5211-B37C-16E569806D21"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-12537188-9338-5211-B37C-16E569806D21"><!-- --></a><p>The OpenVG specification specifies that the VGU implementation is not guaranteed to be available at runtime. However, Symbian recommends that the VGU library is provided on all smartphones that support OpenVG. Providing the VGU library means that the size of application binaries can be reduced whilst maintaining broad compatibility. </p>
 </li>
 <li id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-C5E4270C-DC8E-5E77-958B-DA914E29735D"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-C5E4270C-DC8E-5E77-958B-DA914E29735D"><!-- --></a><p>The OpenVG implementation must <strong>not</strong> deliver the LIB files, because they are provided by the <a href="GUID-7EFBEEAD-3E74-5165-B305-313F7DE4BEB4.html" title="The OpenVG Interface component defines the interface to OpenVG on the Symbian platform. The component standardizes the source and binary interfaces in order to encourage both source and binary compatibility between Symbian-based OpenVG implementations.">OpenVG Interface component</a>. To prevent LIB files being automatically generated, place the <samp class="codeph">NOEXPORTLIBRARY</samp> directive in the MMP project file that builds the implementation DLL. </p>
 </li>
 <li id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-92A1827C-863E-5C6D-A521-ECD81B8A7FDE"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-92A1827C-863E-5C6D-A521-ECD81B8A7FDE"><!-- --></a><p>The LIB file provides exports all of the OpenVG 1.0 and OpenVG 1.1 functions. See <a href="GUID-E007CDD5-4263-5020-BB6F-B39F44647519.html" title="The OpenVG Interface component provides header files for both OpenVG 1.0 and OpenVG 1.1. The OpenVG 1.0 headers are used by default. However, there is a variability point that can be used to change the header version. This allows a staged migration from OpenVG 1.0 to OpenVG 1.1.">OpenVG Version Variability Point</a> for information about controlling which version is exposed. </p>
 </li>
 <li id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-9C925D94-CB51-5388-AF3F-CEF29F139CBC"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-9C925D94-CB51-5388-AF3F-CEF29F139CBC"><!-- --></a><p>The <span class="filepath">libOpenVG.lib</span> file includes only OpenVG standard functions and no implementation-specific functions. This means that client programs do not link to functions that are specific to a particular OpenVG implementation and therefore allows client program portability to other OpenVG implementations. </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle"> Extension functions</h2> <p>If an OpenVG implementation provides an extension to OpenVG, clients must use the standard EGL function <a href="GUID-5A746F75-8674-3EC4-B37B-6C32CA85FACB.html"><span class="apiname">eglGetProcAddress</span></a> to access such functionality. This mechanism allows client programs to access the extension function regardless of which ordinal position has been chosen by the OpenVG vendor. </p>
 </div>
 <div class="section"><h2 class="sectiontitle"> Internal functions </h2> <p>Sometimes internal access to the OpenVG implementation is required—for example, in a bench marking or regression test for the OpenVG implementation. To avoid tight coupling with a specific implementation in these circumstances, Symbian recommends that the OpenVG implementation provides a separate vendor-specific LIB file containing the internal API calls. Then appropriate clients can link to the internal LIB file when required. This mechanism ensures that normal clients never see the internal API calls. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">UIDs</h2> <p>Symbian platform libraries are given unique identifiers when they are built. The following UIDs have been allocated for OpenVG implementations: </p>
 
<div class="tablenoborder"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-DE1E3606-589B-53B4-AD30-8AA5820E1D23"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-DE1E3606-589B-53B4-AD30-8AA5820E1D23" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d321095e163">Library</th>
 <th class="cellrowborder" valign="top" id="d321095e166">UID2</th>
 <th class="cellrowborder" valign="top" id="d321095e169">UID3</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d321095e163 "><p>OpenVG </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d321095e166 "><p>0x1000008d </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d321095e169 "><p>0x10281AB9 </p>
 </td>
 </tr>
 <tr><td class="cellrowborder" valign="top" headers="d321095e163 "><p>VGU </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d321095e166 "><p>0x1000008d </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d321095e169 "><p>0x10281C47 </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </div>
 <div class="section"><h2 class="sectiontitle"> ROM building </h2> <p>Building a ROM image for a target platform involves using IBY files. There is a generic IBY file called <span class="filepath">openvg.iby</span> for the OpenVG implementation. This must not be replaced. However, you can create an implementation-specific IBY file. This should have a unique name in the format <span class="filepath">openvg_adaptation.iby</span>, where <span class="filepath">adaptation</span> is replaced by the vendor's name. For example: </p>
 <pre class="codeblock" id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-AD5F0116-2874-57EE-B4FD-CBEC4E0B8DE7"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-AD5F0116-2874-57EE-B4FD-CBEC4E0B8DE7"><!-- --></a>// OPENVG_VENDOR.IBY
     
#ifndef __OPENVG_VENDOR_IBY__
#define __OPENVG_VENDOR_IBY__
    
REM OpenVG implementation
    
file=ABI_DIR/BUILD_DIR/libOpenVG.dll   sys/bin/libOpenVG.dll
file=ABI_DIR/BUILD_DIR/libOpenVGU.dll  sys/bin/libOpenVGU.dll
    
#endif
</pre>
 <p>This IBY file must be exported by the <span class="filepath">bld.inf</span> file to the <span class="filepath">/epoc32/rom/include/</span> folder. </p>
 <p>You include the implementation-specific IBY file in a device ROM configuration file by defining the <a href="GUID-D889F9B1-74D5-31B4-8BCB-DF94D743D86F.html"><span class="apiname">OPENVG_DRV</span></a> macro in a top-level OBY file or in the <samp class="codeph">buildrom</samp> command. For example, in a top-level OBY file, declare the following: </p>
 <pre class="codeblock" id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-3213BBE7-F554-5215-94AD-5A1322A3CC46"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-3213BBE7-F554-5215-94AD-5A1322A3CC46"><!-- --></a>#define OPENVG_DRV &lt;openvg_vendor.iby&gt;</pre>
 <p>See <a href="GUID-946E64D6-3E5D-5264-AD5D-29D3AD296543.html" title="The Graphics package contains a number of adaptation and customization components. These are called adaptations in this topic. Symbian provides implementations of these components. However, device creators can create their own implementations—for example, to take advantage of the specific hardware that is available in a particular device. This topic describes how to select adaptations for inclusion in a ROM.">Selection of Adaptations</a> for more information. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Example project (MMP) file </h2> <p>The MMP file brings the details described above together. For example: </p>
 <pre class="codeblock" id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-C0A92FD2-C3BD-5686-BBF8-102782029163"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-C0A92FD2-C3BD-5686-BBF8-102782029163"><!-- --></a>#include "/epoc32/include/platform/vg/openvguids.hrh"                // For UIDs
    
// These statements are always required:
target          libOpenVG.dll                               // Destination filename
targettype      dll                                         // Binary build type
uid             KUidSharedDllUidValue KUidOpenVGDllUidValue // File UIDs
capability      All –Tcb
vendorid        &lt;your vendor id in hex&gt;
noexportlibrary
DEFFILE         libegl13U.def
    
// These statements are examples and may vary:
userinclude     ../include                                  // Local include files
systeminclude   /epoc32/include                             // General Symbian include files
    
sourcepath      ../openvg                                   // Relative path to source files
    
source          context.cpp                                 // Source files
source          image.cpp
source          path.cpp
    
library         euser.lib             
library         fbscli.lib                                  // For CFbsBitmap, etc
library         bitgdi.lib                                  // For CFbsBitmapDevice, CFbsBitGc, etc
library         ws32.lib                                    // For RWindow, Direct Screen Access, etc</pre>
 </div>
 <div class="section"><h2 class="sectiontitle"> Example bld.inf file</h2> <p>The <span class="filepath">bld.inf</span> file specifies the exports and the MMP files. For example: </p>
 <pre class="codeblock" id="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-143F988A-BE6F-5B56-8921-F5DD731921C9"><a name="GUID-20419A98-3787-5F10-9CAD-2BC5D7560776__GUID-143F988A-BE6F-5B56-8921-F5DD731921C9"><!-- --></a>PRJ_PLATFORMS
DEFAULT    
    
PRJ_EXPORTS
openvg_vendor.iby  /epoc32/rom/include/openvg_vendor.iby
    
PRJ_MMPFILES
./openvg.mmp
</pre>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-D88B2B60-5154-5D47-8C8F-012B205B3841.html" title="This section provides information for OpenVG implementers working with the Symbian platform. This section should be used in conjunction with the EGL documentation, particularly the EGL Porting Guide.">OpenVG Implementer's Guide</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-E007CDD5-4263-5020-BB6F-B39F44647519.html" title="The OpenVG Interface component provides header files for both OpenVG 1.0 and OpenVG 1.1. The OpenVG 1.0 headers are used by default. However, there is a variability point that can be used to change the header version. This allows a staged migration from OpenVG 1.0 to OpenVG 1.1.">OpenVG Version Variability Point</a></div>
<div><a href="GUID-1A8ED0EB-B3B7-553F-95E3-2120D877966B.html" title="OpenVG is a royalty-free, cross-platform API that provides a low-level hardware acceleration interface for vector graphics libraries such as Flash and SVG. OpenVG is targeted primarily at handheld devices that require portable acceleration of high-quality vector graphics for user interfaces and text on small screen devices—while enabling hardware acceleration to provide fluidly interactive performance at very low power levels.">OpenVG Collection Overview</a></div>
<div><a href="GUID-7EFBEEAD-3E74-5165-B305-313F7DE4BEB4.html" title="The OpenVG Interface component defines the interface to OpenVG on the Symbian platform. The component standardizes the source and binary interfaces in order to encourage both source and binary compatibility between Symbian-based OpenVG implementations.">OpenVG Interface Overview</a></div>
<div><a href="GUID-DC3A8785-3ED3-5696-A5ED-AB66588A5C14.html" title="This is a guide for implementers of EGL working with the Symbian platform.">EGL Porting Guide</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>