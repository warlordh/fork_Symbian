<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Big integers"/>
<meta name="DC.Relation" scheme="URI" content="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-C75726D3-E815-503D-8267-26DA27AD4787"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Big integers</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-C75726D3-E815-503D-8267-26DA27AD4787"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2859177 id2859238 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html">Cryptography overview</a> &gt; <a href="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html" title="This section provides detailed information on encrypting and decrypting data using Symmetric and Asymmetric algorithms supported by Symbian platform.">Encrypting and Decrypting Data</a> &gt; </div>
<h1 class="topictitle1">Big integers</h1>
<div>
<ul>
<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-44E43C1D-81C0-566D-AD44-65046947046D"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-44E43C1D-81C0-566D-AD44-65046947046D"><!-- --></a><p> <a href="GUID-C75726D3-E815-503D-8267-26DA27AD4787.html#GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-E105FD3A-2600-504A-842E-E75ABFB6FD31">What does the big integer library do?</a>  </p>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-F28BE30D-0E28-57A0-8302-BBA5BEF9DA2E"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-F28BE30D-0E28-57A0-8302-BBA5BEF9DA2E"><!-- --></a><p> <a href="GUID-C75726D3-E815-503D-8267-26DA27AD4787.html#GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-324AFDAC-314C-5CC5-B322-E908AA6F53C3">How do I use the big integer library?</a>  </p>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-FEC8841D-52D9-5232-9E56-1E59E2A36DE2"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-FEC8841D-52D9-5232-9E56-1E59E2A36DE2"><!-- --></a><p> <a href="GUID-C75726D3-E815-503D-8267-26DA27AD4787.html#GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-268F2081-4385-5D43-8ADA-4F17BAA4B0BC">Base classes and their derived classes</a>  </p>
 <ul>
<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-3EEF522F-49CE-5131-BD57-501582746773"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-3EEF522F-49CE-5131-BD57-501582746773"><!-- --></a><p> <a href="GUID-C75726D3-E815-503D-8267-26DA27AD4787.html#GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-FE43C9B9-7F50-5311-A2AF-7BA9785A68BC">RInteger class</a>  </p>
 </li>

</ul>
 </li>

</ul>

<div class="section" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-E105FD3A-2600-504A-842E-E75ABFB6FD31"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-E105FD3A-2600-504A-842E-E75ABFB6FD31"><!-- --></a><h2 class="sectiontitle">What does the
big integer library do?</h2><p>Some types of cryptography require the handling
of finite arbitrary length integers. This big integer library attempts to
provide support for that requirement. </p>
<p>It is capable of representing
both negative and positive integers with an absolute value of less than 2^(2<sup>37</sup>). </p>
 </div>

<div class="section" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-324AFDAC-314C-5CC5-B322-E908AA6F53C3"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-324AFDAC-314C-5CC5-B322-E908AA6F53C3"><!-- --></a><h2 class="sectiontitle">How do I use
the big integer library?</h2> <p>There are four categories of exposed APIs: </p>
 <a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-93981CBD-4B6D-5E95-BD02-44492535C517"><!-- --></a><ol id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-93981CBD-4B6D-5E95-BD02-44492535C517">
<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-3374E318-C0C5-5E7D-92D4-0F541F0F6B61"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-3374E318-C0C5-5E7D-92D4-0F541F0F6B61"><!-- --></a><p>Creation of new integers
given some other representation (descriptor, TUint, etc). <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html#GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91__GUID-B5E4DBDC-2C7D-30BD-A3D3-8ADE6265CFD2"><span class="apiname">RInteger::NewL()</span></a>  </p>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-808268B2-FF70-522B-92BD-5B5EA67DA61B"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-808268B2-FF70-522B-92BD-5B5EA67DA61B"><!-- --></a><p>Creation of new integers
given some criteria (range, bitcount, prime). <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html#GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91__GUID-3F59160C-AE87-32A1-8138-C28F977C7607"><span class="apiname">RInteger::NewRandomL()</span></a>, <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html#GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91__GUID-612D2DC1-69D5-3AAE-83AE-6DA5D9983072"><span class="apiname">RInteger::NewPrimeL()</span></a> </p>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-3F7FD594-479E-5631-87DE-95D0AC843A0C"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-3F7FD594-479E-5631-87DE-95D0AC843A0C"><!-- --></a><p>Exporting of previously
created integers to descriptors. <a href="GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16.html#GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16__GUID-2E9955F7-9219-37B0-84EA-62A3F3327EE8"><span class="apiname">TInteger::BufferLC()</span></a>  </p>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-7D5C5166-15D1-5219-B085-E5D5513E50CE"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-7D5C5166-15D1-5219-B085-E5D5513E50CE"><!-- --></a><p>Querying attributes
about the size of a previously created integer. <a href="GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16.html#GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16__GUID-F990DD4D-0886-3BF6-B9EE-D48E086D8C78"><span class="apiname">TInteger::BitCount()</span></a>, <a href="GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16.html#GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16__GUID-11AB504D-2919-3F39-A0B6-EA79B498074B"><span class="apiname">TInteger::ByteCount()</span></a>, <a href="GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16.html#GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16__GUID-99874A2D-37D5-3A05-8275-351E29972FA8"><span class="apiname">TInteger::WordCount()</span></a>. </p>
 </li>

</ol>
 <p>The following code demonstrates how to create an <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> from
a bit string representation of a big integer. </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-A496A62E-0912-5241-871B-073270AA72E0"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-A496A62E-0912-5241-871B-073270AA72E0"><!-- --></a>
//This creates an RInteger from the following binary hexadecimal (base 16)
//descriptor.  Note that the number is written overall in big endian (most
//significant digit is first, least significant digit (ones digit) is last).  
//P.S. The hexadecimal binary descriptor below is the base 16 representation
//of the base 10 number 123456789012345678901234567890.
RInteger integer = RInteger::NewL(_L8("18EE90FF6C373E0EE4E3F0AD2")); 
CleanupStack::PushL(integer);

//This next line converts the number stored by an RInteger into a binary, big
//endian, hexadecimal descriptor.
HBufC8* descriptor = integer.BufferLC();
CleanupStack::Pop(descriptor);
CleanupStack::PopAndDestroy(integer);
//descriptor is the same as the original _L8 input value now.
</pre>
 <p>For more information on integers, including important memory
management information and additional creation overloads, see <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> in
the Cryptography API Reference material. </p>
 </div>

<div class="section" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-268F2081-4385-5D43-8ADA-4F17BAA4B0BC"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-268F2081-4385-5D43-8ADA-4F17BAA4B0BC"><!-- --></a><h2 class="sectiontitle">Base classes
and their derived classes</h2> <p>The diagram below shows the main classes
used in bigint and which are implemented in <span class="filepath">cryptography.dll</span>.
The color of the boxes indicates the type of Symbian class, that is, <samp class="codeph">M</samp>, <samp class="codeph">C</samp>, <samp class="codeph">R</samp> or <samp class="codeph">T</samp> class. For detailed information on each component see the Cryptography API
Reference material. </p>
 <div class="fignone" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-45174FC0-A4B0-572E-801F-EC6CD5A96127"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-45174FC0-A4B0-572E-801F-EC6CD5A96127"><!-- --></a><span class="figcap">Figure 1. The inheritance diagram above shows the <samp class="codeph">TInteger</samp> and <samp class="codeph">RInteger</samp> classes.</span>

<img src="GUID-598140D3-6C92-5D8E-B204-C7197C6E404D_d0e594546_href.png"/>
</div>
 <p id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-FE43C9B9-7F50-5311-A2AF-7BA9785A68BC"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-FE43C9B9-7F50-5311-A2AF-7BA9785A68BC"><!-- --></a><strong>RInteger class</strong> </p>
<p> <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> is
a <samp class="codeph">TInteger</samp> derived class allowing the construction of variable
length big integers. </p>
<p>This class follows standard <samp class="codeph">R</samp> class
rules. As a quick refresher, the following rules apply to <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> s: </p>
<ul>
<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-07C1504B-0A75-5FAF-BCFC-11E0C6977DD4"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-07C1504B-0A75-5FAF-BCFC-11E0C6977DD4"><!-- --></a><p>You can construct an
empty <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a>. </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-1A9CA02D-E0AA-508D-A870-4572FF3FD4A4"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-1A9CA02D-E0AA-508D-A870-4572FF3FD4A4"><!-- --></a>
RInteger integer;
</pre>
 <p>This is a constructed, but uninitialized integer. It does
not own memory and no operations can be performed on it. It is useful, mostly,
to assign the result of another integer operation to. <samp class="codeph">Push</samp> ing
and then <samp class="codeph">PopAndDestroy</samp> ing an empty <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> works,
although it's not needed. </p>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-CB62909E-910A-5C29-81E1-6DFD17081B6D"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-CB62909E-910A-5C29-81E1-6DFD17081B6D"><!-- --></a><p> <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> s
can be bitwised copied (the default assignment operator and copy constructor
are valid), but you need to be careful you don't lose your original memory
in the process. You should only use the assignment operator on a newly declared
integer. To set an <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> to another value without losing
memory see <samp class="codeph">TInteger::Set()</samp>. </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-ECCE21CF-BCD0-57D3-AF54-766B32939D2C"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-ECCE21CF-BCD0-57D3-AF54-766B32939D2C"><!-- --></a>
RInteger a = anotherInteger; // OK -- you now have two integers that point to the same memory
RInteger b = RInteger::NewL(aDesc); // OK 
b = a; // NOT OK, b's original memory has been lost
</pre>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-D6F49AA0-5C91-5054-A59A-C01757D53AD9"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-D6F49AA0-5C91-5054-A59A-C01757D53AD9"><!-- --></a><p>You own any <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> returned
by value from a <samp class="codeph">TInteger</samp> function. </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-D03786AD-EF19-59B6-B8A9-F91020D14754"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-D03786AD-EF19-59B6-B8A9-F91020D14754"><!-- --></a>
RInteger integer = a.MinusL(b); // We now own integer
CleanupStack::PushL(integer); 
</pre>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-076C4F7F-8EC7-5E5E-833C-DD3E32996DCE"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-076C4F7F-8EC7-5E5E-833C-DD3E32996DCE"><!-- --></a><p>You must call <samp class="codeph">Close()</samp> on
all <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> s that own memory before they go out of scope.
(The cleanup stack can do this for you as well, see further bullet points
below). </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-B018E759-4201-53D2-AA08-04B6F6ABAD04"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-B018E759-4201-53D2-AA08-04B6F6ABAD04"><!-- --></a>
void foo(void)
    {
    RInteger integer = a.TimesL(TInteger::Two);
    //&lt; all sorts of non-leaving code here &gt;
    integer.Close();
    }
</pre>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-0C2577CE-0336-553F-8D7C-9F731BECDDC5"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-0C2577CE-0336-553F-8D7C-9F731BECDDC5"><!-- --></a><p> <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> has
a operator <samp class="codeph">TCleanupItem()</samp> cast function that allows you to
call <samp class="codeph">CleanupStack::PushL(RInteger&amp;)</samp>. Use this in preference
to <samp class="codeph">CleanupClosePushL(RInteger&amp;)</samp>, which although it does
the same thing, generates more code. </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-EFAD6082-D6BB-56C5-91AA-E94C2EAF419B"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-EFAD6082-D6BB-56C5-91AA-E94C2EAF419B"><!-- --></a>
RInteger integer = a.ModularExponentiateL(b, p);
CleanupStack::PushL(integer);
//&lt; all sorts of leaving code here &gt;
CleanupStack::PopAndDestroy(&amp;integer);
</pre>
 </li>

<li id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-6FF78282-6B29-5094-8D6B-C2D0FCDFC9E7"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-6FF78282-6B29-5094-8D6B-C2D0FCDFC9E7"><!-- --></a><p>Be careful calling <a href="GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16.html#GUID-E3D3C429-EA8C-34C1-9D1D-9062BC3D4F16__GUID-F2E2C416-D2F2-31C1-942B-256F74A4075C"><span class="apiname">TInteger::Set()</span></a>.
After calling this, two <a href="GUID-8C8CA735-6B76-3204-AFBF-F95496EDCD91.html"><span class="apiname">RInteger</span></a> s have a pointer to the
same heap-based integer. Calling <samp class="codeph">Close()</samp> on one, either explicitly
or through the cleanup stack, leaves a dangling pointer to the other. You
probably want to use code similar to the following: </p>
 <pre class="codeblock" id="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-7A7EE1D4-8931-5A43-8470-2C7C3E9E83F2"><a name="GUID-C75726D3-E815-503D-8267-26DA27AD4787__GUID-7A7EE1D4-8931-5A43-8470-2C7C3E9E83F2"><!-- --></a>
RInteger first = RInteger::NewL(298728);
CleanupStack::PushL(first);
//&lt; all sorts of leaving code here &gt;
RInteger second.Set(first);
CleanupStack::Pop(first);
CleanupStack::PushL(second);
</pre>
 </li>

</ul>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-268E2151-C758-46BF-86EB-F7D6EE44DBCF.html" title="This section provides detailed information on encrypting and decrypting data using Symmetric and Asymmetric algorithms supported by Symbian platform.">Encrypting and Decrypting Data</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>