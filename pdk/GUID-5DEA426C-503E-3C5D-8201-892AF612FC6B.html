<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="CImCaf"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B"/>

<title>CImCaf</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B"><a name="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2437142 id2415693 id2415698 id2415764 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">CImCaf Class Reference</h1>
	<table class="signature"><tr><td>class CImCaf : public CBase</td></tr></table><div class="section"><div>
			<div class="p">Content Access Framework (CAF) Wrapper class. Provides encapsulation of the CAF functionality required by email MTMs. The in source documentation refers to a CAF session. The following pseudocode clarifies the concept of a CAF session. <pre class="codeblock">BEGIN
	WHILE processing email MIME sections
		Receive MIME header Content-Type
		Pass to CAF with RegisterL(Content-Type)
		IF Registered()
			Add MIME header metadata to CImCaf class using AddToMetaDataL(metadata)
		ENDIF
		Detect start of MIME data section
		If CAF Registered()
			//BEGIN CAF session
			PrepareProcessingL()
			Create file handle for attachment write
			GetSuggestedAttachmentFileName(filename)
			StartProcessing(filename,filepath,file handle)
			WriteData() // Undecoded 1-N buffers in state machine
			Detect end of MIME data section
			WriteDataComplete()
			EndProcessingL()
			//END CAF Session
		ELSE
			Default behaviour
		ENDIF
	ENDWHILE
END</pre>
  </div>

		</div></div>
<div class="section derivation"><h2 class="sectiontitle">Inherits from</h2><ul class="derivation derivation-root"><li class="derivation-depth-0 ">CImCaf<ul class="derivation"><li class="derivation-depth-1 "><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase</a></li></ul></li></ul></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-F040E31D-DF94-37D2-BAD7-66C04D736DED">CImCaf</a>(<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code"/><td><a href="#GUID-4B26FF58-A8F6-3078-BB9F-72D05C7157B9">~CImCaf</a>()</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-2B680131-5E9E-37C5-BBB5-D47C7F8F4118">AddToMetaDataL</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-64E3DE5B-A178-3F20-A1AE-CADB0780C12E">AddToMetaDataL</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;, const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-DCAF5372-3C2A-3817-BE9D-09960A38ED16">Deregister</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-C0DCAF08-0527-3F42-9E1C-6A733493B4C1">EndProcessingL</a>()</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-80A74A6B-E1C1-3543-8887-B3EE826166FB">GetSuggestedAttachmentFileName</a>(<a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC">PrepareProcessingL</a>()</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><a href="#GUID-B467F78E-5DF9-342C-8955-6FB29433AAE1">Processing</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-706E0D41-FF6D-33FB-B028-08821744387D">RegisterL</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><a href="#GUID-6F8249F7-D5E3-307F-9305-BDA8C26A43F5">Registered</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870">StartProcessing</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-681B56F3-B3A2-3147-B25A-FD69451F4A1D.html">CMsvServerEntry</a> &amp;, <a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-5FA1B696-CE30-375B-B872-6F1450CD2E46">WriteData</a>(const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">void</td><td><a href="#GUID-CB019F95-1FA1-3CAF-8A15-83A40B9D28C8">NewFileL</a>()</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-353F487B-D1F9-31B2-8483-F9EE6540A2F5">WriteDataCompleteL</a>()</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Inherited Functions</th></tr></thead><tbody><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::CBase()</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Delete(CBase *)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::Extension_(TUint,TAny *&amp;,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TAny *)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TLeave,TUint)</a></td></tr><tr class="bg"><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::operator new(TUint,TUint)</a></td></tr><tr><td> </td><td><a href="GUID-8F6FE089-E2A8-30F4-B67E-10F286347681.html">CBase::~CBase()</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a>
				</td><td><a href="#GUID-B2863453-1259-32CA-B304-FB7FD6AA06B7">iAttachmentFile</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TBuf</a>&lt; <a href="GUID-83B95166-7DF5-3D6B-B790-F0D5AE3AA08C.html">KMaxPath</a> &gt;</td><td><a href="#GUID-B8A4B7CF-FEDB-3820-8E90-ECA98E31F201">iAttachmentFilePath</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *</td><td><a href="#GUID-26491D6C-6EA6-360A-B2AE-5769F430AEE5">iContentType</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html">TPtrC</a>
				</td><td><a href="#GUID-B36FBD09-E89E-36BC-A531-86371F8DD61B">iDefaultAttachmentFileName</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td><a href="#GUID-EF4209B4-6CFF-3576-85D5-45D7774FD60A">iFsSession</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-E952CB96-3638-321A-B9BC-01C559FB8F4C.html">CImportFile</a> *</td><td><a href="#GUID-4D9DC71F-7986-3835-8C74-0B5EC214AD1D">iImportFile</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-75CF5D9D-11BE-32B8-9F5C-C53976B691DE.html">CMetaDataArray</a> *</td><td><a href="#GUID-1B37A861-F13B-3B52-87B0-293D1307C10D">iMetaData</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-681B56F3-B3A2-3147-B25A-FD69451F4A1D.html">CMsvServerEntry</a> *</td><td><a href="#GUID-60907B06-9C55-30CD-B176-3B064FEAB77E">iServerEntry</a></td></tr><tr><td align="right" valign="top">
					<a href="GUID-0CE549BA-2F8C-3101-AD01-A1BF15C4EAE4.html">CSupplier</a> *</td><td><a href="#GUID-417DBB10-801E-39AC-86FB-C986F418A49D">iSupplier</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-F040E31D-DF94-37D2-BAD7-66C04D736DED"><a name="GUID-F040E31D-DF94-37D2-BAD7-66C04D736DED"><!-- --></a>
		<h2 class="topictitle2">CImCaf(RFs &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C</td><td>CImCaf</td><td>(</td><td><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td>aFs</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>Construct with callers file session handle. c'tor </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp; aFs</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-4B26FF58-A8F6-3078-BB9F-72D05C7157B9"><a name="GUID-4B26FF58-A8F6-3078-BB9F-72D05C7157B9"><!-- --></a>
		<h2 class="topictitle2">~CImCaf()</h2>
		<table class="signature"><tr><td>IMPORT_C</td><td>~CImCaf</td><td>(</td><td>)</td><td>[virtual]</td></tr></table><div class="section"><div>
				<p>d'tor </p>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-2B680131-5E9E-37C5-BBB5-D47C7F8F4118"><a name="GUID-2B680131-5E9E-37C5-BBB5-D47C7F8F4118"><!-- --></a>
		<h2 class="topictitle2">AddToMetaDataL(const TDesC8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>AddToMetaDataL</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aMimeLine</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">Add Mime header metadata to CAF class in preparation for <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC">PrepareProcessingL()</a> Parses a complete unfolded mime header line to extract fields and values Format expected: Fieldxxx: Valuexxx;ParamField=ParamValue If line does not contain "X-" or "Content-" then the method returns without adding data to the class. <dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aMimeLine</td><td>- Mime header data line minus CRLF  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-64E3DE5B-A178-3F20-A1AE-CADB0780C12E"><a name="GUID-64E3DE5B-A178-3F20-A1AE-CADB0780C12E"><!-- --></a>
		<h2 class="topictitle2">AddToMetaDataL(const TDesC8 &amp;, const TDesC8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>AddToMetaDataL</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aField,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aData</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<div class="p">Add Mime header metadata to CAF class in preparation for <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC">PrepareProcessingL()</a> Metadata comprises a field and data pair. For example: aField - "X-Oma-Drm-Separate-Delivery" aData - "12" If field does not contain "X-" or "Content-" then the method returns without adding them to the class. <dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aField</td><td>- Mime header field  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aData</td><td>- Mime field's corresponding data  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-DCAF5372-3C2A-3817-BE9D-09960A38ED16"><a name="GUID-DCAF5372-3C2A-3817-BE9D-09960A38ED16"><!-- --></a>
		<h2 class="topictitle2">Deregister()</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>Deregister</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">Free resources allocated during CAF session <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd><a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-706E0D41-FF6D-33FB-B028-08821744387D">RegisterL()</a> must be called prior to this call. </dd>
</dl>
<dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>

	</div>
<div class="nested1" id="GUID-C0DCAF08-0527-3F42-9E1C-6A733493B4C1"><a name="GUID-C0DCAF08-0527-3F42-9E1C-6A733493B4C1"><!-- --></a>
		<h2 class="topictitle2">EndProcessingL()</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>EndProcessingL</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">Terminate CAF session. Check the attachments under the attachment entry and see if there are any rights receipts. Set the mime type to a unique CAF one if there are. <dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
<dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd>iServerEntry set to the attachment entry which owns the attachment </dd>
</dl>
</div>

			</div></div>

	</div>
<div class="nested1" id="GUID-80A74A6B-E1C1-3543-8887-B3EE826166FB"><a name="GUID-80A74A6B-E1C1-3543-8887-B3EE826166FB"><!-- --></a>
		<h2 class="topictitle2">GetSuggestedAttachmentFileName(TDes &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>GetSuggestedAttachmentFileName</td><td>(</td><td><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp;</td><td>aFileName</td><td>)</td><td>const </td></tr></table><div class="section"><div>
				<div class="p">Prior to <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870">StartProcessing()</a> the CAF agent could provide an initial filename for the CAF session. <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd><a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC">PrepareProcessingL()</a> must be called prior to this call. </dd>
</dl>
<dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-C04A9A0C-DBA7-37DA-B744-54FBF3D544CD.html">TDes</a> &amp; aFileName</td><td>Descriptor for writing CAF agent suggested filename.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-CB019F95-1FA1-3CAF-8A15-83A40B9D28C8"><a name="GUID-CB019F95-1FA1-3CAF-8A15-83A40B9D28C8"><!-- --></a>
		<h2 class="topictitle2">NewFileL()</h2>
		<table class="signature"><tr><td>void</td><td>NewFileL</td><td>(</td><td>)</td><td>[private]</td></tr></table><div class="section"></div>

	</div>
<div class="nested1" id="GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC"><a name="GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC"><!-- --></a>
		<h2 class="topictitle2">PrepareProcessingL()</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>PrepareProcessingL</td><td>(</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">Prepare the CImCAF class for a CAF session. <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd><a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-706E0D41-FF6D-33FB-B028-08821744387D">RegisterL()</a> must be called prior to this call and success checked with a <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-6F8249F7-D5E3-307F-9305-BDA8C26A43F5">Registered()</a> call. </dd>
</dl>
<dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>

	</div>
<div class="nested1" id="GUID-B467F78E-5DF9-342C-8955-6FB29433AAE1"><a name="GUID-B467F78E-5DF9-342C-8955-6FB29433AAE1"><!-- --></a>
		<h2 class="topictitle2">Processing()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>Processing</td><td>(</td><td>)</td><td>const </td></tr></table><div class="section"><div>
				<p>Retrieve processing status for the CAF session. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-706E0D41-FF6D-33FB-B028-08821744387D"><a name="GUID-706E0D41-FF6D-33FB-B028-08821744387D"><!-- --></a>
		<h2 class="topictitle2">RegisterL(const TDesC8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>RegisterL</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aMimeLine</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">Attempt to register a mime content-type with a CAF agent. Success can be checked by a subsequent call to <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-6F8249F7-D5E3-307F-9305-BDA8C26A43F5">Registered()</a>. <dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aMimeLine</td><td>MIME Content-Type for possible interest by a CAF agent. For example - application/vnd.oma.drm.rights+xml  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-6F8249F7-D5E3-307F-9305-BDA8C26A43F5"><a name="GUID-6F8249F7-D5E3-307F-9305-BDA8C26A43F5"><!-- --></a>
		<h2 class="topictitle2">Registered()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>Registered</td><td>(</td><td>)</td><td>const </td></tr></table><div class="section"><div>
				<p>Check whether <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-706E0D41-FF6D-33FB-B028-08821744387D">RegisterL()</a> succeeded. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870"><a name="GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870"><!-- --></a>
		<h2 class="topictitle2">StartProcessing(const TDesC &amp;, const TDesC &amp;, CMsvServerEntry &amp;, RFile &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>StartProcessing</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aDefaultAttachmentFileName,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aAttachmentFilePath,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-681B56F3-B3A2-3147-B25A-FD69451F4A1D.html">CMsvServerEntry</a> &amp;</td><td>aServerEntry,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp;</td><td>aStartFile</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<div class="p">Set the CAF class variables required to Start the CAF write session. <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd><a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-8EDA1B35-1593-30FF-AC15-CE0530A982CC">PrepareProcessingL()</a> must be called prior to this call </dd>
<dd class="ddexpand">aServerEntry aServerEntry is set to the attachment entry id and remains set there for the duration of the CAF session </dd>
</dl>
<dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aDefaultAttachmentFileName</td><td>Localised default attachment name.  </td></tr><tr class="bg"><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aAttachmentFilePath</td><td>If CAF agent requires extra files, this is the folder/attachment entry path.  </td></tr><tr><td class="parameter"><a href="GUID-681B56F3-B3A2-3147-B25A-FD69451F4A1D.html">CMsvServerEntry</a> &amp; aServerEntry</td><td>Pointer to the message store attachment entry for the CAF session.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a> &amp; aStartFile</td><td>An open File handle for attachment write. Caller can close following this call.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-5FA1B696-CE30-375B-B872-6F1450CD2E46"><a name="GUID-5FA1B696-CE30-375B-B872-6F1450CD2E46"><!-- --></a>
		<h2 class="topictitle2">WriteData(const TDesC8 &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>WriteData</td><td>(</td><td>const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp;</td><td>aData</td><td>)</td><td/></tr></table><div class="section"><div>
				<div class="p">Write a buffer of data to the CAF Agent. <dl class="precondition"><dt class="dlterm">Pre-condition</dt>
<dd>StartProcessingL() must be called prior to this call </dd>
</dl>
<dl class="postcondition"><dt class="dlterm">Post-condition</dt>
<dd>Generates 0-N receipt files under the current message attachment entry. </dd>
</dl>
<dl class="user"><dt class="dlterm"><strong>panic</strong></dt>
<dd>imut 36 </dd>
</dl>
</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-FB97E0A3-352A-316F-97C6-69E4741A8120.html">TDesC8</a> &amp; aData</td><td>Data to write to the CAF agent.  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-353F487B-D1F9-31B2-8483-F9EE6540A2F5"><a name="GUID-353F487B-D1F9-31B2-8483-F9EE6540A2F5"><!-- --></a>
		<h2 class="topictitle2">WriteDataCompleteL()</h2>
		<table class="signature"><tr><td>void</td><td>WriteDataCompleteL</td><td>(</td><td>)</td><td>[private]</td></tr></table><div class="section"></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-B2863453-1259-32CA-B304-FB7FD6AA06B7"><a name="GUID-B2863453-1259-32CA-B304-FB7FD6AA06B7"><!-- --></a>
		<h2 class="topictitle2">
					RFile
				 iAttachmentFile</h2>
		<table class="signature"><tr><td>
					<a href="GUID-BE0804F6-4375-3C8A-8C83-968F510466E0.html">RFile</a>
				</td><td>iAttachmentFile</td><td>[private]</td></tr></table><div class="section"><div>
				<p>If open, handle is used for the next attachment file required by CAF. Initialised by <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870">StartProcessing()</a> </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-B8A4B7CF-FEDB-3820-8E90-ECA98E31F201"><a name="GUID-B8A4B7CF-FEDB-3820-8E90-ECA98E31F201"><!-- --></a>
		<h2 class="topictitle2">
					TBuf&lt; KMaxPath &gt; iAttachmentFilePath</h2>
		<table class="signature"><tr><td>
					<a href="GUID-0B9C8884-6BFF-35E2-AA6F-E4057B85AFCF.html">TBuf</a>&lt; <a href="GUID-83B95166-7DF5-3D6B-B790-F0D5AE3AA08C.html">KMaxPath</a> &gt;</td><td>iAttachmentFilePath</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Stores the filepath for the current CAF session. Initialised by <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870">StartProcessing()</a> </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-26491D6C-6EA6-360A-B2AE-5769F430AEE5"><a name="GUID-26491D6C-6EA6-360A-B2AE-5769F430AEE5"><!-- --></a>
		<h2 class="topictitle2">
					HBufC8 * iContentType</h2>
		<table class="signature"><tr><td>
					<a href="GUID-2A528453-0279-3E47-838C-F8A8D29B88F1.html">HBufC8</a> *</td><td>iContentType</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Store for the MIME Content-type </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-B36FBD09-E89E-36BC-A531-86371F8DD61B"><a name="GUID-B36FBD09-E89E-36BC-A531-86371F8DD61B"><!-- --></a>
		<h2 class="topictitle2">
					TPtrC
				 iDefaultAttachmentFileName</h2>
		<table class="signature"><tr><td>
					<a href="GUID-8FE95467-D48B-3E61-9028-29C0F15F567E.html">TPtrC</a>
				</td><td>iDefaultAttachmentFileName</td><td>[private]</td></tr></table><div class="section"><div>
				<p>The localised default filename . Initialised by <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870">StartProcessing()</a> </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-EF4209B4-6CFF-3576-85D5-45D7774FD60A"><a name="GUID-EF4209B4-6CFF-3576-85D5-45D7774FD60A"><!-- --></a>
		<h2 class="topictitle2">
					RFs &amp; iFsSession</h2>
		<table class="signature"><tr><td>
					<a href="GUID-E263C747-946F-35AA-9F1D-41833BD350FC.html">RFs</a> &amp;</td><td>iFsSession</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Reference to instantiators file server session </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-4D9DC71F-7986-3835-8C74-0B5EC214AD1D"><a name="GUID-4D9DC71F-7986-3835-8C74-0B5EC214AD1D"><!-- --></a>
		<h2 class="topictitle2">
					CImportFile * iImportFile</h2>
		<table class="signature"><tr><td>
					<a href="GUID-E952CB96-3638-321A-B9BC-01C559FB8F4C.html">CImportFile</a> *</td><td>iImportFile</td><td>[private]</td></tr></table><div class="section"><div>
				<p>A CAF class instance. Initialised prior to data write </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-1B37A861-F13B-3B52-87B0-293D1307C10D"><a name="GUID-1B37A861-F13B-3B52-87B0-293D1307C10D"><!-- --></a>
		<h2 class="topictitle2">
					CMetaDataArray * iMetaData</h2>
		<table class="signature"><tr><td>
					<a href="GUID-75CF5D9D-11BE-32B8-9F5C-C53976B691DE.html">CMetaDataArray</a> *</td><td>iMetaData</td><td>[private]</td></tr></table><div class="section"><div>
				<p>A CAF class instance. Stores MIME header attribute/value pairs. Appended by AddToMetaData() </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-60907B06-9C55-30CD-B176-3B064FEAB77E"><a name="GUID-60907B06-9C55-30CD-B176-3B064FEAB77E"><!-- --></a>
		<h2 class="topictitle2">
					CMsvServerEntry * iServerEntry</h2>
		<table class="signature"><tr><td>
					<a href="GUID-681B56F3-B3A2-3147-B25A-FD69451F4A1D.html">CMsvServerEntry</a> *</td><td>iServerEntry</td><td>[private]</td></tr></table><div class="section"><div>
				<p>Points to the Attachment Entry in use for the current CAF session.Initialised by <a href="GUID-5DEA426C-503E-3C5D-8201-892AF612FC6B.html#GUID-D9F91844-6790-3F3E-98E7-72CAB34D7870">StartProcessing()</a> </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-417DBB10-801E-39AC-86FB-C986F418A49D"><a name="GUID-417DBB10-801E-39AC-86FB-C986F418A49D"><!-- --></a>
		<h2 class="topictitle2">
					CSupplier * iSupplier</h2>
		<table class="signature"><tr><td>
					<a href="GUID-0CE549BA-2F8C-3101-AD01-A1BF15C4EAE4.html">CSupplier</a> *</td><td>iSupplier</td><td>[private]</td></tr></table><div class="section"><div>
				<p>A CAF class instance. Used to register Content-type with CAF </p>

			</div></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>