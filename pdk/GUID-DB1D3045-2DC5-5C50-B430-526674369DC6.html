<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Server-side MTM implementation"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B9F2EEE-A5F6-5833-BFC4-3B063EA7EDF2.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B394A824-8745-505E-8429-8B9B6D418387.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-1DF2D6EC-C445-5A0C-80C4-9C46AAA6EE44.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B9F2EEE-A5F6-5833-BFC4-3B063EA7EDF2.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Server-side MTM implementation</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6"><a name="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2404348 id2404397 id2404434 id2404894 id2404902 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5DD1010C-1648-5086-BA80-BC25F3C7A2C4.html">Messaging Middleware Guide</a> &gt; <a href="GUID-C290FA5E-8E41-5D19-B8C1-F88491EE6388.html">Messaging Framework</a> &gt; <a href="GUID-B394A824-8745-505E-8429-8B9B6D418387.html">Message Server and Store</a> &gt; <a href="GUID-1DF2D6EC-C445-5A0C-80C4-9C46AAA6EE44.html" title="This describes the example code for the Message Server and Store component.">Message Server and Store Example Code</a> &gt; <a href="GUID-5B9F2EEE-A5F6-5833-BFC4-3B063EA7EDF2.html">Messaging Text MTM example code</a> &gt; </div>
<h1 class="topictitle1">Server-side MTM implementation</h1>
<div>
<div class="section" id="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-CCF26E0B-12D7-4ECB-B213-F60D0319FAF3"><a name="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-CCF26E0B-12D7-4ECB-B213-F60D0319FAF3"><!-- --></a><h2 class="sectiontitle">Example Code</h2> <p>Click on the following link
to download the example: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/zips/guid-419758e4-b663-48d3-bf21-d9c4bb00da23.zip" target="_blank">TextMTM.zip</a> </p>
<p>Click: <a href="guid-6013a680-57f9-415b-8851-c4fa63356636/guid-419758e4-b663-48d3-bf21-d9c4bb00da23.html">browse</a> to view the example code. </p>
 <p>The files
reproduced here are the main files contained in the examples directory.
Some extra files may be needed to run the examples, and these will
be found in the appropriate examples directory. </p>
<p>The Server-side
Text MTM simulates with the local file system the actions normally
undertaken by a message  transport protocol. A Text service entry
maps a local file directory, from which message header information
can be obtained  (in a similar fashion to POP3), and from which messages
can be get and put.</p>
<p>A file or folder in the mapped directory
is regarded as a remote entry,  and recorded by an entry in the message
index. The name of the file to which a  message corresponds is stored
in the index Description field, and the full  folder path in the index
Details field. No message store is associated with  these remote entries.</p>
<p> Under a local folder, for example, the Inbox, each message has
a message  store that contains a rich text stream representing the
body text.</p>
<p>Messages can be deleted, moved, or copied. When a
local message to  transferred to a Text service, the Server-side MTM
constructs a new file, obtaining its name and location from the index
fields. When the transfer is from the service to a local folder, the
Server-side MTM creates a rich text stream and reads the file text
into it.</p>
<p>The Text server DLL currently supports one MTM-specific
operation, <samp class="codeph">KTXTMTMRefresh</samp>, which refreshes the folder
tree below a service entry.</p>
</div>

<div class="section" id="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-0ED77942-8593-4823-BC09-F615474FCF96"><a name="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-0ED77942-8593-4823-BC09-F615474FCF96"><!-- --></a><h2 class="sectiontitle">Class summary</h2><ul>
<li><p><a href="GUID-681B56F3-B3A2-3147-B25A-FD69451F4A1D.html"><span class="apiname">CMsvServerEntry</span></a></p>
</li>

<li><p><a href="GUID-A4B1F874-27C0-3BB6-9D29-C35C75A5DB98.html"><span class="apiname"> TMsvId</span></a></p>
</li>

<li><p><a href="GUID-6BC8851B-D913-3CE5-B343-5163661E8AD5.html"><span class="apiname">CMsvEntrySelection </span></a></p>
</li>

<li><p><a href="GUID-E79A3B03-F8CB-37DB-A2A8-1C6C4E4D739A.html"><span class="apiname">TParse </span></a></p>
</li>

</ul>
</div>

<div class="section" id="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-2F100CE2-09A7-47C2-B890-993AC9C214D1"><a name="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-2F100CE2-09A7-47C2-B890-993AC9C214D1"><!-- --></a><h2 class="sectiontitle">Move, copy, and delete implementation</h2> <p>Move,
copy, and delete operations all operate on a collection of message
entries, often involving creating new index entries, and deleting
existing ones. This common functionality is provided by the class <samp class="codeph">CTxtCopyMoveBase</samp>. </p>
 <p>A <samp class="codeph">CTxtCopyMoveBase</samp> instance is provided with an object to perform the specific operation
required. The classes <samp class="codeph">CTxtCopyToLocalOp</samp>, <samp class="codeph">CTxtCopyFromLocalOp</samp>, <samp class="codeph">CTxtCopyWithinServiceOp</samp>, <samp class="codeph">CTxtMoveToLocalOp</samp>, <samp class="codeph">CTxtMoveFromLocalOp</samp>, <samp class="codeph">CTxtMoveWithinServiceOp</samp> and <samp class="codeph">CTxtDeleteOp</samp> each define the functionality for a specific operation. </p>
 <p>Each of these classes is derived from <samp class="codeph">CTxtActiveOper</samp>. The move operation classes are derived from their copy counterparts,
and add the extra deletion after copying. </p>
 </div>

<div class="section" id="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-A9F1DBD5-046A-4B4B-A678-B8790B7E14F2"><a name="GUID-DB1D3045-2DC5-5C50-B430-526674369DC6__GUID-A9F1DBD5-046A-4B4B-A678-B8790B7E14F2"><!-- --></a><h2 class="sectiontitle">Service refresh implementation</h2> <p>The contents
of folders under the file system can be changed at any time outside
of the application, by the user or some other application. In order
for these changes to be visible in the messaging application, the
Server-side MTM provides a refresh capability. </p>
 <p>The refresh
capability is provided by the refresher class <samp class="codeph">CTxtRefreshMBox</samp>. It ensures that the current entries accurately reflect the state
of the corresponding file folder, adding or removing entries under
the service as required. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-5B9F2EEE-A5F6-5833-BFC4-3B063EA7EDF2.html">Messaging Text MTM example code</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>