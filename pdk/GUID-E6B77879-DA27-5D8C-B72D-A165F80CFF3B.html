<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Architecture"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BBF6E33F-2E9C-5BB1-8404-87289EC73BFF.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D49696D1-4B84-56B5-909D-A15F599F4B6D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-BBF6E33F-2E9C-5BB1-8404-87289EC73BFF.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Architecture</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2563496 id2563017 id2562829 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-34E7AAF2-EC62-5BF6-B9E7-C7D346BCDF93.html" title="Cellular Baseband Services provide a common interface to telephony services for applications and higher level platform components. The framework is independent of the underlying network services.">Cellular Baseband Services Guide</a> &gt; <a href="GUID-D49696D1-4B84-56B5-909D-A15F599F4B6D.html">Telephony Server</a> &gt; <a href="GUID-BBF6E33F-2E9C-5BB1-8404-87289EC73BFF.html" title="The ETel multimode API enables access to common mobile telephony services for a number of air-interface cellular standards or modes. It also enables access to specialised services within the GSM and CDMA IS-95 standards and provides an API that allows switching between supported modes. Currently, GSM, CDMA (IS-95 and cdma2000) and WCDMA (3GPP rel '99) modes are the fully supported modes.">Multimode Telephony</a> &gt; </div>
<h1 class="topictitle1">Architecture</h1>
<div>
<p>Multimode telephony extends the basic telephony interfaces offered by the
core telephony API. Similar to the Core telephony API, the Multimode API take
client requests and passes them to the ETel server. The server then passes
the request to the telephony driver of the device (<span class="filepath">.TSY</span> module),
which manages communications with the telephony hardware itself. Depending
on the device, the <span class="filepath">.TSY</span> may support a single mode for
example GSM or be multimode. </p>

<p>The following diagram shows these component relationships: </p>

<div class="fignone" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-9006D69B-605B-554C-9836-155062098DE8"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-9006D69B-605B-554C-9836-155062098DE8"><!-- --></a><span class="figcap">Figure 1.            Multimode ETel component architecture          </span>

<img src="GUID-E55B3ACD-4651-5FBD-AC9F-511E5CBCC0C9_d0e48397_href.png"/>
</div>

<p>Much of the functionality defined in Multimode ETel is <em>optional</em>,
meaning that a .TSY is not required to support it. Clients should use the
capability-checking interfaces supplied by Multimode ETel to ensure that such
functionality is available before attempting to use it. </p>

<div class="section" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-68CA7D2A-AB2E-4ADC-9286-337D6D15D34F"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-68CA7D2A-AB2E-4ADC-9286-337D6D15D34F"><!-- --></a><h2 class="sectiontitle">Description</h2> <p>The diagram below shows the key classes
in the Core and Multimode APIs and their inheritance relationships. The top
package is ETel Core, the lower package is Multimode ETel. </p>
 <div class="fignone" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-90475AD2-04DF-5ECE-BA0D-28FD9500E6AB"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-90475AD2-04DF-5ECE-BA0D-28FD9500E6AB"><!-- --></a><span class="figcap">Figure 2.               Multimode ETel key classes            </span>

<img src="GUID-9147F8AF-01B3-5110-8FE7-A6318B5048D9_d0e48418_href.png"/>
</div>
 <p>The key Multimode ETel classes are R-classes. The purpose of these
classes is to communicate with the telephony server. All of the classes shown
derive, directly or indirectly, from <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RTelSubSessionBase</span></a>,
which manages a sub-session to the telephony server. </p>
 <p>The classes are
summarised below: </p>
 <ul>
<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-84A609E9-EF74-5425-9433-7F4F0B9E01FF"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-84A609E9-EF74-5425-9433-7F4F0B9E01FF"><!-- --></a><p> <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobilePhone</span></a> encapsulates
the properties of the phone that do not relate to a particular line or call,
and derives from <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RPhone</span></a> interface of the
core telephony API. It provides the following: </p>
 <ul>
<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-C646F3F5-2D1C-5BE9-8AAC-AB0B3C4C3213"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-C646F3F5-2D1C-5BE9-8AAC-AB0B3C4C3213"><!-- --></a><p>phone capabilities and
status </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-6F8DF782-57C4-58D3-848D-778AFCDB0344"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-6F8DF782-57C4-58D3-848D-778AFCDB0344"><!-- --></a><p>network settings and
status </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-43286FE2-8F5F-5DDE-AC78-9EC92AE5B757"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-43286FE2-8F5F-5DDE-AC78-9EC92AE5B757"><!-- --></a><p>phone security settings </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-F98DF15E-EC2E-5F03-8202-1F3FFCDB1325"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-F98DF15E-EC2E-5F03-8202-1F3FFCDB1325"><!-- --></a><p>phone-wide settings
for a large number of advanced services, such as call forwarding, barring,
waiting, and charge information </p>
 </li>

</ul>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-0E707A36-8304-585A-85B4-AD078AB359AB"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-0E707A36-8304-585A-85B4-AD078AB359AB"><!-- --></a><p> <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobileCall</span></a> encapsulates
information and functionality for a particular call, and derives from <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RCall</span></a> interface of the core telephony. It provides
the following: </p>
 <ul>
<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-14E789FE-386C-54CA-A5C7-6C5311F4AF92"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-14E789FE-386C-54CA-A5C7-6C5311F4AF92"><!-- --></a><p>call capabilities and
status </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-A98E071E-CA6E-524C-BD2A-77A5988376EC"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-A98E071E-CA6E-524C-BD2A-77A5988376EC"><!-- --></a><p>advanced call control,
including transferring calls, and putting calls on-hold </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-99B5AB50-8557-529F-81BA-7E962EA4E413"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-99B5AB50-8557-529F-81BA-7E962EA4E413"><!-- --></a><p>extended functionality
to support data calls, including HSCSD </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-36197642-242C-58C9-AAE4-2A37A7C81854"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-36197642-242C-58C9-AAE4-2A37A7C81854"><!-- --></a><p>status information and
control functions for calls using Call Completion on Busy (CCBS), and User-To-User
Signalling (UUS) services of the GSM. </p>
 </li>

</ul>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-194E1591-BB06-52A6-A983-ED3C466B78FF"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-194E1591-BB06-52A6-A983-ED3C466B78FF"><!-- --></a><p> <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobileLine</span></a> derives
from <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RLine</span></a> interface of the core telephony
API, and provides additional line status information, such as if the line
is on-hold. </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-FA228326-A009-552F-B22E-B4C51A836693"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-FA228326-A009-552F-B22E-B4C51A836693"><!-- --></a><p> <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobileConferenceCall</span></a> provides
functions to manage a collection of calls as a conference call. </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-03219F88-6F34-5828-9DF3-2E43C17D7751"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-03219F88-6F34-5828-9DF3-2E43C17D7751"><!-- --></a><p> <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobileSmsMessaging</span></a>, <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobileBroadcastMessaging</span></a>, and <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobileUssdMessaging</span></a> are
specialised messaging classes, respectively for SMS, Broadcast messages, and
USSD messaging. </p>
 </li>

<li id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-3BCC5489-CB2A-5045-BEAA-CB99C6F9F36F"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-3BCC5489-CB2A-5045-BEAA-CB99C6F9F36F"><!-- --></a><p> <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobilePhoneStore</span></a> and
its derived classes provide management for the various types of information
that can be stored on the phone and the ICC card including SMS messages, and
address book information. </p>
 </li>

</ul>
 <p>The API also provides a number of list classes, derived from <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">CMobilePhoneListBase</span></a>, which allow clients to retrieve
easily groups of settings and information. </p>
 <p><strong>Note on code samples </strong> </p>
 <p>Many of the functions described in this
guide are asynchronous, and are used by an active object. For purposes of
conciseness, the code samples do not use active objects, but, unrealistically,
synchronously wait for the function to return (using <samp class="codeph">User::WaitForRequest()</samp>). </p>
 </div>

<div class="section" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-E065354F-66E6-57B4-A7E7-C4C3A6038939"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-E065354F-66E6-57B4-A7E7-C4C3A6038939"><!-- --></a><h2 class="sectiontitle">High-level
multimode capabilities</h2> <p>A TSY is not required to support all the
functionality defined by Multimode telephony although it supports all core
telephony functionality. Optional functionality is divided by the API into
a number of functional areas, such as, support for Call Waiting, and for SMS
messaging. To query a TSY about the functional areas it supports, use <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RTelServer::IsSupportedByModule()</span></a>. </p>
 <p>Flags
for the functional areas are defined in enumerations. <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">TMultimodeETelV1Api</span></a> defines
flags for the functional areas. <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">TMultimodeETelV2Api</span></a>, <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">TMultimodeETelV3Api</span></a>, and <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">TMultimodeETelV4Api</span></a> define
flags for additional functional areas defined in later releases. </p>
 <p>Functional
areas have individual query functions that offer detailed capability information
on that area. For example, <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobilePhone::GetMultimodeCaps()</span></a> queries
for the phone's supported modes. </p>
 <p><strong>Example </strong> </p>
 <p>The following code tests if the TSY supports multimode
telephony API at all, by querying using the <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">KETelExtMultimodeV1</span></a> flag.
If multimode is supported, then other flags can be used to query for support
for particular areas. </p>
 <p>The code assumes <samp class="codeph">iTsyName</samp> holds
the name of the TSY in use. </p>
 <pre class="codeblock" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-6EE6B824-942D-573E-8197-96DB4D5A483B"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-6EE6B824-942D-573E-8197-96DB4D5A483B"><!-- --></a>TInt funcFlags = KETelExtMultimodeV1;
TBool result = EFalse;
iTelServer.IsSupportedByModule(iTsyName, funcFlags, result);
if (result)
    // if MM supported...
</pre>
 <p><strong>Notes </strong> </p>
 <p>Some <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">TMultimodeETelV1Api</span></a> flags
specify areas common to all modes, others to particular modes. </p>
 </div>

<div class="section" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-BAF464B8-6CFA-5FCB-B488-CD02CD187465"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-BAF464B8-6CFA-5FCB-B488-CD02CD187465"><!-- --></a><h2 class="sectiontitle">Multimode phone
number</h2> <p>A phone number for use with the multimode telephony is stored
as a <a href="GUID-9CE46AD7-722E-3831-A359-C90A350E931D.html"><span class="apiname">RMobilePhone::TMobileAddress</span></a> object.
This has a buffer that stores the phone number and flags indicating the type
of number for example national, international and network specific. It also
stores the numbering plan for example national, ISDN and telex formats in
which the number is stored. </p>
 <p><strong>Example </strong> </p>
 <p>The following code creates an address object to store
an international phone number, formatted using the national number plan. In
this example the UK representation of a Swedish number is used. </p>
 <pre class="codeblock" id="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-77D958D7-0194-5F69-AF3E-6D6B98EA8D23"><a name="GUID-E6B77879-DA27-5D8C-B72D-A165F80CFF3B__GUID-77D958D7-0194-5F69-AF3E-6D6B98EA8D23"><!-- --></a>RMobilePhone::TMobileAddress address;
_LIT(KANumber, "+46 123 4567");
address.iTelNumber = KANumber;    
address.iTypeOfNumber = RMobilePhone::EInternationalNumber;
address.iNumberPlan = RMobilePhone::ENationalNumberPlan;
</pre>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-BBF6E33F-2E9C-5BB1-8404-87289EC73BFF.html" title="The ETel multimode API enables access to common mobile telephony services for a number of air-interface cellular standards or modes. It also enables access to specialised services within the GSM and CDMA IS-95 standards and provides an API that allows switching between supported modes. Currently, GSM, CDMA (IS-95 and cdma2000) and WCDMA (3GPP rel '99) modes are the fully supported modes.">Multimode Telephony</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>