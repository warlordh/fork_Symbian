<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="CryptoSPI Overview"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-679390E8-1DE6-55F0-9A0C-60D58956A1E3.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0CD273A2-434C-52E0-B840-CCF24B2853B8.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D2D17EF9-FFC6-5FBD-A992-55746A12B625.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-38C8F8B0-C259-5B03-A13E-10DBED4071F2.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5857377F-B90D-5149-9485-5919C12B8F13.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>CryptoSPI Overview</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2858558 id2859177 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-315452C2-A1E2-5888-A694-6D2DE73A3F5E.html">OS Security Guide</a> &gt; <a href="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html">Cryptography overview</a> &gt; </div>
<h1 class="topictitle1">CryptoSPI
Overview</h1>
<div>
<div class="section" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-3DAB2F6F-85F6-4AD9-97D9-90B380F8077D"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-3DAB2F6F-85F6-4AD9-97D9-90B380F8077D"><!-- --></a><h2 class="sectiontitle">Introduction</h2> <p>CryptoSPI
(<span class="filepath">cryptospi.dll</span>) is a library introduced in Symbian^3
that manages the selection and loading of cryptographic algorithms. Cryptographic
algorithms enable data to be encrypted and decrypted. The services provided
by CryptoSPI are used by the following components: Certman (Certificate Management),
Software Installation, Secure Communication Protocols (for example, SSL, TLS,
IPSEC), and WTLS. </p>
 <p>CryptoSPI also provides a framework that allows
licensees and partners to implement additional cryptographic algorithms as
plug-ins to CryptoSPI. </p>
 <p>The benefits of CryptoSPI are: </p>
 <ul>
<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-32F02DC3-54AD-5520-AD1B-E85317BB4AFE"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-32F02DC3-54AD-5520-AD1B-E85317BB4AFE"><!-- --></a><p>Plug-ins can use cryptographic
acceleration hardware, which can improve performance and reduce power consumption.
Client applications do not need to know whether an operation is implemented
in software or hardware. </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-B2880123-00C8-58E7-8475-9B3D68059BF4"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-B2880123-00C8-58E7-8475-9B3D68059BF4"><!-- --></a><p>Its architecture allows
new algorithms or modes of operation to be added by licensees without impacting
the existing APIs or client code. </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-AC37BE3F-52BE-56E9-9E34-F25277F51434"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-AC37BE3F-52BE-56E9-9E34-F25277F51434"><!-- --></a><p>The legacy cryptography
libraries (<span class="filepath">cryptography.dll</span>, <span class="filepath">hash.dll</span> and <span class="filepath">random.dll</span>)
have been preserved. Legacy client code can continue to use them without needing
modification or re-compilation. This is achieved via an internal BC layer
that routes legacy function calls to use the new SPI. </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-2085DF2B-E97F-5B4F-B01D-84B76ED5FDE7"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-2085DF2B-E97F-5B4F-B01D-84B76ED5FDE7"><!-- --></a><p>CryptoSPI adds support
for non-extractable keys, which may be used to protect sensitive or high-value
content. </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-F27670BD-8CAA-5EEA-9A82-6AB2C8741145"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-F27670BD-8CAA-5EEA-9A82-6AB2C8741145"><!-- --></a><p>CryptoSPI is more secure
against malicious code than the legacy API, because it does not store any
data, it has no server component and plugins must be located in ROM, so cannot
be replaced or eclipsed. </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-5038F0E4-7FA2-4D9B-8EC0-D6670B4CCFA2"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-5038F0E4-7FA2-4D9B-8EC0-D6670B4CCFA2"><!-- --></a><h2 class="sectiontitle">Architectural
relationships</h2> <p>CryptoSPI was introduced in Symbian^3. Before Symbian^3,
cryptographic algorithms, hash algorithms and random number generation were
implemented by Symbian in <span class="filepath">cryptography.dll</span>, <span class="filepath">hash.dll</span> and <span class="filepath">random.dll</span>.
As shown in the CryptoSPI dependencies diagram, Symbian's legacy implementations
and APIs were retained in Symbian^3, so that existing code does not need to
be modified or recompiled. </p>
 <p> <span class="filepath">softwarecrypto.dll</span> is
a plug-in module implemented by Symbian that provides software-based implementations
of all the cryptographic algorithms that were previously implemented by the
legacy components (<span class="filepath">cryptography.dll</span>, <span class="filepath">hash.dll</span> and <span class="filepath">random.dll</span>).
The legacy APIs have been re-implemented internally to use the new framework
via shim classes. <span class="filepath">hardwarecrypto.dll</span> is an arbitrary
name used in the diagram to represent a licensee-provided plug-in module.
The plug-ins and <span class="filepath">cryptospi.dll</span> have a dependency on <span class="filepath">cryptography.dll</span> because
it implements <a href="GUID-C75726D3-E815-503D-8267-26DA27AD4787.html">big integers</a>. </p>
 <div class="fignone" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-81B9B94D-07B8-512F-8553-0C98F557A21A"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-81B9B94D-07B8-512F-8553-0C98F557A21A"><!-- --></a><span class="figcap">Figure 1.               CryptoSPI dependencies</span>

<img src="GUID-7501D3AC-16FB-58E9-B55C-2598ECCD2FFA_d0e591116_href.png"/>
</div>
 </div>

<div class="section" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-BA9876DF-7166-4336-8BAC-D0B9AB051B47"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-BA9876DF-7166-4336-8BAC-D0B9AB051B47"><!-- --></a><h2 class="sectiontitle">API summary</h2> <p>The <samp class="codeph">CryptoSpi</samp> namespace
is defined for all CryptoSPI classes to differentiate them from the legacy
APIs with the same names. </p>
 <p><strong>CryptoSPI scope</strong> </p>
 <p>CryptoSPI
provides equivalent implementations of all algorithms supported by the legacy
APIs, including hashing and random number generation. The following algorithms
are implemented by Symbian in <span class="filepath">softwarecrypto.dll</span>  </p>
 <p>This
section includes summary details of the following: </p>
 <ul>
<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-B57702C1-A525-5F77-9BB5-D6CCB4E45929"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-B57702C1-A525-5F77-9BB5-D6CCB4E45929"><!-- --></a><p>cryptographic algorithms </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-4148CBE5-77D8-5455-9A84-E6B978EF1017"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-4148CBE5-77D8-5455-9A84-E6B978EF1017"><!-- --></a><p>hash algorithms. </p>
 </li>

<li><p>random number generator</p>
</li>

</ul>
 <p><strong>Cryptographic algorithms</strong> </p>
<ul>
<li><p><strong>Symmetric ciphers</strong> - The following symmetric algorithms are supported: </p>

<div class="tablenoborder"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-EE0B2BF7-BD22-5A03-B4DB-A82D713BB52F"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-EE0B2BF7-BD22-5A03-B4DB-A82D713BB52F" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1719411e183">Symmetric algorithm</th>

<th class="cellrowborder" valign="top" id="d1719411e186">Type</th>

<th class="cellrowborder" valign="top" id="d1719411e189">Specified in:</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1719411e183 "><p>AES (Advanced Encryption Standard) </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e186 "><p>Block cipher </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e189 "><p> <a href="http://csrc.nist.gov/publications/fips/fips197/fips-197.pdf" target="_blank">FIPS-197</a> </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e183 "><p>DES (Data Encryption Standard) </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e186 "><p>Block cipher </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e189 "><p> <a href="http://csrc.nist.gov/publications/fips/fips46-3/fips46-3.pdf" target="_blank">FIPS 46-3</a>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e183 "><p>3DES (Triple Data Encryption Standard) </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e186 "><p>Block cipher </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e189 "><p> <a href="http://csrc.nist.gov/publications/fips/fips46-3/fips46-3.pdf" target="_blank">FIPS 46-3</a>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e183 "><p>RC2-128 </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e186 "><p>Block cipher </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e189 "><p> <a href="ftp://ftp.rfc-editor.org/in-notes/rfc2268.txt" target="_blank">RFC
2268</a>  </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e183 "><p>ARC4 ('alleged' RC4) </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e186 "><p>Stream cipher </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e189 "><p>The internet and a posting to sci.crypt in 1994. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p> <strong> Note:</strong> Algorithm identifiers for MISTY1, MISTY2 and Kasumi
(A5/3) block ciphers are in the cryptography library. These identifiers allow
clients of the cryptography library to request implementations of these algorithms
from the symmetric cipher factory. Symbian does not provide implementations
of these algorithms, so the default behavior is for the factory function to
return an error indicating that there is no implementation available. </p>
 <p><strong>Note</strong>:
Until Symbian^3, the classes implementing the symmetric and asymmetric ciphers
were provided in <span class="filepath">cryptography.dll</span>. </p>
</li>

<li><p><strong>Asymmetric ciphers </strong> - The following asymmetric algorithms are
supported: </p>

<div class="tablenoborder"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-EF226280-A0A6-5CDC-A561-E2CA11D551B0"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-EF226280-A0A6-5CDC-A561-E2CA11D551B0" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1719411e335">Asymmetric algorithm</th>

<th class="cellrowborder" valign="top" id="d1719411e338">What is's used for</th>

<th class="cellrowborder" valign="top" id="d1719411e341">Specified in:</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1719411e335 "><p>RSA PKCS#1 v1.5 </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e338 "><p>Signing data </p>
 <p>Key pair generation </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e341 "><p> <a href="http://www.rsasecurity.com/rsalabs/node.asp?id=2125" target="_blank">PKCS#1</a> v1.5 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e335 "><p>DSA </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e338 "><p>Signing data </p>
 <p>Key pair generation </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e341 "><p> <a href="http://csrc.nist.gov/publications/fips/fips186-2/fips186-2-change1.pdf" target="_blank">FIPS 186-2</a> CR1 </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e335 "><p>Diffie Hellman </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e338 "><p>Key agreement </p>
 <p>Key pair generation </p>
 </td>

<td class="cellrowborder" valign="top" headers="d1719411e341 "><p> <a href="http://www.rsasecurity.com/rsalabs/node.asp?id=2126" target="_blank">PKCS#3</a>  </p>
 </td>

</tr>

</tbody>

</table>
</div>
</li>

<li><p><strong>Hash algorithms</strong> - The following hash algorithms are supported:</p>
<div class="p">
<div class="tablenoborder"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-ABBDB728-AC1E-4C93-949C-401938589A22"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-ABBDB728-AC1E-4C93-949C-401938589A22" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d1719411e442"><p>Hash algorithms</p>
</th>

<th class="cellrowborder" valign="top" id="d1719411e446"><p>Specified in</p>
</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>MD2</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://www.ietf.org/rfc/rfc1319.txt" target="_blank">RFC
1319</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>MD4</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://www.ietf.org/rfc/rfc1320.txt" target="_blank">RFC
1320</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>MD5</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://www.ietf.org/rfc/rfc1321.txt" target="_blank">RFC
1321</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>SHA1</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://www.itl.nist.gov/fipspubs/fip180-1.htm" target="_blank">FIPS
180-1</a> and <a href="http://www.ietf.org/rfc/rfc3174.txt" target="_blank">RFC
3174</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>SHA-224</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf " target="_blank">FIPS 180-2</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>SHA-256</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf " target="_blank">FIPS 180-2</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>SHA-384</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf " target="_blank">FIPS 180-2</a></p>
</td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d1719411e442 "><p>SHA-512</p>
</td>

<td class="cellrowborder" valign="top" headers="d1719411e446 "><p><a href="http://csrc.nist.gov/publications/fips/fips180-2/fips180-2.pdf " target="_blank">FIPS 180-2</a></p>
</td>

</tr>

</tbody>

</table>
</div>
</div>
</li>

<li><p><strong>Hashes in HMAC mode</strong></p>
<ul>
<li><p>MD2</p>
</li>

<li><p>MD4</p>
</li>

<li><p>MD5</p>
</li>

<li><p>SHA1</p>
</li>

<li><p>SHA-224</p>
</li>

<li><p>SHA-256</p>
</li>

<li><p>SHA-384</p>
</li>

<li><p>SHA-512</p>
</li>

</ul>
<p> HMAC mode is specified in <a href="http://www.ietf.org/rfc/rfc2104.txt" target="_blank">RFC 2104</a></p>
</li>

</ul>
 <p><strong>Instantiating algorithms</strong> </p>
 <p>Clients request cryptographic
algorithms using static factory functions. </p>
 <p>For instance, to create
a hash algorithm, use the generic hash factory function <a href="GUID-D2231146-4F0D-3F70-8249-C166375D78DC.html#GUID-D2231146-4F0D-3F70-8249-C166375D78DC__GUID-2C0F6052-76A8-3E45-AF72-F567E1161212"><span class="apiname">CryptoSpi::CHashFactory::CreateHashL()</span></a>,
specifying the UID of the required algorithm. UIDs are defined in <span class="filepath">cryptospidef.h</span>,
for instance <samp class="codeph">KMd2Uid</samp>, <samp class="codeph">KMd5Uid</samp>, <samp class="codeph">KSha1Uid</samp>.
CryptoSPI uses a <a href="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7.html#GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-15969DD8-8F8A-534D-8445-A5CC95112B63">plug-in
selector</a> to search for a plug-in that implements the requested algorithm.
When a plug-in is found, CryptoSPI loads it if required, and calls the function
defined at the relevant ordinal in the plug-in DLL, in this case <samp class="codeph">ECreateHashOrdinal</samp>,
to instantiate a hash object, which is returned to the caller. </p>
 <p><strong>Operation
and padding modes</strong> </p>
 <p>CryptoSPI has been designed to be simpler and
more compact than the API that it replaces. Rather than defining separate
classes to do encryption and decryption, for instance, <samp class="codeph">C3DESEncryptor</samp> and <samp class="codeph">C3DESDecryptor</samp>,
CryptoSPI implements a single, generic symmetric cipher class, <samp class="codeph">CryptoSpi::CSymmetricCipher</samp>.
The characteristics of the algorithm, for instance whether it does encryption
or decryption, the operation mode for block ciphers (<samp class="codeph">KOperationModeECB</samp>, <samp class="codeph">KOperationModeCBC</samp> etc.),
and the padding mode (<samp class="codeph">KPaddingModeSSLv3</samp>, <samp class="codeph">KPaddingModePKCS7</samp> etc.)
are all passed by the client to the factory function as UIDs — see <a href="GUID-5463D9D7-2DE0-3DC1-A415-910636125935.html#GUID-5463D9D7-2DE0-3DC1-A415-910636125935__GUID-43F80501-62A9-3987-B057-852A1E80E483"><span class="apiname">CryptoSpi::CSymmetricCipherFactory::CreateSymmetricCipherL()</span></a>. </p>
 <p>The client can switch the algorithm between modes by setting a
flag, see for example <a href="GUID-699F30D8-BC52-3F83-9188-8CF86B2B0800.html#GUID-699F30D8-BC52-3F83-9188-8CF86B2B0800__GUID-121C4AC5-0D1C-33E7-A534-A4A6AA4DF6FD"><span class="apiname">CSymmetricCipherBase::SetCryptoModeL()</span></a>, <a href="GUID-699F30D8-BC52-3F83-9188-8CF86B2B0800.html#GUID-699F30D8-BC52-3F83-9188-8CF86B2B0800__GUID-22633D2E-2D3A-3B30-91D2-A5A97C5274BC"><span class="apiname">CSymmetricCipherBase::SetPaddingModeL()</span></a> and <a href="GUID-699F30D8-BC52-3F83-9188-8CF86B2B0800.html#GUID-699F30D8-BC52-3F83-9188-8CF86B2B0800__GUID-8D992640-AFCE-3839-AD50-0543AFBE564D"><span class="apiname">CSymmetricCipherBase::SetOperationModeL()</span></a>. </p>
 <div class="p"><ul>
<li><p><strong>Operation modes </strong></p>
<p>Symbian platform provides default software
implementations of the following operation modes: </p>
<ul>
<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-A7FBAF70-5202-5958-866F-9BACB7D3E0B3"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-A7FBAF70-5202-5958-866F-9BACB7D3E0B3"><!-- --></a><p>ECB </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-3C51459C-C660-5F38-AD61-3F954DFF3ECF"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-3C51459C-C660-5F38-AD61-3F954DFF3ECF"><!-- --></a><p>CBC </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-A718E6C7-59D2-5324-8EE3-764E627D7AF4"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-A718E6C7-59D2-5324-8EE3-764E627D7AF4"><!-- --></a><p>CTR (counter) </p>
 </li>

</ul>
<p>They are specified in <a href="http://csrc.nist.gov/publications/nistpubs/800-38a/sp800-38a.pdf" target="_blank">NIST Special Publication 800-38A</a>. </p>
</li>

<li><p><strong>Padding modes </strong></p>
<p>Symbian platform supports the following
padding modes: </p>
<ul>
<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-8BC577C7-6A7E-5A0F-B8C9-1D7E93CE2E80"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-8BC577C7-6A7E-5A0F-B8C9-1D7E93CE2E80"><!-- --></a><p>SSLv3-style padding </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-FA955DDF-CC6C-5CB3-878F-EE319C82EC3F"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-FA955DDF-CC6C-5CB3-878F-EE319C82EC3F"><!-- --></a><p>PKCS#7-style padding </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-93D60F44-17F9-54DD-B947-41D63C943B3F"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-93D60F44-17F9-54DD-B947-41D63C943B3F"><!-- --></a><p>PKCS#1 v1.5 Encryption-style
padding </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-EF45D638-105A-5DDB-AC22-B37CA5868D97"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-EF45D638-105A-5DDB-AC22-B37CA5868D97"><!-- --></a><p>PKCS#1 v1.5 Signature-style
padding </p>
 </li>

</ul>
</li>

</ul>
 </div>
 <p><strong>Asynchronous operation and cancellation</strong> </p>
 <p>The legacy
cryptography library only supports synchronous operations. By enabling cryptographic
acceleration hardware, CryptoSPI supports more advanced use cases. In order
for users to be able to cancel potentially long-running operations such as
the decryption of high-quality audio/visual content, CryptoSPI supports both
synchronous and asynchronous interfaces for each cryptographic operation,
the latter providing a <samp class="codeph">Cancel()</samp> function. </p>
 <p><strong>Note</strong>:
Symbian's software plug-in module (<span class="filepath">softwarecrypto.dll</span>)
only implements the synchronous interfaces. </p>
 <p><strong>Plug-ins</strong> </p>
 <p>A
CryptoSPI plugin DLL can implement zero, one or more algorithms, and may provide
alternative implementations of the same algorithm. The set of plugin DLLs
is defined in a configuration file in ROM (<span class="filepath">Z:\resource\cryptospi\plug-ins.txt</span>).
CryptoSPI will only load plugins stored in ROM (<span class="filepath">Z:\sys\bin\</span>),
so plug-in modules cannot be added by third parties after-market. </p>
 <p> <span class="filepath">cryptospi.dll</span> and
all plug-ins have <samp class="codeph">ALL</samp> capabilities, which ensures that they
can be loaded by client applications with any capabilities. </p>
 <p>The abstract
base class for all cryptographic plug-ins is <a href="GUID-48BB2346-6840-3A26-B43C-4DF70A322B17.html#GUID-48BB2346-6840-3A26-B43C-4DF70A322B17__GUID-8390A214-1E1B-3E8F-A6C9-6030D99F532C"><span class="apiname">CryptoSpi::MPlugin()</span></a>. </p>
 <p>See
also: <a href="GUID-2DA8C6F2-93BD-5D39-9E5A-5FF8B8777CE7.html">How to create
a CryptoSPI plugin</a>. </p>
 <p><strong>UIDs and plug-in characteristics</strong> </p>
 <p>Plug-ins
are identified by three UIDs: </p>
 <ul>
<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-3A357C90-9E3B-5620-93E0-CF45ABD57993"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-3A357C90-9E3B-5620-93E0-CF45ABD57993"><!-- --></a><p>the interface supported,
for instance hash (<samp class="codeph">KHashInterfaceUid</samp>), </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-E2FAF159-EE47-5DE6-AB03-D133D815C690"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-E2FAF159-EE47-5DE6-AB03-D133D815C690"><!-- --></a><p>the algorithm implemented,
for instance MD2 (<samp class="codeph">KMd2Uid</samp>), and </p>
 </li>

<li id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-4EB6A03E-F3C5-5577-8C68-4761C25361E8"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-4EB6A03E-F3C5-5577-8C68-4761C25361E8"><!-- --></a><p>the unique implementation
ID. </p>
 </li>

</ul>
 <p>These three UIDs are part of the plug-in's <em>characteristics</em>.
Plug-in characteristics are defined at compile time as constant data. They
describe the type and capabilities of a plug-in implementation. Some characteristics
are relevant to all plug-in types, for instance the name and UID of the algorithm
implemented, the name of the plug-in vendor and whether the plug-in uses hardware
acceleration. These are termed <em>common characteristics</em> and are defined
in <a href="GUID-48BB2346-6840-3A26-B43C-4DF70A322B17.html#GUID-48BB2346-6840-3A26-B43C-4DF70A322B17__GUID-704C9275-4009-3E20-82F1-FBED2B29976E"><span class="apiname">CryptoSpi::TCommonCharacteristics()</span></a>. Other characteristics
are specific to a particular interface type, for instance the modes of operation
for a symmetric cipher. These are defined in an interface-specific characteristics
class, for instance <a href="GUID-48BB2346-6840-3A26-B43C-4DF70A322B17.html#GUID-48BB2346-6840-3A26-B43C-4DF70A322B17__GUID-CC81BF89-1AA4-3779-B7DB-A01C89041965"><span class="apiname">CryptoSpi::TSymmetricCipherCharacteristics()</span></a>,
that have a <samp class="codeph">TCommonCharacteristics</samp> data member. Plug-in characteristics
can be retrieved using <a href="GUID-ED01CE2C-30E8-344F-B3C9-895FA576D33F.html#GUID-ED01CE2C-30E8-344F-B3C9-895FA576D33F__GUID-8D93089E-1F97-376B-8CC0-08E0E34158F4"><span class="apiname">CCryptoBase::GetCharacteristicsL()</span></a>. </p>
 <p>Plug-ins
may optionally also have 'extended' characteristics. These are set at runtime,
for instance the number of concurrent operations supported by the plug-in,
and can be retrieved using <a href="GUID-87D367F5-0FD8-3BEE-AFB0-B48706902C99.html#GUID-87D367F5-0FD8-3BEE-AFB0-B48706902C99__GUID-720996CA-353D-37A2-A40E-3A18EC8EF4EB"><span class="apiname">CryptoSpi::MPlugin::GetExtendedCharacteristicsL()</span></a>. </p>
 <p id="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-15969DD8-8F8A-534D-8445-A5CC95112B63"><a name="GUID-BCDCB147-865F-58B0-816F-5FBF0E7CCDD7__GUID-15969DD8-8F8A-534D-8445-A5CC95112B63"><!-- --></a><strong>Selection rules</strong> </p>
<p>Symbian
has implemented a plug-in selector, <a href="GUID-48BB2346-6840-3A26-B43C-4DF70A322B17.html#GUID-48BB2346-6840-3A26-B43C-4DF70A322B17__GUID-2E6D755A-2170-3A7A-8F89-1748CE1FEBDE"><span class="apiname">CryptoSpi::CLegacySelector()</span></a>,
which is used both by the legacy API and by default by CryptoSPI to select
algorithms implemented in <span class="filepath">softwarecrypto.dll</span>. In other
words, by default, CryptoSPI and the legacy API use the same algorithm implementations.
The legacy selector works by loading DLLs one by one according to their order
in the ROM configuration file until a suitable implementation is found. </p>
 <p>As
an alternative to using the default selector, clients can specify a rule-based
selector (<a href="GUID-48BB2346-6840-3A26-B43C-4DF70A322B17.html#GUID-48BB2346-6840-3A26-B43C-4DF70A322B17__GUID-DAA57D69-9E75-3333-9227-76D7B0719B7E"><span class="apiname">CryptoSpi::CRuleSelector()</span></a>). This causes CryptoSPI
to re-generate the list of plug-ins, according to a set of selection rules.
The API is described in <a href="GUID-5857377F-B90D-5149-9485-5919C12B8F13.html">How
to use a rule-based selector</a>. </p>
 <p>In general, it is recommended
that applications should not specify selection rules unless it is critical
to the operation of the application. The preferred approach is to use the
plugin chosen by the default selector, which can be assumed to provide good
performance for the most common use cases. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-5B112A34-1CBA-5B28-A941-27847FC1D30A.html">Cryptography overview</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-0CD273A2-434C-52E0-B840-CCF24B2853B8.html">Generating
random bytes</a></div>
<div><a href="GUID-D2D17EF9-FFC6-5FBD-A992-55746A12B625.html">Basic encryption
and decryption using a symmetric cipher</a></div>
<div><a href="GUID-38C8F8B0-C259-5B03-A13E-10DBED4071F2.html">Signing and
verification</a></div>
<div><a href="GUID-5857377F-B90D-5149-9485-5919C12B8F13.html">How to use
a rule-based selector</a></div>
</div>
<div class="relinfo"><strong>Related information</strong><br/>
<div><a href="GUID-679390E8-1DE6-55F0-9A0C-60D58956A1E3.html">Hash (message
digest) algorithms</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>