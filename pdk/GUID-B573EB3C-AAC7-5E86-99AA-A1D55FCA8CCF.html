<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Configuring the MTP Framework for Different Protocols"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3DFC21DA-D9F2-572C-9A6A-9AF1F55009CB.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-A0D4B6EC-8FA7-5FD9-AE5A-E811D876D585.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-98ACB508-ED32-5193-9E30-BCDF7E921788.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0463683C-9E9A-55ED-836D-0826E8EFCA73.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-3DFC21DA-D9F2-572C-9A6A-9AF1F55009CB.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Configuring the MTP Framework for Different Protocols</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2534806 id2534929 id2534938 id2534958 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-A0D4B6EC-8FA7-5FD9-AE5A-E811D876D585.html">Remote Connectivity Guide</a> &gt; <a href="GUID-98ACB508-ED32-5193-9E30-BCDF7E921788.html">MTP Frameworks</a> &gt; <a href="GUID-0463683C-9E9A-55ED-836D-0826E8EFCA73.html">MTP Framework</a> &gt; <a href="GUID-3DFC21DA-D9F2-572C-9A6A-9AF1F55009CB.html">MTP Framework Tutorials</a> &gt; </div>
<h1 class="topictitle1">Configuring the MTP Framework for Different Protocols</h1>
<div><p>This section describe how to configure the MTP framework and data providers to operate in MTP, PTP and PictBridge modes. </p>
 <div class="section"><p>Before you start, you must understand: </p>
 <ul><li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-662A7994-7C77-5856-A659-E224E4D5B8E9"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-662A7994-7C77-5856-A659-E224E4D5B8E9"><!-- --></a><p>Basic knowledge of MTP, PTP and PictBridge. </p>
 </li>
 <li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-3591EFE1-727F-53D6-87F5-4D1591743A2F"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-3591EFE1-727F-53D6-87F5-4D1591743A2F"><!-- --></a><p> <a href="GUID-F1DD8800-389C-5A88-A5EB-138359EF7DC5.html">Symbian MTP Architecture</a>. </p>
 </li>
 <li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-5936156D-42FC-5BF5-8CCD-1C4EC20A59AF"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-5936156D-42FC-5BF5-8CCD-1C4EC20A59AF"><!-- --></a><p> <a href="GUID-16218C7E-B927-5729-9A05-680A3D0D8BDE.html">Symbian MTP data provider configuration files</a>. </p>
 </li>
 <li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-6BDD80BF-9DAB-5672-A895-0F78365B6A76"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-6BDD80BF-9DAB-5672-A895-0F78365B6A76"><!-- --></a><p><a href="GUID-A81C65CF-CF4E-571C-8080-9D387F46AAD6.html" title="This section explains the publish and subscribe concepts.">Symbian Publish and Subscribe events</a>. </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle">Introduction</h2> <p>The Symbian MTP implementation also supports the interoperability with hosts that only support Picture Transfer Protocol (PTP) or PictBridge. PTP is useful for transferring images files from digital cameras to computers and PictBridge is useful in printing images directly from digital cameras to a printer. </p>
 <p>The required mode must be selected before the MTP framework is started. The framework retrieves the mode using a <a href="GUID-A81C65CF-CF4E-571C-8080-9D387F46AAD6.html" title="This section explains the publish and subscribe concepts.">Publish and Subscribe</a> property. By default, the framework starts in MTP mode. To select a different mode you must reset the Publish and Subscribe property in the MTP client application (RMTPClient) and restart the MTP framework. Starting in the appropriate mode saves file enumeration time and improves performance. The framework can use the mode property to decide which data provider plug-ins to load. </p>
 </div>
 <div class="section"><h2 class="sectiontitle">Procedure</h2> <a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-182BF2F8-2A36-59D5-8117-99B50975F0E4"><!-- --></a><ol id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-182BF2F8-2A36-59D5-8117-99B50975F0E4"><li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-E2C02D54-5A6E-5333-8641-2E208F2D9D83"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-E2C02D54-5A6E-5333-8641-2E208F2D9D83"><!-- --></a><p>Grant the property <samp class="codeph">KUidMTPModeKeyValue</samp> with the same capabilities as <a href="GUID-0F7C98EA-168C-3662-8EB1-81AF174F6305.html"><span class="apiname">RMTPClient</span></a>. </p>
 <p> <samp class="codeph">Capabilities</samp>: <em>All -TCB (that is all the capabilities are included except TCB).</em>  </p>
 </li>
 <li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-2A3EF9A0-DBE3-5097-878A-DD4A2927634A"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-2A3EF9A0-DBE3-5097-878A-DD4A2927634A"><!-- --></a><p>Publish the <samp class="codeph">KUidMTPModeKeyValue</samp> property by definting it and setting its value: </p>
 <pre class="codeblock" id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-E54F1CB4-7A2B-54EC-B55A-9F1EEF94A371"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-E54F1CB4-7A2B-54EC-B55A-9F1EEF94A371"><!-- --></a>TInt err = RProperty::Define (
                                 KUidSystemCategory,
                                 KUidMTPModeKeyValue,
                                 RProperty::EInt);</pre>
 <pre class="codeblock" id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-BC979FC1-3EA9-5911-A273-60DBC0AF4C5B"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-BC979FC1-3EA9-5911-A273-60DBC0AF4C5B"><!-- --></a>TInt err = RProperty::Set (
                                 KUidSystemCategory,
                                 KUidMTPModeKeyValue,
                                 RProperty::EInt);</pre>
 
<div class="tablenoborder"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-4739E4D5-365F-5525-8956-59A35995BFC6"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-4739E4D5-365F-5525-8956-59A35995BFC6" frame="border" border="1" rules="all"><thead align="left"><tr><th class="cellrowborder" valign="top" id="d1667693e119"> Parameter </th>
 <th class="cellrowborder" valign="top" id="d1667693e122"> Description </th>
 <th class="cellrowborder" valign="top" id="d1667693e125">Values</th>
 </tr>
 </thead>
 <tbody><tr><td class="cellrowborder" valign="top" headers="d1667693e119 "><p> <samp class="codeph">aMode</samp>  </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1667693e122 "><p>The new property value of the mode that is set. </p>
 </td>
 <td class="cellrowborder" valign="top" headers="d1667693e125 "><p> <samp class="codeph">KMTPModeMTP</samp> or <samp class="codeph">KMTPModePTP</samp> or <samp class="codeph">KMTPModePictBridge</samp>  </p>
 </td>
 </tr>
 </tbody>
 </table>
</div>
 </li>
 <li id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-AFBBF935-2382-5598-A955-1C2A6DCAF01B"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-AFBBF935-2382-5598-A955-1C2A6DCAF01B"><!-- --></a><p>Configure Data Providers for different modes. </p>
 <p>Data providers are implemented as ECOM plug-ins, which are loaded by the MTP framework. </p>
 <p>You can use the <samp class="codeph">supported_modes</samp> value in the configuration file of a data provider to instruct the MTP framework to load it for one or more specified modes. </p>
 <pre class="codeblock" id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-B5523A0F-A046-5FCF-978A-225E7ECE558B"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-B5523A0F-A046-5FCF-978A-225E7ECE558B"><!-- --></a> supported_modes = KMtpModeMTP|KMtpModePTP|KMtpModePictBridge; </pre>
 <p>For example, if the <samp class="codeph">supported_modes</samp> field in a data providerâ€™s configuration file contains only <samp class="codeph">KMtpModePTP</samp>, then that data provider will be loaded only if the MTP mode is set to PTP when the framework starts up. </p>
 <p>The following example shows the <samp class="codeph">supported_modes</samp> field in the <span class="filepath">mtpImagedp_config.rss</span> configuration file. The Image data provider supports only PTP and PictBridge modes: </p>
 <pre class="codeblock" id="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-2CCB137F-EE1B-5D5D-BC2A-C8A76232192B"><a name="GUID-B573EB3C-AAC7-5E86-99AA-A1D55FCA8CCF__GUID-2CCB137F-EE1B-5D5D-BC2A-C8A76232192B"><!-- --></a>
RESOURCE MTP_DATA_PROVIDER dpConfig
  {
  type = EMtpDataTypeEcom;
  major_version = 1;
  object_enumeration_persistent = 0;
  supported_modes = KMtpModePTP|KMtpModePictBridge; //Supported modes 
  server_name = "";
  server_image_name = "";
  opaque_resource = fileConfig;
  }
</pre>
 <p> <strong>NOTE</strong>: The default data providers are all loaded irrespective of the mode that is set. </p>
 </li>
 </ol>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-3DFC21DA-D9F2-572C-9A6A-9AF1F55009CB.html">MTP Framework Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>