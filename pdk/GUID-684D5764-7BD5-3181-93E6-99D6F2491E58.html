<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MPresenceCacheReader"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-684D5764-7BD5-3181-93E6-99D6F2491E58"/>

<title>MPresenceCacheReader</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-684D5764-7BD5-3181-93E6-99D6F2491E58"><a name="GUID-684D5764-7BD5-3181-93E6-99D6F2491E58"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2366708 id2454385 id2454464 id2897651 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MPresenceCacheReader Class Reference</h1>
	<table class="signature"><tr><td>class MPresenceCacheReader</td></tr></table><div class="section"><div>
			<p>Interface for presence cache reader API. This interface is implemented by the XIMP Framework Presence Cache client. Clients must call <a href="GUID-1344F049-81C4-3D17-AF46-8B5584680ADB.html#GUID-BC9C4F81-AA93-3E24-BCB9-BDEDDDBB2C4D">REComSession::FinalClose()</a> from their destructors. Notice that an xsp id is in the form ovi:<a href="mailto:xyz@example.com">mailto:xyz@example.com</a></p>

			<div class="p">
				<dl class="since">
					
						<dt class="dlterm">Since</dt>

						<dd>S60 v3.2 </dd>

					
				</dl>

			</div>

		</div></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-912F7306-E7A9-32EE-8CE8-BD1223744298">~MPresenceCacheReader</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-CE83EE45-E332-3CA1-90E2-7C3F847E96E9">AllBuddiesPresenceInService</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;, <a href="GUID-21220210-37D0-33D2-A8E2-7C017B95E6A4.html">MPresCacheReadHandler</a> *)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-4ED37ED7-7232-3BFB-935B-2604FF6CA5B7">BuddyCountInAllServices</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-12FE2DA7-5F7B-38A1-B3FF-637680F2757E">BuddyCountInService</a>(const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-4EC00203-E8A6-3EDC-B0ED-D7622E3758BF">CancelRead</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> *</td><td><a href="#GUID-546118BE-2B72-3414-8030-AC63C0D2369F">NewIdentityLC</a>()</td></tr><tr><td align="right" class="code">
					<a href="GUID-684D5764-7BD5-3181-93E6-99D6F2491E58.html">MPresenceCacheReader</a> *</td><td><a href="#GUID-159D4F04-617C-31CA-91BC-7682A041E7E9">NewL</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FDB8BEBA-B14D-31F8-B572-BD07742D9F75.html">MPresenceInfo</a> *</td><td><a href="#GUID-4C398DA0-9268-3C60-877A-B0E5F2A4F65F">PresenceInfoLC</a>(const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp;)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-DDEF12DE-EEFB-3B99-8D5C-A4CB1155E667">ServicesCount</a>()</td></tr><tr class="bg"><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-028EB14E-27BB-393C-B081-5F485EF16B3D">SetObserverForSubscribedNotifications</a>(<a href="GUID-21220210-37D0-33D2-A8E2-7C017B95E6A4.html">MPresCacheReadHandler</a> *)</td></tr><tr><td align="right" class="code">
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td><a href="#GUID-13FDE6DD-1825-352A-BE2D-B685A980EECB">SubscribePresenceBuddyChangeL</a>(const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp;)</td></tr><tr class="bg"><td align="right" class="code">void</td><td><a href="#GUID-D28BEB98-06CD-3A32-9014-A3D5604E5546">UnSubscribePresenceBuddyChangeL</a>(const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-C1E7B9F7-3C74-3E0B-865E-C50AF6A614E0">MPresenceCacheReader</a>()</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Private Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>
				</td><td><a href="#GUID-DF55FE6D-6E73-3344-9EA6-6BBCDDFE50EA">iEcomDtorID</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-C1E7B9F7-3C74-3E0B-865E-C50AF6A614E0"><a name="GUID-C1E7B9F7-3C74-3E0B-865E-C50AF6A614E0"><!-- --></a>
		<h2 class="topictitle2">MPresenceCacheReader()</h2>
		<table class="signature"><tr><td>MPresenceCacheReader</td><td>(</td><td>)</td><td>[protected, inline]</td></tr></table><div class="section"><div>
				<p>Default constructor to zero initialize the iEcomDtorID member. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-912F7306-E7A9-32EE-8CE8-BD1223744298"><a name="GUID-912F7306-E7A9-32EE-8CE8-BD1223744298"><!-- --></a>
		<h2 class="topictitle2">~MPresenceCacheReader()</h2>
		<table class="signature"><tr><td>~MPresenceCacheReader</td><td>(</td><td>)</td><td>[inline, virtual]</td></tr></table><div class="section"><div>
				<p>Public destructor. Objects can be deleted through this interface. </p>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-CE83EE45-E332-3CA1-90E2-7C3F847E96E9"><a name="GUID-CE83EE45-E332-3CA1-90E2-7C3F847E96E9"><!-- --></a>
		<h2 class="topictitle2">AllBuddiesPresenceInService(const TDesC &amp;, MPresCacheReadHandler *)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>AllBuddiesPresenceInService</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aServiceName,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-21220210-37D0-33D2-A8E2-7C017B95E6A4.html">MPresCacheReadHandler</a> *</td><td>aHandler</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[pure virtual]</td></tr></table><div class="section"><div>
				<p>Reads all presence info from cache for a given service. Returns in MPresCacheReadHandler's HandlePresenceReadL.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aServiceName</td><td>Service name to search from  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-21220210-37D0-33D2-A8E2-7C017B95E6A4.html">MPresCacheReadHandler</a> * aHandler</td><td>to handle async. callback  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-4ED37ED7-7232-3BFB-935B-2604FF6CA5B7"><a name="GUID-4ED37ED7-7232-3BFB-935B-2604FF6CA5B7"><!-- --></a>
		<h2 class="topictitle2">BuddyCountInAllServices()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>BuddyCountInAllServices</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns total number of buddies stored in presence cache. It includes all services, probably useful while deciding performance overheads or informing to the user.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-12FE2DA7-5F7B-38A1-B3FF-637680F2757E"><a name="GUID-12FE2DA7-5F7B-38A1-B3FF-637680F2757E"><!-- --></a>
		<h2 class="topictitle2">BuddyCountInService(const TDesC &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>BuddyCountInService</td><td>(</td><td>const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp;</td><td>aServiceName</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns total number of buddies (presence infos) stored in a specific service in presence cache. It includes only the given service.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-440FF2B4-353B-3097-A2BA-5887D10B8B23.html">TDesC</a> &amp; aServiceName</td><td>as in device's service table  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-4EC00203-E8A6-3EDC-B0ED-D7622E3758BF"><a name="GUID-4EC00203-E8A6-3EDC-B0ED-D7622E3758BF"><!-- --></a>
		<h2 class="topictitle2">CancelRead()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>CancelRead</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns all service names present in presence cache.</p>

				<p>Service names are returned here, ownership to caller. Cancels any async. read operation going on. After calling this method no callback will be received from asycn read method.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-546118BE-2B72-3414-8030-AC63C0D2369F"><a name="GUID-546118BE-2B72-3414-8030-AC63C0D2369F"><!-- --></a>
		<h2 class="topictitle2">NewIdentityLC()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> *</td><td>NewIdentityLC</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Instantiates new identity object.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>KErrNoMemory if failed to allocate memory. </dd>

						
					</dl>

				</div>

			</div></div>

	</div>
<div class="nested1" id="GUID-159D4F04-617C-31CA-91BC-7682A041E7E9"><a name="GUID-159D4F04-617C-31CA-91BC-7682A041E7E9"><!-- --></a>
		<h2 class="topictitle2">NewL()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-684D5764-7BD5-3181-93E6-99D6F2491E58.html">MPresenceCacheReader</a> *</td><td>NewL</td><td>(</td><td>)</td><td>[static, inline]</td></tr></table><div class="section"><div>
				<p>Factory method to instantiate <a href="GUID-684D5764-7BD5-3181-93E6-99D6F2491E58.html#GUID-684D5764-7BD5-3181-93E6-99D6F2491E58">MPresenceCacheReader</a> through the ECom.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-4C398DA0-9268-3C60-877A-B0E5F2A4F65F"><a name="GUID-4C398DA0-9268-3C60-877A-B0E5F2A4F65F"><!-- --></a>
		<h2 class="topictitle2">PresenceInfoLC(const MXIMPIdentity &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FDB8BEBA-B14D-31F8-B572-BD07742D9F75.html">MPresenceInfo</a> *</td><td>PresenceInfoLC</td><td>(</td><td>const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp;</td><td>aIdentity</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Reads presence info from cache for a given identity, returns immediately.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp; aIdentity</td><td>buddy id, identity must be in xsp id format  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-DDEF12DE-EEFB-3B99-8D5C-A4CB1155E667"><a name="GUID-DDEF12DE-EEFB-3B99-8D5C-A4CB1155E667"><!-- --></a>
		<h2 class="topictitle2">ServicesCount()</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>ServicesCount</td><td>(</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Returns total number services in presence cache.</p>

				<p/>

			</div></div>

	</div>
<div class="nested1" id="GUID-028EB14E-27BB-393C-B081-5F485EF16B3D"><a name="GUID-028EB14E-27BB-393C-B081-5F485EF16B3D"><!-- --></a>
		<h2 class="topictitle2">SetObserverForSubscribedNotifications(MPresCacheReadHandler *)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>SetObserverForSubscribedNotifications</td><td>(</td><td><a href="GUID-21220210-37D0-33D2-A8E2-7C017B95E6A4.html">MPresCacheReadHandler</a> *</td><td>aHandler</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Sets the observer to receive Presence Buddy Change notifications. Observer must be set before using SubscribePresenceBuddyChangeL. If client changes the observer using this method, all the notifications related to existing and new subscriptions will be delivered to the new observer.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-21220210-37D0-33D2-A8E2-7C017B95E6A4.html">MPresCacheReadHandler</a> * aHandler</td><td> </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-13FDE6DD-1825-352A-BE2D-B685A980EECB"><a name="GUID-13FDE6DD-1825-352A-BE2D-B685A980EECB"><!-- --></a>
		<h2 class="topictitle2">SubscribePresenceBuddyChangeL(const MXIMPIdentity &amp;)</h2>
		<table class="signature"><tr><td>
					<a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a>
				</td><td>SubscribePresenceBuddyChangeL</td><td>(</td><td>const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp;</td><td>aIdentity</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Subscribe for given presence buddy's change in presence. An observer must be set before using this method by SetObserverForSubscribedNotifications. Notifcations are delivered through MPresCacheReadHandler's HandlePresenceNotificationL</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>Only in system error cases e.g. if failed to allocate memory. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp; aIdentity</td><td>buddy id, identity must be in xsp id format  </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-D28BEB98-06CD-3A32-9014-A3D5604E5546"><a name="GUID-D28BEB98-06CD-3A32-9014-A3D5604E5546"><!-- --></a>
		<h2 class="topictitle2">UnSubscribePresenceBuddyChangeL(const MXIMPIdentity &amp;)</h2>
		<table class="signature"><tr><td>void</td><td>UnSubscribePresenceBuddyChangeL</td><td>(</td><td>const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp;</td><td>aIdentity</td><td>)</td><td>[pure virtual]</td></tr></table><div class="section"><div>
				<p>Unsubscribe for given presence buddy's change in presence. The request is ignored if invalid.</p>

				<div class="p">
					<dl class="user">
						
							<dt class="dlterm">
								<strong>leave</strong>
							</dt>

							<dd>Only in system error cases e.g. if failed to allocate memory. </dd>

						
					</dl>

				</div>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-B88B4F7A-2C69-37FD-9656-AFACAD568447.html">MXIMPIdentity</a> &amp; aIdentity</td><td>buddy id, identity must be in xsp id format  </td></tr></table></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-DF55FE6D-6E73-3344-9EA6-6BBCDDFE50EA"><a name="GUID-DF55FE6D-6E73-3344-9EA6-6BBCDDFE50EA"><!-- --></a>
		<h2 class="topictitle2">
					TUid
				 iEcomDtorID</h2>
		<table class="signature"><tr><td>
					<a href="GUID-530281E6-29FC-33F2-BC9B-610FBA389444.html">TUid</a>
				</td><td>iEcomDtorID</td><td>[private]</td></tr></table><div class="section"></div>

	</div>

	
	
	
	
	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>