<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="task"/>
<meta name="DC.Title" content="Privacy Request API Tutorial"/>
<meta name="abstract" content="This topic describes how to use the Privacy Request API."/>
<meta name="description" content="This topic describes how to use the Privacy Request API."/>
<meta name="DC.Relation" scheme="URI" content="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-0BF06E5D-BEEF-5E15-894E-FA605FA12E33.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-E1710E40-B8F5-5CF8-B9FE-698869A1770F.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Privacy Request API Tutorial</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2403195 id2403210 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-01C03839-C88B-5FC3-9E0E-686415888B63.html" title="The Network Adaptation collection contains Protocol Module ECOM plug-ins that can be used by the Network Gateway to support location and privacy requests.">Network Adaptation</a> &gt; <a href="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html" title="The Privacy Protocol Module (PPM) is an optional LBS component that allows the LBS subsystem to process privacy requests from the device domestic OS. The privacy request may have been received from the network or from an installed application.">Privacy Protocol Module</a> &gt; </div>
<h1 class="topictitle1">Privacy Request API Tutorial</h1>
<div><p>This topic describes how to use the <samp class="codeph">Privacy
        Request API</samp>. </p>
<div class="p"><p>The reader must be familiar with the Privacy Protocol Module and the Privacy Request API. </p>
 </div>
 <div class="section"><p>When LBS is configured to load the Privacy Protocol Module, it handles only privacy requests and does not calculate position fixes. It is the responsibility of licensee domestic OS components to obtain the device's position. The <a href="GUID-E1710E40-B8F5-5CF8-B9FE-698869A1770F.html" title="The Privacy Request API is an interface through which the LBS subsystem can receive and respond to privacy requests when it is built to include the Privacy Protocol Module.">Privacy Request API</a> provides the means to send privacy requests into the LBS subsystem. </p>
 <p>To use the Network Privacy API a licensee must create a client component that runs in the licensee domestic OS. This component receives privacy and location requests from the network or from an installed application and forwards them to the LBS subsystem via the Privacy Request API. </p>
 <p>The Privacy Request API is only available with the Privacy Protocol Module. The first privacy request sent via the Network Privacy API causes the LBS subsystem components to be started. </p>
 <p>Many of the implementation details of creating a Privacy Request API client are licensee-specific. Generally, the client must: </p>
 <ul><li id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-6F4E4B47-707B-574E-B84D-A56735BA956F"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-6F4E4B47-707B-574E-B84D-A56735BA956F"><!-- --></a><p>Listen for privacy and location requests received from the client. </p>
 </li>
 <li id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-7A907A6B-8A62-50F7-B80D-0CEC892DDE64"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-7A907A6B-8A62-50F7-B80D-0CEC892DDE64"><!-- --></a><p>Use the Privacy Request API to forward privacy requests to the LBS subsystem. </p>
 </li>
 <li id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-37006B7B-FE52-5BCE-A16E-3DC200B0C5F9"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-37006B7B-FE52-5BCE-A16E-3DC200B0C5F9"><!-- --></a><p>Receive responses to privacy requests from the LBS subsystem via the Privacy Request API and return them to the client. </p>
 </li>
 <li id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-BCA372D2-FCF5-542A-BC1D-BE456BA5694E"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-BCA372D2-FCF5-542A-BC1D-BE456BA5694E"><!-- --></a><p>If a privacy request is accepted, forward the subsequent location request to a component in the licensee domestic OS so that a position fix can be obtained. </p>
 </li>
 </ul>
 <p>The steps that follow describe only the interactions of the client with the Privacy Request API. </p>
 </div>
 <a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-70CE3988-65BE-5175-9E49-C83075FDBA99"><!-- --></a><ol id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-70CE3988-65BE-5175-9E49-C83075FDBA99"><li class="stepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-4CF0205F-0392-593F-AE1A-9763D65B5DF4"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-4CF0205F-0392-593F-AE1A-9763D65B5DF4"><!-- --></a><span>Create a Privacy Request API client. </span>  The code example below shows a simple implementation of an <a href="GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A.html"><span class="apiname">MLbsPrivacyRequestObserver</span></a> subclass that uses the Privacy Request API. Such a class could be the basis of an observer class in a licensee client application.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-026AAC28-BE07-5CFB-BAA2-DD346AB8F51C"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-026AAC28-BE07-5CFB-BAA2-DD346AB8F51C"><!-- --></a>
#ifndef CMYPRIVACYREQUESTLISTENER_H_
#define CMYPRIVACYREQUESTLISTENER_H_

#include &lt;lbsprivacyrequest.h&gt;
#include &lt;lbsloccommon.h&gt;

class CMyPrivacyRequestObserver : public MLbsPrivacyRequestObserver
{

public:
    static CMyPrivacyRequestObserver* NewL();
    virtual ~CMyPrivacyRequestObserver();

// From MLbsPrivacyRequestObserver
public:
    void OnPrivacyResponse(TLbsPrivacyRequestId aRequestId, const TLbsPrivacyResponse&amp; aResponse, TInt aError);
    
public:
    void VerifyPrivacyRequest(const TLbsExternalRequestInfo&amp; aInfo);
    void NotifyPrivacyRequest(const TLbsExternalRequestInfo&amp; aInfo);
    void CancelPrivacyRequest(TLbsPrivacyRequestId&amp; aRequestId);
    void TimeoutPrivacyRequest(TLbsPrivacyRequestId&amp; aRequestId);

protected:
CMyPrivacyRequestObserver();

private:
    CLbsPrivacyRequest* iPrivacy;
    TLbsPrivacyRequestId iRequestId; // This demo client just stores a single request ID
    void ConstructL();
};

#endif /*CMYPRIVACYREQUESTLISTENER_H_*/
</pre>
   The code below shows the creation of a <a href="GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47.html"><span class="apiname">CLbsPrivacyRequest</span></a> object in the second phase constructor of the observer. The LBS subsystem is transient when it uses the Privacy Protocol Module. Creating an instance of <samp class="codeph">CMyPrivacyRequestObserver</samp> does not cause the LBS subsystem to be started.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-2FCE526A-8349-5DBB-9BCA-9F6E47D55AF2"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-2FCE526A-8349-5DBB-9BCA-9F6E47D55AF2"><!-- --></a>
CMyPrivacyRequestObserver* CMyPrivacyRequestObserver::NewL()
    {
    CMyPrivacyRequestObserver* listener = 
                  new (ELeave)CMyPrivacyRequestObserver();

    CleanupStack::PushL(listener);
    listener-&gt;ConstructL();
    CleanupStack::Pop(listener);
    return listener;
    }

void CMyPrivacyRequestObserver::ConstructL()
    {
    iPrivacy = CLbsPrivacyRequest::NewL(*this);
    }
</pre>
  </li>
<li class="stepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-B1A1D2EE-267B-5830-9C3F-4DE61073600E"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-B1A1D2EE-267B-5830-9C3F-4DE61073600E"><!-- --></a><span>Write code to send a privacy verification request. </span>  The licensee client receives a privacy verification request from the network or a local application. The privacy request requires user verification. The following describes the steps the licensee client application performs for a privacy verification request:  <a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-87F96DA5-B499-5BB9-8807-CE49953FEC5E"><!-- --></a><ol type="a" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-87F96DA5-B499-5BB9-8807-CE49953FEC5E"><li class="substepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-76014EDA-5867-5AB4-A68A-EC2FB293F0BC"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-76014EDA-5867-5AB4-A68A-EC2FB293F0BC"><!-- --></a><span/><br/> The client creates an instance of class <a href="GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08.html"><span class="apiname">TLbsExternalRequestInfo</span></a> (or <a href="GUID-EB52E7D5-55AE-3539-A212-AB2B5430D407.html"><span class="apiname">TLbsExternalRequestInfo2</span></a>) and populates it with the privacy request data.   For a local privacy request, the client must call <a href="GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08.html#GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08__GUID-A7DF2BBC-B2E9-39CB-B8D0-1A1B9D4018AC"><span class="apiname">TLbsExternalRequestInfo::SetRequestSource()</span></a> with a parameter of <a href="GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08.html#GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08__GUID-4FF586E1-4503-32CC-BF50-414D7F02034C"><span class="apiname">TLbsExternalRequestInfo::ERequestSourceLocal</span></a>. The client must have the capabilities <samp class="codeph">Location</samp> and <samp class="codeph">ReadDeviceData</samp>. For a privacy request from the network, a parameter of <a href="GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08.html#GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08__GUID-9396B026-170A-33B2-80DF-8FFB112EE9EC"><span class="apiname">TLbsExternalRequestInfo::ERequestSourceNetwork</span></a> must be passed. The client must have the capabilities <samp class="codeph">Location</samp>, <samp class="codeph">ReadDeviceData</samp> and <samp class="codeph">NetworkServices</samp>.   The client creates an instance of an object of class <a href="GUID-DA7E60CF-52F9-3ACF-AB12-E647AD980C81.html"><span class="apiname">TLbsPrivacyRequest</span></a> and defines the privacy advice and privacy action. For a privacy verification request, the privacy advice is set to <samp class="codeph">TLbsPrivacyRequest::ERequestAdviceVerify</samp>.  </li>
 <li class="substepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-FE378075-4070-5AA2-B8B3-F8B8775970F4"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-FE378075-4070-5AA2-B8B3-F8B8775970F4"><!-- --></a><span/><br/> The client calls <a href="GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47.html#GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47__GUID-456AB7A5-73D7-36E3-B455-6B9D6B8B598D"><span class="apiname">CLbsPrivacyRequest::NewPrivacyRequest()</span></a>. This method is asynchronous and non-blocking. The client can process multiple privacy requests by calling <samp class="codeph">NewPrivacyRequest()</samp> multiple times. Each request is identified by a unique request ID which is returned by LBS as an output parameter. The LBS subsystem is started if it is not running when a request is made.  </li>
 <li class="substepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-9AFB9D8A-765F-588B-8505-360675062665"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-9AFB9D8A-765F-588B-8505-360675062665"><!-- --></a><span/><br/> When the privacy request is completed, the method <a href="GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A.html#GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A__GUID-14A97B64-59EF-3AE0-B144-3EE66754F610"><span class="apiname">MLbsPrivacyRequestObserver::OnPrivacyResponse()</span></a> is called on the client observer. The licensee client sends the privacy response to the local application or the network (whichever made the privacy request).  </li>
 </ol>
  The following code example demonstrates how to use the Privacy Request API to verify a privacy request.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-84CB99B1-55CA-5BBD-9723-44A28D057383"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-84CB99B1-55CA-5BBD-9723-44A28D057383"><!-- --></a>
// In this example, the TLbsExternalRequestInfo object
// is created by the client application
void CMyPrivacyRequestObserver::VerifyPrivacyRequest(const TLbsExternalRequestInfo&amp; aInfo)
    {
    
    // Example shows how to set the privacy advice to verify the request
    // and set the privacy action to reject if there is no privacy response
    
    TLbsPrivacyRequest privacy;
    privacy.SetRequestAdvice(TLbsPrivacyRequest::ERequestAdviceVerify);
    privacy.SetRequestAction(TLbsPrivacyRequest::ERequestActionReject);
    TInt err = iPrivacy-&gt;NewPrivacyRequest(iRequestId, privacy, aInfo);
    if (err != KErrNone)
        {
        // Error could be KErrArgument if incorrect parameters passed
        // or any other Symbian error code
        }
    }
</pre>
    <a href="GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A.html#GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A__GUID-14A97B64-59EF-3AE0-B144-3EE66754F610"><span class="apiname">MLbsPrivacyRequestObserver::OnPrivacyResponse()</span></a> is called to complete the request.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-453FAE11-5351-5F8E-838B-A9C325C7AB21"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-453FAE11-5351-5F8E-838B-A9C325C7AB21"><!-- --></a>
void CMyPrivacyRequestObserver::OnPrivacyResponse(TLbsPrivacyRequestId aRequestId, const TLbsPrivacyResponse&amp; aResponse, TInt aError)
    {
    // Forward privacy response to client then call CompleteRequest...
    iPrivacy-&gt;CompleteRequest(aRequestId, KErrNone);
    }

</pre>
  </li>
<li class="stepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-5CEAAB5D-DF37-5503-926B-65D5DFD1CB40"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-5CEAAB5D-DF37-5503-926B-65D5DFD1CB40"><!-- --></a><span>Write code to send a privacy notification request. </span>  The licensee client receives a privacy request from the network or a local application. The privacy request does not require verification. The following describes the steps the licensee client application performs for a privacy notification request:  <a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-5A0F5796-5BFC-50F9-B8A0-6F3511050EBA"><!-- --></a><ol type="a" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-5A0F5796-5BFC-50F9-B8A0-6F3511050EBA"><li class="substepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-FAFF077E-9100-58C5-B025-80A31302066A"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-FAFF077E-9100-58C5-B025-80A31302066A"><!-- --></a><span/><br/> The client creates an instance of class <a href="GUID-D6E1F012-8C98-3B10-9601-3F665CFD5F08.html"><span class="apiname">TLbsExternalRequestInfo</span></a> as described for privacy verification in the previous section.   The client creates an instance of an object of class <a href="GUID-DA7E60CF-52F9-3ACF-AB12-E647AD980C81.html"><span class="apiname">TLbsPrivacyRequest</span></a> and defines the privacy advice and privacy action. For a privacy notification request, the privacy advice is set to <samp class="codeph">TLbsPrivacyRequest::ERequestAdviceNotify</samp>.  </li>
 <li class="substepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-F4E6E508-3BE1-5A44-A396-213A1B178664"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-F4E6E508-3BE1-5A44-A396-213A1B178664"><!-- --></a><span/><br/> The client calls <a href="GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47.html#GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47__GUID-456AB7A5-73D7-36E3-B455-6B9D6B8B598D"><span class="apiname">CLbsPrivacyRequest::NewPrivacyRequest()</span></a>. This method is asynchronous and non-blocking. The client can process multiple privacy requests by calling <samp class="codeph">NewPrivacyRequest()</samp> multiple times. Each request is identified by a unique request ID which must be passed as a parameter. The LBS subsystem is started if it is not running when a request is made.  </li>
 </ol>
  The following code example demonstrates how to use the Privacy Request API to notify a privacy request.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-E95AA02F-6D06-5765-9813-9D399E4594DB"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-E95AA02F-6D06-5765-9813-9D399E4594DB"><!-- --></a>
// In this example, the TLbsExternalRequestInfo object
// is created by the client application
void CMyPrivacyRequestObserver::NotifyPrivacyRequest(const TLbsExternalRequestInfo&amp; aInfo)
    {
    
    // Example shows how to set the privacy advice to verify the request
    // and set the privacy action to reject if there is no privacy response
    
    TLbsPrivacyRequest privacy;
    privacy.SetRequestAdvice(TLbsPrivacyRequest::ERequestAdviceNotify);
    privacy.SetRequestAction(TLbsPrivacyRequest::ERequestActionReject);
    TInt err = iPrivacy-&gt;NewPrivacyRequest(iRequestId, privacy, aInfo);
    if (err != KErrNone)
        {
        // Error could be KErrArgument if incorrect parameters passed
        // or any other Symbian error code
        }
    }
</pre>
    <a href="GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A.html#GUID-BD22CA43-FDAF-3809-8172-6403B4D7529A__GUID-14A97B64-59EF-3AE0-B144-3EE66754F610"><span class="apiname">MLbsPrivacyRequestObserver::OnPrivacyResponse()</span></a> is called to complete the request.  </li>
<li class="stepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-DBF06C5A-5974-5A43-A4B7-18211AF527F1"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-DBF06C5A-5974-5A43-A4B7-18211AF527F1"><!-- --></a><span>Write code to cancel a pending privacy verification request. </span>  The code example below shows how a client can cancel an outstanding request by calling <a href="GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47.html#GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47__GUID-65A421D0-4A31-39F2-871A-A7A3C63ACC32"><span class="apiname">CLbsPrivacyRequest::CompleteRequest()</span></a>.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-15C9421E-5CCA-54CE-AFE1-D8C43D2302DD"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-15C9421E-5CCA-54CE-AFE1-D8C43D2302DD"><!-- --></a>
void CMyPrivacyRequestObserver::CancelPrivacyRequest(TLbsPrivacyRequestId&amp; aRequestId)
    {
    iPrivacy-&gt;CompleteRequest(aRequestId, KErrCancel);
    }
</pre>
  </li>
<li class="stepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-6551A2BD-49D6-5867-AD20-BC9E9B929217"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-6551A2BD-49D6-5867-AD20-BC9E9B929217"><!-- --></a><span>Write code to send a timeout notification. </span>  The code example below shows how a request can be timed out. The timeout is sent to the LBS subsystem by calling <a href="GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47.html#GUID-FA2B30DF-81BC-3BCD-9EE6-01A961291D47__GUID-65A421D0-4A31-39F2-871A-A7A3C63ACC32"><span class="apiname">CLbsPrivacyRequest::CompleteRequest()</span></a>.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-0928FEEA-610F-54A6-9937-DA305D654634"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-0928FEEA-610F-54A6-9937-DA305D654634"><!-- --></a>
void CMyPrivacyRequestObserver::TimeoutPrivacyRequest(TLbsPrivacyRequestId&amp; aRequestId)
    {
        iPrivacy-&gt;CompleteRequest(aRequestId, KErrTimedOut);
    }
</pre>
  </li>
<li class="stepexpand" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-79F7D826-E965-5603-A5DD-4FEDDC1F1B61"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-79F7D826-E965-5603-A5DD-4FEDDC1F1B61"><!-- --></a><span>Define client capabilities. </span>  The following is a simple MMP file for the client. The header files for the Privacy Request API are located at <span class="filepath">\epoc32\include\lbs</span> and the client links to <span class="filepath">lbsprivacyrequest.lib</span>. All clients require the capabilities <samp class="codeph">Location</samp> and <samp class="codeph">ReadDeviceData</samp>. Clients that create network privacy requests also require the capability <samp class="codeph">NetworkServices</samp>.   <pre class="codeblock" id="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-250CD303-C15C-55FB-A1A1-E09E0C37180A"><a name="GUID-5008C3E6-4D12-5BA3-A95A-7CAB02ED0594__GUID-250CD303-C15C-55FB-A1A1-E09E0C37180A"><!-- --></a>
TARGET          PrivacyRequestAPI_Example.exe
TARGETTYPE      exe
UID             0 0x12345678

USERINCLUDE     ..\inc
SYSTEMINCLUDE   \epoc32\include \epoc32\include\lbs

SOURCEPATH      ..\src
SOURCE          PrivacyRequestAPI_Example.cpp CMyPrivacyRequestListener.cpp

LIBRARY         euser.lib lbsprivacyrequest.lib

CAPABILITY Location ReadDeviceData NetworkServices</pre>
  </li>
</ol>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-B27F6C1D-6815-5DF5-B3F8-449260030B3D.html" title="The Privacy Protocol Module (PPM) is an optional LBS component that allows the LBS subsystem to process privacy requests from the device domestic OS. The privacy request may have been received from the network or from an installed application.">Privacy Protocol Module</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong><br/>
<div><a href="GUID-0BF06E5D-BEEF-5E15-894E-FA605FA12E33.html" title="The Privacy Protocol Module (PPM) is an optional LBS component that allows the LBS subsystem to process privacy requests from the device domestic OS. The privacy request may have been received from the network or from an installed application.">Privacy
                Protocol Module Overview</a></div>
<div><a href="GUID-E1710E40-B8F5-5CF8-B9FE-698869A1770F.html" title="The Privacy Request API is an interface through which the LBS subsystem can receive and respond to privacy requests when it is built to include the Privacy Protocol Module.">Privacy
                Request API</a></div>
</div>
</div>   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>