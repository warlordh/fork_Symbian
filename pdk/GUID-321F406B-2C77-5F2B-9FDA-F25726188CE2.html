<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Using Symbian SQL Trace Data Guide"/>
<meta name="abstract" content="This document describes how to use Symbian SQL trace data in Symbian platform applications."/>
<meta name="description" content="This document describes how to use Symbian SQL trace data in Symbian platform applications."/>
<meta name="DC.Relation" scheme="URI" content="GUID-481D4689-C4DA-50FB-9529-081EB9BD7901.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-868D5B32-1CC4-506E-9C49-C86428B9A50F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C6D3827F-8F73-593E-A339-B510EEB9771F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-481D4689-C4DA-50FB-9529-081EB9BD7901.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using Symbian SQL Trace Data Guide</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2"><a name="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2859821 id2860178 id2534422 id2534459 id2534556 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-FBCBF8A0-7922-5881-A1C5-5DB41630E75A.html" title="Provides services to enable and support persistence.">Persistent Data Services Guide</a> &gt; <a href="GUID-F8824165-4B33-50D1-9706-BD2438B5A2EE.html" title="The persistent storage collection.">Persistent Storage</a> &gt; <a href="GUID-868D5B32-1CC4-506E-9C49-C86428B9A50F.html" title="The Symbian SQL component.">Symbian SQL</a> &gt; <a href="GUID-C6D3827F-8F73-593E-A339-B510EEB9771F.html">SQL Concept Guides</a> &gt; <a href="GUID-481D4689-C4DA-50FB-9529-081EB9BD7901.html" title="These documents are guides to SQL tracing.">SQL Tracing Guides</a> &gt; </div>
<h1 class="topictitle1">Using
Symbian SQL Trace Data Guide</h1>
<div><p>This document describes how to use Symbian SQL trace data in Symbian
platform applications. </p>

<div class="section" id="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-3A16065A-34CA-4ABD-AAA8-FC92A88B826F"><a name="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-3A16065A-34CA-4ABD-AAA8-FC92A88B826F"><!-- --></a><h2 class="sectiontitle">Analysing Symbian SQL</h2> <p>Debugging and optimising
database applications involves generic techniques which are not specific to
Symbian implementation. This document does not aim to cover them all but illustrates
ways of identifying common programming errors by means of SQL tracing. </p>
 <p><strong>Error traces</strong> </p>
 <p>Error tracing identifies function leaves and
panics in the client and server. These can occur for numerous reasons. One
possible kind of error is <a href="GUID-1BCF6DC7-8419-3399-9890-627048A74F52.html"><span class="apiname">KSqlErrSchema</span></a>, which occurs when
the database schema has been changed between a call to <a href="GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A.html#GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A__GUID-DF9C2258-9BAA-38F0-9B11-21CD00316912"><span class="apiname">RSqlStatement::Prepare()</span></a> and <a href="GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A.html#GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A__GUID-52E3CE72-D495-388F-8829-952E32F0F37D"><span class="apiname">RSqlStatement::Exec()</span></a> or <a href="GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A.html#GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A__GUID-C8BBAAA8-0468-3330-B601-391443C1C410"><span class="apiname">RSqlStatement::Next()</span></a>. </p>
 <p><strong>Function
entry traces</strong> </p>
 <p>A function entry trace generates timestamps indicating
the length of time a function took to return. </p>
 <p>The function entry trace
of <a href="GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A.html#GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A__GUID-52E3CE72-D495-388F-8829-952E32F0F37D"><span class="apiname">RSqlStatement::Exec()</span></a> with an SQL statement as argument
can be used to identify which SQL statements are executing slowly. Statements
can execute slowly for a great many reasons and tracing will not tell you
why. A well known example is the inefficiency of storing blobs in a database
table instead of storing the blobs elsewhere and their addresses in the database.
The purpose of function entry tracing is to give you the data you need to
identify cases of this kind. </p>
 <p>The performance of <a href="GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A.html#GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A__GUID-DF9C2258-9BAA-38F0-9B11-21CD00316912"><span class="apiname">RSqlStatement::Prepare()</span></a> can
also be impacted by inefficient SQL statements. For instance, in some cases, <a href="GUID-2337F32D-8BC3-33BA-9437-E6505314FF08.html"><span class="apiname">Prepare()</span></a> runs
in time O(N<sup>2</sup>) where N is the number of columns in the table. For
values of N less than 100 the impact is not significant, but for values above
1000 the effect is very noticeable and data tables with a large number of
columns are best avoided. </p>
 <p><strong>Key
event traces</strong> </p>
 <p>Key event traces identify events such as IPC calls,
startup and close of the SQL server, and the number of full event scans performed
by an <a href="GUID-0176BF07-DF94-3259-8F90-DE030E35CE9A.html"><span class="apiname">RSqlStatement</span></a> object. </p>
 <p>Full table scans are
particularly important as they are computationally costly and ought to be
avoided. One reason for an unnecessary full table scan is the use of an expression
in a WHERE clause instead of a column name. If you have a table with an integer
primary key called <samp class="codeph">id</samp> there is a big difference in performance
between these SELECT statements: </p>
 <pre class="codeblock" id="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-17F44865-4AEE-5FCC-A199-D9DB83CC394E"><a name="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-17F44865-4AEE-5FCC-A199-D9DB83CC394E"><!-- --></a>SELECT name FROM table WHERE id=?</pre>
 <pre class="codeblock" id="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-F60C0E48-AC75-5603-BA13-A59B54033DEF"><a name="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-F60C0E48-AC75-5603-BA13-A59B54033DEF"><!-- --></a>SELECT name FROM table WHERE id*1=?</pre>
 <p>Although
the two statements are logically identical, the second statement is inefficient
because the use of an expression <samp class="codeph">id*1</samp> disables optimisation
and forces a full table scan for values satisfying it. </p>
 <p>Another reason
for a full table scan is incorrect use of indexes or simply failure to use
them. The purpose of indexes is to search a table rapidly but there are pitfalls
associated with their use. For instance, indexes will only be used if they
contain 30 or fewer columns and they only speed up the evaluation of a WHERE
clause if certain rules are obeyed. </p>
 <p>A full table scan is also triggered
by the use of the operator OR within a WHERE clause. </p>
 </div>

<div class="section" id="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-61A56F50-90B5-4BE0-A618-3B275DB4784C"><a name="GUID-321F406B-2C77-5F2B-9FDA-F25726188CE2__GUID-61A56F50-90B5-4BE0-A618-3B275DB4784C"><!-- --></a><h2 class="sectiontitle">See Also</h2> <p><a href="GUID-EC33FF66-F15E-5316-8828-C6CFD57DB9E5.html" title="This document discusses how to enable Symbian SQL tracing">Symbian
SQL Tracing Guide</a>  </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-481D4689-C4DA-50FB-9529-081EB9BD7901.html" title="These documents are guides to SQL tracing.">SQL Tracing Guides</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>