<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Integrated GPS Hardware Status API"/>
<meta name="DC.Relation" scheme="URI" content="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Integrated GPS Hardware Status API</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2402590 id2402946 id2402960 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-7F476137-5E7F-5288-9F4A-6C20F0A1AD9B.html">Location Based Services (LBS) Guide</a> &gt; <a href="GUID-55F5F029-6A00-5894-8892-90836DE4BA40.html" title="The Location Management collection contains components to manage location requests and to interface with a network. It also contains several common core LBS libraries that are used by many components of the LBS subsystem.">Location Management</a> &gt; <a href="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html" title="Location Admin is an LBS component that contains several common LBS libraries grouped for convenience in a single system component.">Location Admin</a> &gt; </div>
<h1 class="topictitle1"> Integrated
GPS Hardware Status API</h1>
<div>
<p>The Integrated GPS Hardware Status API allows a GPS hardware controller
to publish notification of changes to GPS hardware status and to allow observers
to receive notification that GPS hardware status has changed. </p>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-95DC83F8-BACE-4268-857F-9FAB42C99C13"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-95DC83F8-BACE-4268-857F-9FAB42C99C13"><!-- --></a><h2 class="sectiontitle">Contents</h2> <ul>
<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-7E469640-A285-5E2D-BBD6-C261936E6A84"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-7E469640-A285-5E2D-BBD6-C261936E6A84"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-4D88709A-5F9F-5AA5-9081-2796A5BFD71E">Purpose</a>  </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-7EDF85A9-C39D-58AE-AA12-58564D609A1B"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-7EDF85A9-C39D-58AE-AA12-58564D609A1B"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-00B9D8F1-DABA-5029-9620-37E09B997436">API description</a>  </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-61896A18-C1BF-5697-8A49-3FC1C8F126D7"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-61896A18-C1BF-5697-8A49-3FC1C8F126D7"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-A2F5269C-9573-5C21-93F8-31C1C4487F80">API summary</a>  </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-C3C3FFCE-3296-5CC8-9EB6-91F0F00C0CE4"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-C3C3FFCE-3296-5CC8-9EB6-91F0F00C0CE4"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-B95BC247-11CC-53E0-97CA-2473DBDEA849">Using the API</a>  </p>
 <ul>
<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-318B9FB4-5C46-55E6-A7A6-462C895B657D"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-318B9FB4-5C46-55E6-A7A6-462C895B657D"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-9B341963-90EB-59DF-BFC9-3AC78FD88615">Publishing the current status of integrated GPS hardware</a>  </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-BF8C0C39-BAB0-575D-AFA2-DD254036BB63"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-BF8C0C39-BAB0-575D-AFA2-DD254036BB63"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-290A8675-E971-5CF8-A698-C86EDF2734B7">Getting the current status of integrated GPS hardware</a>  </p>
 </li>

</ul>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-8DCBA75A-0E4B-51FA-9BB3-747FE0247A8C"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-8DCBA75A-0E4B-51FA-9BB3-747FE0247A8C"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-563E7E48-434F-552C-A76A-79577F451D93">Memory usage</a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-4D88709A-5F9F-5AA5-9081-2796A5BFD71E"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-4D88709A-5F9F-5AA5-9081-2796A5BFD71E"><!-- --></a><h2 class="sectiontitle">Purpose</h2> <p>This
document describes the Integrated GPS Hardware Status API, which allows API
clients to publish and receive the status of integrated GPS hardware in the
mobile device. </p>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-00B9D8F1-DABA-5029-9620-37E09B997436"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-00B9D8F1-DABA-5029-9620-37E09B997436"><!-- --></a><h2 class="sectiontitle">API description</h2> <p>The
API is used for two purposes: </p>
 <ul>
<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-ADB3C80D-1D81-552C-859B-FED189C2DF67"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-ADB3C80D-1D81-552C-859B-FED189C2DF67"><!-- --></a><p>To publish the current
state of the integrated GPS hardware in the mobile device </p>
 <p>The API
is intended to be used by a component which is involved in the control of
integrated GPS hardware of the terminal. Whenever the status of the hardware
changes (e.g. when the hardware is turned on or off or when the internal state
of the hardware changes) the API client can publish the status information
by using the methods of this API. </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-72C40A33-1159-5221-BA74-3B3D8400C8BB"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-72C40A33-1159-5221-BA74-3B3D8400C8BB"><!-- --></a><p>To receive notification
of changes to the status of the GPS hardware and to get the new status </p>
 <p>A
component that needs to be updated of changes to the status of the GPS hardware
can use the API to subscribe for hardware status change events. Such components
are typically UI indicators, such as a GPS status icon in a UI status bar. </p>
 </li>

</ul>
 <p> </p>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-A2F5269C-9573-5C21-93F8-31C1C4487F80"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-A2F5269C-9573-5C21-93F8-31C1C4487F80"><!-- --></a><h2 class="sectiontitle">API summary</h2> <p>The
API consists of the classes shown in the following diagram: </p>
 <div class="fignone" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-E1F75907-DD6D-5290-BE96-116A05AB5155"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-E1F75907-DD6D-5290-BE96-116A05AB5155"><!-- --></a><span class="figcap">Figure 1.               Integrated GPS HW Status API class diagram          
 </span>

<img src="GUID-B2539DB1-FA06-5900-A859-547D3381E361_d0e451622_href.png"/>
</div>
 <p>The classes of the Integrated GPS Hardware Status API are defined
in the file <span class="filepath">epos_intgpshwstatus.h</span> and are summarised
in table 1. </p>
 
<div class="tablenoborder"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-73F1A811-8B76-5B0C-9C21-A52A21EF80B8"><!-- --></a><table cellpadding="4" cellspacing="0" summary="" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-73F1A811-8B76-5B0C-9C21-A52A21EF80B8" frame="border" border="1" rules="all">
<thead align="left">
<tr>
<th class="cellrowborder" valign="top" id="d2118638e150">Class Name</th>

<th class="cellrowborder" valign="top" id="d2118638e153">Description</th>

</tr>

</thead>

<tbody>
<tr>
<td class="cellrowborder" valign="top" headers="d2118638e150 "><p> <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html"><span class="apiname">CPosIntGpsHwStatus</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2118638e153 "><p>This class provides the method <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html#GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312__GUID-29523EBA-8E8C-3C71-AD1D-F2F9C6006B3D"><span class="apiname">CPosIntGpsHwStatus::SetStatusL()</span></a> for
publishing the status of GPS hardware. It also provides the method <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html#GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312__GUID-8D3F9A56-3BCD-32F3-B9CF-252FE6EC0A19"><span class="apiname">CPosIntGpsHwStatus::GetStatusL()</span></a> to
get the current status of GPS hardware. </p>
 <p>It defines NewL() and NewLC()
methods that <a href="GUID-A8A11194-74F6-38C6-AC5F-54678642CFDC.html"><span class="apiname">MPosIntGpsHwStatusObserver</span></a> clients can used
to register themselves for notification of GPS hardware status changes. </p>
 <p>This
class also defines enumeration <samp class="codeph">CPosIntGpsHwStatus::TIntGpsHwState</samp> that
defines the range of valid GPS hardware states that can be published. </p>
 </td>

</tr>

<tr>
<td class="cellrowborder" valign="top" headers="d2118638e150 "><p> <a href="GUID-A8A11194-74F6-38C6-AC5F-54678642CFDC.html"><span class="apiname">MPosIntGpsHwStatusObserver</span></a>  </p>
 </td>

<td class="cellrowborder" valign="top" headers="d2118638e153 "><p>This class allows a client to register itself for notifications
of GPS hardware status changes. The class defines the method <a href="GUID-A8A11194-74F6-38C6-AC5F-54678642CFDC.html#GUID-A8A11194-74F6-38C6-AC5F-54678642CFDC__GUID-AF8EF2F7-4158-357E-B050-F662E1438DF1"><span class="apiname">MPosIntGpsHwStatusObserver::OnStatusUpdateEvent()</span></a> that
updates the client with GPS hardware status changes. </p>
 </td>

</tr>

</tbody>

</table>
</div>
 <p> <em>Table 1. Classes of the GPS Hardware Status API.</em>  </p>
 <p>API
classes are packaged in the library <span class="filepath">eposindicator.dll</span>.
Clients link with <span class="filepath">eposindicator.lib</span>. </p>
 <p>Clients
require the capability <samp class="codeph">WriteDeviceData</samp> to call <samp class="codeph">CPosIntGpsHwStatus::NewL()</samp> (the
version that does not take a <samp class="codeph">MPosIntGpsHwStatusObserver</samp> argument)
and <samp class="codeph">CPosIntGpsHwStatus::SetStatusL()</samp>. </p>
 <p>Clients do
not require any capabilities to call <samp class="codeph">CPosIntGpsHwStatus::NewL(MPosIntGpsHwStatusObserver&amp;
          aObserver)</samp> or <samp class="codeph">CPosIntGpsHwStatus::GetStatusL()</samp>. </p>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-B95BC247-11CC-53E0-97CA-2473DBDEA849"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-B95BC247-11CC-53E0-97CA-2473DBDEA849"><!-- --></a><h2 class="sectiontitle">Using the API</h2> <p>This
API supports two use cases: </p>
 <ul>
<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-FD7219A4-869E-51AD-9B37-D77BB2554401"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-FD7219A4-869E-51AD-9B37-D77BB2554401"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-9B341963-90EB-59DF-BFC9-3AC78FD88615">Publishing the current status of integrated GPS hardware</a>  </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-36BCE102-6DCE-5CAB-84EB-E9ADED1EB745"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-36BCE102-6DCE-5CAB-84EB-E9ADED1EB745"><!-- --></a><p><a href="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1.html#GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-290A8675-E971-5CF8-A698-C86EDF2734B7">Getting the current status of integrated GPS hardware</a>  </p>
 </li>

</ul>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-9B341963-90EB-59DF-BFC9-3AC78FD88615"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-9B341963-90EB-59DF-BFC9-3AC78FD88615"><!-- --></a><h2 class="sectiontitle">Publishing
the current status of integrated GPS hardware</h2> <p>In order to publish
GPS hardware status a client has to create a <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html"><span class="apiname">CPosIntGpsHwStatus</span></a> object
by using one of the static constructors, <samp class="codeph">NewL()</samp> or <samp class="codeph">NewLC()</samp> (the
versions that do not take an argument). A client must have capability <samp class="codeph">WriteDeviceData</samp> to
call the constructors. A client can publish the status of the GPS hardware
as many times as needed using the same object instance. </p>
 <p>A client destroys
the instance of when it is no longer going to publish the status of the GPS
hardware. The GPS hardware status setting is persistent and retains its value
until it is changed again or the phone reboots. </p>
 <p>Publishing the hardware
status is performed by calling <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html#GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312__GUID-29523EBA-8E8C-3C71-AD1D-F2F9C6006B3D"><span class="apiname">CPosIntGpsHwStatus::SetStatusL()</span></a>.
A client must have <samp class="codeph">WriteDeviceData</samp> capability to use this
method. Possible state values are defined by <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html#GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312__GUID-036AF204-A29D-32B2-9B7A-F24A391FC041"><span class="apiname">CPosIntGpsHwStatus::TIntGpsHwState</span></a>. </p>
 <p>The
following diagram shows a simple sequence for publishing the status of the
GPS hardware. </p>
 <div class="fignone" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-D7C3C331-024C-5C97-8B1E-4952CC18B43A"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-D7C3C331-024C-5C97-8B1E-4952CC18B43A"><!-- --></a><span class="figcap">Figure 2.               Simple sequence showing publishing the status of GPS
hardware.            </span>

<img src="GUID-9BDD42FD-9D05-58D1-896B-AF6E8E5B51FE_d0e451823_href.png"/>
</div>
 <p>Below is a code example that demonstrates how to publish the GPS
hardware status. The example class <samp class="codeph">CMyGpsStatusController</samp> class
publishes the GPS hardware status. When it is instantiated, it creates a new <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html"><span class="apiname">CPosIntGpsHwStatus</span></a> object
and keeps a pointer to it as a member variable. <samp class="codeph">CMyGpsStatusController</samp> deletes
its <samp class="codeph">CPosIntGpsHwStatus</samp> object when it is destroyed. </p>
 <p>The
main responsibility of the example class is mapping from internal numeric
IDs of GPS hardware states used by the parent component into the <a href="GUID-832B7CAF-55A8-3E0A-82EB-3A7ECBD3082A.html#GUID-832B7CAF-55A8-3E0A-82EB-3A7ECBD3082A__GUID-C5AC92C7-5AC2-32A9-A3DD-5E1777C6B560"><span class="apiname">PosIntGpsHwStatus::TIntGpsHwStatus</span></a> state
values defined by this API. </p>
 <p>The method <samp class="codeph">HandleNewGpsStateL()</samp> is
intended to be called by other parts of the component whenever the GPS hardware
status changes (details of this are specific to hardware implementations and
so are not shown). The example class publishes the new GPS status by calling <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html#GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312__GUID-29523EBA-8E8C-3C71-AD1D-F2F9C6006B3D"><span class="apiname">CPosIntGpsHwStatus::SetStatusL()</span></a>. </p>
 <pre class="codeblock" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-02ED509F-A80F-5E9D-A878-91414808403A"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-02ED509F-A80F-5E9D-A878-91414808403A"><!-- --></a>#include &lt;epos_intgpshwstatus.h&gt;

class CMyGpsStatusController : public CBase
  {
  public:
    /* Static constructor. */
    static CMyGpsStatusController* NewL();

    ~CMyGpsStatusController();

    /* Publishes current status of the GPS HW */
    void HandleNewGpsStateL( TInt aStateId );

  private:
    /* Pointer to Integrated GPS HW Status API */
    CPosIntGpsHwStatus* iStatus;
  };
  

CMyGpsStatusController* CMyGpsStatusController::NewL()
  {
  CMyGpsStatusController* self = new (ELeave) CMyGpsStatusController;
  CleanupStack::PushL( self );

  // create own instance of status interface
  self-&gt;iStatus = CPosIntGpsHwStatus::NewL();

  CleanupStack::Pop( self );
  return self;
  }

CMyGpsStatusController::~CMyGpsStatusController()
  {
  delete iStatus; //delete instance
  }

/* Publishes current status of the GPS HW */
void CMyGpsStatusController::HandleNewGpsStateL( TInt aStateId )
  {
  // Map internal numeric HW state IDs to statuses defined
  // in Integrated GPS HW Status API. (example) 
  switch ( aStateId )
    {
    case 0:
      iStatus-&gt;SetStatusL( CPosIntGpsHwStatus::EStatusOff );
      break;
    case 1: // all these states are internal
    case 2: // and for upper levels can be
    case 3: // simplified just as ON state
      iStatus-&gt;SetStatusL( CPosIntGpsHwStatus::EStatusOn );
      break;
    case 4:
      iStatus-&gt;SetStatusL( CPosIntGpsHwStatus::EStatusActive );
      break;
    default:
      iStatus-&gt;SetStatusL( CPosIntGpsHwStatus::EStatusUnknown );
      break;
    }
  }

</pre>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-290A8675-E971-5CF8-A698-C86EDF2734B7"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-290A8675-E971-5CF8-A698-C86EDF2734B7"><!-- --></a><h2 class="sectiontitle">Getting the
current status of integrated GPS hardware</h2> <p>There are two ways that
a client can use the API to get the GPS hardware status: </p>
 <ul>
<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-3D68CD24-D298-5FEC-971B-218CA8EEBFF0"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-3D68CD24-D298-5FEC-971B-218CA8EEBFF0"><!-- --></a><p>A client registers for
notifications for GPS hardware status updates by creating an instance of <samp class="codeph">CPosIntGpsHwStatus</samp> by
calling <samp class="codeph">CPosIntGpsHwStatus::NewL(MPosIntGpsHwStatusObserver&amp; 
               aObserver)</samp>. The client must pass a reference to <a href="GUID-A8A11194-74F6-38C6-AC5F-54678642CFDC.html"><span class="apiname">MPosIntGpsHwStatusObserver</span></a> in <samp class="codeph">NewL()</samp>.
No platform security capabilities are required. </p>
 </li>

<li id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-9A0A8B17-1D4F-54A8-845D-30A65A5A215E"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-9A0A8B17-1D4F-54A8-845D-30A65A5A215E"><!-- --></a><p>A client gets the current
GPS status at any time by calling <a href="GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312.html#GUID-1D92654B-E7FA-37FE-AC8F-2CCC0B118312__GUID-8D3F9A56-3BCD-32F3-B9CF-252FE6EC0A19"><span class="apiname">CPosIntGpsHwStatus::GetStatusL()</span></a>.
No platform security capabilities are required. </p>
 </li>

</ul>
 <p>The following diagram shows a simple sequence for getting GPS hardware
status events. </p>
 <div class="fignone" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-4E45C675-E943-52B7-9367-62A8B193E50E"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-4E45C675-E943-52B7-9367-62A8B193E50E"><!-- --></a><span class="figcap">Figure 3.               Getting GPS hardware status changes            </span>

<img src="GUID-6EB98EE9-AEB9-59C1-A1D8-FFD2E96707F2_d0e451908_href.png"/>
</div>
 <p>Below is a code example that shows how a client gets updates of
GPS hardware status changes </p>
 <pre class="codeblock" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-F10F4697-BEC5-502C-9822-E7AB9243B77E"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-F10F4697-BEC5-502C-9822-E7AB9243B77E"><!-- --></a>#include &lt;epos_intgpshwstatus.h&gt;

class CMyGpsStatusObserver : public MPosIntGpsHwStatusObserver
  {
  public:
    /* Static constructor. */
    static CMyGpsStatusObserver* NewL();

    ~CMyGpsStatusObserver();

    /* Implement MPosIntGpsHwStatusObserver method */
    void OnStatusUpdateEvent(CPosIntGpsHwStatus::TIntGpsHwStatus aStatus, TInt aError);

  private:
    /* Pointer to Integrated GPS HW Status API */
    CPosIntGpsHwStatus* iStatus;
  };
  

CMyGpsStatusObserver* CMyGpsStatusObserver::NewL()
  {
  CMyGpsStatusObserver* self = new (ELeave) CMyGpsStatusObserver;
  CleanupStack::PushL(self);

  // create own instance of GPS HW status interface
  self-&gt;iStatus = CPosIntGpsHwStatus::NewL(*self);

  CleanupStack::Pop( self );
  return self;
  }

CMyGpsStatusObserver::~CMyGpsStatusObserver()
  {
  delete iStatus; //delete instance
  }

void CMyGpsStatusObserver::OnStatusUpdateEvent(CPosIntGpsHwStatus::TIntGpsHwStatus aStatus, TInt aError)
{
    if (aError != KErrNone)
        {
        // Handle error
        }
    else
        {
            switch (aStatus)
            {
            case CPosIntGpsHwStatus::EStatusOff :
            // GPS is off
            break;
    
            case CPosIntGpsHwStatus::EStatusOn :
            // GPS is powered
            break;
            
            case CPosIntGpsHwStatus::EStatusActive :
            // GPS is on and obtaining a position fix
            break;
            }
        }
}
</pre>
 </div>

<div class="section" id="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-563E7E48-434F-552C-A76A-79577F451D93"><a name="GUID-EB914A6D-9B61-5789-9546-8E466A0988D1__GUID-563E7E48-434F-552C-A76A-79577F451D93"><!-- --></a><h2 class="sectiontitle">Memory usage</h2> <p>Memory
used by this API is only the size of its classes on the heap. This is about
100 bytes. The first client of this API will cause P&amp;S key created in
the OS and will exist until phone reboots. This adds to the memory usage,
but any other client will use the same key, so no further increase in OS memory
usage, even if several instances of the class <samp class="codeph">CPosIntGpsHwStatus</samp> are
created. </p>
 </div>

</div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-45980E0C-4DA4-5AC1-8721-490442DA7F3C.html" title="Location Admin is an LBS component that contains several common LBS libraries grouped for convenience in a single system component.">Location Admin</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>