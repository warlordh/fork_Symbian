<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="cxxClass"/>
<meta name="DC.Title" content="MeshMachine::AContextStore"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC"/>

<title>MeshMachine::AContextStore</title>

<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->
<meta name="keywords" content="api"/><link rel="stylesheet" type="text/css" href="cxxref.css"/></head>
<body class="cxxref" id="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC"><a name="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2437088 id2437096 id2578593 id2611716 id2612216 id2612221 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">
<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt;</div>
<h1 class="topictitle1">MeshMachine::AContextStore Class Reference</h1>
	<table class="signature"><tr><td>class MeshMachine::AContextStore</td></tr></table><div class="section"><div>
			<p>If an activity has a transition or fork that is blocked by a mutex, the context must be stored so that when the transition or fork is unblocked it would be able to continue with the context that it had before it was blocked. If this aggregate wasn't used in the previous scenario, the context of the event that triggered the unblocking would be used, and this may have the wrong message, or event originator set.</p>

			<p>Error recovery is another scenario this class is useful in. </p>

		</div></div>
<div class="section member-index"><table border="0" class="member-index"><thead><tr><th colspan="2">Public Member Functions</th></tr></thead><tbody><tr><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td><a href="#GUID-B857DAD9-4799-3150-B5A9-5F4B41F7A816">IsStored</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C void</td><td><a href="#GUID-9BC7C2EB-79DC-34A0-83FE-7C82B8F38169">Retry</a>(<a href="GUID-CE7C9B2A-4957-3846-8B9C-439B2B6E0767.html">CNodeActivityBase</a> &amp;, <a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> &amp;)</td></tr><tr><td align="right" class="code">IMPORT_C const <a href="GUID-783A1F42-651A-3232-BCDE-10874BA29D8D.html">Messages::TNodeSignal::TMessageId</a> &amp;</td><td><a href="#GUID-5255966C-27B9-3F76-B9E5-3EFC13364ED6">RetryingForMessageId</a>()</td></tr><tr class="bg"><td align="right" class="code">IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-112BC034-76A5-335F-A9DB-D42E710094D9">StoreContext</a>(const <a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Protected Member Functions</th></tr></thead><tbody><tr><td align="right" class="code"/><td><a href="#GUID-69AF9977-E567-3C4A-AFD3-7A0B507ADD0F">AContextStore</a>()</td></tr><tr class="bg"><td align="right" class="code"/><td><a href="#GUID-31DBF2C8-6B51-3006-9FB3-12D39FE70D0F">~AContextStore</a>()</td></tr><tr><td align="right" class="code">IMPORT_C <a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> *</td><td><a href="#GUID-6CAE8C1E-AB7B-38B2-B2F9-B385E9158E93">LoadContext</a>(<a href="GUID-049043F7-9B8B-3569-B894-DB6EA2F132FD.html">AMMNodeBase</a> &amp;, <a href="GUID-CE7C9B2A-4957-3846-8B9C-439B2B6E0767.html">CNodeActivityBase</a> *, <a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;, <a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;, const <a href="GUID-D3D29CDF-78B3-3527-B2F0-C9951A43A7B5.html">Messages::TNodeId</a> &amp;)</td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Public Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td><a href="#GUID-7A4D197F-354C-3137-A71C-BB8776478D76">KInterfaceId</a></td></tr></tbody></table><table border="0" class="member-index"><thead><tr><th colspan="2">Protected Attributes</th></tr></thead><tbody><tr><td align="right" valign="top">
					<a href="GUID-955061A8-A83E-39E5-8745-8FAC7DEA7BCC.html">RBuf8</a>
				</td><td><a href="#GUID-FF090AC4-46A0-3DE7-ADF9-6935A19398C5">iContextDesc</a></td></tr><tr class="bg"><td align="right" valign="top">
					<a href="GUID-783A1F42-651A-3232-BCDE-10874BA29D8D.html">Messages::TNodeSignal::TMessageId</a>
				</td><td><a href="#GUID-D3385527-8149-34D5-BB9B-283F29F498C2">iRetryingForMessageId</a></td></tr></tbody></table></div><h1 class="pageHeading topictitle1">Constructor &amp; Destructor Documentation</h1><div class="nested1" id="GUID-69AF9977-E567-3C4A-AFD3-7A0B507ADD0F"><a name="GUID-69AF9977-E567-3C4A-AFD3-7A0B507ADD0F"><!-- --></a>
		<h2 class="topictitle2">AContextStore()</h2>
		<table class="signature"><tr><td>AContextStore</td><td>(</td><td>)</td><td>[protected, inline, explicit]</td></tr></table><div class="section"><div>
				<p>Constructor for <a href="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC.html#GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC">AContextStore</a> </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-31DBF2C8-6B51-3006-9FB3-12D39FE70D0F"><a name="GUID-31DBF2C8-6B51-3006-9FB3-12D39FE70D0F"><!-- --></a>
		<h2 class="topictitle2">~AContextStore()</h2>
		<table class="signature"><tr><td>~AContextStore</td><td>(</td><td>)</td><td>[protected, inline]</td></tr></table><div class="section"><div>
				<p>Destructor for <a href="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC.html#GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC">AContextStore</a> </p>

			</div></div>

	</div>
<h1 class="pageHeading topictitle1">Member Functions Documentation</h1><div class="nested1" id="GUID-B857DAD9-4799-3150-B5A9-5F4B41F7A816"><a name="GUID-B857DAD9-4799-3150-B5A9-5F4B41F7A816"><!-- --></a>
		<h2 class="topictitle2">IsStored()</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TBool</a></td><td>IsStored</td><td>(</td><td>)</td><td>const </td></tr></table><div class="section"><div>
				<p>Check of the context is stored. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-6CAE8C1E-AB7B-38B2-B2F9-B385E9158E93"><a name="GUID-6CAE8C1E-AB7B-38B2-B2F9-B385E9158E93"><!-- --></a>
		<h2 class="topictitle2">LoadContext(AMMNodeBase &amp;, CNodeActivityBase *, TDes8 &amp;, TDes8 &amp;, const Messages::TNodeId &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> *</td><td>LoadContext</td><td>(</td><td><a href="GUID-049043F7-9B8B-3569-B894-DB6EA2F132FD.html">AMMNodeBase</a> &amp;</td><td>aNode,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-CE7C9B2A-4957-3846-8B9C-439B2B6E0767.html">CNodeActivityBase</a> *</td><td>aNodeActivity,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;</td><td>aCtxBuff,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp;</td><td>aMsgBuff,</td></tr><tr><td colspan="3"> </td><td>const <a href="GUID-D3D29CDF-78B3-3527-B2F0-C9951A43A7B5.html">Messages::TNodeId</a> &amp;</td><td>aDummy</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2">[protected]</td></tr></table><div class="section"><div>
				<p>Load a stored context. Once the stored context has been loaded the status of <tt>iContextDesc</tt> is undefined and load shouldn't be called again until something has been stored.</p>

				<p>The pointer returned uses memory allocated in the <tt>aCtxBuff</tt> that is passed in, and as such, does not need to be freed. However <tt>aCtxBuff</tt> and <tt>aMsgBuff</tt> must be cleaned up after use.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-049043F7-9B8B-3569-B894-DB6EA2F132FD.html">AMMNodeBase</a> &amp; aNode</td><td>The node for the context  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-CE7C9B2A-4957-3846-8B9C-439B2B6E0767.html">CNodeActivityBase</a> * aNodeActivity</td><td>The activity for the context.  </td></tr><tr><td class="parameter"><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp; aCtxBuff</td><td>A memory buffer in which the context will be created.  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-445B19E5-E2EE-32E2-8D6C-C7D6A9B3C507.html">TDes8</a> &amp; aMsgBuff</td><td>A memory buffer in which the message will be created.  </td></tr><tr><td class="parameter">const <a href="GUID-D3D29CDF-78B3-3527-B2F0-C9951A43A7B5.html">Messages::TNodeId</a> &amp; aDummy</td><td>Will become the recipient node id in the context. </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-9BC7C2EB-79DC-34A0-83FE-7C82B8F38169"><a name="GUID-9BC7C2EB-79DC-34A0-83FE-7C82B8F38169"><!-- --></a>
		<h2 class="topictitle2">Retry(CNodeActivityBase &amp;, TNodeContextBase &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C void</td><td>Retry</td><td>(</td><td><a href="GUID-CE7C9B2A-4957-3846-8B9C-439B2B6E0767.html">CNodeActivityBase</a> &amp;</td><td>aActivity,</td></tr><tr><td colspan="3"> </td><td><a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> &amp;</td><td>aContext</td></tr><tr><td colspan="2"> </td><td>)</td><td colspan="2"/></tr></table><div class="section"><div>
				<p>Used for error recovery. If the context is stored, loads the stored context and reruns the last transition that was run.</p>

				<p>
					<a href="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC.html#GUID-112BC034-76A5-335F-A9DB-D42E710094D9">StoreContext</a> <a href="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC.html#GUID-6CAE8C1E-AB7B-38B2-B2F9-B385E9158E93">LoadContext</a> </p>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter"><a href="GUID-CE7C9B2A-4957-3846-8B9C-439B2B6E0767.html">CNodeActivityBase</a> &amp; aActivity</td><td>The activity to retry  </td></tr><tr class="bg"><td class="parameter"><a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> &amp; aContext</td><td>The context within which the retrying is taking place. NOTE: This is not the stored context </td></tr></table></div>

	</div>
<div class="nested1" id="GUID-5255966C-27B9-3F76-B9E5-3EFC13364ED6"><a name="GUID-5255966C-27B9-3F76-B9E5-3EFC13364ED6"><!-- --></a>
		<h2 class="topictitle2">RetryingForMessageId()</h2>
		<table class="signature"><tr><td>IMPORT_C const <a href="GUID-783A1F42-651A-3232-BCDE-10874BA29D8D.html">Messages::TNodeSignal::TMessageId</a> &amp;</td><td>RetryingForMessageId</td><td>(</td><td>)</td><td>const </td></tr></table><div class="section"><div>
				<p>Get the id of the message which requested <tt><a href="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC.html#GUID-9BC7C2EB-79DC-34A0-83FE-7C82B8F38169">Retry()</a></tt> <a href="GUID-0A63B36E-1CB6-32C7-A6CD-67B42076DAEC.html#GUID-9BC7C2EB-79DC-34A0-83FE-7C82B8F38169">AContextStore::Retry</a> </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-112BC034-76A5-335F-A9DB-D42E710094D9"><a name="GUID-112BC034-76A5-335F-A9DB-D42E710094D9"><!-- --></a>
		<h2 class="topictitle2">StoreContext(const TNodeContextBase &amp;)</h2>
		<table class="signature"><tr><td>IMPORT_C <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>StoreContext</td><td>(</td><td>const <a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> &amp;</td><td>aContext</td><td>)</td><td/></tr></table><div class="section"><div>
				<p>Store context in buffer. Designed to be called from a transition to store the transitions context for error recovery or to wait on a mutex.</p>

				<p/>

			</div></div>
<div class="section parameters"><h3 class="sectiontitle">Parameters</h3><table border="0" class="parameters"><tr><td class="parameter">const <a href="GUID-064A0393-5D68-33F9-8B06-B83533855616.html">TNodeContextBase</a> &amp; aContext</td><td>The context to store  </td></tr></table></div>

	</div>
<h1 class="pageHeading topictitle1">Member Data Documentation</h1><div class="nested1" id="GUID-7A4D197F-354C-3137-A71C-BB8776478D76"><a name="GUID-7A4D197F-354C-3137-A71C-BB8776478D76"><!-- --></a>
		<h2 class="topictitle2">const TInt KInterfaceId</h2>
		<table class="signature"><tr><td>const <a href="GUID-FC2F2B93-3D18-3BCC-9FD6-6BC6B240B667.html">TInt</a></td><td>KInterfaceId</td><td>[static]</td></tr></table><div class="section"><div>
				<p>Interface id </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-FF090AC4-46A0-3DE7-ADF9-6935A19398C5"><a name="GUID-FF090AC4-46A0-3DE7-ADF9-6935A19398C5"><!-- --></a>
		<h2 class="topictitle2">
					RBuf8
				 iContextDesc</h2>
		<table class="signature"><tr><td>
					<a href="GUID-955061A8-A83E-39E5-8745-8FAC7DEA7BCC.html">RBuf8</a>
				</td><td>iContextDesc</td><td>[protected]</td></tr></table><div class="section"><div>
				<p>Buffer to store the context. </p>

			</div></div>

	</div>
<div class="nested1" id="GUID-D3385527-8149-34D5-BB9B-283F29F498C2"><a name="GUID-D3385527-8149-34D5-BB9B-283F29F498C2"><!-- --></a>
		<h2 class="topictitle2">
					Messages::TNodeSignal::TMessageId
				 iRetryingForMessageId</h2>
		<table class="signature"><tr><td>
					<a href="GUID-783A1F42-651A-3232-BCDE-10874BA29D8D.html">Messages::TNodeSignal::TMessageId</a>
				</td><td>iRetryingForMessageId</td><td>[protected]</td></tr></table><div class="section"><div>
				<p>Message id of the message which kicked off the retry attempt </p>

			</div></div>

	</div>

	
	
	
	
	
	
	
	
	
	
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>