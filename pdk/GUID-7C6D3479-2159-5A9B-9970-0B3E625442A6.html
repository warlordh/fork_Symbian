<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2010"/>
<meta name="DC.rights.owner" content="(C) Copyright 2010"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Using Environment Change Notifier"/>
<meta name="DC.Relation" scheme="URI" content="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html"/>
<meta name="DC.Relation" scheme="URI" content="index.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-32E29020-1956-461A-B79A-1492E06049E7.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html"/>
<meta name="DC.Relation" scheme="URI" content="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6"/>
<meta name="DC.Language" content="en"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>Using Environment Change Notifier</title>

     
<link type="text/css" rel="stylesheet" href="css/common.css" media="screen"/>
<link type="text/css" rel="stylesheet" href="css/sdl.css" media="screen"/>

<!--[if IE]>
<link href="css/iefix.css" rel="stylesheet" type="text/css" media="screen" />
<![endif]-->



     <link rel="stylesheet" type="text/css" href="nokiacxxref.css"/></head>
<body id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6"><!-- --></a>


<?php include_once (CURRENT_SKIN_PATH.'/sdl_header.html'); ?>
<div id="sdl_container">
   <div id="leftMenu">  
 <div id="expandcontractdiv">
    <a id="collapseTree" href="javascript:tree.collapseAll()">Collapse all</a>
    <a id="index" href="index.html">Symbian^3 Product Developer Library</a>        
</div>
     <iframe style="border:none" height="800" width="300" src="index-toc.html"></iframe>
<div id="treeDiv1">&#160;</div>
     <script type="text/javascript">
	var currentIconMode = 0; window.name="id2563754 id2381103 id2383459 id2383734 id2383771 id2383844 ";
	YAHOO.util.Event.onDOMReady(buildTree, this,true);
    </script>
     
</div>

<div id="sdl_content">


<div class="breadcrumb"><a href="index.html" title="Symbian^3 Product Developer Library">Symbian^3 Product Developer Library</a> &gt; <a href="GUID-32E29020-1956-461A-B79A-1492E06049E7.html" title="The Symbian Guide describes the architecture and functionality of the platform, and provides guides on using its APIs.">Symbian Guide</a> &gt; <a href="GUID-5072BE46-B1B4-5C3A-BF55-BEA7443E7657.html">Generic OS Services Guide</a> &gt; <a href="GUID-324107D1-6E0B-56DD-BDC0-7296F688A9CF.html">Low Level Libraries and Frameworks</a> &gt; <a href="GUID-D02B5AF1-B1C3-560D-9654-971A5CC1A904.html">Application Utilities</a> &gt; <a href="GUID-C8BD333E-8384-534B-822B-F61B2F7C8B9F.html">Basic Application Framework Library</a> &gt; <a href="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html" title="This section explains the tasks that can performed using Basic Application Framework Library.">Basic Application Framework Library Tutorials</a> &gt; </div>
<h1 class="topictitle1">Using Environment Change Notifier</h1>
<div><p>Environment Change Notifier is provided so that an application can be notified of changes in the environment such as a switch in locale, crossing over past midnight and so on. </p>
 <p>The <samp class="codeph">TChanges</samp> enumerator lists the possible events. This set of events may be extended as the operating system evolves. </p>
 <div class="section"><h2 class="sectiontitle">Introduction</h2> <p>An environment change notifier is an instance of a <samp class="codeph">CEnvironmentChangeNotifier</samp> class. This is an active object which allows an application to respond to change events easily. These change events are generated by a kernel side change notifier service. The <samp class="codeph">CEnvironmentChangeNotifier</samp> class uses the kernel side change notifier service through an <samp class="codeph">RChangeNotifier</samp> handle. </p>
 <p>An application supplies a callback function to <samp class="codeph">CEnvironmentChangeNotifier</samp> when it is constructed. </p>
 <p>When an outstanding request for change events completes, <samp class="codeph">CEnvironmentChangeNotifier</samp> issues another request for change events before calling the callback function (encapsulated in a <a href="GUID-6C5766BC-05DE-32A8-993D-6BB582931F43.html"><span class="apiname">TCallBack</span></a>). </p>
 <p>The implementation of the callback function depends on the application but, typically, it would flag the required changes and schedule other changes either to the application's engine or the application's user interface. </p>
 <p>Programs can use Environment Change Notifier to request for notifications for the following changes: </p>
 <ul><li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-616002CB-557F-5BCB-850A-811856CBDDE9"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-616002CB-557F-5BCB-850A-811856CBDDE9"><!-- --></a><p>change of system locale </p>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-6B8DDABD-3B12-5997-BA5F-D24A26ACFFF4"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-6B8DDABD-3B12-5997-BA5F-D24A26ACFFF4"><!-- --></a><p>system time passes midnight </p>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-252E53D1-CDD4-5CA3-9F38-79E7495D9BEA"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-252E53D1-CDD4-5CA3-9F38-79E7495D9BEA"><!-- --></a><p>system time changes </p>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-DB191A3A-3D2F-57A3-B1BC-320CB6F58F17"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-DB191A3A-3D2F-57A3-B1BC-320CB6F58F17"><!-- --></a><p>any thread dies </p>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-7BE23762-BB35-5D37-A561-B248787F2071"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-7BE23762-BB35-5D37-A561-B248787F2071"><!-- --></a><p>status of the power supply changes </p>
 </li>
 </ul>
 </div>
 <div class="section"><h2 class="sectiontitle">Procedure</h2> <p>To use the Environment Change Notifier, an application must perform the following: </p>
 <a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-A6041480-76EA-59AE-A187-65175B244E65"><!-- --></a><ol id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-A6041480-76EA-59AE-A187-65175B244E65"><li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-6985BDF3-997C-57FF-832E-32731948C240"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-6985BDF3-997C-57FF-832E-32731948C240"><!-- --></a><p>Implement a callback function to handle the environment change. </p>
 <pre class="codeblock" id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-B9BD69A0-B37F-590D-BEF4-88F056C617EC"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-B9BD69A0-B37F-590D-BEF4-88F056C617EC"><!-- --></a> 
TInt CExHandleNotification::ChangeLangSettings()
    {
     //Code for changing the language settings.
    }
</pre>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-498A463D-4CD3-5CEC-85E6-A7087E517BE9"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-498A463D-4CD3-5CEC-85E6-A7087E517BE9"><!-- --></a><p>Construct a <samp class="codeph">CEnvironmentChangeNotifier</samp> object using its <samp class="codeph">NewL()</samp> function, specifying the active object priority and a pointer to the callback function encapsulated in a <samp class="codeph">TCallBack</samp> object. </p>
 <p> <samp class="codeph">NewL()</samp> also adds this <samp class="codeph">CEnvironmentChangeNotifier</samp> active object to the current <span class="keyword">active scheduler</span>. </p>
 <pre class="codeblock" id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-28216515-8F66-5A61-A12D-8E98BCC9E391"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-28216515-8F66-5A61-A12D-8E98BCC9E391"><!-- --></a>
CExHandleNotification::Initialise()
                {
    //Creating a notifier object with ChangeLangSettings as the callback function.
                CEnvironmentChangeNotifier envNotifier = CEnvironmentChangeNotifier::NewL( EActivePriorityDefault,TCallBack(CExHandleNotification::ChangeLangSettings, this) );
                }</pre>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-3E7AA7CA-F7A0-5D63-83A2-6A9DFEF7958A"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-3E7AA7CA-F7A0-5D63-83A2-6A9DFEF7958A"><!-- --></a><p>Issue a request for change events by calling the <samp class="codeph">Start()</samp> member function. </p>
 </li>
 </ol>
 <p>Whenever a request completes, <samp class="codeph">CEnvironmentChangeNotifier</samp> issues another request for change events before the callback function is invoked. </p>
 <p>The first call to the callback function occurs immediately after the first call to <samp class="codeph">Start()</samp>. This is because of the way the underlying change notifier service is implemented; the changes reported are those defined by the <samp class="codeph">TChanges</samp> enum. </p>
 <p>To stop the environment change notifier, an application must: </p>
 <a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-3859F4AA-A656-5486-91C6-BE8F29FF9C0B"><!-- --></a><ol id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-3859F4AA-A656-5486-91C6-BE8F29FF9C0B"><li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-4B8C6E17-B904-5A8D-BB1C-3794664BB6B3"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-4B8C6E17-B904-5A8D-BB1C-3794664BB6B3"><!-- --></a><p>Call <samp class="codeph">CEnvironmentChangeNotifier</samp>'s <samp class="codeph">Cancel()</samp> function. Note that this is a member of the <samp class="codeph">CActive</samp> base class. </p>
 </li>
 <li id="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-11F57FDC-E773-551C-A0A9-79AAE8AC61BD"><a name="GUID-7C6D3479-2159-5A9B-9970-0B3E625442A6__GUID-11F57FDC-E773-551C-A0A9-79AAE8AC61BD"><!-- --></a><p>Delete the <samp class="codeph">CEnvironmentChangeNotifier</samp> object. </p>
 </li>
 </ol>
 </div>
 </div>
<div>
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-85AA0FD4-3BD1-50A7-B241-AE3908ACCF30.html" title="This section explains the tasks that can performed using Basic Application Framework Library.">Basic Application Framework Library Tutorials</a></div>
</div>
</div>
   
<p class="copyright">Copyright &#169;2010 Nokia Corporation and/or its subsidiary(-ies).<br /> All rights
reserved. Unless otherwise stated, these materials are provided under the terms of the <a href=" http://www.eclipse.org/legal/epl-v10.html"> Eclipse Public License
v1.0</a>.</p> 
</div>
</div>
<?php include_once (CURRENT_SKIN_PATH.'/sdl_footer.html'); ?>

</body>
</html>